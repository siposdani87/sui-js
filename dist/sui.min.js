/*

 Copyright 2015 DÃ¡niel Sipos (siposdani87@gmail.com),
 SUI-JS

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 either express or implied. See the License for the specific language
 governing permissions and limitations under the License.
*/
'use strict';var e;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function h(a){if(!(a instanceof Array)){var b='undefined'!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=b?b.call(a):{next:aa(a)};for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function k(a,b){a=a.split('.');for(var c=window,d=a.pop(),f=0;f<a.length;f++)c=c[a[f]]=c[a[f]]||{};c[d]=b}var l=null;
function n(a){var b=a;p(a)&&!q(a,' ')&&(a=a.toLowerCase(),''===a?b='':'undefined'===a?b=void 0:'null'===a?b=null:'true'===a?b=!0:'false'===a?b=!1:'infinity'===a?b=Infinity:r(a)&&(b=-1!==a.indexOf('.')?parseFloat(a):parseInt(a,0)));return b}k('SUI.typeCast',n);function t(a,b){a=u(a);for(var c in b)b.hasOwnProperty(c)&&(a[c]=v(b[c].constructor)?t(a[c],b[c]):b[c]);return a}k('SUI.merge',t);
function w(a,b,c,d){c=void 0===c?'\\{':c;d=void 0===d?'\\}':d;x(void 0===b?null:b,function(f,g){a=a.replace(new RegExp(c+g+d,'gm'),f)});return a}k('SUI.format',w);k('SUI.convert',function(a,b){var c=a;r(a)?c=y(a,b):p(a)&&(c=z(a,b));return c});function y(a,b){var c=a;switch(b){case 'string':c=a.toString()}return c}k('SUI.convertNumber',y);function z(a,b){var c=a;switch(b){case 'integer':c=parseInt(a,10);break;case 'float':c=parseFloat(a)}return c}k('SUI.convertString',z);
k('SUI.defaultValue',function(a,b){return A(a)?b:a});function B(a){return function(){return a}}k('SUI.noop',B);k('SUI.eq',function(a,b){return a===b});k('SUI.neq',function(a,b){return a!==b});k('SUI.gt',function(a,b){return a>b});k('SUI.gte',function(a,b){return a>=b});k('SUI.lt',function(a,b){return a<b});k('SUI.lte',function(a,b){return a<=b});function C(a){return D(a,Array)}k('SUI.isArray',C);function E(a){return F(a,'function')}k('SUI.isFunction',E);function p(a){return F(a,'string')}
k('SUI.isString',p);function r(a){return''!==a&&!isNaN(a)&&(!G(['0','+'],a[0])||'0'===a)}k('SUI.isNumber',r);k('SUI.isFloat',function(a){return parseFloat(a)===a});k('SUI.isInteger',function(a){return parseInt(a,0)===a});function v(a){return F(a,'object')}k('SUI.isObject',v);k('SUI.isNull',function(a){return null===a});function A(a){return F(a,'undefined')}k('SUI.isUndefined',A);k('SUI.isFinite',function(a){return isFinite(a)});function F(a,b){return typeof a===b}k('SUI.is',F);
function D(a,b){return a instanceof b}k('SUI.instanceOf',D);function x(a,b,c,d){C(a)?H(a,b,c,d):v(a)&&I(a,b)}k('SUI.each',x);function H(a,b,c,d){d=d||a.length;for(c=c||0;c<d;c++)b(a[c],c)}k('SUI.eachArray',H);function I(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}k('SUI.eachObject',I);k('SUI.sleepEach',function(a,b,c,d){function f(){a(b);b++;b<c&&setTimeout(f,d)}f()});function J(a){C(a)?K(a):v(a)&&L(a)}k('SUI.clear',J);function K(a){a.splice(0,a.length)}k('SUI.clearArray',K);
function L(a){for(var b in a)a.hasOwnProperty(b)&&delete a[b]}k('SUI.clearObject',L);function G(a,b){return-1!==a.indexOf(b)}k('SUI.inArray',G);function q(a,b){return-1!==a.indexOf(b)}k('SUI.contain',q);function N(a,b){for(var c=0;c<a.length&&!q(b,a[c]);)c++;return c<a.length}k('SUI.inContainArray',N);function O(a,b){var c=JSON.stringify(a),d=JSON.stringify(b);if(v(a)&&v(b)&&c.length===d.length){var f=!0;I(a,function(g,m){O(b[m],g)||(f=!1)});return f}return c===d}k('SUI.isSame',O);
k('SUI.remove',function(a,b){b=a.indexOf(b);-1!==b&&a.splice(b,1)});function u(a){if(C(a))var b=[].concat(a);else v(a)&&(b={},x(a,function(c,d){b[d]=v(c)?u(c):c}));return b}k('SUI.copy',u);function P(a){var b=!1;if(C(a))b=0===a.length;else if(v(a)){var c=0;x(a,function(){c++});b=0===c}return b}k('SUI.isEmpty',P);k('SUI.list',function(a,b){b.apply(null,h(a))});k('SUI.random',function(a,b,c){return(void 0===c?0:c)?Math.random()*(b-a)+a:Math.floor(Math.random()*(b-a+1))+a});
k('SUI.encodeBase64',function(a){a=window.CryptoJS.enc.Utf8.parse(a);return window.CryptoJS.enc.Base64.stringify(a)});k('SUI.decodeBase64',function(a){a=window.CryptoJS.enc.Base64.parse(a);return window.CryptoJS.enc.Utf8.stringify(a)});k('SUI.capitalize',function(a){return a.charAt(0).toUpperCase()+a.slice(1)});k('SUI.pluck',function(a,b){var c=[];x(a,function(d){d=d.get(b);c.push(d)});return c});k('SUI.pluckKeys',function(a,b){var c=[];I(a,function(d,f){b(d)&&c.push(f)});return c});
k('SUI.currency',function(a,b,c,d){b=void 0===b?' ':b;c=void 0===c?',':c;d=void 0===d?0:d;a||(a=0);a=Math10.round(a,-1*d);d=a.toFixed(d).toString().split('.');a=d[1];d=d[0].split('').reverse().map(function(f,g){return g%3||!g?f:f+b}).reverse().join('');a&&(d+=c+a);return d});
k('SUI.number',function(a,b){for(var c=[{value:1E24,h:'Y'},{value:1E21,h:'Z'},{value:1E18,h:'E'},{value:1E15,h:'P'},{value:1E12,h:'T'},{value:1E9,h:'G'},{value:1E6,h:'M'},{value:1E3,h:'k'},{value:0,h:''}],d=/\.0+$|(\.[0-9]*[1-9])0+$/,f=Math10.round(a,b).toString().replace(d,'$1'),g=0;g<c.length&&a<c[g].value;)f=Math10.round(a/(c[g+1].value||1),b).toString().replace(d,'$1')+c[g+1].h,g++;return f});
k('SUI.mdl',function(a,b){b=void 0===b?!0:b;var c=a||document;E(c.o)&&(c=c.node);a?(b&&window.componentHandler.downgradeElements(c),window.componentHandler.upgradeElement(c)):window.componentHandler.upgradeDom()});k('SUI.reactRender',function(a,b,c){return window.ReactDOM.render(window.React.createElement(window[a],b),c.node)});k('SUI.reactUnmount',function(a){window.ReactDOM.unmountComponentAtNode(a.node)});
k('SUI.mapLabel',function(a,b){b=new window.MapLabel({text:b,strokeWeight:2,fontFamily:'sans-serif'});b.bindTo('position',a);b.bindTo('map',a);return b});k('SUI.mapText',function(a,b,c){return new window.MapLabel({text:a,strokeWeight:2,fontFamily:'sans-serif',position:b,map:c})});k('SUI.encrypt',function(a,b){a=JSON.stringify(a);return window.CryptoJS.AES.encrypt(a,b)});k('SUI.decrypt',function(a,b){a=window.CryptoJS.AES.decrypt(a,b).toString(window.CryptoJS.enc.Utf8);return JSON.parse(a||'null')});
k('SUI.md5',function(a){return window.CryptoJS.MD5(a)});k('SUI.generateId',function(a){var b=Q();return[a,b].join('-')});function Q(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}k('SUI.guid',Q);k('SUI.uuid',function(){return[Math.random().toString(16).slice(2,10),Math.random().toString(16).slice(2,6),(.0625*Math.random()+.25).toString(16).slice(2,6),(.25*Math.random()+.5).toString(16).slice(2,6),Math.random().toString(16).slice(2,14)].join('-')});
function R(a,b,c,d){c=void 0===c?500:c;d=void 0===d?20:d;clearInterval(l);var f=-(window.scrollX-a)/(c/d),g=-(window.scrollY-b)/(c/d);l=setInterval(function(){if(0<f&&window.scrollX+f>a||0>f&&window.scrollX+f<a)f=a-window.scrollX;if(0<g&&window.scrollY+g>b||0>g&&window.scrollY+g<b)g=b-window.scrollY;window.scrollX!==a||window.scrollY!==b?window.scrollBy(f,g):clearInterval(l)},d)}k('SUI.scrollTo',R);
k('SUI.scrollToElement',function(a,b,c){b=void 0===b?500:b;c=void 0===c?20:c;a=(new S(a)).getItem().node;R(a.offsetLeft,a.offsetTop,b,c)});k('SUI.debounce',function(a,b,c){b=void 0===b?250:b;c=void 0===c?!1:c;var d;return function(f){for(var g=[],m=0;m<arguments.length;++m)g[m]=arguments[m];m=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(null,h(g))},b);m&&a.apply(null,h(g))}});k('SUI.urlWithQueryString',function(a,b){b=T(b);var c=q(a,'?')?'&':'?';return a+(b?c+b:'')});
function T(a){var b=[];x(a,function(c,d){C(c)?H(c,function(f){b.push(w('{0}[]={1}',[d,f]))}):A(c)||b.push(w('{0}={1}',[d,c]))});return P(b)?'':b.join('&')}k('SUI.getQueryString',T);k('SUI.getExtensionName',function(a){a=a.split('?',2)[0];return a.slice((Math.max(0,a.lastIndexOf('.'))||Infinity)+1)});function U(a){return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}k('SUI.hexColorToRGB',U);
function ba(a,b,c){a=[a,b,c];for(b=0;b<a.length;b++)a[b]=16>=a[b]?'0'+a[b].toString(16):''+a[b].toString(16);return'#'+a.join('')}k('SUI.RGBtoHexColor',ba);k('SUI.colorContrastYIQ',function(a,b,c){a=U(a);return 128<=(299*a[0]+587*a[1]+114*a[2])/1E3?void 0===c?'#252525':c:void 0===b?'#FEFEFE':b});k('SUI.colorContrast',function(a,b){b=void 0===b?.5:b;a=U(a);for(var c=0;c<a.length;c++)a[c]+=Math.round(a[c]*b),0>a[c]?a[c]=0:255<a[c]&&(a[c]=255);return ba.apply(null,a)});
k('SUI.allowKeys',function(a,b){return V(a,function(c){return N(b,c)})});k('SUI.denyKeys',function(a,b){return V(a,function(c){return!N(b,c)})});function V(a,b){a=new W(a);var c=new W;a.l(function(d,f){b(f)&&c.set(f,d)});return c}k('SUI.filterKeys',V);k('SUI.normalize',function(a){return a.normalize('NFD').replace(/[\u0300-\u036f]/g,'')});function W(a){a=a||{};this.j(a)}k('SUI.Object',W);W.prototype=Object.create(Object.prototype);W.prototype.constructor=W;W.prototype.j=function(a){if(v(a))for(var b in a)a.hasOwnProperty(b)&&(null===a[b]||!v(a[b])||C(a[b])?C(a[b])&&null!==a[b][0]&&v(a[b][0])?(ca(a,b),this[b]=a[b]):this[b]=n(a[b]):(D(this[b],W)||(this[b]=new W(this[b])),this[b].j(a[b])));return this};W.prototype.merge=W.prototype.j;function ca(a,b){x(a[b],function(c,d){a[b][d]=new W(c)})}
W.prototype.get=function(a,b,c){var d=this;a&&(d=da(this,this,(void 0===c?0:c)?[a]:a.split('.')));return A(d)?b:d};W.prototype.get=W.prototype.get;function da(a,b,c){var d=void 0;I(b,function(f,g){1===c.length&&g===c[0]?d=b[g]:g===c[0]&&null!==b[g]&&v(b[g])&&(f=u(c),f.shift(),d=da(this,b[g],f))}.bind(a));return d}function ea(a,b,c,d){I(b,function(f,g){1===c.length&&g===c[0]?b[g]=d:g===c[0]&&null!==b[g]&&v(b[g])&&(f=u(c),f.shift(),ea(this,b[g],f,d))}.bind(a))}
W.prototype.set=function(a,b){var c={};a=a.split('.');for(var d=a.pop(),f=c,g=0;g<a.length;g++)f=f[a[g]]=f[a[g]]||{};f[d]=b;this.j(c)};W.prototype.set=W.prototype.set;W.prototype.w=function(a,b,c){c=void 0===c?!1:c;this.set(a,null);ea(this,this,c?[a]:a.split('.'),b)};W.prototype.setRaw=W.prototype.w;W.prototype.remove=function(a){fa(this,this,a.split('.'))};W.prototype.remove=W.prototype.remove;W.prototype.clear=function(){J(this)};W.prototype.clear=W.prototype.clear;
function fa(a,b,c){for(var d in b)if(b.hasOwnProperty(d))if(1===c.length&&d===c[0])delete b[d];else if(d===c[0]&&null!==b[d]&&v(b[d])){var f=u(c);f.shift();fa(a,b[d],f)}}W.prototype.l=function(a,b,c){var d=this,f=c||[];I(b||this,function(g,m){var M=u(f);M.push(m);null!==g&&v(g)?d.l(a,g,M):a(g,M.join('.'))})};W.prototype.each=W.prototype.l;W.prototype.v=function(a){a=void 0===a?!1:a;var b=u(this);a||(b=new W(b));return b};W.prototype.copy=W.prototype.v;W.prototype.isEmpty=function(){return P(this)};
W.prototype.isEmpty=W.prototype.isEmpty;function X(a,b,c){a=void 0===a?[]:a;b=void 0===b?W:b;c=void 0===c?{}:c;this.m=b;b=c;b=void 0===b?{}:b;this.options=new W({id:'id',parent:void 0});this.options.j(b);this.c=[];this.load(a)}e=X.prototype;e.load=function(a){var b=this;x(a,function(c){b.push(c)})};e.push=function(a){var b=a;D(a,this.m)||(b=new this.m(a,A(this.options.parent)?this:this.options.parent));a=b;this.c.push(a);return a};e.set=function(a,b){var c=b;D(b,this.m)||(c=new this.m(b,this));a<this.size()?this.c[a]=c:this.push(c);return c};
e.replace=function(a){var b=a.get(this.options.id);(b=ha(this,this.options.id,b))&&b.j(a);return b};function ia(a,b,c){var d=d||a.c;var f=[];x(d,function(g,m){b(g)&&(c(g,m),f.push(g))})}e.l=function(a){ia(this,function(){return!0},a)};e.get=function(a,b){var c=null;0<=a&&a<this.c.length&&(c=a=this.c[a],b&&(c=a.get(b)));return c};e.clear=function(){J(this.c)};function ha(a,b,c){return ja(a,function(d,f){return a.get(f,b)===c})}
function ja(a,b){for(var c=0;c<a.c.length&&!b(a.c[c],c);)c++;return a.get(c)}e.delete=function(a){return ka(this,function(b){return b===a})};function ka(a,b){for(var c=0;c<a.c.length&&!b(a.c[c],c);)c++;b=a.get(c);a.c.splice(c,1);return b}e.size=function(){return this.c.length};function S(a,b){this.f=b||document;E(this.f.o)&&(this.f=this.f.node);b=[];-1!==a.indexOf(' ')||1<a.split('.').length-1||-1<a.indexOf('.')&&0!==a.indexOf('.')||-1!==a.indexOf('[')?b=this.f.querySelectorAll(a):0===a.indexOf('#')?(E(this.f.getElementById)||(this.f=document),b.push(this.f.getElementById(a.replace('#','')))):0===a.indexOf('.')?b=this.f.getElementsByClassName(a.replace('.','')):b=this.f.getElementsByTagName(a);a=[];for(var c=0;c<b.length;c++)b[c]&&a.push(b[c]);X.call(this,a,Y,{parent:null})}
var Z=S;Z.prototype=Object.create(X.prototype);Z.prototype.constructor=Z;S.prototype.getItem=function(){var a=this.get(0);a||(a=new Y(null));return a};function Y(a,b){if(p(a))if(q(a,'<')&&q(a,'</')){var c=document.createElement('template');c.innerHTML=a;a=c.content.firstElementChild}else a=document.createElement(a);this.node=a;this.c=b}e=Y.prototype;e.set=function(a,b){'id'===a?this.node.id=b:this.setAttribute(a,b)};e.j=function(a){var b=this;x(a,function(c,d){b.set(d,c)})};e.get=function(a){return'id'===a?this.node.id||null:this.getAttribute(a)};e.o=function(){return this.node};
e.setAttribute=function(a,b){b=A(b)?a:b;E(b)?this.node[a]=b:q(a,'data-')&&v(b)?this.node.setAttribute(a,JSON.stringify(b)):this.node.setAttribute(a,b)};e.getAttribute=function(a){var b=this.node.getAttribute(a);return q(a,'data-')&&b&&('['===b[0]||'{'===b[0])?JSON.parse(b)||null:n(b||null)};e.removeAttribute=function(a){this.node.removeAttribute(a)};
e.addEventListener=function(a,b){var c=this,d=B();b&&(d=function(f){f.stopPropagation();b(c,f)||f.preventDefault()},this.node.addEventListener(a,d),la(this,a,d));return d};function la(a,b,c){a.node._listeners||(a.node._listeners={});a.node._listeners[b]||(a.node._listeners[b]=[]);a.node._listeners[b].push(c)}e.trigger=function(a){a=new Event(a);this.node.dispatchEvent(a)};e.createElement=function(a){a=document.createElement(a);return new Y(a,this)};e.appendChild=function(a){this.node.appendChild(a.node)};
e.removeChild=function(a){if(this.node.hasChildNodes())try{this.node.removeChild(a.node)}catch(b){console.warn(b)}};e.remove=function(){var a=this.c&&!this.c.isEmpty()?this.c.node:this.node?this.node.parentElement:null;!this.isEmpty()&&a&&a.removeChild(this.node)};e.getComputedStyle=function(){return window.getComputedStyle(this.node)};e.setStyle=function(a){var b=this;x(a,function(c,d){b.node.style.setProperty(d,c,'')})};e.isEmpty=function(){return!this.node};
e.toString=function(a){return void 0===a||a?this.node.outerHTML:this.node.innerHTML};
export default window.SUI;