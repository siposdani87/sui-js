var SUI=(()=>{var Pi=Object.defineProperty;var Ks=Object.getOwnPropertyDescriptor;var Js=Object.getOwnPropertyNames;var $s=Object.prototype.hasOwnProperty;var Zs=(s,e)=>{for(var t in e)Pi(s,t,{get:e[t],enumerable:!0})},en=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Js(e))!$s.call(s,n)&&n!==t&&Pi(s,n,{get:()=>e[n],enumerable:!(i=Ks(e,n))||i.enumerable});return s};var tn=s=>en(Pi({},"__esModule",{value:!0}),s);var Yr={};Zs(Yr,{ActionCable:()=>yt,ActionCableClient:()=>wt,Application:()=>Hs,Async:()=>Q,AutoCompleteField:()=>Xs,BaseCheckboxField:()=>we,BaseField:()=>y,BaseModal:()=>ve,BaseTest:()=>ae,BottomMenu:()=>Ct,Browser:()=>It,Button:()=>li,Calendar:()=>oi,Canvas:()=>ri,CardCollection:()=>Bs,Carousel:()=>Fs,CheckboxField:()=>hi,Clock:()=>ai,Collection:()=>D,CollectionTest:()=>ut,ColorField:()=>ui,Confirm:()=>kt,ContentHandler:()=>Ae,Cookie:()=>Tt,Date:()=>Be,DateIO:()=>Mr,DateTimeField:()=>mi,DateTimeRangeField:()=>pi,Day:()=>Le,Deferred:()=>_,DeferredTest:()=>mt,Dialog:()=>Nt,Document:()=>xt,Dropdown:()=>di,Event:()=>Vt,FileField:()=>ki,Flash:()=>Ot,Footer:()=>Mt,Form:()=>Ys,FormField:()=>ss,GeoLocation:()=>jt,GoogleMap:()=>Oi,Header:()=>zt,Helper:()=>Et,HiddenField:()=>fi,Http:()=>Dt,IconToggleField:()=>gi,Item:()=>l,ItemTest:()=>pt,LeftMenu:()=>Pt,Loader:()=>Lt,LocationField:()=>Mi,Module:()=>bt,Month:()=>si,NavBar:()=>At,Navigation:()=>Us,NumberField:()=>Ni,Objekt:()=>u,ObjektTest:()=>ft,Pager:()=>He,Popup:()=>ie,PopupContainer:()=>je,ProgressBar:()=>Ht,ProgressStatus:()=>zs,Promize:()=>Ee,Query:()=>h,RadiobuttonField:()=>vi,RangeField:()=>Ti,ResetButton:()=>bi,Route:()=>Vs,Router:()=>Se,Scheduler:()=>qt,Script:()=>Bt,SearchField:()=>wi,SelectField:()=>_i,ServiceWorker:()=>Ut,Sidebar:()=>Xe,State:()=>vt,Storage:()=>Ke,Style:()=>Ft,SubmitButton:()=>yi,SwitchField:()=>Ci,TabPanel:()=>Qs,Table:()=>qs,Template:()=>Wt,TestRunner:()=>gt,TextField:()=>at,TextareaField:()=>xi,Time:()=>ot,Tooltip:()=>F,TopMenu:()=>Rt,UrlField:()=>Ii,Viewer:()=>Yt,Waiter:()=>Gs,Window:()=>Qt,Xhr:()=>St,Year:()=>ni,capitalize:()=>mn,ceil:()=>Wr,clear:()=>Ce,clearArray:()=>ht,clearObject:()=>ms,colorContrast:()=>Dr,colorContrastYIQ:()=>Sr,consoleError:()=>qe,consoleInfo:()=>P,consoleLog:()=>_n,consoleWarn:()=>p,contain:()=>j,convert:()=>he,convertHEXToHSV:()=>jr,convertHEXToRGB:()=>ci,convertHSVToHEX:()=>Er,convertHSVToRGB:()=>Rs,convertRGBToHEX:()=>rt,convertRGBToHSV:()=>Ws,convertToNumber:()=>hs,convertToString:()=>cs,copy:()=>cn,copyArray:()=>ue,copyObject:()=>Oe,copyToClipboard:()=>bn,coreResources:()=>wn,debounce:()=>ct,decodeBase64:()=>Cn,decrypt:()=>Bi,defaultValue:()=>sn,each:()=>b,eachArray:()=>q,eachObject:()=>G,encodeBase64:()=>Qe,encrypt:()=>_t,eq:()=>f,floor:()=>Fr,format:()=>O,generateId:()=>U,getExtensionName:()=>ze,getQueryString:()=>fs,gt:()=>nn,gte:()=>Ai,guid:()=>gs,inArray:()=>S,inContainArray:()=>hn,instanceOf:()=>z,is:()=>Ue,isArray:()=>L,isDate:()=>ge,isEmpty:()=>Me,isFinite:()=>us,isFloat:()=>an,isFunction:()=>M,isInteger:()=>dn,isNull:()=>Y,isNumber:()=>Ye,isObject:()=>E,isSame:()=>ce,isString:()=>ee,isUndefined:()=>T,list:()=>un,lt:()=>on,lte:()=>rn,md5:()=>Ge,mdl:()=>g,merge:()=>ls,neq:()=>ye,noop:()=>B,normalize:()=>vn,pluck:()=>Hi,pluckKeys:()=>pn,random:()=>Rr,readableCurrency:()=>Hr,readableNumber:()=>Br,releaseMode:()=>Ve,remove:()=>xe,round:()=>ji,scrollIntoView:()=>gn,scrollTo:()=>ps,scrollToElement:()=>fn,setDateIOLocale:()=>is,sleepEach:()=>ln,typeCast:()=>C,urlWithQueryString:()=>Ie,uuid:()=>xn});var C=s=>{let e=s;if(ee(s)&&!j(s," ")){let t=s.toLowerCase();f(t,"")?e="":f(t,"undefined")?e=void 0:f(t,"null")?e=null:f(t,"true")?e=!0:f(t,"false")?e=!1:f(t,"infinity")?e=1/0:Ye(t)&&(e=Number(t))}return e},ls=(s,e)=>{let t=Oe(s);for(let i in e)e.hasOwnProperty(i)&&(E(e[i].constructor)?t[i]=ls(t[i],e[i]):t[i]=e[i]);return t},O=(s,e=null,t="\\{",i="\\}")=>(b(e,(n,o)=>{let r=new RegExp(t+o+i,"gm");s=s.replace(r,n)}),s),he=(s,e)=>{let t=s;return Ye(s)?t=hs(s,e):ee(s)&&(t=cs(s,e)),t},hs=(s,e)=>{switch(e){case"string":return s.toString();default:return s}},cs=(s,e)=>{switch(e){case"integer":return parseInt(s,10);case"float":return parseFloat(s);default:return s}},sn=(s,e)=>T(s)?e:s,B=s=>()=>s,f=(s,e)=>s===e,ye=(s,e)=>s!==e,nn=(s,e)=>s>e,Ai=(s,e)=>s>=e,on=(s,e)=>s<e,rn=(s,e)=>s<=e,L=s=>z(s,Array),M=s=>Ue(s,"function"),ee=s=>Ue(s,"string"),Ye=s=>s!==null&&s!==""&&!isNaN(s)&&(!S(["0","+"],s==null?void 0:s[0])||s==="0")&&Number(s).toString()!=="NaN"&&Number(s).toString()!=="Infinity",an=s=>parseFloat(s)===s,dn=s=>parseInt(s,10)===s,E=s=>Ue(s,"object"),ge=s=>z(s,Date),Y=s=>s===null,T=s=>Ue(s,"undefined"),us=s=>us(s),Ue=(s,e)=>typeof s===e,z=(s,e)=>s instanceof e,b=(s,e,t,i)=>{L(s)?q(s,e,t,i):E(s)&&G(s,e)},q=(s,e,t,i)=>{t=t||0,i=i||s.length;for(let n=t;n<i;n++)e(s[n],n)},G=(s,e)=>{for(let t in s)s.hasOwnProperty(t)&&e(s[t],t)},ln=(s,e,t,i)=>{let n=()=>{s(e),e++,e<t&&setTimeout(n,i)};n()},Ce=s=>{L(s)?ht(s):E(s)&&ms(s)},ht=s=>{s.splice(0,s.length)},ms=s=>{for(let e in s)s.hasOwnProperty(e)&&delete s[e]},S=(s,e)=>s.indexOf(e)!==-1,j=(s,e)=>s.indexOf(e)!==-1,hn=(s,e)=>{let t=0;for(;t<s.length&&!j(e,s[t]);)t++;return t<s.length},ce=(s,e)=>{let t=JSON.stringify(s),i=JSON.stringify(e);if(E(s)&&E(e)&&f(t.length,i.length)){let n=!0;return G(s,(o,r)=>{ce(e[r],o)||(n=!1)}),n}return f(t,i)},xe=(s,e)=>{let t=s.indexOf(e);ye(t,-1)&&s.splice(t,1)},cn=s=>{let e;return L(s)?e=ue(s):E(s)&&(e=Oe(s)),e},ue=s=>[].concat(s),Oe=s=>{let e={};return G(s,(t,i)=>{e[i]=E(t)?Oe(t):t}),e},Me=s=>{let e=!1;if(L(s))e=s.length===0;else if(E(s)){let t=0;b(s,()=>{t++}),e=t===0}return e},un=(s,e)=>{e(...s)},mn=s=>s.charAt(0).toUpperCase()+s.slice(1),Hi=(s,e)=>{let t=[];return q(s,i=>{let n=i.get(e);t.push(n)}),t},pn=(s,e)=>{let t=[];return G(s,(i,n)=>{e(i,n)&&t.push(n)}),t},Li=null,ps=(s,e,t=500,i=20)=>{clearInterval(Li);let n=-(window.scrollX-s)/(t/i),o=-(window.scrollY-e)/(t/i);Li=setInterval(()=>{(n>0&&window.scrollX+n>s||n<0&&window.scrollX+n<s)&&(n=s-window.scrollX),(o>0&&window.scrollY+o>e||o<0&&window.scrollY+o<e)&&(o=e-window.scrollY),window.scrollX!==s||window.scrollY!==e?window.scrollBy(n,o):clearInterval(Li)},i)},fn=(s,e=500,t=20)=>{let n=document.querySelectorAll(s)[0],o=n.offsetLeft,r=n.offsetTop;ps(o,r,e,t)},gn=(s,e="smooth")=>{document.querySelector(s).scrollIntoView({behavior:e})},ct=(s,e=250,t=!1)=>{let i;return(...n)=>{let o=()=>{i=null,t||s(...n)},r=t&&!i;clearTimeout(i),i=setTimeout(o,e),r&&s(...n)}},Ie=(s,e)=>{let t=fs(e),i=j(s,"?")?"&":"?";return s+(t?i+t:"")},fs=s=>{let e=[];return G(s,(t,i)=>{L(t)?q(t,n=>{e.push(O("{0}[]={1}",[i,n]))}):!T(t)&&!Y(t)&&e.push(O("{0}={1}",[i,t]))}),Me(e)?"":e.join("&")},ze=s=>{let e=s.split("?",2)[0];return e.slice((Math.max(0,e.lastIndexOf("."))||1/0)+1)},vn=s=>s.normalize("NFD").replace(/[\u0300-\u036f]/g,""),bn=s=>{let e=document.createElement("textarea");e.value=s,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)};var u=class{constructor(e){e=e||{},Object.call(this,e),this.merge(e)}merge(e){if(E(e))for(let t in e)e.hasOwnProperty(t)&&(!Y(e[t])&&E(e[t])&&!L(e[t])&&!ge(e[t])?(z(this[t],u)||(this[t]=new u(this[t])),this[t].merge(e[t])):L(e[t])&&!Y(e[t][0])&&E(e[t][0])&&!ge(e[t][0])?(this._convertObject(e,t),this[t]=e[t]):this[t]=C(e[t]));return this}_convertObject(e,t){b(e[t],(i,n)=>{e[t][n]=new u(i)})}speedGet(e,t,i=!1){let n=this;if(e){n=this[e];let o=i?[e]:e.split(".");if(o.length>1){let r=this,a=0;for(;a<o.length&&!T(r[o[a]]);)n=r=r[o[a]],a++;if(o.length!==a)return t}}return n}get(e,t,i=!1){let n=this;if(e){let o=i?[e]:e.split(".");n=this._get(this,o)}return T(n)?t:n}_get(e,t){let i;return b(e,(n,o)=>{if(t.length===1&&o.toString()===t[0])i=e[o];else if(o.toString()===t[0]&&!Y(e[o])&&E(e[o])&&!ge(e[o])){let r=ue(t);r.shift(),i=this._get(e[o],r)}}),i}_set(e,t,i){G(e,(n,o)=>{if(t.length===1&&o===t[0])e[o]=i;else if(o===t[0]&&!Y(e[o])&&E(e[o])&&!ge(e[o])){let r=ue(t);r.shift(),this._set(e[o],r,i)}})}set(e,t){let i={};i=this._attributesToObject(i,e.split("."),t),this.merge(i)}setRaw(e,t,i=!1){this.set(e,null);let n=i?[e]:e.split(".");this._set(this,n,t)}remove(e){let t=e.split(".");this._remove(this,t)}clear(){Ce(this)}_remove(e,t){for(let i in e)if(e.hasOwnProperty(i)){if(t.length===1&&i===t[0])delete e[i];else if(i===t[0]&&!Y(e[i])&&E(e[i])&&ge(e[i])){let n=ue(t);n.shift(),this._remove(e[i],n)}}}each(e,t,i){let n=t||this,o=i||[];G(n,(r,a)=>{let d=ue(o);d.push(a),!Y(r)&&E(r)&&!ge(r)?this.each(e,r,d):e(r,d.join("."))})}_attributesToObject(e,t,i){let n=t.pop(),o=e;for(let r=0;r<t.length;r++)o=o[t[r]]=o[t[r]]||{};return o[n]=i,e}copy(e=!1){let t=Oe(this);return e||(t=new u(t)),t}isEmpty(){return Me(this)}allowKeys(e){return this.filterKeys(this,t=>S(e,t))}denyKeys(e){return this.filterKeys(this,t=>!S(e,t))}filterKeys(e,t){let i=new u;return e.each((n,o)=>{t(o)&&i.set(o,n)}),i}};var D=class{constructor(e=[],t=u,i={}){this.Type=t,this._setOptions(i),this.items=[],this.load(e)}_setOptions(e={}){let t=this;t.options=new u({id:"id",parent:void 0}),t.options.merge(e)}load(e){b(e,t=>{this.push(t)})}reload(e){this.clear(),this.load(e)}push(e){let t=this._createItem(e);return this.items.push(t),t}_createItem(e){if(!z(e,this.Type)){let t=T(this.options.parent)?this:this.options.parent;return new this.Type(e,t)}return e}set(e,t){let i=this._createItem(t);return e<this.size()?this.items[e]=i:this.push(i),i}replace(e){let t=this._createItem(e);if(t&&z(t,u)){let i=t.get(this.options.id),n=this.findById(i);if(n&&z(n,u))return n.merge(t),n}return null}getItems(){return this.items}iterator(e,t,i){i=i||this.items;let n=[];return b(i,(o,r)=>{e(o)&&(t(o,r),n.push(o))}),n}each(e){this.iterator(()=>!0,e)}get(e,t){if(e>=0&&e<this.items.length){let i=this.items[e];return i&&t&&z(i,u)?i.get(t):i}return null}getById(e,t){let i=this.findById(e);return i&&t&&z(i,u)?i.get(t):i}clear(){Ce(this.items)}findById(e){return this.findBy(this.options.id,e)}findBy(e,t){return this.findByCondition((i,n)=>this.get(n,e)===t)}findByCondition(e){let t=0;for(;t<this.items.length&&!e(this.items[t],t);)t++;return this.get(t)}findAllBy(e,t){return this.findAllByCondition((i,n)=>this.get(n,e)===t)}findAllByCondition(e){let t=[];return b(this.items,(i,n)=>{e(i,n)&&t.push(this.get(n))}),t}delete(e){return this.deleteByCondition(t=>f(t,e))}deleteById(e){return this.deleteBy(this.options.id,e)}deleteBy(e,t){return this.deleteByCondition((i,n)=>this.get(n,e)===t)}deleteByCondition(e){let t=0;for(;t<this.items.length&&!e(this.items[t],t);)t++;let i=this.get(t);return this.items.splice(t,1),i}deleteAllBy(e,t){return this.deleteAllByCondition((i,n)=>this.get(n,e)===t)}deleteAllByCondition(e){let t=[],i=[];return b(this.items,(n,o)=>{e(n,o)?i.push(this.get(o)):t.push(this.get(o))}),this.items=t,i}size(){return this.items.length}limit(e,t=10){return this.items.slice(e,e+t)}pluck(e){return Hi(this.items,e)}};ES_PROD=window.ES_PROD||!1;var Ve=!0,wn={app:"app",config:"config",event:"event",scheduler:"scheduler",http:"http",flash:"flash",template:"template",dialog:"dialog",confirm:"confirm",viewer:"viewer",header:"header",topMenu:"topMenu",leftMenu:"leftMenu",leftSidebar:"leftSidebar",rightSidebar:"rightSidebar",footer:"footer",bottomMenu:"bottomMenu",navBar:"navBar",script:"script",style:"style",state:"state",dom:"dom",document:"document",window:"window",helper:"helper",cookie:"cookie",localStorage:"localStorage",sessionStorage:"sessionStorage",browser:"browser",loader:"loader",progressBar:"progressBar",geoLocation:"geoLocation",instances:"instances",console:"console",serviceWorker:"serviceWorker",actionCable:"actionCable"};var _n=(...s)=>{Ve||console.log(...s)},P=(...s)=>{Ve||console.info(...s)},p=(...s)=>{Ve||console.warn(...s)},qe=(...s)=>{console.error(...s)};var l=class{constructor(e,t){if(ee(e))if(j(e,"<")&&j(e,"</")){let i=document.createElement("template");i.innerHTML=e,e=i.content.firstElementChild}else e=document.createElement(e);this.node=e,this.parentNode=t,this.listenerStoreKey="_listeners"}set(e,t){f(e,"id")?this.setId(t):this.setAttribute(e,t)}merge(e){b(e,(t,i)=>{this.set(i,t)})}get(e){return f(e,"id")?this.getId():this.getAttribute(e)}getNode(){return this.node}getTagName(){return this.node.tagName.toLowerCase()}getId(){return this.node.id||null}setId(e){this.node.id=he(e,"string")}setFor(e){this.node.htmlFor=he(e,"string"),this.setAttribute("for",e)}getFor(){return this.node.htmlFor||this.getAttribute("for")}hasClass(e){return this.node.classList.contains(e)}_handleClassList(e,t){L(e)?b(e,i=>{t(i)}):t(e)}addClass(e){this._handleClassList(e,t=>{t&&!this.hasClass(t)&&this.node.classList.add(t)})}removeClass(e){this._handleClassList(e,t=>{this.node.classList.remove(t)})}toggleClass(e){this._handleClassList(e,t=>{this.node.classList.toggle(t)})}getClasses(){return this.node.classList.value.split(" ")}setAttribute(e,t){let i=T(t)?e:t;M(i)?this.node[e]=i:j(e,"data-")&&E(i)?this.node.setAttribute(e,JSON.stringify(i)):this.node.setAttribute(e,i)}getAttribute(e){let t=this.node.getAttribute(e);return j(e,"data-")&&t&&(f(t[0],'"')||f(t[0],"[")||f(t[0],"{"))?JSON.parse(t)||null:C(t||null)}removeAttribute(e){this.node.removeAttribute(e)}hasAttribute(e){return this.node.hasAttribute(e)}addEventListener(e,t){let i=B();return t&&(i=n=>{n.stopPropagation(),t(this,n)||n.preventDefault()},this.node.addEventListener(e,i),this._addListenerToStore(e,i)),i}_addListenerToStore(e,t){this.node[this.listenerStoreKey]||(this.node[this.listenerStoreKey]={}),this.node[this.listenerStoreKey][e]||(this.node[this.listenerStoreKey][e]=[]),this.node[this.listenerStoreKey][e].push(t)}_getListenersFromStore(e){return this.node[this.listenerStoreKey]||this.node[this.listenerStoreKey][e]?this.node[this.listenerStoreKey][e]:[]}removeEventListener(e,t){this.node.removeEventListener(e,t)}removeEventListeners(e){let t=this._getListenersFromStore(e);q(t,i=>{this.removeEventListener(e,i)})}dispatchEvent(e){this.node.dispatchEvent(e)}trigger(e){let t=new Event(e);this.dispatchEvent(t)}createElement(e){let t=document.createElement(e);return new l(t,this)}appendChild(e){this.node.appendChild(e.getNode())}removeChildren(){for(;this.hasChildren();)this.node.removeChild(this.node.firstChild)}hasChildren(){return this.node.hasChildNodes()}removeChild(e){if(this.hasChildren())try{this.node.removeChild(e.getNode())}catch(t){p(t)}}remove(){let e=this._getParentElement();!this.isEmpty()&&e&&e.removeChild(this.node)}insert(e){this.removeChildren(),this.appendChild(e)}beforeChild(e){let t=this.node.firstChild||this.node.firstElementChild;return t?(this.node.insertBefore(e.getNode(),t),!0):(this.node.insertBefore(e.getNode(),t),!1)}afterChild(e){let t=this._getParentElement();return t?(t.appendChild(e.getNode()),!0):!1}insertBefore(e){let t=this._getParentElement();return t?(t.insertBefore(e.getNode(),this.node),!0):!1}insertAfter(e){let t=this.getNextSibling(),i=this._getParentElement();return i?(i.insertBefore(e.getNode(),t.getNode()),!0):!1}replaceChild(e){let t=this._getParentElement();return t?(t.replaceChild(e.getNode(),this.node),!0):!1}getNextSibling(){let e=this.node.nextSibling||this.node.nextElementSibling;return new l(e)}setHtml(e){this.node.innerHTML=e}getHtml(e=!1){return this.isEmpty()?"":e?this.node.innerHTML:this.node.outerHTML}setText(e){this.node.nodeValue=e}getText(){return this.node.textContent}setData(e,t){if(!this.isEmpty()){let i=t;ee(t)||(i=JSON.stringify(t)),this.node.dataset[e]=i}}getData(e){let t=this.node.dataset[e];return t&&(f(t[0],"[")||f(t[0],"{"))&&(t=JSON.parse(t)),C(t)}removeData(e){this.isEmpty()||(delete this.node.dataset[e],this.node.removeAttribute("data-"+e))}getParentNode(){let e=this._getParentElement();return e?new l(e):null}_getParentElement(){return this.parentNode&&!this.parentNode.isEmpty()?this.parentNode.getNode():this.node?this.node.parentElement:null}getComputedStyle(){return window.getComputedStyle(this.node)}getStyle(){return this.node.style}setStyle(e){b(e,(t,i)=>{this.node.style.setProperty(i,t,"")})}removeStyle(e){b(e,t=>{this.node.style.removeProperty(t)})}isEmpty(){return!this.node}exists(){return document.body.contains(this.node)}toString(e=!0){return e?this.node.outerHTML:this.node.innerHTML}cloneNode(e=!1){if(!this.isEmpty()){let t=this.node.cloneNode(e);return new l(t,this.parentNode)}return null}clearNode(){let e=this.cloneNode(!0);e&&(this.replaceChild(e),this.node=e.getNode())}};var h=class extends D{constructor(e,t){let i=t||document;z(i,l)&&(i=i.getNode());let n=yn(e,i);super(n,l,{parent:null})}getItem(){let e=this.get(0);return e||(e=new l(null)),e}},yn=(s,e)=>{let t=[];if(s.indexOf(" ")!==-1||s.split(".").length-1>1||s.indexOf(".")>-1&&s.indexOf(".")!==0||s.indexOf("[")!==-1)t=e.querySelectorAll(s);else if(s.indexOf("#")===0){let n=e;M(n.getElementById)||(n=document);let o=n.getElementById(s.replace("#",""));t.push(o)}else s.indexOf(".")===0?t=e.getElementsByClassName(s.replace(".","")):t=e.getElementsByTagName(s);let i=[];for(let n=0;n<t.length;n++)t[n]&&i.push(t[n]);return i};var je=class{constructor(e="body"){this.selector=e,this._init()}_init(){this.container=new h(this.selector).getItem()}_initCollection(e){window.popup_collection=window.popup_collection||new D([],e)}push(e,t){this._initCollection(e),window.popup_collection&&window.popup_collection.push(t)}delete(e){window.popup_collection&&window.popup_collection.delete(e)}closeAll(){window.popup_collection&&window.popup_collection.each(e=>{e.close()})}setPosition(e){e.setStyle({left:0})}clearPosition(e){e.setStyle({top:"auto",bottom:"auto",left:"auto",right:"auto"})}};var ae=class{constructor(e){this.name=e}init(){}showError(e,t){qe(this.name+"."+e,t)}showLog(e,t){P(this.name+"."+e,t)}};var ut=class extends ae{constructor(){super("Collection")}init(){this.collection=new D([{id:1,text:"text"},{id:2,text:"text2"}])}};var Ee=class{constructor(e={}){this._setOptions(e)}_setOptions(e={}){let t=this;t.options=new u({status:null,data:null,resolve:null,reject:null,complete:null}),t.options.merge(e)}resolve(e){L(e)||(e=[e]),M(this.options.resolve)&&M(this.options.complete)?(this.options.resolve.apply(this,e),this.options.complete.apply(this,e)):(this.options.data=e,this.options.status=!0)}reject(e){L(e)||(e=e?[e]:[]),M(this.options.reject)&&M(this.options.complete)?(this.options.reject.apply(this,e),this.options.complete.apply(this,e)):(this.options.data=e,this.options.status=!1)}then(e,t,i){let n=t||B(),o=i||B();switch(this.options.status){case!0:e.apply(this,this.options.data),o.apply(this,this.options.data);break;case!1:n.apply(this,this.options.data),o.apply(this,this.options.data);break;default:this.options.merge({resolve:e,reject:n,complete:o})}}defer(e,t){this.then((...i)=>{e.resolve(i)},(...i)=>{e.reject(i)},t)}};var _=class{constructor(){this._promise=new Ee}promise(){return this._promise}resolve(e){this._promise.resolve(e)}reject(e){this._promise.reject(e)}};var mt=class extends ae{constructor(){super("Deferred")}init(){this.ajaxResolve=()=>{let e=new _;return window.setTimeout(()=>{e.resolve(1)},100),e.promise()},this.funcResolve=()=>{let e=new _;return e.resolve(2),e.promise()},this.ajaxReject=()=>{let e=new _;return window.setTimeout(()=>{e.reject(1)},100),e.promise()},this.funcReject=()=>{let e=new _;return e.reject(2),e.promise()},this.testPromise(),this.testResolve(),this.testReject()}testPromise(){new _().promise()instanceof Ee||this.showError("promise",1)}testResolve(){this.ajaxResolve().then(e=>{e!==1&&this.showError("resolve",1)},()=>{this.showError("resolve",2)}),this.funcResolve().then(e=>{e!==2&&this.showError("resolve",3)},()=>{this.showError("resolve",4)})}testReject(){this.ajaxReject().then(()=>{this.showError("reject",1)},e=>{e!==1&&this.showError("reject",2)}),this.funcReject().then(()=>{this.showError("reject",3)},e=>{e!==2&&this.showError("reject",4)})}};var pt=class extends ae{constructor(){super("Item")}init(){this.node=new l("div"),this.testAttribute(),this.testAttributeData(),this.testData()}testAttribute(){let e=["text",null,!0,!1,1/0,0,1,10];for(let t=0;t<e.length;t++){this.node.setAttribute("data",e[t]);let i=this.node.getAttribute("data");ce(i,e[t])||(this.showError("setAttribute(data)",e[t]),this.showError("getAttribute(data)",i))}}testAttributeData(){let e=["text",null,!0,!1,1/0,0,1,10,[0,1,10],{key:"value"}];for(let t=0;t<e.length;t++){this.node.setAttribute("data-value",e[t]);let i=this.node.getAttribute("data-value");ce(i,e[t])||(this.showError("setAttribute(data-value)",e[t]),this.showError("getAttribute(data-value)",i))}this.node.removeAttribute("data-value")}testData(){let e=["","text",null,!0,!1,void 0,1/0,0,1,10,[0,1,10],{key:"value"}];for(let t=0;t<e.length;t++){this.node.setData("value",e[t]);let i=this.node.getData("value");ce(i,e[t])||(this.showError("setData(value)",e[t]),this.showError("getData(value)",i))}this.node.removeData("value")}};var ft=class extends ae{constructor(){super("Objekt")}init(){this.testMerge(),this.testGetTypedValue(),this.testGet(),this.testSet(),this.testRemove(),this.testCopy()}testMerge(){let e=new u({attr:null,obj:{attr2:1,attr4:3}});e.attr!==null&&this.showError("merge",1),e.merge({attr:"value1",obj:{attr2:2,attr3:null}}),e.attr!=="value1"&&this.showError("merge",2),e.obj.attr2!==2&&this.showError("merge",3),e.obj.attr3!==null&&this.showError("merge",4),e.obj.attr4!==3&&this.showError("merge",5)}testGetTypedValue(){let e=new u({attr:"null",obj:{attr2:"1",attr3:"3.2"},attr4:"false",attr5:"true",attr6:"string123,456.789",attr7:void 0,attr8:null,attr9:"1e+3",attr10:"1e-3",attr11:"1E3",attr12:"2e234",attr13:"8e23467"});e.attr!==null&&this.showError("_getTypedValue",0),e.obj.attr2!==1&&this.showError("_getTypedValue",1),e.obj.attr3!==3.2&&this.showError("_getTypedValue",2),e.attr4!==!1&&this.showError("_getTypedValue",3),e.attr5!==!0&&this.showError("_getTypedValue",4),e.attr6!=="string123,456.789"&&this.showError("_getTypedValue",5),e.attr7!==void 0&&this.showError("_getTypedValue",6),e.attr8!==null&&this.showError("_getTypedValue",7),e.attr9!==1e3&&this.showError("_getTypedValue",8),e.attr10!==.001&&this.showError("_getTypedValue",9),e.attr11!==1e3&&this.showError("_getTypedValue",10),e.attr12!==2e234&&this.showError("_getTypedValue",11),e.attr13!=="8e23467"&&this.showError("_getTypedValue",12)}testGet(){let e=new u({attr:null,obj:{attr2:1,obj2:{attr4:2,attr3:3.2,attr5:4.5}},arr:[{attr1:-4}]});e.set("attr",null),e.get("attr")!==null&&this.showError("get",0),e.set("obj.attr2",1),e.get("obj.attr2")!==1&&this.showError("get",1),e.set("obj.obj2.attr3",3.2),e.get("obj.obj2.attr3")!==3.2&&this.showError("get",2),e.get("obj.obj3")!==void 0&&this.showError("get",3),e.get("arr.0.attr1")!==-4&&this.showError("get",4)}testSet(){let e=new u({attr:0,obj:{attr2:0,obj2:{attr3:0}},other:{attr4:32},other2:{other3:{attr5:13,attr6:"title"}}});e.set("attr",null),e.get("attr")!==null&&this.showError("set",0),e.set("obj.attr2",1),e.get("obj.attr2")!==1&&this.showError("set",1),e.set("obj.obj2.attr3",3.2),e.get("obj.obj2.attr3")!==3.2&&this.showError("set",2),e.set("obj.obj3",5),e.get("obj.obj3")===void 0&&this.showError("set",3),e.set("other",null),e.get("other")!==null&&this.showError("set",4),e.set("other2.other3",null),e.get("other2.other3")!==null&&this.showError("set",5)}testRemove(){let e=new u({attr:0,obj:{attr2:0,obj2:{attr3:0}}});e.remove("attr"),e.get("attr")!==void 0&&this.showError("remove",0),e.remove("obj.attr2"),e.get("obj.attr2")!==void 0&&this.showError("remove",1),e.remove("obj.obj2.attr3"),e.get("obj.obj2.attr3")!==void 0&&this.showError("remove",2),e.remove("obj.obj3"),e.get("obj.obj3")!==void 0&&this.showError("remove",3)}testCopy(){let e=new u({attr:0,obj:{attr2:0,obj2:{attr3:0}}});e.set("obj.attr2",0),e.copy().remove("obj.attr2"),e.get("obj.attr2")!==0&&this.showError("copy",0)}};var gt=class{run(){let e=[new ut,new mt,new pt,new ft];for(let t of e)t.init(),P(`Test${t.name}.init()`)}};var Q=class{constructor(e){this.sum=e||0,this._clear()}parallel(e,t){let i=new _;if(e.length===0){let n=t||this.call.results;i.resolve(n),this._clear()}else b(e,(n,o)=>{this.call.results[o]=null,this._parallelWrapper(n,e.length,!1,o,t).defer(i)});return i.promise()}parallelFunction(e,t,i){let n=T(i)?this.call.counter++:i;this.call.results[n]=null,this._parallelWrapper(e,this.sum,!0,n,t)}_parallelWrapper(e,t,i,n,o){let r=new _,a=o||[],d=e.apply(this,a);return d&&M(d.then)?d.then(c=>{this._parallelCaller(t,!1,c,i,n,o).defer(r)},c=>{this._parallelCaller(t,!0,c,i,n,o).defer(r)}):d||T(d)?this._parallelCaller(t,!1,d,i,n,o).defer(r):this._parallelCaller(t,!0,d,i,n,o).defer(r),r.promise()}_parallelCaller(e,t,i,n,o,r){let a=new _;if(this.call.results[o]=i,t&&(this.call.isError=t),this.call.sum++,f(this.call.sum,e)){let d=r||ue(this.call.results);this._clear(),this.call.isError?n?this.eventComplete(this.call.isError,d):a.reject(d):n?this.eventComplete(this.call.isError,d):a.resolve(d)}return a.promise()}_clear(){this.call={sum:0,isError:!1,counter:0,results:[]}}setStatus(e,t,i,n){this.call.sum=e,this.call.isError=t,this.call.counter=i,this.call.results=n}eventComplete(e,t){p("Async.eventComplete(isError, results)",e,t)}serial(e,t){let i=new _;if(e.length===0){let n=t||this.call.results;i.resolve(n),this._clear()}else this._serialWrapper(e,0,t).defer(i);return i.promise()}_serialWrapper(e,t,i){let n=new _,o=e[t],r=i||this.call.results,a=(i||[]).concat(this.call.results),d=o.apply(this,a);return d&&M(d.then)?d.then(c=>{this._serialCaller(e,t,c,i).defer(n)},()=>{let c=i||this.call.results;n.reject(c),this._clear()}):d||T(d)?this._serialCaller(e,t,d,i).defer(n):(n.reject(r),this._clear()),n.promise()}_serialCaller(e,t,i,n){let o=new _;this.call.results[t]=i;let r=t+1;if(r<e.length)this._serialWrapper(e,r,n).defer(o);else{let a=n||this.call.results;o.resolve(a),this._clear()}return o.promise()}};var Se=class{constructor(e=""){this.route=e,this.param=new RegExp("([:*])(\\w+)","g"),this.escape=new RegExp("[-[]{}()+?.,]","g"),this._init()}_init(){this.paramNames=[];let e=this.route;e=e.replace(this.escape,"\\$&"),e=e.replace(this.param,(t,i,n)=>(this.paramNames.push(n),i===":"?"([^/]*)":"(.*)")),this.regex=new RegExp("^"+e+"$")}stringify(e={}){let t=this.route;for(let i in e)if(e.hasOwnProperty(i)){let n=e[i],o=new RegExp("[:*]"+i+"\\b");if(o.test(t))t=t.replace(o,n);else{let r=t.charAt(t.length-1)==="&"?"":"&";t+=t.indexOf("?")===-1?"?":r,L(n)?q(n,(a,d)=>{d>0&&(t+="&"),t+=O("{0}[]={1}",[i,a])}):T(n)||(t+=O("{0}={1}",[i,n]))}}return t=t.replace(this.param,""),t[t.length-1]==="?"?t.substring(0,t.length-1):t}getMatches(e){let t=e.indexOf("?");return t!==-1&&(e=e.substring(0,t)),e.match(this.regex)}parse(e){let t=this.getMatches(e);if(!t)return{};let i=this._parseParams(e);for(let n=0;n<this.paramNames.length;n++){let o=this.paramNames[n];i[o]=C(t[n+1])}return i}_parseParams(e){let t={},i=e.indexOf("?");if(i!==-1){let n=e.substring(i+1).split("&");for(let o=0;o<n.length;o++){let r=n[o].replace("==","&&").split("=");r.length<2&&r.push("");let a=window.decodeURIComponent(r[0]),d=C(window.decodeURIComponent(r[1].replace("&&","==")));if(j(a,"[]")){let c=a.replace("[]","");L(t[c])?t[c].push(d):t[c]=[d]}else t[a]=d}}return t}};var vt=class{constructor(e,t){this._current=new u,this._previous=this._current,this.routes=new D(e),this._setOptions(t),this._init()}_setRealUrls(){this.routes.each(e=>{let t=e.get("url"),i=this._getRealUrl(t);e.set("realUrl",i)})}_getUrlPrefix(){return this.basePath==="#"?"/#":""}_getRealUrl(e){return O("{0}{1}",[this._getUrlPrefix(),e])}_setBasePath(){this.basePath="#";let e=new h("base").getItem();e.isEmpty()||(this.basePath=e.getAttribute("href")||"#")}_setOptions(e){let t=this;t.options=new u({root:{id:"root",params:void 0}}),t.options.merge(e)}_init(){this._setBasePath(),this._setRealUrls(),this._initPopstate(),this._parseUrl()}_initPopstate(){window.addEventListener("popstate",()=>{if(window.history.state){let e=new u;e.merge(window.history.state),this._setCurrent(e),this._triggerChange()}else this._parseUrl(),this._triggerChange()})}run(){this._triggerChange()}_parseUrl(){let e=window.location.hash?window.location.hash:window.location.pathname.replace(this.basePath,"/")+window.location.search;this._parsePath(e,(t,i,n)=>{this._setHistory(t,i,n,!0)},()=>{p("State._parseUrl()",e,"missing state from routes config"),this.goRoot(!0)})}_parsePath(e,t,i){let n=e[0]==="#"?e.substring(1):e,o=this.routes.getItems(),r=null,a=null,d=null,c=0;for(;c<o.length&&Y(d);){r=o[c];let m=r.get("url"),v=new Se(m);d=v.getMatches(n),a=v.parse(n),c++}r&&a&&d?t(r,n,a):i(r,n,a)}_setHistory(e,t,i={},n=!1,o=!1){t=this.basePath==="#"?this.basePath+t:t;let r=e.get("template"),a=new Se(r);e.set("templateUrl",a.stringify(i)),e.set("params",i),n?window.history.replaceState(e.get(),e.get("title",""),t):window.history.pushState(e.get(),e.get("title",""),t),this._setCurrent(e),n||this._triggerChange(o)}_triggerChange(e=!1){let t=this.getCurrent(),i=this.getPrevious();this.eventChange(t,i,e)}_setCurrent(e){this._previous=this._current,this._current=e}getCurrent(e,t){return this._current.get(e,t)}getPrevious(e,t){return this._previous.get(e,t)}go(e,t,i=!1,n=!1){if(f(e[0],"#")||f(e[0],"/"))this._parsePath(e,(o,r,a)=>{this._setHistory(o,r,a,i,n)},()=>{});else{let[o,r]=this._resolveUrlWithState(e,t);o&&r&&this._setHistory(r,o,t,i,n)}}_resolveUrlWithState(e,t){let i=this.routes.findById(e),n="";if(i){let o=i.get("url");n=new Se(o).stringify(t)}return[n,i]}resolveUrl(e,t){let i=this._resolveUrlWithState(e,t)[0];return this._getRealUrl(i)}goState(e,t=!1,i=!1){this.go(e.get("id"),e.get("params"),t,i)}goRoot(e=!1,t=!1){this.go(this.options.get("root.id"),this.options.get("root.params"),e,t)}goBack(e,t,i=!1,n=!1){f(window.history.length,0)?this.go(e,t,i,n):this.back()}back(){window.history.go(-1)}redirect(e,t=!1){t?window.open(e,"_blank"):window.location.href=e}forward(){window.history.forward()}eventChange(e,t,i=!1){p("State.eventChange()",e,t,i)}setParams(e){G(e,(t,i)=>{this.setParam(i,t)})}setParam(e,t){let i=this.getCurrent("id"),n=this.getParams();n.set(e,t),this.go(i,n,!0)}getParams(){return this.getCurrent("params",new u)}getParam(e,t){return this.getParams().get(e,t)}reload(){window.location.reload()}refresh(e=!1){this._triggerChange(e)}getRoot(){return[this.options.root.id,this.options.root.params]}};var bt=class{constructor(){this._modules={},this._instances={},this._injections={},this._controller={enter:B(),exit:B()}}load(e,t){this._instances=e,this._injections=t}getController(){return this._controller}add(e,t,i){return this._modules[e]={moduleInjections:t,moduleCallback:i},e}_resolveDependencies(e){let t=[];return b(e.moduleInjections,i=>{t.push(this._instances[i]||i)}),new e.moduleCallback(...t)}_getSortedServices(e){let t=e.map(i=>{let n=this._modules[i].moduleInjections.filter(o=>e.includes(o));return n.length===0&&n.push(null),n.map(o=>[o,i])}).flat();return this._topologicalSort(t).slice(1)}_topologicalSort(e){let t={},i=[],n={};e.forEach(r=>{let a=r[0],d=r[1];t[a]||(t[a]={id:a,afters:[]}),t[d]||(t[d]={id:d,afters:[]}),t[a].afters.push(d)});let o=(r,a)=>{let d=t[r],c=d.id;n[r]||(Array.isArray(a)||(a=[]),a.push(c),n[r]=!0,d.afters.forEach(m=>{o(m,a)}),i.unshift(c))};return Object.keys(t).forEach(r=>o(r)),i}handleServices(e){let t=this._getSortedServices(e),i=[];b(t,o=>{let r=()=>(this._instances[o]=this._resolveDependencies(this._modules[o]),M(this._instances[o].enter)?this._instances[o].enter():B());i.push(r)}),this.eventAfterInit(),new Q().serial(i).then(()=>{this.eventServiceLoaded(),this._instances[this._injections.state].run()},()=>{this.eventServiceFailed()})}handleRoutes(e,t){this._instances[this._injections.state]=new vt(e,t),this._instances[this._injections.state].eventChange=(i,n,o)=>{let r=B();!n.isEmpty()&&E(this._controller)&&M(this._controller.exit)&&(r=this._controller.exit.bind(this._controller)),new Q().serial([r]).then(()=>{this._handleStateChange(i,o)})}}_handleStateChange(e,t=!1){this.eventStateChange(e).then(()=>{if(e.get("template")){let n=e.get("templateUrl");this._instances[this._injections.template].load(n,t).then(o=>{this.eventModuleLoaded(e),this._initController(e,o)},()=>{this.eventModuleFailed(e)})}else this.eventModuleLoaded(e),this._initController(e,this._instances[this._injections.template].getViewNode())},()=>{this.eventModuleFailed(e)})}_initController(e,t){this._instances[this._injections.dom]=t;let i=this._modules[e.get("controller")];i?this.eventDomChange(e,t).then(()=>{if(this._controller=this._resolveDependencies(i),E(this._controller)&&M(this._controller.enter)){let n=this._controller.enter.bind(this._controller);new Q().serial([n]).then(()=>{this.eventControllerLoaded(t)})}else this.eventControllerLoaded(t)}):this.eventControllerFailed()}eventControllerLoaded(e){p("Module.eventControllerLoaded()",e)}eventControllerFailed(){p("Module.eventControllerFailed()")}eventModuleFailed(e){p("Module.eventModuleFailed()",e)}eventModuleLoaded(e){p("Module.eventModuleLoaded()",e)}eventStateChange(e){let t=new _;return p("Module.eventStateChange()",e),t.resolve(),t.promise()}eventDomChange(e,t){let i=new _;return p("Module.eventDomChange()",e,t),i.resolve(),i.promise()}eventAfterInit(){p("Module.eventAfterInit()")}eventServiceLoaded(){p("Module.eventServiceLoaded()")}eventServiceFailed(){p("Module.eventServiceFailed()")}};var wt=class{constructor(e,t){this.parent=e,this._init(t)}_init(e){this.subscription=this._getSubscription(e)}_getSubscription(e){let t=new _;return this.client=this.parent.cable.subscriptions.create(e,{received:i=>{let n=new u(JSON.parse(i.message));t.resolve(n)}}),t.promise()}subscribe(){return this.subscription}send(e,t={}){t.message=e,this.client.send(t)}unsubscribe(){this.client.unsubscribe()}};var Qe=s=>{let e=window.CryptoJS.enc.Utf8.parse(s);return window.CryptoJS.enc.Base64.stringify(e)},Cn=s=>{let e=window.CryptoJS.enc.Base64.parse(s);return window.CryptoJS.enc.Utf8.stringify(e)},_t=(s,e)=>{let t=JSON.stringify(s);return window.CryptoJS.AES.encrypt(t,e)},Bi=(s,e)=>{let t=window.CryptoJS.AES.decrypt(s,e).toString(window.CryptoJS.enc.Utf8);return JSON.parse(t||"null")},Ge=s=>window.CryptoJS.MD5(s),gs=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),U=s=>[s,gs()].join("-"),xn=()=>[Math.random().toString(16).slice(2,10),Math.random().toString(16).slice(2,6),(Math.random()*.0625+.25).toString(16).slice(2,6),(Math.random()*.25+.5).toString(16).slice(2,6),Math.random().toString(16).slice(2,14)].join("-");var yt=class{constructor(){this._init()}_init(){window.ActionCable&&(this.cable=window.ActionCable.createConsumer()),this.clients=[],this.identifiers=[]}getUrl(){let e="",t=new h('meta[name="action-cable-url"]').getItem();return t.isEmpty()||(e=t.getAttribute("content")),e}subscribe(e,t){let i={channel:e,room:t},n=this._generateIdentifier(i);if(!S(this.identifiers,n)){this.identifiers.push(n);let r=new wt(this,i);return r.identifier=n,this.clients.push(r),r.subscribe()}return new _().promise()}unsubscribeAll(){q(this.clients,e=>{e.unsubscribe(),xe(this.identifiers,e.identifier)}),ht(this.clients)}_generateIdentifier(e){return Ge(JSON.stringify(e))}};var Ct=class{constructor(e){this.footer=e,this._init()}_init(){this.bottomMenu=new h("#bottom-menu",this.footer.footerNode).getItem();let e=new h("#open-bottom-menu",this.footer.footerNode).getItem();e.setAttribute("href","javascript:void(0)"),e.addEventListener("click",()=>{this.toggle()});let t=new h("#close-bottom-menu",this.footer.footerNode).getItem();t.setAttribute("href","javascript:void(0)"),t.addEventListener("click",()=>{this.toggle()})}toggle(){this.isOpened()?this.close():this.open()}isOpened(){return this.bottomMenu.hasClass("visible-flex")}open(){this.bottomMenu.addClass("visible-flex"),this.footer.open()}close(){this.bottomMenu.removeClass("visible-flex"),this.footer.close()}getContainer(){return this.bottomMenu}};var xt=class{constructor(e={}){this._setOptions(e),this._init()}_setOptions(e){let t=this;t.options=new u,t.options.merge(e)}_init(){this.document=document,this.document.addEventListener("click",e=>{let t=new l(e.target);this.eventClick(t,e)})}setTitle(e){this.document.title=e}eventClick(e,t){p("Document.eventClick()",e,t)}mailTo(e,t=""){this.document.location.href="mailto:"+e+"?subject="+t}};var It=class{constructor(){this._init()}_init(){this._detectOS(),this._detectBrowsers(),this._detectMissingFeatures()}_detectMissingFeatures(){this.features=[],this._setFeature("navigator.geolocation",navigator&&navigator.geolocation),this._setFeature("window.history",window.history),this._setFeature("window.localStorage",window.localStorage),this._setFeature("window.sessionStorage",window.sessionStorage),this._setFeature("window.btoa",window.btoa),this._setFeature("window.atob",window.atob),this._setFeature("console.log",console.log),this._setFeature("console.info",console.info),this._setFeature("console.warn",console.warn),this._setFeature("console.error",console.error)}detect(){Me(this.features)||this.eventMissingFeatures(this.features)}_setFeature(e,t){f(!!t,!1)&&this.features.push(e)}eventMissingFeatures(e){qe("Browser.eventMissingFeatures()",e)}_detectBrowsers(){this.browsers={};let e=window.navigator.userAgent.toLowerCase();this.browsers.webkit="WebkitAppearance"in document.documentElement.style,this.browsers.chromium=!!window.chrome,this.browsers.chrome=!!window.chrome&&!!window.chrome.webstore,this.browsers.opera=!!window.opera||/opera|opr/i.test(navigator.userAgent),this.browsers.firefox="MozAppearance"in document.documentElement.style,this.browsers.safari=/constructor/i.test(window.HTMLElement.name),this.browsers.IE10="behavior"in document.documentElement.style&&"-ms-user-select"in document.documentElement.style,this.browsers.lteIE10=!1,this.browsers.gteIE10=document.body.style.msTouchAction!==void 0,this.browsers.IE11="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,this.browsers.edge=e.indexOf("edge")!==-1,this.browsers.chromiumEdge=e.indexOf("edge")===-1&&e.indexOf("edg")!==-1}_detectOS(){this.os=null;let e=window.navigator.userAgent,t=window.navigator.platform,i=["Macintosh","MacIntel","MacPPC","Mac68K","darwin"],n=["Win32","Win64","Windows","WinCE"],o=["iPhone","iPad","iPod"];i.indexOf(t)!==-1?this.os="macOS":o.indexOf(t)!==-1?this.os="iOS":n.indexOf(t)!==-1?this.os="Windows":/Android/.test(e)?this.os="Android":/Linux/.test(t)&&(this.os="Linux")}isMacOS(){return this.os==="macOS"}isIOS(){return this.os==="iOS"}isWindows(){return this.os==="Windows"}isAndroid(){return this.os==="Android"}isLinux(){return this.os==="Linux"}isInternetExplorer(e){let t=this.browsers.lteIE10||this.browsers.gteIE10;if(e)switch(e){case 11:t=this.browsers.IE11;break;case 10:t=this.browsers.IE10;break;default:t=this.browsers.lteIE10;break}return t}isEdge(){return this.browsers.edge}isChromiumEdge(){return this.browsers.chromiumEdge}isFirefox(){return this.browsers.firefox}isChrome(){return this.browsers.chrome}isOpera(){return this.browsers.opera}isSafari(){return this.browsers.safari}isWebkit(){return this.browsers.webkit}isChromium(){return this.browsers.chromium}};var g=(s,e=!0)=>{let t=s||document;t instanceof l&&(t=t.getNode()),s?(e&&window.componentHandler.downgradeElements(t),window.componentHandler.upgradeElement(t)):window.componentHandler.upgradeDom()};var F=class{constructor(e,t="TOP"){this.element=e,this.valid=!1,this._initPositions(t),this._init()}_initPositions(e=""){switch(this.positionCssClass="mdl-tooltip--top",e){case"TOP":this.positionCssClass="mdl-tooltip--top";break;case"BOTTOM":this.positionCssClass="mdl-tooltip--bottom";break;case"LEFT":this.positionCssClass="mdl-tooltip--left";break;case"RIGHT":this.positionCssClass="mdl-tooltip--right";break}}_init(){this._createTooltip()}_getMessage(e=""){return e||(e=this.element.getAttribute("desc")||"",e&&this.tooltip.addClass("mdl-tooltip--large"),e=this.element.getAttribute("title")||e),e}_createTooltip(){let e=this.element.getId();Y(e)&&(e=U("tooltip"),this.element.setId(e),this.element.addClass("has-tooltip")),new h(O('[for="{0}"]',[e]),this.element).getItem().remove();let i=["mdl-tooltip",this.positionCssClass];this.tooltip=new l("span"),this.tooltip.addClass(i),this.tooltip.setFor(e),this.valid=this.element.insertAfter(this.tooltip)}render(e){let t=this._getMessage(e);this.setMessage(t),this._handleAttributes()}_handleAttributes(){this.valid&&(this.element.removeAttribute("desc"),this.element.removeAttribute("title"),g(this.tooltip))}setMessage(e=""){e?(this.tooltip.removeStyle(["display"]),this.tooltip.setHtml(e)):(this.tooltip.setStyle({display:"none"}),this.tooltip.setHtml(""))}open(){this.tooltip.addClass("is-active")}close(){this.tooltip.removeClass("is-active")}isOpen(){return this.tooltip.hasClass("is-active")}toggle(){this.isOpen()?this.close():this.open()}};var ve=class{_initBase(){this.windowWidth=0,this.windowHeight=0,this.mainContainerNode=new h(".main-container").getItem(),this.hasBlur=!1,this._initButtons()}_initButtons(){this._initCloseButton(),this._initMinimizeButton(),this._initMaximizeButton()}_initMinimizeButton(){let e=new h(".minimize",this.modal).getItem();e.isEmpty()||(e.addClass(["mdl-button","mdl-js-button","mdl-button--icon"]),e.addEventListener("click",()=>{this._actionMinimize()}),this.btnMinimize=e)}_initMaximizeButton(){let e=new h(".maximize",this.modal).getItem();e.isEmpty()||(e.addClass(["mdl-button","mdl-js-button","mdl-button--icon"]),e.addEventListener("click",()=>{this._actionMaximize()}),this.btnMaximize=e)}_initCloseButton(){let e=new h(".close",this.modal).getItem();e.isEmpty()||(e.addClass(["mdl-button","mdl-js-button","mdl-button--icon"]),e.addEventListener("click",()=>{this._actionCancel()}),this.btnClose=e)}isOpened(){return this.modal.hasClass("visible-flex")}_handleCloseButton(e=!0){this.btnClose&&(e?this.btnClose.removeClass("hidden"):this.btnClose.addClass("hidden"))}open(e=!0){this.hasBlur=this.mainContainerNode.hasClass("blur"),this.hasBlur||(this.mainContainerNode.addClass("blur"),this.body.addClass("overflow-hidden")),this.modal.addClass("visible-flex"),this.modal.removeClass("hidden"),this._handleCloseButton(e),this._handleCenterPosition(),this.interval=setInterval(()=>{this._handleCenterPosition()},1e3)}close(){clearInterval(this.interval),this.hasBlur||(this.mainContainerNode.removeClass("blur"),this.body.removeClass("overflow-hidden")),this.modal.addClass("hidden"),this.modal.removeClass("visible-flex"),this.modalTitle.removeChildren(),this.modalBody.removeChildren(),this.modalFooter.removeChildren()}_setTitle(e){this.modalTitle.setHtml(e),ee(e)&&e.length>0||Ye(e)?this.modalHeader.removeClass("hidden"):this.modalHeader.addClass("hidden"),this.tooltip.setMessage(e)}_reset(){this.eventOK=B(),this.eventCancel=B()}_actionOK(){let e=new Q,t=[this.eventOK.bind(this),this.close.bind(this)];e.serial(t)}_actionCancel(){let e=new Q,t=[this.eventCancel.bind(this),this.close.bind(this)];e.serial(t)}_actionMinimize(){}_actionMaximize(){}setSize(e,t){this.windowWidth=e,this.windowHeight=t,this._handleCenterPosition()}_handleCenterPosition(){let t=this.modalWindow.getComputedStyle().getPropertyValue("height");j(t,"px")?parseInt(t.slice(0,-2),10)>this.windowHeight?this.modal.removeClass("center"):this.modal.addClass("center"):this.modal.addClass("center")}};var kt=class extends ve{constructor(e={}){super();this._setOptions(e),this._init(),this._initBase()}_setOptions(e={}){let t=this;t.options=new u({id:"#confirm"}),t.options.merge(e)}_init(){this.body=new h("body").getItem(),this.modal=new h(this.options.id).getItem(),this.modalWindow=new h("#confirm-window",this.modal).getItem(),this.modalHeader=new h(".modal-header",this.modal).getItem(),this.modalTitle=new h(".modal-title",this.modalHeader).getItem(),this.modalBody=new h(".modal-body",this.modal).getItem(),this.modalFooter=new h(".modal-footer",this.modal).getItem(),this.tooltip=new F(this.modalTitle),this.tooltip.render()}load(e,t,i="",n="",o="normal"){if(this._reset(),this._setTitle(n),this.modalWindow.removeClass(["normal","info","warning","error","success","choice"]),this.modalWindow.addClass(o),this.modalBody.setHtml(e),this.modalFooter.removeChildren(),i){let d=["mdl-button","mdl-js-button","mdl-js-ripple-effect"];o==="choice"&&d.push("mdl-button--primary");let c=new l("button");c.setAttribute("type","button"),c.setHtml(i),c.addClass(d),c.addEventListener("click",this._actionCancel.bind(this)),this.modalFooter.appendChild(c)}let r=["mdl-button","mdl-js-button","mdl-js-ripple-effect","mdl-button--primary"],a=new l("button");a.setAttribute("type","button"),a.setHtml(t),a.addClass(r),a.addEventListener("click",this._actionOK.bind(this)),this.modalFooter.appendChild(a),g(this.modalFooter)}};var Tt=class{constructor(e={}){this._setOptions(e)}_setOptions(e={}){let t=this;t.options=new u({prefix:"app",hours:24}),t.options.merge(e)}_getPropertyName(e){return[this.options.prefix,e].join(".").replace(/\./g,"_")}_getName(e){let t=e.split("_");return t.shift(),t.join(".")}set(e,t,i="",n="/",o="",r=!1){let a=this._getPropertyName(e);if(!/^(?:expires|max\-age|path|domain|secure)$/i.test(a)){if(i)switch(i.constructor){case Number:i=i===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+i*60*60;break;case Date:i="; expires="+i.toUTCString();break;default:break}else{let d=new Date;d.setTime(d.getTime()+this.options.hours*60*60*1e3),i="; expires="+d.toUTCString()}document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(t)+i+(o?"; domain="+o:"")+(n?"; path="+n:"")+(r?"; secure":"")}}get(e){let t=this._getPropertyName(e),i=new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$");return C(decodeURIComponent(document.cookie.replace(i,"$1"))||null)}remove(e,t="",i="",n=!1){if(this.hasKey(e)){let o=new Date(1970,0,1);this.set(e,"",o,t,i,n)}}hasKey(e){let t=this._getPropertyName(e);return new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}getKeys(){let e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(let t=0;t<e.length;t++)e[t]=this._getName(decodeURIComponent(e[t]));return e}clear(){let e=this.getKeys();b(e,t=>{this.remove(t)})}};var Nt=class extends ve{constructor(e,t={}){super();this.http=e,this._setOptions(t),this._init(),this._initBase()}_setOptions(e={}){let t=this;t.options=new u({id:"#dialog"}),t.options.merge(e)}_init(){this.body=new h("body").getItem(),this.modal=new h(this.options.id,this.body).getItem(),this.modalWindow=new h("#dialog-window",this.modal).getItem(),this.modalHeader=new h(".modal-header",this.modal).getItem(),this.modalTitle=new h(".modal-title",this.modalHeader).getItem(),this.modalBody=new h(".modal-body",this.modal).getItem(),this.modalFooter=new h(".modal-footer",this.modal).getItem(),this.tooltip=new F(this.modalTitle),this.tooltip.render()}loadTemplate(e){this._reset();let t=new _;return this.http.get(e).then(i=>{let n=this._handleDom(i);t.resolve(n)},i=>{let n=this._handleMessage(i);t.reject(n),this.open()}),t.promise()}_handleMessage(e){let t=new h(".message",e).getItem(),i=new h("title",e).getItem();return this._setTitle(i.getText()),this.modalBody.insert(t),g(t),t}_handleDom(e){let t=new h("#title",e).getItem();t.isEmpty()||this._setTitle(t.getText());let i=new h("#content",e).getItem();return this.modalBody.insert(i),g(i),this._handleActions(e),i}_handleActions(e){let t=new h("#action",e).getItem();if(t.isEmpty())this.modalFooter.removeChildren();else{let i=new h("button",t),n=i.size(),o=[this._actionOK.bind(this)],r=["mdl-button--primary"];n===2&&(o=[this._actionCancel.bind(this),this._actionOK.bind(this)],r=["mdl-button--accent","mdl-button--primary"]),i.each((a,d)=>{let c=["mdl-button","mdl-js-button","mdl-js-ripple-effect"].concat([r[d]]);a.addClass(c),a.addEventListener("click",o[d])}),this.modalFooter.insert(t),g(t)}}};var Ot=class{constructor(e={}){this._setOptions(e),this._init()}_init(){this.container=new h(this.options.id).getItem()}_setOptions(e={}){let t=this;t.options=new u({id:"#flashes",duration:4e3,closableTypes:["error"]}),t.options.merge(e)}_getFlashNode(e,t,i=0,n=null,o=""){let r=this.container.createElement("div");if(r.setAttribute("data-id",o||U("flash")),r.addClass(["flash",e]),r.setHtml(t),this._isClosable(e,n)&&!f(i,1/0)){let a=this._getCloseButton(r,n);r.beforeChild(a)}return r}_getCloseButton(e,t=null){let i=e.createElement("button");i.addClass(["mdl-button","mdl-js-button","mdl-button--icon"]);let n=i.createElement("em");return n.addClass("material-icons"),n.setHtml("close"),i.appendChild(n),i.addEventListener("click",()=>{this.remove(e,t)}),g(i),i}_add(e,t,i=0,n=null,o=""){this.removeById(o);let r=this._getFlashNode(e,t,i,n,o);return this.container.appendChild(r),!this._isClosable(e,n)&&!f(i,1/0)&&(r.addClass("closable"),r.addEventListener("click",()=>{this.remove(r,n)}),window.setTimeout(()=>{this.remove(r,n)},i||this.options.duration)),r}removeById(e=""){if(e){let t=O("[data-id={0}]",[e]);new h(t,this.container).each(n=>{this.container.removeChild(n)})}}_isClosable(e,t=null){return this.options.closableTypes.indexOf(e)!==-1||M(t)}remove(e,t=null){M(t)&&t(),this.container.removeChild(e)}addSuccess(e,t=0,i=null,n=""){return this._add("success",e,t,i,n)}addInfo(e,t=0,i=null,n=""){return this._add("info",e,t,i,n)}addWarning(e,t=0,i=null,n=""){return this._add("warning",e,t,i,n)}addError(e,t=0,i=null,n=""){return this._add("error",e,t,i,n)}addMessage(e,t=0,i=null,n=""){if(E(e)){let o=e.closable?B:i;return this._add(e.type,e.content,t,o,n)}return null}addDefault(e,t=0,i=null,n=""){return this._add("default",e,t,i,n)}};var Mt=class{constructor(e={}){this._setOptions(e),this._init()}_setOptions(e={}){let t=this;t.options=new u,t.options.merge(e)}_init(){this.footerNode=new h("#footer").getItem(),this.templateViewNode=new h(".template-view").getItem(),this.contentNode=new h(".content",this.footerNode).getItem(),this.localesNode=new h(".locales",this.footerNode).getItem()}show(){this.footerNode.removeClass(["static","hidden","has-footer"]);let e=new h(".page-content.fullscreen",this.templateViewNode).getItem();e&&!e.isEmpty()&&(e.hasClass("light")?this.footerNode.addClass("dark"):this.footerNode.removeClass("dark"),this.footerNode.addClass("static"),this.templateViewNode.addClass("has-footer"))}hide(){this.footerNode.addClass("hidden"),this.footerNode.removeClass("static"),this.templateViewNode.removeClass("has-footer")}setContent(e){this.contentNode.appendChild(e)}getLocalesContainer(){return this.localesNode}open(){this.footerNode.addClass("open")}close(){this.footerNode.removeClass("open")}isOpened(){return this.footerNode.hasClass("open")}toogle(){this.isOpened()?this.close():this.open()}};var jt=class{constructor(){this._init()}_init(){this.options={enableHighAccuracy:!0,timeout:5e3,maximumAge:1/0}}setWatcher(){this.watcherId=navigator.geolocation.watchPosition(e=>{this._handlePosition(e)},e=>{this._handleError(e)},this.options)}getPosition(){let e=new _;return navigator.geolocation.getCurrentPosition(t=>{e.resolve([t.coords.latitude,t.coords.longitude])},t=>{e.reject([null,null])},this.options),e.promise()}clearWatcher(){navigator.geolocation.clearWatch(this.watcherId)}eventChange(e,t,i){p("GeoLocation.eventChange()",e,t,i)}_handlePosition(e){let t="User allowed the request for GeoLocation.";this.eventChange(e.coords.latitude,e.coords.longitude,t)}_handleError(e){switch(e.code){case e.PERMISSION_DENIED:this.eventError("User denied the request for GeoLocation.","permission_denied");break;case e.POSITION_UNAVAILABLE:this.eventError("Location information is unavailable.","position_unavailable");break;case e.TIMEOUT:this.eventError("The request to get user location timed out.","timeout");break;default:this.eventError("An unknown error occurred.","unknown");break}}eventError(e,t){p("GeoLocation.eventError()",e,t)}};var Et=class{createLink(e,t,i="javascript:void(0)",n="",o=!0,r=["link"]){let a=new l("a");return a.setHtml(e),this.linkElement(a,t,i,n,o,r),a}multipleLink(e,t,i,n=[]){new h(e,t).each(r=>{this.linkElement(r,i,"","",!0,n)})}link(e,t,i,n="",o="",r=!0,a=[]){let d=new h(e,t).getItem();return this.linkElement(d,i,n,o,r,a),d}linkElement(e,t,i="",n="",o=!0,r=[]){if(!e.isEmpty())if(o){if(e.addClass(r),e.getId()?e.removeEventListeners("click"):e.setId(U("link")),i&&e.setAttribute("href",i),t){let a=e.getAttribute("href");e.addEventListener("click",()=>{t(a,e)})}this._setTooltip(e,n)}else e.remove()}createButton(e,t,i="",n=!0,o=["mdl-button--primary"]){let r=new l("button");return r.setHtml(e),this.buttonElement(r,t,i,n,o),r}multipleButton(e,t,i,n=["mdl-button--primary"]){new h(e,t).each(r=>{this.buttonElement(r,i,"",!0,n)})}button(e,t,i,n="",o=!0,r=["mdl-button--primary"]){let a=new h(e,t).getItem();return this.buttonElement(a,i,n,o,r),a}buttonElement(e,t,i="",n=!0,o=["mdl-button--primary"]){if(!e.isEmpty())if(n){if(!e.getId())e.setId(U("button"));else{let a=e.getData("cssClasses");e.removeClass(a),e.removeEventListeners("click")}let r=["mdl-button","mdl-js-button","mdl-js-ripple-effect","mdl-button--raised"].concat(o);e.setData("cssClasses",r),e.addClass(r),t&&e.addEventListener("click",()=>{t(e.getId(),e)}),this._setTooltip(e,i)}else e.remove()}createIconButton(e,t,i="",n=!0,o=["mdl-button--accent","mdl-button--fab","mdl-button--mini-fab"]){let r=new l("button");return this._createIconNode(e,r),this.iconButtonElement(r,t,i,n,o),r}multipleIconButton(e,t,i=["mdl-button--accent","mdl-button--fab","mdl-button--mini-fab"]){new h(e,t).each(o=>{this.iconButtonElement(o,void 0,void 0,!0,i)})}iconButton(e,t,i,n="",o=!0,r=["mdl-button--accent","mdl-button--fab","mdl-button--mini-fab"]){let a=new h(e,t).getItem();return this.iconButtonElement(a,i,n,o,r),a}iconButtonElement(e,t,i="",n=!0,o=["mdl-button--accent","mdl-button--fab","mdl-button--mini-fab"]){if(!e.isEmpty())if(n){if(!e.getId())e.setId(U("button"));else{let a=e.getData("cssClasses");e.removeClass(a),e.removeEventListeners("click")}let r=["mdl-button","mdl-js-button","mdl-js-ripple-effect","mdl-button--icon"].concat(o);e.setData("cssClasses",r),e.addClass(r),t&&e.addEventListener("click",()=>{t(e.getId(),e)}),this._setTooltip(e,i)}else e.remove()}_createIconNode(e,t){let i=new l("em");i.addClass("material-icons"),i.setHtml(e),t.appendChild(i)}_setTooltip(e,t=""){t&&e.setAttribute("title",t),new F(e).render(t),g(e)}setGravatar(e,t,i,n=500,o="g"){let r=O("https://www.gravatar.com/avatar/{0}?s={1}&r={2}&d=404",[Ge(i),n,o]);e.setAttribute("src",r),e.setAttribute("onError",O("this.onerror=null;this.src='{0}';",[t]))}};var St=class{constructor(e={}){this._setOptions(e),this._init()}_setOptions(e={}){let t=this;t.options=new u({backend:"",locale:""}),t.options.merge(e)}_init(){this.requestHeaders={},this.authorization=null,this.types={},this._setTypes(),this.http=new XMLHttpRequest,this.http.onreadystatechange=this._onReadyStateChange(),this.deferred=new _}_setTypes(){this._setType("json",["application/json","json","application/json"]),this._setType("form",["application/x-www-form-urlencoded","json","application/json"]),this._setType("html",["","document","text/html"]),this._setType("svg",["","document","image/svg-xml"]),this._setType("xml",["","document","application/xml"])}_setType(e,t){this.types[e]=t}_getType(e){return this.types[e]||["","text","*/*"]}_getContentType(e){return this._getType(e)[0]}_getResponseType(e){return this._getType(e)[1]}_getAccept(e){return this._getType(e)[2]}_onReadyStateChange(){return(e,t)=>{switch(this.http.readyState){case 0:break;case 1:break;case 2:break;case 3:break;case 4:this._getResponseData(this.http.response).then(i=>{f(this.http.status,200)?this.deferred.resolve([this.http].concat(i)):this.deferred.reject([this.http].concat(i))});break;default:p("Xhr._onReadyStateChange()",this.http.readyState);break}}}get(e,t,i={}){return this._handleRequest("GET",e,{},t,i)}post(e,t,i,n={}){return this._handleRequest("POST",e,t,i,n)}put(e,t,i,n={}){return this._handleRequest("PUT",e,t,i,n)}patch(e,t,i,n={}){return this._handleRequest("PATCH",e,t,i,n)}delete(e,t,i,n={}){return this._handleRequest("DELETE",e,t,i,n)}_getUrl(e,t){let i=Ie(e,t);return e[0]==="/"?this.options.backend+i:i}_handleRequest(e,t,i,n,o={}){this.http.open(e,this._getUrl(t,n),!0);let r=ze(t);return this._setResponseType(r),this._setRequestHeaders(r,o),this.http.send(this._getRequestData(i)),this.deferred.promise()}_getRequestData(e){let t="";if(e)switch(this.getHeader("Content-Type")){case this._getContentType("json"):t=JSON.stringify(e);break;case this._getContentType("form"):t=this._stringifyObject(e);break}return t}_parseObject(e,t,i){i+=i?"["+t+"]":t;let n=[];if(e instanceof Array){i+="[]";for(let o=0;o<e.length;o++)n.push([i,e[o]].join("="))}else if(typeof e=="object"){for(let o in e)if(e.hasOwnProperty(o)){let r=this._parseObject(e[o],o,i);n=n.concat(r)}}else n.push([i,e].join("="));return n}_stringifyObject(e){let t=[];for(let i in e)if(e.hasOwnProperty(i)){let n=this._parseObject(e[i],i,"");t=t.concat(n)}return t.join("&")}_getFilenameFromHeader(){let e="";try{if(!this.http.responseURL.startsWith(this.options.backend))return;let t=this.http.getResponseHeader("Content-Disposition");t&&(e=t.match(/filename="(.+)"/)[1])}catch(t){}return e}_getResponseData(e){let t=new _,i=this._getFilenameFromHeader(),n=this.http.getResponseHeader("Content-Type");if(n)switch(n.split(";")[0]){case"application/json":if(z(e,Blob)){let o=new FileReader;o.addEventListener("loadend",r=>{e=JSON.parse(r.target.result||"null");let a=new u;a.merge(e),t.resolve([[a,i]])}),o.readAsText(e)}else{e=ee(e)?JSON.parse(e||"null"):e;let o=new u;o.merge(e),t.resolve([[o,i]])}break;default:t.resolve([[e,i]]);break}return t.promise()}_setRequestHeaders(e,t={}){G(t,(i,n)=>{f(n,"responseType")?this.http.responseType=i:this.setHeader(n,i)}),T(this.getHeader("Accept"))&&this.setHeader("Accept",this._getAccept(e)),T(this.getHeader("Accept-Language"))&&this.setHeader("Accept-Language",this.options.locale),T(this.getHeader("Content-Type"))&&this.setHeader("Content-Type",this._getContentType(e)),T(this.getHeader("Authorization"))&&this.authorization&&(this.setHeader("Authorization",this.authorization),this.http.withCredentials=!0),T(this.getHeader("X-Requested-With"))&&this.setHeader("X-Requested-With","XMLHttpRequest")}_setResponseType(e){this.http.responseType=this._getResponseType(e)}setHeader(e,t){e&&t&&this.http.setRequestHeader(e,t),this.requestHeaders[e]=t}getHeader(e){return this.requestHeaders[e]}setBasicAuthorization(e,t){if(e&&t){let i=[e,t].join(":");this.authorization="Basic "+Qe(i)}}setBearerAuthorization(e){e&&(this.authorization="Bearer "+e)}};var Dt=class{constructor(e={}){this._setOptions(e),this._init()}_setOptions(e={}){let t=this;t.options=new u({backend:"",locale:""}),t.options.merge(e)}_init(){this.username=null,this.password=null,this.token=null}setBasicAuthorization(e,t){this.username=e,this.password=t}setBearerAuthorization(e){this.token=e}get(e,t,i){let n=this._getRequestHandler();return this._getPromise(n.get(e,t,i))}post(e,t,i,n){let o=this._getRequestHandler();return this._getPromise(o.post(e,t,i,n))}put(e,t,i,n){let o=this._getRequestHandler();return this._getPromise(o.put(e,t,i,n))}patch(e,t,i,n){let o=this._getRequestHandler();return this._getPromise(o.patch(e,t,i,n))}delete(e,t,i,n){let o=this._getRequestHandler();return this._getPromise(o.delete(e,t,i,n))}_getRequestHandler(){let e=new St(this.options);return this.eventBeforeRequest(e),e.setBasicAuthorization(this.username,this.password),e.setBearerAuthorization(this.token),e}_getPromise(e){let t=new _;return e.then((...i)=>{this.eventAfterRequest(...i),t.resolve.apply(t,[i.slice(1)])},(...i)=>{this.eventAfterRequest(...i),t.reject.apply(t,[i.slice(1)])}),t.promise()}eventBeforeRequest(e){p("Http.eventBeforeRequest",e)}eventAfterRequest(e,t){p("Http.eventAfterRequest",e,t)}};var Pt=class{constructor(){this._init()}_init(){this.body=new h("body").getItem(),this.mainContainerNode=new h(".main-container").getItem(),this.leftMenu=new h("#left-menu").getItem(),this.mainMenu=new h(".main-menu",this.leftMenu).getItem(),this.subMenu=new h(".sub-menu",this.leftMenu).getItem(),this.subMenu.addClass("hidden"),this.mainMenuContainer=new h(".menu-container",this.mainMenu).getItem(),this.subMenuContainer=new h(".menu-container",this.subMenu).getItem(),this.mainMenuTitle=new h("h3",this.mainMenu).getItem(),this.subMenuTitle=new h("h3",this.subMenu).getItem(),this._initEvents()}_initEvents(){this.leftMenu.addEventListener("click",()=>{this.close()}),this.mainMenuContainer.addEventListener("click",()=>(B(),!0)),this.subMenuContainer.addEventListener("click",()=>(B(),!0));let e=new h("#open-left-menu").getItem();e.setAttribute("href","javascript:void(0)"),e.addEventListener("click",()=>{this.open()});let t=new h("#close-left-menu",this.mainMenu).getItem();t.setAttribute("href","javascript:void(0)"),t.addEventListener("click",()=>{this.close()});let i=new h("#close-sub-menu",this.subMenu).getItem();i.setAttribute("href","javascript:void(0)"),i.addEventListener("click",()=>{this.closeSubMenu()})}open(e=""){this.body.addClass("overflow-hidden"),this.mainContainerNode.addClass("blur"),this.leftMenu.addClass("visible"),this.mainMenuTitle.setHtml(e)}close(){this.body.removeClass("overflow-hidden"),this.mainContainerNode.removeClass("blur"),this.leftMenu.removeClass("visible")}openSubMenu(e=""){this.mainMenu.addClass("hidden"),this.subMenu.removeClass("hidden"),this.subMenuTitle.setHtml(e)}closeSubMenu(){this.mainMenu.removeClass("hidden"),this.subMenu.addClass("hidden")}getMainContainer(){return this.mainMenuContainer}getSubContainer(){return this.subMenuContainer}};var Lt=class{constructor(e={}){this._setOptions(e),this._init()}_setOptions(e={}){let t=this;t.options=new u({counter:0}),t.options.merge(e)}_init(){this.loader=new h("#loader").getItem(),this.spinner=this.loader.createElement("div"),this.spinner.addClass(["mdl-spinner","mdl-spinner--single-color","mdl-js-spinner"]),this.loader.appendChild(this.spinner)}show(){this.options.counter++,this.loader.removeClass("hidden"),this.spinner.addClass("is-active")}hide(e){this.options.counter--,(e||f(this.options.counter,0))&&(this.options.counter=0,this.loader.addClass("hidden"),this.spinner.removeClass("is-active"))}};var At=class{constructor(){this._init()}_init(){this.navBarHeader=new h(".nav-bar-header").getItem(),this.navBar=new h("#nav-bar",this.navBarHeader).getItem();let e=new h("#toggle-nav-bar",this.navBarHeader).getItem();e.setAttribute("href","javascript:void(0)"),e.addEventListener("click",()=>{this.toggle()}),this.toggleNavBarIcon=new h("em",e).getItem()}toggle(){this.isOpened()?this.close():this.open()}isOpened(){return this.navBar.hasClass("open")}open(){this.navBar.addClass("open"),this.toggleNavBarIcon.setHtml("close")}close(){this.navBar.removeClass("open"),this.toggleNavBarIcon.setHtml("menu")}show(){this.navBarHeader.removeClass("hidden")}hide(){this.navBarHeader.addClass("hidden")}showShadow(){this.navBar.addClass("shadow")}hideShadow(){this.navBar.removeClass("shadow")}getContainer(){return this.navBar}};var Ht=class{constructor(e,t,i={}){this.dialog=e,this.confirm=t,this._setOptions(i),this._init()}_setOptions(e={}){let t=this;t.options=new u({lock:!1,counter:0}),t.options.merge(e)}_init(){this.progressBarContainer=new h(".main-container > .progress-bar").getItem(),this.progressBarHeader=new h("#header > .progress-bar").getItem(),this.progressBarDialog=new h("#dialog-window > .progress-bar").getItem(),this.progressBarConfirm=new h("#confirm-window > .progress-bar").getItem(),this.async=new Q(4),this.async.eventComplete=(e,t)=>{t[0].MaterialProgress&&(this.mProgressContainer=t[0].MaterialProgress),t[1].MaterialProgress&&(this.mProgressHeader=t[1].MaterialProgress),t[2].MaterialProgress&&(this.mProgressDialog=t[2].MaterialProgress),t[3].MaterialProgress&&(this.mProgressConfirm=t[3].MaterialProgress),this.progressValue&&this.setProgress(this.progressValue),this.progressValue=0,this.bufferValue&&this.setBuffer(this.bufferValue),this.bufferValue=0},this.progressValue=0,this.bufferValue=0,this.mProgressContainer=this._getProgressBar(this.progressBarContainer),this.mProgressHeader=this._getProgressBar(this.progressBarHeader),this.mProgressDialog=this._getProgressBar(this.progressBarDialog),this.mProgressConfirm=this._getProgressBar(this.progressBarConfirm)}_getProgressBar(e){return e.addClass("mdl-js-progress"),e.addEventListener("mdl-componentupgraded",t=>{this.async.parallelFunction(()=>t)}),{setProgress:t=>{this.progressValue=t},setBuffer:t=>{this.bufferValue=t}}}_separateProgressBars(e,t,i,n){e(!this.dialog.isOpened()&&!this.confirm.isOpened()),t(!this.dialog.isOpened()&&!this.confirm.isOpened()),i(this.dialog.isOpened()&&!this.confirm.isOpened()),n(this.confirm.isOpened())}_progress(){this.options.get("lock")||this._separateProgressBars(e=>{e?this.progressBarContainer.addClass("mdl-progress"):this.progressBarContainer.removeClass("mdl-progress")},e=>{e?this.progressBarHeader.addClass("mdl-progress"):this.progressBarHeader.removeClass("mdl-progress")},e=>{e?this.progressBarDialog.addClass("mdl-progress"):this.progressBarDialog.removeClass("mdl-progress")},e=>{e?this.progressBarConfirm.addClass("mdl-progress"):this.progressBarConfirm.removeClass("mdl-progress")})}show(){this._progress(),this.options.counter++,this._separateProgressBars(e=>{e?this.progressBarContainer.addClass("mdl-progress__indeterminate"):this.progressBarContainer.removeClass("mdl-progress__indeterminate")},e=>{e?this.progressBarHeader.addClass("mdl-progress__indeterminate"):this.progressBarHeader.removeClass("mdl-progress__indeterminate")},e=>{e?this.progressBarDialog.addClass("mdl-progress__indeterminate"):this.progressBarDialog.removeClass("mdl-progress__indeterminate")},e=>{e?this.progressBarConfirm.addClass("mdl-progress__indeterminate"):this.progressBarConfirm.removeClass("mdl-progress__indeterminate")})}setProgress(e){this._progress(),this._separateProgressBars(t=>{t&&this.mProgressContainer.setProgress(e)},t=>{t&&this.mProgressHeader.setProgress(e)},t=>{t&&this.mProgressDialog.setProgress(e)},t=>{t&&this.mProgressConfirm.setProgress(e)})}setBuffer(e){this._progress(),this._separateProgressBars(t=>{t&&this.mProgressContainer.setBuffer(e)},t=>{t&&this.mProgressHeader.setBuffer(e)},t=>{t&&this.mProgressDialog.setBuffer(e)},t=>{t&&this.mProgressConfirm.setBuffer(e)})}hide(e){this.options.counter--,(e||f(this.options.counter,0))&&(this.options.counter=0,this.progressBarContainer.removeClass(["mdl-progress","mdl-progress__indeterminate"]),this.progressBarHeader.removeClass(["mdl-progress","mdl-progress__indeterminate"]),this.progressBarDialog.removeClass(["mdl-progress","mdl-progress__indeterminate"]),this.progressBarConfirm.removeClass(["mdl-progress","mdl-progress__indeterminate"]))}lock(){this.options.set("lock",!0)}unlock(){this.options.set("lock",!1)}};var Bt=class{constructor(e,t={}){this.progressBar=e,this._setOptions(t),this._init()}_setOptions(e={}){let t=this;t.options=new u,t.options.merge(e)}_init(){this.head=new h("head").getItem()}load(e,t,i,n=!1,o=!1){this.progressBar.show();let r=new _;if(new h("#"+e).size()>0)this.progressBar.hide(),r.resolve();else{let d=new l("script");d.setId(e),d.setAttribute("src",Ie(t,i)),n&&d.setAttribute("async"),o&&d.setAttribute("defer"),d.setAttribute("onload",()=>{this.progressBar.hide(),r.resolve()}),d.setAttribute("onerror",()=>{this.progressBar.hide(),r.reject()}),this.head.appendChild(d)}return r.promise()}remove(e){let t=new h("#"+e).getItem();t.isEmpty()||t.remove()}};var Xe=class{constructor(e){this.selector=e,this._init()}_init(){this.sidebar=new h(this.selector).getItem(),this.button=new h("a",this.sidebar).getItem(),this.button.setAttribute("href","javascript:void(0)"),this.button.addEventListener("click",()=>{this.toggle()})}toggle(){this.isOpened()?this.close():this.open()}isOpened(){return this.sidebar.hasClass("open")}open(){this.sidebar.addClass("open")}close(){this.sidebar.removeClass("open")}show(){this.sidebar.removeClass("hidden")}hide(){this.sidebar.addClass("hidden")}setButtonPosition(e,t){let i=Math.round(e+t/2);this.button.setStyle({top:i+"px"})}};var Ft=class{constructor(e,t={}){this.progressBar=e,this._setOptions(t),this._init()}_setOptions(e={}){let t=this;t.options=new u,t.options.merge(e)}_init(){this.head=new h("head").getItem()}load(e,t,i,n="stylesheet",o="all"){this.progressBar.show();let r=new _;if(new h("#"+e).size()>0)this.progressBar.hide(),r.resolve(!0);else{let d=new l("link");d.setId(e),d.setAttribute("href",Ie(t,i)),d.setAttribute("rel",n),d.setAttribute("media",o),d.setAttribute("onload",()=>{this.progressBar.hide(),r.resolve(!0)}),d.setAttribute("onerror",()=>{this.progressBar.hide(),r.reject(!1)}),this.head.appendChild(d)}return r.promise()}remove(e){let t=new h("#"+e).getItem();t.isEmpty()||t.remove()}};var Wt=class{constructor(e,t={}){this.http=e,this._setOptions(t),this._init()}_setOptions(e={}){let t=this;t.options=new u({selector:".template-view",locale:navigator.language}),t.options.merge(e)}_init(){this.viewNode=new h(this.options.selector).getItem()}getViewNode(){return this.viewNode}load(e,t=!1){let i=new _,n=this.viewNode.getAttribute("data-template-url"),o=this.viewNode.getAttribute("data-locale");if(!t&&j(this.options.locale,o)&&j(e,n)){this.viewNode.removeAttribute("data-locale");let r=new h(".page-content",this.viewNode).getItem();i.resolve(r)}else this.viewNode.setAttribute("data-template-url",e),this.http.get(e).then(r=>{i.resolve(this._handleData(r,!1))},r=>{i.reject(this._handleData(r,!0))});return i.promise()}_handleData(e,t){let i=new h(".page-content",e).getItem();if(t){let n=new h(".message",i).getItem(),o={content:n.getText(),type:n.getAttribute("class").split(" ")[1]};this.eventError(o)}else this.viewNode.insert(i);return i}eventError(e){p("Template.eventError()",e)}};var Rt=class{constructor(e){this.header=e,this._init()}_init(){this.topMenu=new h("#top-menu",this.header.headerNode).getItem(),this.toggleTopMenu=new h("#toggle-top-menu",this.header.headerNode).getItem(),this.toggleTopMenu.setAttribute("href","javascript:void(0)"),this.toggleTopMenu.addEventListener("click",()=>{this.toggle()})}toggle(){this.isOpened()?this.close():this.open()}isOpened(){return this.topMenu.hasClass("visible-flex")}open(){this.header.open(),this.topMenu.addClass("visible-flex"),this.toggleTopMenu.addClass("active"),this.header.showShadow()}close(){this.header.close(),this.topMenu.removeClass("visible-flex"),this.toggleTopMenu.removeClass("active"),this.header.hideShadow()}getContainer(){return this.topMenu}};var Yt=class extends ve{constructor(e={}){super();this._setOptions(e),this._init(),this._initBase()}_setOptions(e={}){let t=this;t.options=new u({id:"#viewer"}),t.options.merge(e)}_init(){this.body=new h("body").getItem(),this.modal=new h(this.options.id,this.body).getItem(),this.modalWindow=new h("#viewer-window",this.modal).getItem(),this.modalHeader=new h(".modal-header",this.modal).getItem(),this.modalTitle=new h(".modal-title",this.modalHeader).getItem(),this.modalBody=new h(".modal-body",this.modal).getItem(),this.modalFooter=new h(".modal-footer",this.modal).getItem(),this.tooltip=new F(this.modalTitle,"BOTTOM"),this.tooltip.render()}loadImage(e,t=""){this._reset(),this._setImage(e),this._setTitle(t),this.open()}_setImage(e){let t=new l("img");t.setAttribute("src",e),this.modalBody.appendChild(t)}};var Ke=class{constructor(e){let t=this;t.options=new u({type:"local",prefix:"app",secret:"",hours:24*7,interval:60*1e3}),t.options.merge(e),this._init()}_init(){this.storage=this.options.type==="local"?window.localStorage:window.sessionStorage,setInterval(()=>{this._checkExpires()},this.options.interval)}_getPropertyName(e){return[this.options.prefix,e].join(".")}_getName(e){let t=e.split(".");return t.shift(),t.join(".")}set(e,t,i){let o=this._getExpires(i)+";"+_t(t,this.options.secret),r=this._getPropertyName(e);this.storage.setItem(r,o)}get(e){let t=this._getPropertyName(e),i=this.storage.getItem(t),n=null;if(i&&i.indexOf(";")!==-1){let o=i.split(";",2)[1]||_t(null,this.options.secret),r=Bi(o,this.options.secret);n=C(r)}return n}remove(e){let t=this._getPropertyName(e);this.storage.removeItem(t)}clear(){this.storage.clear()}_checkExpires(){let e=Object.keys(this.storage);q(e,t=>{let i=this._getName(t);this._isExpired(i)&&this.remove(i)})}_isExpired(e){let t=new Date,i=this._getExpiresDate(e);return!!i&&t.getTime()>=i.getTime()}_getExpiresDate(e){let t=this._getPropertyName(e),i=this.storage.getItem(t);if(i){let n=i.split(";",2)[0];return new Date(n)}return null}_getExpires(e){let t=new Date;if(e)switch(e.constructor){case Number:t.setTime(t.getTime()+e*60*60*1e3),e=e===1/0?"Fri, 31 Dec 9999 23:59:59 GMT":t.toUTCString();break;case Date:e=e.toUTCString();break;default:break}else t.setTime(t.getTime()+this.options.hours*60*60*1e3),e=t.toUTCString();return e}};var Ut=class{constructor(){this._init()}_init(){"serviceWorker"in navigator||this.eventMissingFeatures(["navigator.serviceWorker"])}eventMissingFeatures(e){p("ServiceWorker.eventMissingFeatures()",e)}};var zt=class{constructor(e={}){this._setOptions(e),this._init()}_setOptions(e={}){let t=this;t.options=new u,t.options.merge(e)}_init(){this.headerNode=new h("#header").getItem(),this.leftMenuButton=new h("#open-left-menu",this.headerNode).getItem(),this.topMenuButton=new h("#toggle-top-menu",this.headerNode).getItem(),this.brandNode=new h(".brand",this.headerNode).getItem(),this.brandNode.setAttribute("href","javascript:void(0)"),this.brandNode.addEventListener("click",()=>{this.eventLogoClick()}),this.brandNodeImage=new h(".brand img",this.brandNode).getItem(),this.brandNodeTitle=new h(".brand .app-title",this.brandNode).getItem(),this.mainContainerNode=new h(".main-container").getItem(),this.templateViewNode=new h(".template-view").getItem()}eventLogoClick(){p("Header.eventLogoClick()")}setTitle(e){this.brandNodeTitle.setHtml(e)}setUrl(e){this.brandNode.setAttribute("href",e)}setImage(e){this.brandNodeImage.setAttribute("src",e)}open(){this.headerNode.addClass("open")}close(){this.headerNode.removeClass("open")}show(){this.headerNode.removeClass("hidden"),this.mainContainerNode.addClass("header-padding"),this.templateViewNode.addClass("has-header")}hide(){this.headerNode.addClass("hidden"),this.mainContainerNode.removeClass("header-padding"),this.templateViewNode.removeClass("has-header")}showShadow(){this.headerNode.addClass("shadow")}hideShadow(){this.headerNode.removeClass("shadow")}showLeftMenuButton(){this.leftMenuButton.removeClass("hidden")}hideLeftMenuButton(){this.leftMenuButton.addClass("hidden")}showTopMenuButton(){this.topMenuButton.removeClass("hidden")}hideTopMenuButton(){this.topMenuButton.addClass("hidden")}};var Vt=class{constructor(){this.eventStore=new u}set(e,t){if(M(t)){let i=this.eventStore.get(e,[]);i.push(t),this.eventStore.set(e,i)}return t}remove(e,t){let i=this.eventStore.get(e,[]),n=i.indexOf(t);n>-1&&i.splice(n,1)}pop(e){let t=this.eventStore.get(e,[]);t.pop(),this.eventStore.set(e,t)}call(e,t=[]){let i=this.eventStore.get(e,[B()]);return new Q().serial(i,t)}override(e,t,i){let n=this.eventStore.get(e,[i]);return new Q().serial(n,t)}};var qt=class{constructor(){this.schedulerStore=new u,this._callRunner()}_callRunner(){}everyDay(e,t){let i=e;if(M(t)){let n=this.schedulerStore.get(i,[]);n.push(t),this.schedulerStore.set(i,n)}return t}};var Qt=class{constructor(e={}){this._setOptions(e),this._init()}_setOptions(e={}){let t=this;t.options=new u({delay:250}),t.options.merge(e)}_init(){this.window=window,this.document=document,this.orientation=this.getOrientation(),this._initResizeEvent(),this._initScrollEvent(),this._initConnectionEvent(),this._initColorSchemeEvent()}_initResizeEvent(){this.window.addEventListener("resize",ct(e=>{this._resize(e)},this.options.delay),!1)}_initScrollEvent(){this.window.addEventListener("scroll",ct(e=>{this._scroll(e)},this.options.delay),!1)}_initConnectionEvent(){this.window.addEventListener("online",e=>{this.eventOnline(e)},!1),this.window.addEventListener("offline",e=>{this.eventOffline(e)},!1)}eventOffline(e){p("Window.eventOffline()",e)}eventOnline(e){p("Window.eventOffline()",e)}eventResize(e,t,i){p("Window.eventResize()",e,t,i)}eventOrientationChange(e,t,i,n){p("Window.eventOrientationChange()",e,t,i,n)}eventScroll(e,t){p("Window.eventScroll()",e,t)}_resize(e){this.eventResize(this.getWidth(),this.getHeight(),e);let t=this.getOrientation();ye(this.orientation,t)&&(this.orientation=t,this.eventOrientationChange(this.orientation,this.getWidth(),this.getHeight(),e))}_scroll(e){this.eventScroll(this.getScrollTop(),e)}getScrollTop(){return this.document.documentElement.scrollTop||this.document.body.scrollTop}getWidth(){return this.window.innerWidth}getHeight(){return this.window.innerHeight}getOrientation(){return Ai(this.getWidth(),this.getHeight())?"landscape":"portrait"}_initColorSchemeEvent(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{e.matches?this.eventColorSchemeChange("dark",e):this.eventColorSchemeChange("light",e)})}eventColorSchemeChange(e,t){p("Window.eventColorSchemeChange()",e,t)}isColorScheme(e){return window.matchMedia&&window.matchMedia(`(prefers-color-scheme: ${e})`).matches}};function x(s){if(s===null||s===!0||s===!1)return NaN;var e=Number(s);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function w(s,e){if(e.length<s)throw new TypeError(s+" argument"+(s>1?"s":"")+" required, but only "+e.length+" present")}function I(s){w(1,arguments);var e=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&e==="[object Date]"?new Date(s.getTime()):typeof s=="number"||e==="[object Number]"?new Date(s):((typeof s=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function Fi(s,e){w(2,arguments);var t=I(s).getTime(),i=x(e);return new Date(t+i)}function Je(s){var e=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return e.setUTCFullYear(s.getFullYear()),s.getTime()-e.getTime()}var In=Math.pow(10,8)*24*60*60*1e3,Wi=6e4,Ri=36e5;var tc=-In;function Yi(s){return w(1,arguments),s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function Ui(s){if(w(1,arguments),!Yi(s)&&typeof s!="number")return!1;var e=I(s);return!isNaN(Number(e))}var kn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Tn=function(s,e,t){var i,n=kn[s];return typeof n=="string"?i=n:e===1?i=n.one:i=n.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i},vs=Tn;function me(s){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):s.defaultWidth,i=s.formats[t]||s.formats[s.defaultWidth];return i}}var Nn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},On={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Mn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jn={date:me({formats:Nn,defaultWidth:"full"}),time:me({formats:On,defaultWidth:"full"}),dateTime:me({formats:Mn,defaultWidth:"full"})},bs=jn;var En={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Sn=function(s,e,t,i){return En[s]},ws=Sn;function $(s){return function(e,t){var i=t||{},n=i.context?String(i.context):"standalone",o;if(n==="formatting"&&s.formattingValues){var r=s.defaultFormattingWidth||s.defaultWidth,a=i.width?String(i.width):r;o=s.formattingValues[a]||s.formattingValues[r]}else{var d=s.defaultWidth,c=i.width?String(i.width):s.defaultWidth;o=s.values[c]||s.values[d]}var m=s.argumentCallback?s.argumentCallback(e):e;return o[m]}}var Dn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Pn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ln={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},An={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Hn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Bn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Fn=function(s,e){var t=Number(s),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Wn={ordinalNumber:Fn,era:$({values:Dn,defaultWidth:"wide"}),quarter:$({values:Pn,defaultWidth:"wide",argumentCallback:function(s){return s-1}}),month:$({values:Ln,defaultWidth:"wide"}),day:$({values:An,defaultWidth:"wide"}),dayPeriod:$({values:Hn,defaultWidth:"wide",formattingValues:Bn,defaultFormattingWidth:"wide"})},_s=Wn;function Z(s){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.width,n=i&&s.matchPatterns[i]||s.matchPatterns[s.defaultMatchWidth],o=e.match(n);if(!o)return null;var r=o[0],a=i&&s.parsePatterns[i]||s.parsePatterns[s.defaultParseWidth],d=Array.isArray(a)?Yn(a,function(v){return v.test(r)}):Rn(a,function(v){return v.test(r)}),c;c=s.valueCallback?s.valueCallback(d):d,c=t.valueCallback?t.valueCallback(c):c;var m=e.slice(r.length);return{value:c,rest:m}}}function Rn(s,e){for(var t in s)if(s.hasOwnProperty(t)&&e(s[t]))return t}function Yn(s,e){for(var t=0;t<s.length;t++)if(e(s[t]))return t}function $e(s){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.match(s.matchPattern);if(!i)return null;var n=i[0],o=e.match(s.parsePattern);if(!o)return null;var r=s.valueCallback?s.valueCallback(o[0]):o[0];r=t.valueCallback?t.valueCallback(r):r;var a=e.slice(n.length);return{value:r,rest:a}}}var Un=/^(\d+)(th|st|nd|rd)?/i,zn=/\d+/i,Vn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qn={any:[/^b/i,/^(a|c)/i]},Qn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Gn={any:[/1/i,/2/i,/3/i,/4/i]},Xn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Kn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Jn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$n={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Zn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eo={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},to={ordinalNumber:$e({matchPattern:Un,parsePattern:zn,valueCallback:function(s){return parseInt(s,10)}}),era:Z({matchPatterns:Vn,defaultMatchWidth:"wide",parsePatterns:qn,defaultParseWidth:"any"}),quarter:Z({matchPatterns:Qn,defaultMatchWidth:"wide",parsePatterns:Gn,defaultParseWidth:"any",valueCallback:function(s){return s+1}}),month:Z({matchPatterns:Xn,defaultMatchWidth:"wide",parsePatterns:Kn,defaultParseWidth:"any"}),day:Z({matchPatterns:Jn,defaultMatchWidth:"wide",parsePatterns:$n,defaultParseWidth:"any"}),dayPeriod:Z({matchPatterns:Zn,defaultMatchWidth:"any",parsePatterns:eo,defaultParseWidth:"any"})},ys=to;var io={code:"en-US",formatDistance:vs,formatLong:bs,formatRelative:ws,localize:_s,match:ys,options:{weekStartsOn:0,firstWeekContainsDate:1}},be=io;function Ze(s,e){w(2,arguments);var t=x(e);return Fi(s,-t)}var so=864e5;function zi(s){w(1,arguments);var e=I(s),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var i=e.getTime(),n=t-i;return Math.floor(n/so)+1}function oe(s){w(1,arguments);var e=1,t=I(s),i=t.getUTCDay(),n=(i<e?7:0)+i-e;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function et(s){w(1,arguments);var e=I(s),t=e.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(t+1,0,4),i.setUTCHours(0,0,0,0);var n=oe(i),o=new Date(0);o.setUTCFullYear(t,0,4),o.setUTCHours(0,0,0,0);var r=oe(o);return e.getTime()>=n.getTime()?t+1:e.getTime()>=r.getTime()?t:t-1}function Vi(s){w(1,arguments);var e=et(s),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var i=oe(t);return i}var no=6048e5;function tt(s){w(1,arguments);var e=I(s),t=oe(e).getTime()-Vi(e).getTime();return Math.round(t/no)+1}function te(s,e){w(1,arguments);var t=e||{},i=t.locale,n=i&&i.options&&i.options.weekStartsOn,o=n==null?0:x(n),r=t.weekStartsOn==null?o:x(t.weekStartsOn);if(!(r>=0&&r<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var a=I(s),d=a.getUTCDay(),c=(d<r?7:0)+d-r;return a.setUTCDate(a.getUTCDate()-c),a.setUTCHours(0,0,0,0),a}function ke(s,e){w(1,arguments);var t=I(s),i=t.getUTCFullYear(),n=e||{},o=n.locale,r=o&&o.options&&o.options.firstWeekContainsDate,a=r==null?1:x(r),d=n.firstWeekContainsDate==null?a:x(n.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(i+1,0,d),c.setUTCHours(0,0,0,0);var m=te(c,e),v=new Date(0);v.setUTCFullYear(i,0,d),v.setUTCHours(0,0,0,0);var N=te(v,e);return t.getTime()>=m.getTime()?i+1:t.getTime()>=N.getTime()?i:i-1}function qi(s,e){w(1,arguments);var t=e||{},i=t.locale,n=i&&i.options&&i.options.firstWeekContainsDate,o=n==null?1:x(n),r=t.firstWeekContainsDate==null?o:x(t.firstWeekContainsDate),a=ke(s,e),d=new Date(0);d.setUTCFullYear(a,0,r),d.setUTCHours(0,0,0,0);var c=te(d,e);return c}var oo=6048e5;function it(s,e){w(1,arguments);var t=I(s),i=te(t,e).getTime()-qi(t,e).getTime();return Math.round(i/oo)+1}function k(s,e){for(var t=s<0?"-":"",i=Math.abs(s).toString();i.length<e;)i="0"+i;return t+i}var ro={y:function(s,e){var t=s.getUTCFullYear(),i=t>0?t:1-t;return k(e==="yy"?i%100:i,e.length)},M:function(s,e){var t=s.getUTCMonth();return e==="M"?String(t+1):k(t+1,2)},d:function(s,e){return k(s.getUTCDate(),e.length)},a:function(s,e){var t=s.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h:function(s,e){return k(s.getUTCHours()%12||12,e.length)},H:function(s,e){return k(s.getUTCHours(),e.length)},m:function(s,e){return k(s.getUTCMinutes(),e.length)},s:function(s,e){return k(s.getUTCSeconds(),e.length)},S:function(s,e){var t=e.length,i=s.getUTCMilliseconds(),n=Math.floor(i*Math.pow(10,t-3));return k(n,e.length)}},pe=ro;var De={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ao={G:function(s,e,t){var i=s.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(s,e,t){if(e==="yo"){var i=s.getUTCFullYear(),n=i>0?i:1-i;return t.ordinalNumber(n,{unit:"year"})}return pe.y(s,e)},Y:function(s,e,t,i){var n=ke(s,i),o=n>0?n:1-n;if(e==="YY"){var r=o%100;return k(r,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):k(o,e.length)},R:function(s,e){var t=et(s);return k(t,e.length)},u:function(s,e){var t=s.getUTCFullYear();return k(t,e.length)},Q:function(s,e,t){var i=Math.ceil((s.getUTCMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return k(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(s,e,t){var i=Math.ceil((s.getUTCMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return k(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(s,e,t){var i=s.getUTCMonth();switch(e){case"M":case"MM":return pe.M(s,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(s,e,t){var i=s.getUTCMonth();switch(e){case"L":return String(i+1);case"LL":return k(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(s,e,t,i){var n=it(s,i);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):k(n,e.length)},I:function(s,e,t){var i=tt(s);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):k(i,e.length)},d:function(s,e,t){return e==="do"?t.ordinalNumber(s.getUTCDate(),{unit:"date"}):pe.d(s,e)},D:function(s,e,t){var i=zi(s);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):k(i,e.length)},E:function(s,e,t){var i=s.getUTCDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(s,e,t,i){var n=s.getUTCDay(),o=(n-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return k(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(s,e,t,i){var n=s.getUTCDay(),o=(n-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return k(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(s,e,t){var i=s.getUTCDay(),n=i===0?7:i;switch(e){case"i":return String(n);case"ii":return k(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(s,e,t){var i=s.getUTCHours(),n=i/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(s,e,t){var i=s.getUTCHours(),n;switch(i===12?n=De.noon:i===0?n=De.midnight:n=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(s,e,t){var i=s.getUTCHours(),n;switch(i>=17?n=De.evening:i>=12?n=De.afternoon:i>=4?n=De.morning:n=De.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(s,e,t){if(e==="ho"){var i=s.getUTCHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return pe.h(s,e)},H:function(s,e,t){return e==="Ho"?t.ordinalNumber(s.getUTCHours(),{unit:"hour"}):pe.H(s,e)},K:function(s,e,t){var i=s.getUTCHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):k(i,e.length)},k:function(s,e,t){var i=s.getUTCHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):k(i,e.length)},m:function(s,e,t){return e==="mo"?t.ordinalNumber(s.getUTCMinutes(),{unit:"minute"}):pe.m(s,e)},s:function(s,e,t){return e==="so"?t.ordinalNumber(s.getUTCSeconds(),{unit:"second"}):pe.s(s,e)},S:function(s,e){return pe.S(s,e)},X:function(s,e,t,i){var n=i._originalDate||s,o=n.getTimezoneOffset();if(o===0)return"Z";switch(e){case"X":return xs(o);case"XXXX":case"XX":return Te(o);case"XXXXX":case"XXX":default:return Te(o,":")}},x:function(s,e,t,i){var n=i._originalDate||s,o=n.getTimezoneOffset();switch(e){case"x":return xs(o);case"xxxx":case"xx":return Te(o);case"xxxxx":case"xxx":default:return Te(o,":")}},O:function(s,e,t,i){var n=i._originalDate||s,o=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Cs(o,":");case"OOOO":default:return"GMT"+Te(o,":")}},z:function(s,e,t,i){var n=i._originalDate||s,o=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Cs(o,":");case"zzzz":default:return"GMT"+Te(o,":")}},t:function(s,e,t,i){var n=i._originalDate||s,o=Math.floor(n.getTime()/1e3);return k(o,e.length)},T:function(s,e,t,i){var n=i._originalDate||s,o=n.getTime();return k(o,e.length)}};function Cs(s,e){var t=s>0?"-":"+",i=Math.abs(s),n=Math.floor(i/60),o=i%60;if(o===0)return t+String(n);var r=e||"";return t+String(n)+r+k(o,2)}function xs(s,e){if(s%60===0){var t=s>0?"-":"+";return t+k(Math.abs(s)/60,2)}return Te(s,e)}function Te(s,e){var t=e||"",i=s>0?"-":"+",n=Math.abs(s),o=k(Math.floor(n/60),2),r=k(n%60,2);return i+o+t+r}var Is=ao;function ks(s,e){switch(s){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function Ts(s,e){switch(s){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}function lo(s,e){var t=s.match(/(P+)(p+)?/)||[],i=t[1],n=t[2];if(!n)return ks(s,e);var o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",ks(i,e)).replace("{{time}}",Ts(n,e))}var ho={p:Ts,P:lo},Gt=ho;var co=["D","DD"],uo=["YY","YYYY"];function Xt(s){return co.indexOf(s)!==-1}function Kt(s){return uo.indexOf(s)!==-1}function Pe(s,e,t){if(s==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://git.io/fxCyr"));if(s==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://git.io/fxCyr"));if(s==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://git.io/fxCyr"));if(s==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://git.io/fxCyr"))}var mo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,po=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fo=/^'([^]*?)'?$/,go=/''/g,vo=/[a-zA-Z]/;function Jt(s,e,t){w(2,arguments);var i=String(e),n=t||{},o=n.locale||be,r=o.options&&o.options.firstWeekContainsDate,a=r==null?1:x(r),d=n.firstWeekContainsDate==null?a:x(n.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=o.options&&o.options.weekStartsOn,m=c==null?0:x(c),v=n.weekStartsOn==null?m:x(n.weekStartsOn);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var N=I(s);if(!Ui(N))throw new RangeError("Invalid time value");var X=Je(N),se=Ze(N,X),_e={firstWeekContainsDate:d,weekStartsOn:v,locale:o,_originalDate:N},re=i.match(po).map(function(V){var K=V[0];if(K==="p"||K==="P"){var R=Gt[K];return R(V,o.formatLong,_e)}return V}).join("").match(mo).map(function(V){if(V==="''")return"'";var K=V[0];if(K==="'")return bo(V);var R=Is[K];if(R)return!n.useAdditionalWeekYearTokens&&Kt(V)&&Pe(V,e,s),!n.useAdditionalDayOfYearTokens&&Xt(V)&&Pe(V,e,s),R(se,V,o.localize,_e);if(K.match(vo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+K+"`");return V}).join("");return re}function bo(s){return s.match(fo)[1].replace(go,"'")}function Qi(s,e){if(s==null)throw new TypeError("assign requires that input parameter not be null or undefined");e=e||{};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t]);return s}function $t(s,e){w(2,arguments);var t=I(s),i=I(e);return t.getTime()>i.getTime()}function st(s,e,t){w(2,arguments);var i=t||{},n=i.locale,o=n&&n.options&&n.options.weekStartsOn,r=o==null?0:x(o),a=i.weekStartsOn==null?r:x(i.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=I(s),c=x(e),m=d.getUTCDay(),v=c%7,N=(v+7)%7,X=(N<a?7:0)+c-m;return d.setUTCDate(d.getUTCDate()+X),d}function Gi(s,e){w(2,arguments);var t=x(e);t%7===0&&(t=t-7);var i=1,n=I(s),o=n.getUTCDay(),r=t%7,a=(r+7)%7,d=(a<i?7:0)+t-o;return n.setUTCDate(n.getUTCDate()+d),n}function Xi(s,e){w(2,arguments);var t=I(s),i=x(e),n=tt(t)-i;return t.setUTCDate(t.getUTCDate()-n*7),t}function Ki(s,e,t){w(2,arguments);var i=I(s),n=x(e),o=it(i,t)-n;return i.setUTCDate(i.getUTCDate()-o*7),i}var wo=36e5,_o=6e4,yo=1e3,W={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},de={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function A(s,e,t){var i=e.match(s);if(!i)return null;var n=parseInt(i[0],10);return{value:t?t(n):n,rest:e.slice(i[0].length)}}function le(s,e){var t=e.match(s);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};var i=t[1]==="+"?1:-1,n=t[2]?parseInt(t[2],10):0,o=t[3]?parseInt(t[3],10):0,r=t[5]?parseInt(t[5],10):0;return{value:i*(n*wo+o*_o+r*yo),rest:e.slice(t[0].length)}}function Ns(s,e){return A(W.anyDigitsSigned,s,e)}function H(s,e,t){switch(s){case 1:return A(W.singleDigit,e,t);case 2:return A(W.twoDigits,e,t);case 3:return A(W.threeDigits,e,t);case 4:return A(W.fourDigits,e,t);default:return A(new RegExp("^\\d{1,"+s+"}"),e,t)}}function Zt(s,e,t){switch(s){case 1:return A(W.singleDigitSigned,e,t);case 2:return A(W.twoDigitsSigned,e,t);case 3:return A(W.threeDigitsSigned,e,t);case 4:return A(W.fourDigitsSigned,e,t);default:return A(new RegExp("^-?\\d{1,"+s+"}"),e,t)}}function Ji(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Os(s,e){var t=e>0,i=t?e:1-e,n;if(i<=50)n=s||100;else{var o=i+50,r=Math.floor(o/100)*100,a=s>=o%100;n=s+r-(a?100:0)}return t?n:1-n}var Co=[31,28,31,30,31,30,31,31,30,31,30,31],xo=[31,29,31,30,31,30,31,31,30,31,30,31];function Ms(s){return s%400===0||s%4===0&&s%100!==0}var Io={G:{priority:140,parse:function(s,e,t,i){switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"})||t.era(s,{width:"narrow"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})||t.era(s,{width:"abbreviated"})||t.era(s,{width:"narrow"})}},set:function(s,e,t,i){return e.era=t,s.setUTCFullYear(t,0,1),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(s,e,t,i){var n=function(o){return{year:o,isTwoDigitYear:e==="yy"}};switch(e){case"y":return H(4,s,n);case"yo":return t.ordinalNumber(s,{unit:"year",valueCallback:n});default:return H(e.length,s,n)}},validate:function(s,e,t){return e.isTwoDigitYear||e.year>0},set:function(s,e,t,i){var n=s.getUTCFullYear();if(t.isTwoDigitYear){var o=Os(t.year,n);return s.setUTCFullYear(o,0,1),s.setUTCHours(0,0,0,0),s}var r=!("era"in e)||e.era===1?t.year:1-t.year;return s.setUTCFullYear(r,0,1),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(s,e,t,i){var n=function(o){return{year:o,isTwoDigitYear:e==="YY"}};switch(e){case"Y":return H(4,s,n);case"Yo":return t.ordinalNumber(s,{unit:"year",valueCallback:n});default:return H(e.length,s,n)}},validate:function(s,e,t){return e.isTwoDigitYear||e.year>0},set:function(s,e,t,i){var n=ke(s,i);if(t.isTwoDigitYear){var o=Os(t.year,n);return s.setUTCFullYear(o,0,i.firstWeekContainsDate),s.setUTCHours(0,0,0,0),te(s,i)}var r=!("era"in e)||e.era===1?t.year:1-t.year;return s.setUTCFullYear(r,0,i.firstWeekContainsDate),s.setUTCHours(0,0,0,0),te(s,i)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(s,e,t,i){return Zt(e==="R"?4:e.length,s)},set:function(s,e,t,i){var n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),oe(n)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(s,e,t,i){return Zt(e==="u"?4:e.length,s)},set:function(s,e,t,i){return s.setUTCFullYear(t,0,1),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(s,e,t,i){switch(e){case"Q":case"QQ":return H(e.length,s);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"})||t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})||t.quarter(s,{width:"abbreviated",context:"formatting"})||t.quarter(s,{width:"narrow",context:"formatting"})}},validate:function(s,e,t){return e>=1&&e<=4},set:function(s,e,t,i){return s.setUTCMonth((t-1)*3,1),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(s,e,t,i){switch(e){case"q":case"qq":return H(e.length,s);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"})||t.quarter(s,{width:"narrow",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})||t.quarter(s,{width:"abbreviated",context:"standalone"})||t.quarter(s,{width:"narrow",context:"standalone"})}},validate:function(s,e,t){return e>=1&&e<=4},set:function(s,e,t,i){return s.setUTCMonth((t-1)*3,1),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(s,e,t,i){var n=function(o){return o-1};switch(e){case"M":return A(W.month,s,n);case"MM":return H(2,s,n);case"Mo":return t.ordinalNumber(s,{unit:"month",valueCallback:n});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"})||t.month(s,{width:"narrow",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})||t.month(s,{width:"abbreviated",context:"formatting"})||t.month(s,{width:"narrow",context:"formatting"})}},validate:function(s,e,t){return e>=0&&e<=11},set:function(s,e,t,i){return s.setUTCMonth(t,1),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(s,e,t,i){var n=function(o){return o-1};switch(e){case"L":return A(W.month,s,n);case"LL":return H(2,s,n);case"Lo":return t.ordinalNumber(s,{unit:"month",valueCallback:n});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"})||t.month(s,{width:"narrow",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})||t.month(s,{width:"abbreviated",context:"standalone"})||t.month(s,{width:"narrow",context:"standalone"})}},validate:function(s,e,t){return e>=0&&e<=11},set:function(s,e,t,i){return s.setUTCMonth(t,1),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(s,e,t,i){switch(e){case"w":return A(W.week,s);case"wo":return t.ordinalNumber(s,{unit:"week"});default:return H(e.length,s)}},validate:function(s,e,t){return e>=1&&e<=53},set:function(s,e,t,i){return te(Ki(s,t,i),i)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(s,e,t,i){switch(e){case"I":return A(W.week,s);case"Io":return t.ordinalNumber(s,{unit:"week"});default:return H(e.length,s)}},validate:function(s,e,t){return e>=1&&e<=53},set:function(s,e,t,i){return oe(Xi(s,t,i),i)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(s,e,t,i){switch(e){case"d":return A(W.date,s);case"do":return t.ordinalNumber(s,{unit:"date"});default:return H(e.length,s)}},validate:function(s,e,t){var i=s.getUTCFullYear(),n=Ms(i),o=s.getUTCMonth();return n?e>=1&&e<=xo[o]:e>=1&&e<=Co[o]},set:function(s,e,t,i){return s.setUTCDate(t),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(s,e,t,i){switch(e){case"D":case"DD":return A(W.dayOfYear,s);case"Do":return t.ordinalNumber(s,{unit:"date"});default:return H(e.length,s)}},validate:function(s,e,t){var i=s.getUTCFullYear(),n=Ms(i);return n?e>=1&&e<=366:e>=1&&e<=365},set:function(s,e,t,i){return s.setUTCMonth(0,t),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(s,e,t,i){switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"})||t.day(s,{width:"short",context:"formatting"})||t.day(s,{width:"narrow",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"})||t.day(s,{width:"narrow",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})||t.day(s,{width:"abbreviated",context:"formatting"})||t.day(s,{width:"short",context:"formatting"})||t.day(s,{width:"narrow",context:"formatting"})}},validate:function(s,e,t){return e>=0&&e<=6},set:function(s,e,t,i){return s=st(s,t,i),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(s,e,t,i){var n=function(o){var r=Math.floor((o-1)/7)*7;return(o+i.weekStartsOn+6)%7+r};switch(e){case"e":case"ee":return H(e.length,s,n);case"eo":return t.ordinalNumber(s,{unit:"day",valueCallback:n});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"})||t.day(s,{width:"short",context:"formatting"})||t.day(s,{width:"narrow",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"})||t.day(s,{width:"narrow",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})||t.day(s,{width:"abbreviated",context:"formatting"})||t.day(s,{width:"short",context:"formatting"})||t.day(s,{width:"narrow",context:"formatting"})}},validate:function(s,e,t){return e>=0&&e<=6},set:function(s,e,t,i){return s=st(s,t,i),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(s,e,t,i){var n=function(o){var r=Math.floor((o-1)/7)*7;return(o+i.weekStartsOn+6)%7+r};switch(e){case"c":case"cc":return H(e.length,s,n);case"co":return t.ordinalNumber(s,{unit:"day",valueCallback:n});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"})||t.day(s,{width:"short",context:"standalone"})||t.day(s,{width:"narrow",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"})||t.day(s,{width:"narrow",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})||t.day(s,{width:"abbreviated",context:"standalone"})||t.day(s,{width:"short",context:"standalone"})||t.day(s,{width:"narrow",context:"standalone"})}},validate:function(s,e,t){return e>=0&&e<=6},set:function(s,e,t,i){return s=st(s,t,i),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(s,e,t,i){var n=function(o){return o===0?7:o};switch(e){case"i":case"ii":return H(e.length,s);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting",valueCallback:n})||t.day(s,{width:"short",context:"formatting",valueCallback:n})||t.day(s,{width:"narrow",context:"formatting",valueCallback:n});case"iiiii":return t.day(s,{width:"narrow",context:"formatting",valueCallback:n});case"iiiiii":return t.day(s,{width:"short",context:"formatting",valueCallback:n})||t.day(s,{width:"narrow",context:"formatting",valueCallback:n});case"iiii":default:return t.day(s,{width:"wide",context:"formatting",valueCallback:n})||t.day(s,{width:"abbreviated",context:"formatting",valueCallback:n})||t.day(s,{width:"short",context:"formatting",valueCallback:n})||t.day(s,{width:"narrow",context:"formatting",valueCallback:n})}},validate:function(s,e,t){return e>=1&&e<=7},set:function(s,e,t,i){return s=Gi(s,t,i),s.setUTCHours(0,0,0,0),s},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(s,e,t,i){switch(e){case"a":case"aa":case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"})||t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})||t.dayPeriod(s,{width:"abbreviated",context:"formatting"})||t.dayPeriod(s,{width:"narrow",context:"formatting"})}},set:function(s,e,t,i){return s.setUTCHours(Ji(t),0,0,0),s},incompatibleTokens:["b","B","H","k","t","T"]},b:{priority:80,parse:function(s,e,t,i){switch(e){case"b":case"bb":case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"})||t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})||t.dayPeriod(s,{width:"abbreviated",context:"formatting"})||t.dayPeriod(s,{width:"narrow",context:"formatting"})}},set:function(s,e,t,i){return s.setUTCHours(Ji(t),0,0,0),s},incompatibleTokens:["a","B","H","k","t","T"]},B:{priority:80,parse:function(s,e,t,i){switch(e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"})||t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})||t.dayPeriod(s,{width:"abbreviated",context:"formatting"})||t.dayPeriod(s,{width:"narrow",context:"formatting"})}},set:function(s,e,t,i){return s.setUTCHours(Ji(t),0,0,0),s},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(s,e,t,i){switch(e){case"h":return A(W.hour12h,s);case"ho":return t.ordinalNumber(s,{unit:"hour"});default:return H(e.length,s)}},validate:function(s,e,t){return e>=1&&e<=12},set:function(s,e,t,i){var n=s.getUTCHours()>=12;return n&&t<12?s.setUTCHours(t+12,0,0,0):!n&&t===12?s.setUTCHours(0,0,0,0):s.setUTCHours(t,0,0,0),s},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(s,e,t,i){switch(e){case"H":return A(W.hour23h,s);case"Ho":return t.ordinalNumber(s,{unit:"hour"});default:return H(e.length,s)}},validate:function(s,e,t){return e>=0&&e<=23},set:function(s,e,t,i){return s.setUTCHours(t,0,0,0),s},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(s,e,t,i){switch(e){case"K":return A(W.hour11h,s);case"Ko":return t.ordinalNumber(s,{unit:"hour"});default:return H(e.length,s)}},validate:function(s,e,t){return e>=0&&e<=11},set:function(s,e,t,i){var n=s.getUTCHours()>=12;return n&&t<12?s.setUTCHours(t+12,0,0,0):s.setUTCHours(t,0,0,0),s},incompatibleTokens:["h","H","k","t","T"]},k:{priority:70,parse:function(s,e,t,i){switch(e){case"k":return A(W.hour24h,s);case"ko":return t.ordinalNumber(s,{unit:"hour"});default:return H(e.length,s)}},validate:function(s,e,t){return e>=1&&e<=24},set:function(s,e,t,i){var n=t<=24?t%24:t;return s.setUTCHours(n,0,0,0),s},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(s,e,t,i){switch(e){case"m":return A(W.minute,s);case"mo":return t.ordinalNumber(s,{unit:"minute"});default:return H(e.length,s)}},validate:function(s,e,t){return e>=0&&e<=59},set:function(s,e,t,i){return s.setUTCMinutes(t,0,0),s},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(s,e,t,i){switch(e){case"s":return A(W.second,s);case"so":return t.ordinalNumber(s,{unit:"second"});default:return H(e.length,s)}},validate:function(s,e,t){return e>=0&&e<=59},set:function(s,e,t,i){return s.setUTCSeconds(t,0),s},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(s,e,t,i){var n=function(o){return Math.floor(o*Math.pow(10,-e.length+3))};return H(e.length,s,n)},set:function(s,e,t,i){return s.setUTCMilliseconds(t),s},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(s,e,t,i){switch(e){case"X":return le(de.basicOptionalMinutes,s);case"XX":return le(de.basic,s);case"XXXX":return le(de.basicOptionalSeconds,s);case"XXXXX":return le(de.extendedOptionalSeconds,s);case"XXX":default:return le(de.extended,s)}},set:function(s,e,t,i){return e.timestampIsSet?s:new Date(s.getTime()-t)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(s,e,t,i){switch(e){case"x":return le(de.basicOptionalMinutes,s);case"xx":return le(de.basic,s);case"xxxx":return le(de.basicOptionalSeconds,s);case"xxxxx":return le(de.extendedOptionalSeconds,s);case"xxx":default:return le(de.extended,s)}},set:function(s,e,t,i){return e.timestampIsSet?s:new Date(s.getTime()-t)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(s,e,t,i){return Ns(s)},set:function(s,e,t,i){return[new Date(t*1e3),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(s,e,t,i){return Ns(s)},set:function(s,e,t,i){return[new Date(t),{timestampIsSet:!0}]},incompatibleTokens:"*"}},js=Io;var ko=10,To=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,No=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Oo=/^'([^]*?)'?$/,Mo=/''/g,jo=/\S/,Eo=/[a-zA-Z]/;function ei(s,e,t,i){w(3,arguments);var n=String(s),o=String(e),r=i||{},a=r.locale||be;if(!a.match)throw new RangeError("locale must contain match property");var d=a.options&&a.options.firstWeekContainsDate,c=d==null?1:x(d),m=r.firstWeekContainsDate==null?c:x(r.firstWeekContainsDate);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=a.options&&a.options.weekStartsOn,N=v==null?0:x(v),X=r.weekStartsOn==null?N:x(r.weekStartsOn);if(!(X>=0&&X<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(o==="")return n===""?I(t):new Date(NaN);var se={firstWeekContainsDate:m,weekStartsOn:X,locale:a},_e=[{priority:ko,subPriority:-1,set:So,index:0}],re,V=o.match(No).map(function(J){var ne=J[0];if(ne==="p"||ne==="P"){var Re=Gt[ne];return Re(J,a.formatLong,se)}return J}).join("").match(To),K=[];for(re=0;re<V.length;re++){var R=V[re];!r.useAdditionalWeekYearTokens&&Kt(R)&&Pe(R,o,s),!r.useAdditionalDayOfYearTokens&&Xt(R)&&Pe(R,o,s);var Ne=R[0],fe=js[Ne];if(fe){var os=fe.incompatibleTokens;if(Array.isArray(os)){for(var Ei=void 0,dt=0;dt<K.length;dt++){var rs=K[dt].token;if(os.indexOf(rs)!==-1||rs===Ne){Ei=K[dt];break}}if(Ei)throw new RangeError("The format string mustn't contain `".concat(Ei.fullToken,"` and `").concat(R,"` at the same time"))}else if(fe.incompatibleTokens==="*"&&K.length)throw new RangeError("The format string mustn't contain `".concat(R,"` and any other token at the same time"));K.push({token:Ne,fullToken:R});var Si=fe.parse(n,R,a.match,se);if(!Si)return new Date(NaN);_e.push({priority:fe.priority,subPriority:fe.subPriority||0,set:fe.set,validate:fe.validate,value:Si.value,index:_e.length}),n=Si.rest}else{if(Ne.match(Eo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ne+"`");if(R==="''"?R="'":Ne==="'"&&(R=Do(R)),n.indexOf(R)===0)n=n.slice(R.length);else return new Date(NaN)}}if(n.length>0&&jo.test(n))return new Date(NaN);var as=_e.map(function(J){return J.priority}).sort(function(J,ne){return ne-J}).filter(function(J,ne,Re){return Re.indexOf(J)===ne}).map(function(J){return _e.filter(function(ne){return ne.priority===J}).sort(function(ne,Re){return Re.subPriority-ne.subPriority})}).map(function(J){return J[0]}),Di=I(t);if(isNaN(Di))return new Date(NaN);var Fe=Ze(Di,Je(Di)),ds={};for(re=0;re<as.length;re++){var We=as[re];if(We.validate&&!We.validate(Fe,We.value,se))return new Date(NaN);var lt=We.set(Fe,ds,We.value,se);lt[0]?(Fe=lt[0],Qi(ds,lt[1])):Fe=lt}return Fe}function So(s,e){if(e.timestampIsSet)return s;var t=new Date(0);return t.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),t.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),t}function Do(s){return s.match(Oo)[1].replace(Mo,"'")}function ii(s,e){w(1,arguments);var t=e||{},i=t.additionalDigits==null?2:x(t.additionalDigits);if(i!==2&&i!==1&&i!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof s=="string"||Object.prototype.toString.call(s)==="[object String]"))return new Date(NaN);var n=Ho(s),o;if(n.date){var r=Bo(n.date,i);o=Fo(r.restDateString,r.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var a=o.getTime(),d=0,c;if(n.time&&(d=Wo(n.time),isNaN(d)))return new Date(NaN);if(n.timezone){if(c=Ro(n.timezone),isNaN(c))return new Date(NaN)}else{var m=new Date(a+d),v=new Date(0);return v.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),v.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),v}return new Date(a+d+c)}var ti={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Po=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Lo=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ao=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ho(s){var e={},t=s.split(ti.dateTimeDelimiter),i;if(t.length>2)return e;if(/:/.test(t[0])?i=t[0]:(e.date=t[0],i=t[1],ti.timeZoneDelimiter.test(e.date)&&(e.date=s.split(ti.timeZoneDelimiter)[0],i=s.substr(e.date.length,s.length))),i){var n=ti.timezone.exec(i);n?(e.time=i.replace(n[1],""),e.timezone=n[1]):e.time=i}return e}function Bo(s,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=s.match(t);if(!i)return{year:NaN,restDateString:""};var n=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?n:o*100,restDateString:s.slice((i[1]||i[2]).length)}}function Fo(s,e){if(e===null)return new Date(NaN);var t=s.match(Po);if(!t)return new Date(NaN);var i=!!t[4],n=nt(t[1]),o=nt(t[2])-1,r=nt(t[3]),a=nt(t[4]),d=nt(t[5])-1;if(i)return qo(e,a,d)?Yo(e,a,d):new Date(NaN);var c=new Date(0);return!zo(e,o,r)||!Vo(e,n)?new Date(NaN):(c.setUTCFullYear(e,o,Math.max(n,r)),c)}function nt(s){return s?parseInt(s):1}function Wo(s){var e=s.match(Lo);if(!e)return NaN;var t=$i(e[1]),i=$i(e[2]),n=$i(e[3]);return Qo(t,i,n)?t*Ri+i*Wi+n*1e3:NaN}function $i(s){return s&&parseFloat(s.replace(",","."))||0}function Ro(s){if(s==="Z")return 0;var e=s.match(Ao);if(!e)return 0;var t=e[1]==="+"?-1:1,i=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return Go(i,n)?t*(i*Ri+n*Wi):NaN}function Yo(s,e,t){var i=new Date(0);i.setUTCFullYear(s,0,4);var n=i.getUTCDay()||7,o=(e-1)*7+t+1-n;return i.setUTCDate(i.getUTCDate()+o),i}var Uo=[31,null,31,30,31,30,31,31,30,31,30,31];function Es(s){return s%400===0||s%4===0&&s%100!==0}function zo(s,e,t){return e>=0&&e<=11&&t>=1&&t<=(Uo[e]||(Es(s)?29:28))}function Vo(s,e){return e>=1&&e<=(Es(s)?366:365)}function qo(s,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function Qo(s,e,t){return s===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&s>=0&&s<25}function Go(s,e){return e>=0&&e<=59}var Xo={about:"k\xF6r\xFClbel\xFCl",over:"t\xF6bb mint",almost:"majdnem",lessthan:"kevesebb mint"},Ko={xseconds:" m\xE1sodperc",halfaminute:"f\xE9l perc",xminutes:" perc",xhours:" \xF3ra",xdays:" nap",xweeks:" h\xE9t",xmonths:" h\xF3nap",xyears:" \xE9v"},Jo={xseconds:{"-1":" m\xE1sodperccel ezel\u0151tt","1":" m\xE1sodperc m\xFAlva","0":" m\xE1sodperce"},halfaminute:{"-1":"f\xE9l perccel ezel\u0151tt","1":"f\xE9l perc m\xFAlva","0":"f\xE9l perce"},xminutes:{"-1":" perccel ezel\u0151tt","1":" perc m\xFAlva","0":" perce"},xhours:{"-1":" \xF3r\xE1val ezel\u0151tt","1":" \xF3ra m\xFAlva","0":" \xF3r\xE1ja"},xdays:{"-1":" nappal ezel\u0151tt","1":" nap m\xFAlva","0":" napja"},xweeks:{"-1":" h\xE9ttel ezel\u0151tt","1":" h\xE9t m\xFAlva","0":" hete"},xmonths:{"-1":" h\xF3nappal ezel\u0151tt","1":" h\xF3nap m\xFAlva","0":" h\xF3napja"},xyears:{"-1":" \xE9vvel ezel\u0151tt","1":" \xE9v m\xFAlva","0":" \xE9ve"}};function $o(s,e,t,i){var n=e?Jo[t][i]:Ko[t];return t==="halfaminute"?n:s+n}function Zi(s,e,t){t=t||{};var i=s.match(/about|over|almost|lessthan/i),n=s.replace(i,""),o;return o=$o(e,t.addSuffix,n.toLowerCase(),t.comparison),i&&(o=Xo[i[0].toLowerCase()]+" "+o),o}var Zo={full:"y. MMMM d., EEEE",long:"y. MMMM d.",medium:"y. MMM d.",short:"y. MM. dd."},er={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},tr={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},ir={date:me({formats:Zo,defaultWidth:"full"}),time:me({formats:er,defaultWidth:"full"}),dateTime:me({formats:tr,defaultWidth:"full"})},Ss=ir;var sr=["vas\xE1rnap","h\xE9tf\u0151n","kedden","szerd\xE1n","cs\xFCt\xF6rt\xF6k\xF6n","p\xE9nteken","szombaton"];function Ds(s){return function(e,t,i){var n=e.getUTCDay();return(s?"":"'m\xFAlt' ")+"'"+sr[n]+"' p'-kor'"}}var nr={lastWeek:Ds(!1),yesterday:"'tegnap' p'-kor'",today:"'ma' p'-kor'",tomorrow:"'holnap' p'-kor'",nextWeek:Ds(!0),other:"P"};function es(s,e,t,i){var n=nr[s];return typeof n=="function"?n(e,t,i):n}var or={narrow:["ie.","isz."],abbreviated:["i. e.","i. sz."],wide:["Krisztus el\u0151tt","id\u0151sz\xE1m\xEDt\xE1sunk szerint"]},rr={narrow:["1.","2.","3.","4."],abbreviated:["1. n.\xE9v","2. n.\xE9v","3. n.\xE9v","4. n.\xE9v"],wide:["1. negyed\xE9v","2. negyed\xE9v","3. negyed\xE9v","4. negyed\xE9v"]},ar={narrow:["I.","II.","III.","IV."],abbreviated:["I. n.\xE9v","II. n.\xE9v","III. n.\xE9v","IV. n.\xE9v"],wide:["I. negyed\xE9v","II. negyed\xE9v","III. negyed\xE9v","IV. negyed\xE9v"]},dr={narrow:["J","F","M","\xC1","M","J","J","A","Sz","O","N","D"],abbreviated:["jan.","febr.","m\xE1rc.","\xE1pr.","m\xE1j.","j\xFAn.","j\xFAl.","aug.","szept.","okt.","nov.","dec."],wide:["janu\xE1r","febru\xE1r","m\xE1rcius","\xE1prilis","m\xE1jus","j\xFAnius","j\xFAlius","augusztus","szeptember","okt\xF3ber","november","december"]},lr={narrow:["V","H","K","Sz","Cs","P","Sz"],short:["V","H","K","Sze","Cs","P","Szo"],abbreviated:["V","H","K","Sze","Cs","P","Szo"],wide:["vas\xE1rnap","h\xE9tf\u0151","kedd","szerda","cs\xFCt\xF6rt\xF6k","p\xE9ntek","szombat"]},hr={narrow:{am:"de.",pm:"du.",midnight:"\xE9jf\xE9l",noon:"d\xE9l",morning:"reggel",afternoon:"du.",evening:"este",night:"\xE9jjel"},abbreviated:{am:"de.",pm:"du.",midnight:"\xE9jf\xE9l",noon:"d\xE9l",morning:"reggel",afternoon:"du.",evening:"este",night:"\xE9jjel"},wide:{am:"de.",pm:"du.",midnight:"\xE9jf\xE9l",noon:"d\xE9l",morning:"reggel",afternoon:"d\xE9lut\xE1n",evening:"este",night:"\xE9jjel"}};function cr(s,e){var t=Number(s);return t+"."}var ur={ordinalNumber:cr,era:$({values:or,defaultWidth:"wide"}),quarter:$({values:rr,defaultWidth:"wide",formattingValues:ar,argumentCallback:function(s){return Number(s)-1}}),month:$({values:dr,defaultWidth:"wide"}),day:$({values:lr,defaultWidth:"wide"}),dayPeriod:$({values:hr,defaultWidth:"wide",defaultFormattingWidth:"wide"})},Ps=ur;var mr=/^(\d+)\.?/i,pr=/\d+/i,fr={narrow:/^(ie\.|isz\.)/i,abbreviated:/^(i\.\s?e\.?|b?\s?c\s?e|i\.\s?sz\.?)/i,wide:/^(Krisztus eltt|idszmtsunk eltt|idszmtsunk szerint|i\. sz\.)/i},gr={narrow:[/ie/i,/isz/i],abbreviated:[/^(i\.?\s?e\.?|b\s?ce)/i,/^(i\.?\s?sz\.?|c\s?e)/i],any:[/eltt/i,/(szerint|i. sz.)/i]},vr={narrow:/^[1234]\.?/i,abbreviated:/^[1234]?\.?\s?n\.v/i,wide:/^([1234]|I|II|III|IV)?\.?\s?negyedv/i},br={any:[/1|I$/i,/2|II$/i,/3|III/i,/4|IV/i]},wr={narrow:/^[jfmasond]|sz/i,abbreviated:/^(jan\.?|febr\.?|mrc\.?|pr\.?|mj\.?|jn\.?|jl\.?|aug\.?|szept\.?|okt\.?|nov\.?|dec\.?)/i,wide:/^(janur|februr|mrcius|prilis|mjus|jnius|jlius|augusztus|szeptember|oktber|november|december)/i},_r={narrow:[/^j/i,/^f/i,/^m/i,/^a|/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s|sz/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mr/i,/^p/i,/^mj/i,/^jn/i,/^jl/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yr={narrow:/^([vhkpc]|sz|cs|sz)/i,short:/^([vhkp]|sze|cs|szo)/i,abbreviated:/^([vhkp]|sze|cs|szo)/i,wide:/^(vasrnap|htf|kedd|szerda|cstrtk|pntek|szombat)/i},Cr={narrow:[/^v/i,/^h/i,/^k/i,/^sz/i,/^c/i,/^p/i,/^sz/i],any:[/^v/i,/^h/i,/^k/i,/^sze/i,/^c/i,/^p/i,/^szo/i]},xr={any:/^((de|du)\.?|jfl|dlutn|dl|reggel|este|jjel)/i},Ir={any:{am:/^de\.?/i,pm:/^du\.?/i,midnight:/^jf/i,noon:/^d/i,morning:/reg/i,afternoon:/^dlu\.?/i,evening:/es/i,night:/jj/i}},kr={ordinalNumber:$e({matchPattern:mr,parsePattern:pr,valueCallback:function(s){return parseInt(s,10)}}),era:Z({matchPatterns:fr,defaultMatchWidth:"wide",parsePatterns:gr,defaultParseWidth:"any"}),quarter:Z({matchPatterns:vr,defaultMatchWidth:"wide",parsePatterns:br,defaultParseWidth:"any",valueCallback:function(s){return s+1}}),month:Z({matchPatterns:wr,defaultMatchWidth:"wide",parsePatterns:_r,defaultParseWidth:"any"}),day:Z({matchPatterns:yr,defaultMatchWidth:"wide",parsePatterns:Cr,defaultParseWidth:"any"}),dayPeriod:Z({matchPatterns:xr,defaultMatchWidth:"any",parsePatterns:Ir,defaultParseWidth:"any"})},Ls=kr;var Tr={code:"hu",formatDistance:Zi,formatLong:Ss,formatRelative:es,localize:Ps,match:Ls,options:{weekStartsOn:1,firstWeekContainsDate:4}},ts=Tr;var As=be,Nr=s=>s.replace("YYYY","yyyy").replaceAll("D","d"),Or=s=>{switch(s){case"hu":return ts;default:return be}},is=s=>{As=Or(s)},Mr={parse:(s=new Date().toISOString(),e)=>e?ei(s,e,new Date):ii(s),format:(s,e)=>Jt(s,Nr(e),{locale:As}),isAfter:(s,e)=>$t(s,e)};var Hs=class{constructor(e,t){this._injections={};this._instances={};this._setOptions(e),this._init(t)}_setOptions(e){let t=this;t.options=new u({app_id:"sui-app",locale:navigator.language,backend:"",production:!1,secret:"f74pej3qpb9qmpvregu7ef33m5w6f6qz",log_color:"#000"}),t.options.merge(e)}_init(e){this._injections=e,this._initCertificate(),this._initApp(),this._initRoutes(),this._initStorage(),this._initLocale(),this._initModule(),this._initEvent(),this._initScheduler(),this._initLoader(),this._initHttp(),this._initDialog(),this._initConfirm(),this._initViewer(),this._initProgressBar(),this._initCookie(),this._initFlash(),this._initTemplate(),this._initDocument(),this._initWindow(),this._initHelper(),this._initHeader(),this._initTopMenu(),this._initLeftMenu(),this._initNavBar(),this._initSidebar(),this._initFooter(),this._initBottomMenu(),this._initBrowser(),this._initGeoLocation(),this._initScript(),this._initStyle(),this._initConfig(),this._initServiceWorker(),this._initActionCable(),this._loadModules()}getLanguage(){return this.getLocale().split("-",2)[0]}getLocale(){let e=this._instances[this._injections.localStorage].get("app.locale");return e||(e=this.options.locale),e}setLocale(e){this._instances[this._injections.localStorage].set("app.locale",e),this.options.locale=e}setLocaleWithReload(e){this.setLocale(e),this._instances[this._injections.state].reload()}_initLocale(){let e=this.getLocale();is(e),this.setLocale(e)}_initCertificate(){let e=new h("html").getItem();e.removeClass("no-js"),e.addClass("sui-js")}_initModule(){this._module=new bt,this._module.eventAfterInit=()=>{this._instances[this._injections.progressBar].lock(),this._instances[this._injections.loader].show(),this._instances[this._injections.event].call("module.afterInit")},this._module.eventStateChange=e=>(this._instances[this._injections.progressBar].lock(),this._instances[this._injections.loader].show(),this._instances[this._injections.dialog].close(),this._instances[this._injections.confirm].close(),this._instances[this._injections.actionCable].unsubscribeAll(),this._instances[this._injections.event].call("state.change",[e])),this._module.eventDomChange=(e,t)=>this._instances[this._injections.event].call("dom.change",[e,t]),this._module.eventServiceLoaded=()=>{this._instances[this._injections.browser].detect(),this._instances[this._injections.event].call("module.serviceLoaded")},this._module.eventServiceFailed=()=>{this._instances[this._injections.event].call("module.serviceFailed")},this._module.eventModuleLoaded=e=>{this._instances[this._injections.progressBar].unlock(),this._instances[this._injections.loader].hide(!0),this._instances[this._injections.event].call("module.loaded",[e])},this._module.eventModuleFailed=e=>{this._instances[this._injections.progressBar].unlock(),this._instances[this._injections.loader].hide(!0),this._instances[this._injections.event].call("module.failed",[e])},this._module.eventControllerLoaded=e=>{this._instances[this._injections.event].call("controller.loaded",[e])},this._module.eventControllerFailed=()=>{this._instances[this._injections.event].call("controller.failed",[])}}_loadModules(){this._instances[this._injections.instances]=this._instances,this._module.load(this._instances,this._injections)}_initScript(){this._instances[this._injections.script]=new Bt(this._instances[this._injections.progressBar])}_initStyle(){this._instances[this._injections.style]=new Ft(this._instances[this._injections.progressBar])}_initConfig(){this._instances[this._injections.config]=this.options}_initApp(){this._instances[this._injections.app]=this}_initGeoLocation(){this._instances[this._injections.geoLocation]=new jt,this._instances[this._injections.geoLocation].eventChange=(e,t,i)=>{this._instances[this._injections.event].override("geoLocation.success",[i],n=>{this._instances[this._injections.flash].addInfo(n)}),this._instances[this._injections.event].call("geoLocation.change",[e,t])},this._instances[this._injections.geoLocation].eventError=(e,t)=>{this._instances[this._injections.event].override("geoLocation.error",[e,t],i=>{this._instances[this._injections.flash].addError(i)})}}_initCookie(){this._instances[this._injections.cookie]=new Tt({prefix:this.options.app_id})}_initLoader(){this._instances[this._injections.loader]=new Lt}_initProgressBar(){this._instances[this._injections.progressBar]=new Ht(this._instances[this._injections.dialog],this._instances[this._injections.confirm])}_initStorage(){this._instances[this._injections.localStorage]=new Ke({type:"local",prefix:this.options.app_id,secret:this.options.secret}),this._instances[this._injections.sessionStorage]=new Ke({type:"session",prefix:this.options.app_id,secret:this.options.secret})}_initHelper(){this._instances[this._injections.helper]=new Et}_initDocument(){let e=new je;this._instances[this._injections.document]=new xt,this._instances[this._injections.document].eventClick=(t,i)=>{e.closeAll(),this._instances[this._injections.event].call("document.click",[t,i])}}_initWindow(){this._instances[this._injections.window]=new Qt;let e=this._instances[this._injections.window].getWidth(),t=this._instances[this._injections.window].getHeight();this._instances[this._injections.dialog].setSize(e,t),this._instances[this._injections.confirm].setSize(e,t),this._instances[this._injections.viewer].setSize(e,t),this._instances[this._injections.window].eventResize=(n,o,r)=>{this._instances[this._injections.dialog].setSize(n,o),this._instances[this._injections.confirm].setSize(n,o),this._instances[this._injections.viewer].setSize(n,o),this._instances[this._injections.event].call("window.resize",[n,o,r])},this._instances[this._injections.window].eventOrientationChange=(n,o,r,a)=>{this._instances[this._injections.dialog].setSize(o,r),this._instances[this._injections.confirm].setSize(o,r),this._instances[this._injections.viewer].setSize(o,r),this._instances[this._injections.event].call("window.orientationChange",[n,o,r,a])},this._instances[this._injections.window].eventScroll=(n,o)=>{this._instances[this._injections.event].call("window.scroll",[n,o])},this._instances[this._injections.window].eventColorSchemeChange=(n,o)=>{this._instances[this._injections.event].call("window.colorSchemeChange",[n,o])};let i={node:null,message:"Unable to connect to the Internet",duration:1/0};this._instances[this._injections.window].eventOnline=()=>{i.node&&this._instances[this._injections.flash].remove(i.node)},this._instances[this._injections.window].eventOffline=n=>{this._instances[this._injections.event].override("window.offline",[i,n],o=>{o.node=this._instances[this._injections.flash].addWarning(o.message,o.duration)})}}_initEvent(){this._instances[this._injections.event]=new Vt}_initScheduler(){this._instances[this._injections.scheduler]=new qt}_initHttp(){this._instances[this._injections.http]=new Dt(this.options),this._instances[this._injections.http].eventBeforeRequest=(...e)=>{this._instances[this._injections.progressBar].show(),this._instances[this._injections.event].call("http.beforeRequest",e)},this._instances[this._injections.http].eventAfterRequest=(...e)=>{this._instances[this._injections.event].call("http.afterRequest",e),this._instances[this._injections.progressBar].hide()}}_initTemplate(){this._instances[this._injections.template]=new Wt(this._instances[this._injections.http],{locale:this.getLocale()}),this._instances[this._injections.template].eventError=e=>{this._instances[this._injections.state].back(),this._instances[this._injections.loader].hide(),this._instances[this._injections.flash].addMessage(e)}}_initFlash(){this._instances[this._injections.flash]=new Ot}_initDialog(){this._instances[this._injections.dialog]=new Nt(this._instances[this._injections.http])}_initConfirm(){this._instances[this._injections.confirm]=new kt}_initViewer(){this._instances[this._injections.viewer]=new Yt}_initHeader(){this._instances[this._injections.header]=new zt}_initTopMenu(){this._instances[this._injections.topMenu]=new Rt(this._instances[this._injections.header])}_initNavBar(){this._instances[this._injections.navBar]=new At}_initBottomMenu(){this._instances[this._injections.bottomMenu]=new Ct(this._instances[this._injections.footer])}_initSidebar(){this._instances[this._injections.leftSidebar]=new Xe("#left-sidebar"),this._instances[this._injections.rightSidebar]=new Xe("#right-sidebar")}_initLeftMenu(){this._instances[this._injections.leftMenu]=new Pt}_initFooter(){this._instances[this._injections.footer]=new Mt}_initBrowser(){this._instances[this._injections.browser]=new It,this._instances[this._injections.browser].eventMissingFeatures=e=>{this._instances[this._injections.flash].addError(e.join(", "))}}_initServiceWorker(){this._instances[this._injections.serviceWorker]=new Ut,this._instances[this._injections.serviceWorker].eventMissingFeatures=e=>{this._instances[this._injections.flash].addError(e.join(", "))}}_initActionCable(){this._instances[this._injections.actionCable]=new yt}_initRoutes(){this._routeOptions=new u}setRootState(e,t){this._routeOptions.set("root.id",e),this._routeOptions.set("root.params",t)}getInstance(e){var t;return(t=this._instances[e])!=null?t:null}getController(){return this._module.getController()}run(e,t){this.options.production?console.info("%cApplication run in production environment...",`font-weight:bold;color:${this.options.log_color};`):(console.info("%cApplication run in development environment...",`font-weight:bold;color:${this.options.log_color};`),new gt().run()),this._module.handleRoutes(e,this._routeOptions),this._module.handleServices(t)}controller(e,t,i){return this._module.add(e,t,i)}service(e,t,i){return this._module.add(e,t,i)}};var Le=class{constructor(e,t,i){this.date=window.moment(e,"YYYY-MM-DD"),this.currentDate=t,this._setOptions(i),this._init()}_setOptions(e){this.options=e}_init(){let e=window.moment(this.date).isSame(this.currentDate.format("YYYY-MM-DD"))?"current":null,t=window.moment(this.date).isSame(window.moment().format("YYYY-MM-DD"))?"now":null;this.cssClasses=["day",this.options.css_class,t,e]}getNode(){let e=new l("span");e.addClass(this.cssClasses);let t=this.date.format("DD");return e.setHtml(t),e.addEventListener("click",()=>{this.eventClick(this.date)}),e}eventClick(e){p("Day.eventClick()",e)}};var si=class{constructor(e,t,i){this.date=window.moment(e,"YYYY-MM-DD"),this.currentDate=t,this._setOptions(i),this._init()}_setOptions(e){this.options=e}_init(){let e=this.date.format("YYYY-MM")===this.currentDate.format("YYYY-MM")?"current":null,t=this.date.format("YYYY-MM")===window.moment().format("YYYY-MM")?"now":null;this.cssClasses=["month",this.options.css_class,t,e]}getNode(){let e=new l("span");e.addClass(this.cssClasses);let t=this.date.month(),i=window.moment.monthsShort(t);return e.setHtml(i),e.addEventListener("click",()=>{this.eventClick(this.date)}),e}eventClick(e){p("Month.eventClick()",e)}};var ni=class{constructor(e,t,i){this.date=window.moment(e,"YYYY-MM-DD"),this.currentDate=t,this._setOptions(i),this._init()}_setOptions(e){this.options=e}_init(){let e=this.date.format("YYYY")===this.currentDate.format("YYYY")?"current":null,t=this.date.format("YYYY")===window.moment().format("YYYY")?"now":null;this.cssClasses=["year",this.options.css_class,t,e]}getNode(){let e=new l("span");e.addClass(this.cssClasses);let t=this.date.format("YYYY");return e.setHtml(t),e.addEventListener("click",()=>{this.eventClick(this.date)}),e}eventClick(e){p("Year.eventClick()",e)}};var oi=class{constructor(e,t){this.calendarNode=e,this._setOptions(t),this._init()}_setOptions(e){this.options=e}_init(){this.maxDays=6*7,this.maxMonths=12,this.maxYears=16,this.modes=["YEAR","MONTH","DAY"],this.types={date:this.modes[2],month:this.modes[1],year:this.modes[0],week:this.modes[2],range:this.modes[2]},this._initStructure()}_initStructure(){this._initHeaderNode(),this._initContentNode(),this._initMode(this.types[this.options.type]);let e=window.moment(this.options.date);this._setSelectedDate(e),this._setDate(e)}_initHeaderNode(){this.headerNode=new l("div"),this.headerNode.addClass("header"),this.calendarNode.appendChild(this.headerNode);let e=new l("a");e.setAttribute("href","javascript:void(0)"),e.addClass(["previous","mdl-button","mdl-js-button","mdl-button--icon"]);let t=new l("em");t.addClass("material-icons"),t.setHtml("chevron_left"),e.appendChild(t),e.addEventListener("click",this._previous.bind(this)),this.headerNode.appendChild(e),this.currentModeNode=new l("span"),this.currentModeNode.addClass("current-mode"),this.currentModeNode.addEventListener("click",()=>{this._changeMode(-1),this.draw()}),this.headerNode.appendChild(this.currentModeNode);let i=new l("a");i.setAttribute("href","javascript:void(0)"),i.addClass(["previous","mdl-button","mdl-js-button","mdl-button--icon"]);let n=new l("em");n.addClass("material-icons"),n.setHtml("chevron_right"),i.appendChild(n),i.addEventListener("click",this._next.bind(this)),this.headerNode.appendChild(i)}_initContentNode(){this.contentNode=new l("div"),this.contentNode.addClass("content"),this.calendarNode.appendChild(this.contentNode)}_changeMode(e){let t=this._getMode(e);this._initMode(t)}_getMode(e){let t=this.modes.indexOf(this.activeMode);t!==-1&&(t+=e);let i=this.modes[t];return i||this.types[this.options.type]}_switchMode(e,t,i){let n=null;switch(this.activeMode){case"DAY":n=e();break;case"MONTH":n=t();break;case"YEAR":n=i();break;default:break}return n}_initMode(e){this.contentNode.removeChildren(),this.activeMode=e,this._switchMode(this._initDaysMode.bind(this),this._initMonthsMode.bind(this),this._initYearsMode.bind(this))}_initYearsMode(){this.yearsNode=new l("div"),this.yearsNode.addClass("years"),this.contentNode.appendChild(this.yearsNode)}_initMonthsMode(){this.monthsNode=new l("div"),this.monthsNode.addClass("months"),this.contentNode.appendChild(this.monthsNode)}_initDaysMode(){this.weekDaysNode=new l("div"),this.weekDaysNode.addClass("week-days"),this.contentNode.appendChild(this.weekDaysNode),this.daysNode=new l("div"),this.daysNode.addClass("days"),this.contentNode.appendChild(this.daysNode)}_previous(){let e=this._switchMode(()=>this.previous.month,()=>this.previous.year,()=>{let t=this.current.day.clone().subtract(this.maxYears,"years");return t.year()<0&&(t=this.current.day.clone()),t});this._setDate(e),this.draw()}_next(){let e=this._switchMode(()=>this.next.month,()=>this.next.year,()=>this.current.day.clone().add(this.maxYears,"years"));this._setDate(e),this.draw()}_setDate(e){this._setVariables(e),this._setPreviousMonth(),this._setCurrentMonth(),this._setNextMonth()}_setVariables(e){this.days=[],this.previous={day:window.moment(e).subtract(1,"days"),month:window.moment(e).subtract(1,"months"),year:window.moment(e).subtract(1,"years")},this.current={day:window.moment(e)},this.next={day:window.moment(e).add(1,"days"),month:window.moment(e).add(1,"months"),year:window.moment(e).add(1,"years")}}draw(){this._switchMode(this._drawDaysStructure.bind(this),this._drawMonthsStructure.bind(this),this._drawYearsStructure.bind(this))}_drawDaysStructure(){this._drawHeader("YYYY MMMM"),this._drawWeekDays(),this._drawDays()}_drawMonthsStructure(){this._drawHeader("YYYY"),this._drawMonths()}_drawYearsStructure(){this._drawHeader(null),this._drawYears()}_drawHeader(e){this.currentModeNode.removeChildren();let t=e?this.current.day.format(e):"";this.currentModeNode.setHtml(t)}_drawMonths(){this.monthsNode.removeChildren();for(let e=0;e<this.maxMonths;e++){let t=new si(this.current.day.clone().month(e),this.selectedDate,{});t.eventClick=this._onClick.bind(this);let i=t.getNode();this.monthsNode.appendChild(i)}}_drawYears(){this.yearsNode.removeChildren();let e=this.current.day.year()-this.current.day.year()%this.maxYears;for(let t=e;t<e+this.maxYears;t++){let i=new ni(this.current.day.clone().year(t),this.selectedDate,{});i.eventClick=this._onClick.bind(this);let n=i.getNode();this.yearsNode.appendChild(n)}}_drawWeekDays(){this.weekDaysNode.removeChildren();for(let e=this.options.start_day;e<this.options.start_day+7;e++){let t=new l("span");t.addClass("day");let i=window.moment.weekdaysMin(e%7);t.setHtml(i),this.weekDaysNode.appendChild(t)}}_drawDays(){this.daysNode.removeChildren();for(let e=0;e<this.days.length;e++){let i=this.days[e].getNode();this.daysNode.appendChild(i)}}_getDate(e,t,i){return[e,t+1,i].join("-")}_setPreviousMonth(){let e=this.previous.month.endOf("month").day()-this.options.start_day;for(let t=this.previous.month.daysInMonth()-e;t<=this.previous.month.daysInMonth();t++){let i=this._getDate(this.previous.month.year(),this.previous.month.month(),t),n=new Le(i,this.selectedDate,{css_class:"previous-month"});n.eventClick=this._onClick.bind(this),this.days.push(n)}}_setCurrentMonth(){for(let e=1;e<=this.current.day.daysInMonth();e++){let t=this._getDate(this.current.day.year(),this.current.day.month(),e),i=new Le(t,this.selectedDate,{css_class:"current-month"});i.eventClick=this._onClick.bind(this),this.days.push(i)}}_setNextMonth(){let e=this.days.length,t=this.maxDays-e;for(let i=1;i<=t;i++){let n=this._getDate(this.next.month.year(),this.next.month.month(),i),o=new Le(n,this.selectedDate,{css_class:"next-month"});o.eventClick=this._onClick.bind(this),this.days.push(o)}}_setModeDate(e){let t=this.current.day.clone();this._switchMode(()=>{t.month(e.month()),t.date(e.date())},()=>{t.month(e.month())},()=>{t.year(e.year())}),this._setSelectedDate(t),this._setDate(t)}_onClick(e){this._setModeDate(e);let t=this.types[this.options.type];this.activeMode!==t&&this._changeMode(1),this.draw(),this.eventClick(e)}_setSelectedDate(e){this.selectedDate=e}eventClick(e){p("Calendar.eventClick()",e)}};var ri=class{constructor(e){this._init(e),this._initEvents()}_init(e){this.canvasNode=e,ee(e)?this.canvasNode=new h(e).getItem():T(e)&&(this.canvasNode=new l("canvas")),this.canvasRaw=this.canvasNode.getNode(),this.context=this.canvasRaw.getContext("2d")}_initEvents(){this.canvasNode.addEventListener("mousemove",(e,t)=>{let i=e.getNode().getBoundingClientRect(),n=t.clientX-i.left,o=t.clientY-i.top;this.eventMouseMove(n,o)})}setWidth(e){this.canvasRaw.width=e}getWidth(){return this.canvasRaw.width}setHeight(e){this.canvasRaw.height=e}getHeight(){return this.canvasRaw.height}setSize(e,t){this.setWidth(e),this.setHeight(t)}drawPolygon(e,t,i,n,o,r){if(n<3)return;let a=Math.PI*2/n;this.context.save(),this.context.translate(e,t),this.context.beginPath(),this.context.rotate(o),this.context.moveTo(i,0);for(let d=1;d<n;d++)this.context.lineTo(i*Math.cos(a*d),i*Math.sin(a*d));this.context.closePath(),b(r,(d,c)=>{this.context[c]=d}),this.context.fill(),this.context.stroke(),this.context.restore()}drawRectangle(e,t,i,n,o,r){this.context.save(),this.context.translate(e,t),this.context.beginPath(),this.context.rotate(o),this.context.rect(0,0,i,n),b(r,(a,d)=>{this.context[d]=a}),r.fillStyle&&this.context.fill(),r.strokeStyle&&this.context.stroke(),this.context.restore()}drawImage(e,t,i){let n=t||C(e.getAttribute("width")),o=i||C(e.getAttribute("height"));this.context.save(),this.context.drawImage(e.getNode(),0,0,n,o),this.context.restore()}getImageDataXY(e,t){return this.context.getImageData(e,t,1,1).data}eventMouseMove(e,t){P("Canvas.eventMouseMove()",e,t)}clear(){this.context.clearRect(0,0,this.getWidth(),this.getHeight())}};var Ae=class{constructor(e,t={}){this.containerNode=e,this._setOptions(t),this._init()}_setOptions(e={}){let t=this;t.options=new u({image_url:null,text:""}),t.options.merge(e)}_init(){if(this.contentNode=new l("div"),this.contentNode.addClass("content-handler"),this.containerNode.insertAfter(this.contentNode),this.options.image_url){let e=new l("img");e.setAttribute("src",this.options.image_url),this.contentNode.appendChild(e)}if(this.options.text){let e=new l("p");e.setHtml(this.options.text),this.contentNode.appendChild(e)}this.show()}show(){this.contentNode.addClass("visible-flex"),this.containerNode.addClass("hidden")}hide(){this.contentNode.removeClass("visible-flex"),this.containerNode.removeClass("hidden")}};var He=class{constructor(e,t=[".pager",".pager-statistics"],i={}){this.pager=new h(t[0],e).getItem(),this.pagerStatistics=new h(t[1],e).getItem(),this._setOptions(i),this._init()}_setOptions(e={}){let t=this;t.options=new u({row_count:10,pager_num:4}),t.options.merge(e)}_init(){this.count=this.options.row_count,this.setPage(1)}_drawPager(){this.pager.removeChildren(),this.pageNum=Math.ceil(this.count/this.options.row_count),this._drawPreviousButton(),this._drawPageNumbers(),this._drawNextButton()}_drawStatistics(){let e=this.page-1,t=e*this.options.row_count+1,i=e*this.options.row_count+this.options.row_count;i=i>this.count?this.count:i,i>0?this.pagerStatistics.setHtml(O("{0}\u2012{1} / {2}",[t,i,this.count])):this.pagerStatistics.setHtml("")}_drawPreviousButton(){if(this.pageNum>1){let e=new l("button");e.addClass(["mdl-button","mdl-js-button","mdl-js-ripple-effect"]),e.addEventListener("click",()=>{this._previous()});let t=new l("em");t.addClass("material-icons"),t.setHtml("chevron_left"),e.appendChild(t),g(e),this.pager.appendChild(e)}}_drawNextButton(){if(this.pageNum>1){let e=new l("button");e.addClass(["mdl-button","mdl-js-button","mdl-js-ripple-effect"]),e.addEventListener("click",()=>{this._next()});let t=new l("em");t.addClass("material-icons"),t.setHtml("chevron_right"),e.appendChild(t),g(e),this.pager.appendChild(e)}}_drawPageNumbers(){let e=this._getPagers();e.length>1&&b(e,t=>{let i=new l("button");i.setData("page",t.page),i.setHtml(t.text),i.addClass(["mdl-button","mdl-js-button","mdl-js-ripple-effect"]),this.page===t.page&&i.addClass("mdl-button--accent"),i.addEventListener("click",n=>{let o=n.getData("page");this._go(o)}),g(i),this.pager.appendChild(i)})}_getPagers(){let e=Math.floor((this.page-1)/this.options.pager_num),t=[];e>0&&t.push({text:"...",page:e*this.options.pager_num});for(let i=1;i<=this.options.pager_num;i++){let n=e*this.options.pager_num+i;n<=this.pageNum&&t.push({text:n,page:n})}return this.pageNum>this.options.pager_num&&e!==Math.floor((this.pageNum-1)/this.options.pager_num)&&t.push({text:"...",page:e*this.options.pager_num+this.options.pager_num+1}),t}_next(){let e=this.page+1;e>this.pageNum&&(e=1),this._go(e)}_previous(){let e=this.page-1;e<1&&(e=this.pageNum),this._go(e)}setCount(e){this.count=e}_go(e){this.setPage(e),this.eventAction(this.page)}setPage(e){this.page=e,this.offset=(this.page-1)*this.options.row_count}draw(){this._drawStatistics(),this._drawPager()}eventAction(e){p("Pager.eventAction()",e)}};var Bs=class{constructor(e,t=".card-collection",i=null,n={}){this.cardCollectionNode=new h(t,e).getItem(),this.ctrl=i,this._setOptions(n),this._init()}_setOptions(e={}){let t=this;t.options=new u({no_content:{image_url:null,text:""},row_count:12,pager_num:4,sort:{column:null,order:"asc"}}),t.options.merge(e)}_init(){this.collection=new D,this.query="",this._initContentHandler(),this._initStructure(),this._initTemplate(),this.pager=new He(this.cardCollectionNode,[".pager",".pager-statistics"],this.options),this.pager.eventAction=e=>{this.refresh(e)}}_initContentHandler(){this.contentHandler=new Ae(this.cardCollectionNode,this.options.no_content)}_initStructure(){this.cardCollectionNode.addClass("card-collection"),this.body=new l("div"),this.body.addClass("cards"),this.cardCollectionNode.appendChild(this.body),this.cardFooterNode=new l("div"),this.cardFooterNode.addClass("card-footer"),this.cardCollectionNode.appendChild(this.cardFooterNode),this.pagerNode=new l("div"),this.pagerNode.addClass("pager-statistics"),this.cardFooterNode.appendChild(this.pagerNode),this.pagerNode=new l("div"),this.pagerNode.addClass("pager"),this.cardFooterNode.appendChild(this.pagerNode)}_initTemplate(){this.cardTemplate=new h("template",this.cardCollectionNode).getItem(),this.cardTemplate.remove(),this.template=this.cardTemplate.toString(!1)}_getCardNode(e){let t=new RegExp("{{[a-zA-Z._,() ]*}}","g"),i=this.template.match(t),n=this.template;return b(i,o=>{let r=o.replace("{{","").replace("}}","");if(j(r,"ctrl.")){let a=new RegExp("(([a-zA-Z._, ]*))","g"),d=r.match(a),c=d[0].replace("ctrl.",""),m=d[2].split(", "),v=[];if(b(m,N=>{N==="item"?v.push(e):v.push(e.get(N))}),this.ctrl){let N=this.ctrl[c];if(N){let X=N.apply(this.ctrl,v);n=n.replace(o,X)}else p(O("ctrl.{0}() missing",[c]))}}else n=n.replace(o,e.get(r))}),new l(n)}refresh(e=-1){e>-1&&this.pager.setPage(e);let t=new u({query:this.query,column:this.options.sort.column,order:this.options.sort.order,offset:this.pager.offset,limit:this.options.row_count});this.eventAction(t)}eventAction(e){p("CardCollection.eventAction()",e)}eventCardNode(e,t){p("CardCollection.eventCardNode()",e,t)}_addCard(e){let t=this._getCardNode(e);this.body.appendChild(t),this.eventCardNode(t,e),g(t)}setData(e){this.collection.reload(e),this.collection.size()===0?this.contentHandler.show():(this.contentHandler.hide(),this._draw())}setCount(e){this.pager.setCount(e),this.pager.draw()}_getItems(){let e=this.collection.getItems();return this.collection.size()>this.options.row_count&&(e=this.collection.limit(this.pager.offset,this.options.row_count)),e}_draw(){this.body.removeChildren(),b(this._getItems(),e=>{this._addCard(e)}),g(this.body)}render(){this.refresh()}};var Fs=class{constructor(e,t=".carousel",i={}){this.carouselNode=new h(t,e).getItem(),this._setOptions(i),this._init()}_setOptions(e={}){let t=this;t.options=new u({}),t.options.merge(e)}_init(){}};var ot=class{constructor(e,t){this.timeNode=e,this._setOptions(t),this._init()}_setOptions(e){this.options=e}_init(){this._initCircleNode(),this._initPointerNode()}_initCircleNode(){let e=new l("div");e.addClass("circle"),this.timeNode.appendChild(e);let t=window.getComputedStyle(e.getNode()),i=parseInt(t.width.slice(0,-2),10),n=parseInt(t.height.slice(0,-2),10);this.timeNode.removeChild(e),this._initSize(i,n)}_initSize(e,t){let i=window.getComputedStyle(this.timeNode.getNode());this.options.width=parseInt(i.width.slice(0,-2),10)-e,this.options.height=parseInt(i.height.slice(0,-2),10)-t,this.options.radius_x=this.options.width/2,this.options.radius_y=this.options.height/2}_initPointerNode(){let e=new l("div");e.addClass("center-point"),this.timeNode.appendChild(e),this.pointerNode=new l("div"),this.pointerNode.addClass("pointer"),this.timeNode.appendChild(this.pointerNode)}draw(e,t,i=1,n=!0){this._drawCircles(e,t,i,n)}_drawCircles(e,t,i=1,n=!0){let o=0;for(let r=e;r<=t;r++){let a=new l("div");if(this.timeNode.appendChild(a),r%i===0){let d=this.options.captions&&this.options.captions[o]?this.options.captions[o]:r;a.setHtml(d),o++}this._setCircleStyle(a,e,t,r,i,n),this._setCircleEvent(a,r)}}_setCircleEvent(e,t){e.setData("index",t),e.addEventListener("click",i=>{let n=i.getData("index");this.eventClick(n)})}_setCircleStyle(e,t,i,n,o=1,r=!0){let a=o/2>n%o?n%o:o-n%o,d=this.options.selected===n?"selected":null,c=this.options.radius_y+this.options.radius_y*Math.cos(360/(i+1-t)/180*n*Math.PI)*-1,m=this.options.radius_x+this.options.radius_x*Math.sin(360/(i+1-t)/180*n*Math.PI)*(r?1:-1);if(e.addClass(["circle","highlight"+a,d]),e.setStyle({position:"absolute","z-index":100-a,top:c+"px",left:m+"px"}),d){let N=360/(i+1-t)/180*n*Math.PI*(180/Math.PI)-90;this.pointerNode.setStyle({transform:"rotate("+N+"deg)"})}}eventClick(e){p("Time.eventClick()",e)}};var ai=class{constructor(e,t){this.clockNode=e,this._setOptions(t),this._init()}_setOptions(e){this.options=e}_init(){this.modes=["HOUR","MINUTE"],this.types={hour:this.modes[0],minute:this.modes[1]},this._initStructure()}_switchMode(e,t){let i=null;switch(this.activeMode){case"HOUR":i=e();break;case"MINUTE":i=t();break;default:break}return i}_initStructure(){this._initHeaderNode(),this._initContentNode(),this._initMode(this.types[this.options.type]),this.setTime(this.options.time)}_initHeaderNode(){this.headerNode=new l("div"),this.headerNode.addClass("header"),this.clockNode.appendChild(this.headerNode),this._initHoursHeaderNode(),this._initSeparatorHeaderNode(),this._initMinutesHeaderNode(),this._initPeriodHeaderNode()}_initPeriodHeaderNode(){this.periodHeaderNode=new l("div"),this.periodHeaderNode.addClass("period"),this.periodHeaderNode.addEventListener("click",this._togglePeriod.bind(this)),this.headerNode.appendChild(this.periodHeaderNode)}_togglePeriod(){this.period==="pm"?this.time.subtract(12,"hours"):this.time.add(12,"hours"),this._onClick(this.time)}_initMinutesHeaderNode(){this.minutesHeaderNode=new l("div"),this.minutesHeaderNode.addClass("minutes"),this.minutesHeaderNode.addEventListener("click",()=>{this._setMode(this.types.minute)}),this.headerNode.appendChild(this.minutesHeaderNode)}_initHoursHeaderNode(){this.hoursHeaderNode=new l("div"),this.hoursHeaderNode.addClass("hours"),this.hoursHeaderNode.addEventListener("click",()=>{this._setMode(this.types.hour)}),this.headerNode.appendChild(this.hoursHeaderNode)}_setMode(e){this._initMode(e),this.setTime(this.time),this.draw()}_initSeparatorHeaderNode(){let e=new l("div");e.addClass("separator"),e.setHtml(":"),this.headerNode.appendChild(e)}_initContentNode(){this.contentNode=new l("div"),this.contentNode.addClass("content"),this.clockNode.appendChild(this.contentNode)}_getTimeNode(){this.contentNode.removeChildren();let e=new l("div");return e.addClass("time"),this.contentNode.appendChild(e),e}_setHours(e){this.hours=e;let t=this.activeMode===this.types.hour?"active":null;this.hoursHeaderNode.removeClass("active"),this.hoursHeaderNode.addClass(["hours",t]);let i=e<10?"0"+e:e.toString();this.hoursHeaderNode.setHtml(i)}_setMinutes(e){this.minutes=e;let t=this.activeMode===this.types.minute?"active":null;this.minutesHeaderNode.removeClass("active"),this.minutesHeaderNode.addClass(["minutes",t]);let i=e<10?"0"+e:e.toString();this.minutesHeaderNode.setHtml(i)}_setPeriod(e){this.period=e,this.periodHeaderNode.removeClass(["am","pm"]),this.periodHeaderNode.addClass(["period",this.period]);let t=window.moment.localeData().meridiem(this.time.hour(),this.time.minute(),!0);this.periodHeaderNode.setHtml(t)}setTime(e){this.time=window.moment(e);let t=this.time.hour()%12||12;this._setHours(t);let i=this.time.minute();this._setMinutes(i);let n=this.time.hour()>12?"pm":"am";this._setPeriod(n)}_initMode(e){this.contentNode.removeChildren(),this.activeMode=e}_getMode(e){let t=this.modes.indexOf(this.activeMode);t!==-1&&(t+=e);let i=this.modes[t];return i||this.types[this.options.type]}_changeMode(e){let t=this._getMode(e);this._initMode(t)}draw(){let e=this._getTimeNode();this._switchMode(()=>{this._drawHours(e)},()=>{this._drawMinutes(e)})}_drawMinutes(e){let t=new ot(e,{selected:this.minutes,captions:["00","05"]});t.eventClick=i=>{this._changeMode(-1);let n=this.time.minute(i);this._onClick(n)},t.draw(0,59,5,!0)}_drawHours(e){let t=new ot(e,{selected:this.hours});t.eventClick=i=>{this._changeMode(1);let n=this.period==="pm"?i+12:i;n=n===24?0:n;let o=this.time.hour(n);this._onClick(o)},t.draw(1,12,1,!0)}_onClick(e){this.setTime(e),this.draw(),this.eventClick(e)}eventClick(e){p("Clock.eventClick()",e)}};var Be=class{constructor(e,t){this.datetimeNode=e,this._setOptions(t),this._init()}_setOptions(e){this.options=e}_init(){this._initVariables(),this._initStructure(),this._setValue(this.options.value)}_initVariables(){this.types={"datetime-local":{format:"YYYY-MM-DDTHH:mm:ss",calendar_type:"date",clock_type:"hour"},datetime:{format:"",calendar_type:"date",clock_type:"hour"},date:{format:"YYYY-MM-DD",calendar_type:"date",clock_type:""},time:{format:"HH:mm:ss",calendar_type:"",clock_type:"hour"},month:{format:"YYYY-MM",calendar_type:"month",clock_type:""},week:{format:"YYYY-\\Www",calendar_type:"week",clock_type:""},year:{format:"YYYY",calendar_type:"year",clock_type:""}},this.config=this.types[this.options.type]}_initStructure(){this._initDateTimeNode(),this._initCalendarNode(),this._initClockNode()}_initDateTimeNode(){this.datetimeNode.addClass("datetime"),this.datetimeNode.removeChildren()}_initCalendarNode(){this.config.calendar_type&&(this.calendarNode=new l("div"),this.calendarNode.addClass("calendar"),this.datetimeNode.appendChild(this.calendarNode))}_initClockNode(){this.config.clock_type&&(this.clockNode=new l("div"),this.clockNode.addClass("clock"),this.datetimeNode.appendChild(this.clockNode))}getConfig(){return this.config}_setValue(e){e=e||window.moment().format(this.config.format),this.value=window.moment(e,this.config.format)}setValue(e){this._initStructure(),this._setValue(e),this.draw()}getValue(){return this.value.format(this.config.format)}draw(){this._drawCalendar(),this._drawClock()}_drawCalendar(){if(this.config.calendar_type){let e=new oi(this.calendarNode,{date:this.value,type:this.config.calendar_type,start_day:1});e.eventClick=t=>{this.value.year(t.year()),this.value.month(t.month()),this.value.date(t.date()),this._onClick()},e.draw()}}_drawClock(){if(this.config.clock_type){let e=new ai(this.clockNode,{time:this.value,type:this.config.clock_type});e.eventClick=t=>{this.value.hour(t.hour()),this.value.minute(t.minute()),this._onClick()},e.draw()}}_onClick(){let e=this.getValue();this.eventClick(e)}eventClick(e){p("Date.eventClick()",e)}};var di=class{constructor(e,t={}){this.dropdown=e,this._setOptions(t),this._init()}_setOptions(e={}){let t=this;t.options=new u({id:U("dropdown")}),t.options.merge(e)}_init(){this.collection=new D,this.actions=[],this.item=null,this._appendButton(),this._appendMenu()}_appendButton(){this.buttonNode=new l("button"),this.buttonNode.setId(this.options.id),this.buttonNode.addClass(["mdl-button","mdl-js-button","mdl-button--icon"]);let e=new l("em");e.addClass("material-icons"),e.setHtml("more_vert"),this.buttonNode.appendChild(e),this.dropdown.appendChild(this.buttonNode)}_appendMenu(){this.menuNode=new l("ul"),this.menuNode.setFor(this.options.id),this.menuNode.addClass(["mdl-menu","mdl-menu--bottom-right","mdl-js-menu","mdl-js-ripple-effect"]),this.dropdown.appendChild(this.menuNode)}setActions(e,t){this.actions=e,this.item=t,this._renderMenu(),g(this.menuNode),g(this.buttonNode)}_renderMenu(){q(this.actions,e=>{let[t,i,n,o]=e.style(this.item);if(!o){let r=new l("li");r.addClass("mdl-menu__item"),r.setHtml(i||t),n&&r.setAttribute("disabled"),r.addEventListener("click",()=>{e.click(this.item)}),this.menuNode.appendChild(r)}})}};var y=class{constructor(e,t,i,n,o){this.input=e,this.label=t,this.error=i,this.inputBlock=n,this.form=o,this.error&&(this.errorTooltip=new F(this.error)),this._setInfoContainer(),this._setActionContainer(),this._setMutation(),this._setAdditionalLabel(this.label)}eventChange(e,t){P("BaseField.eventChange()",e,t)}eventClick(e){p("Button.eventClick()",e)}render(){p("BaseField.render()")}refresh(){p("BaseField.refresh()")}modelChange(e){p("BaseField.modelChange()",e)}getPreviousValue(){p("BaseField.getPreviousValue()")}getName(){let e=this.input.getAttribute("name");return this._getAttributeName(e)}getValue(){let e=this.input.getNode().value;return C(e)}_getAttributeName(e){let t=e||"";return t=t.replace(/]/g,""),t=t.replace(/\[/g,"."),t=f(t.slice(-1),".")?t.slice(0,-1):t,t}setError(e="",t=!1){this.error&&(this.errorTooltip.setMessage(e),this.error.setHtml(e),e&&t&&this.inputBlock&&this.inputBlock.addClass("is-invalid"))}checkValidity(e=!1,t=!0){let i=this.isValid();i?this.setError(""):t&&this.setError(this.input.getNode().validationMessage);let n=this._getUpgradedNode();e&&n&&(this.getValue()&&n.addClass("is-dirty"),i?n.removeClass("is-invalid"):n.addClass("is-invalid"))}isValidityValid(){return this.input.getNode().validity.valid}isValid(){return this.isValidityValid()}_getUpgradedNode(){return this.inputBlock}setValue(e){this.input.getNode().value=e,this.input.setAttribute("value",e),this.input.trigger("change")}exists(){return this.existsInputBlock()||this.existsInput()}existsInput(){return!!this.input&&this.input.exists()}existsInputBlock(){return!!this.inputBlock&&this.inputBlock.exists()}get(e){return this.input.get(e)}isRequired(){return this.input.getNode().required}setRequired(e){e?this.input.setAttribute("required"):this.input.removeAttribute("required"),this.input.getNode().required=e,this.checkValidity(!0,!1),this._setAdditionalLabel(this.label)}isEnabled(){return!this.isDisabled()}isDisabled(){return this.input.getNode().disabled}setDisabled(e){e?this.input.setAttribute("disabled"):this.input.removeAttribute("disabled"),this.input.getNode().disabled=e,this.checkValidity(!0,!1)}isVisible(){return!this.inputBlock.hasClass("hidden")}setVisibility(e){e?this.show():this.hide()}show(){this.isVisible()||this.inputBlock.removeClass("hidden")}hide(){this.isVisible()&&this.inputBlock.addClass("hidden")}setLabel(e){this.label&&!this.label.isEmpty()&&(this.label.setHtml(e),this._setAdditionalLabel(this.label))}_setInfoContainer(){this.inputBlock&&!this.inputBlock.isEmpty()&&(this.infoContainerNode=new h(".info-container",this.inputBlock).getItem(),this.infoContainerNode.isEmpty()&&(this.infoContainerNode=new l("div"),this.infoContainerNode.addClass(["info-container"]),this.inputBlock.appendChild(this.infoContainerNode)))}_setActionContainer(){this.inputBlock&&!this.inputBlock.isEmpty()&&(this.actionContainerNode=new h(".action-container",this.inputBlock).getItem(),this.actionContainerNode.isEmpty()&&(this.actionContainerNode=new l("div"),this.actionContainerNode.addClass(["action-container"]),this.inputBlock.appendChild(this.actionContainerNode)))}_setInfo(e){let t=e.getAttribute("title"),i=e.getAttribute("desc");if(t||i){let n=new h("a.info-button",this.infoContainerNode).getItem();n.isEmpty()||n.remove(),n=new l("a"),n.setAttribute("title",t||""),n.setAttribute("desc",i||""),n.setAttribute("href","javascript:void(0)"),n.addClass(["info-button","material-icons"]),n.setHtml("info_outline"),this.infoContainerNode.appendChild(n),new F(n,"LEFT").render()}}_setAdditionalLabel(e){if(e&&e.exists()){let t=this._getLabelRequiredText(e.getHtml(!0));e.setHtml(t),this._setInfo(e)}}_getLabelRequiredText(e){if(f(e,!0))return"&nbsp;";let t=" *",i=e.substring(e.length-t.length);return this.isRequired()&&i!==t?e+=t:!this.isRequired()&&i===t&&(e=e.replace(t,"")),e}_setMutation(){new MutationObserver(t=>{for(let i=0;i<t.length;i++){let n=t[i];n.attributeName==="disabled"?this.refresh():n.attributeName==="required"&&this.refresh()}}).observe(this.input.getNode(),{attributeFilter:["disabled","required"],attributes:!0,attributeOldValue:!0})}};var li=class extends y{constructor(e){super(e);this._init()}_init(){this.input.setAttribute("name","button")}render(){this.input.addClass(["mdl-button","mdl-js-button","mdl-button--raised","mdl-js-ripple-effect","mdl-button--accent"]),this.input.addEventListener("click",e=>{this.eventClick(e)}),this.refresh()}refresh(){g(this.input)}};var we=class extends y{constructor(e,t,i,n){super(e,t,i,n);this._init()}_init(){this.hiddenInput=new h("input[type=hidden]",this.inputBlock).getItem(),this.inputBlock.addClass("checkbox-field"),this.input.addEventListener("change",()=>(this._change(),!0))}_change(){let e=this.getValue();this.modelChange(e)}getValue(){let e=this.input.getNode().checked,t=this.hiddenInput.getAttribute("value");return e&&(t=this.input.getAttribute("value")),C(t)}setValue(e){let t=C(this.input.getAttribute("value"));this.input.getNode().checked=t===e,this.input.getNode().checked||this.input.removeAttribute("checked"),this.input.trigger("change")}setDisabled(e){e?(this.input.setAttribute("disabled"),this.label.addClass("is-disabled"),this.inputBlock.addClass("is-disabled")):(this.input.removeAttribute("disabled"),this.label.removeClass("is-disabled"),this.inputBlock.removeClass("is-disabled")),this.input.getNode().disabled=e,this.checkValidity(!0,!1)}setLabel(e){this.spanLabel&&!this.spanLabel.isEmpty()&&(this.spanLabel.setHtml(e),this._setAdditionalLabel(this.spanLabel))}refresh(){let e=this.label.getAttribute("data-label");if(e){let t=this._getLabelRequiredText(e);this.dataLabelNode.setHtml(t)}else this.dataLabelNode.setHtml("");this.isDisabled()&&this.inputBlock.addClass("is-disabled"),g(this.label,!1)}};var hi=class extends we{constructor(e,t,i,n){super(e,t,i,n)}render(){this.label.addClass(["mdl-checkbox","mdl-js-checkbox","mdl-js-ripple-effect"]);let e=this.input.getId();this.label.setFor(e);let t=this.label.getHtml(!0);this.spanLabel=new l("span"),this.spanLabel.addClass("mdl-checkbox__label"),this.spanLabel.setHtml(t),this.input.addClass("mdl-checkbox__input"),this.label.insert(this.input),this.label.appendChild(this.spanLabel),this.dataLabelNode=new l("span"),this.dataLabelNode.addClass("field-label"),this.label.insertBefore(this.dataLabelNode),this.refresh()}};var ie=class{constructor(e,t,i=!1){this.content=e,this.parent=t,this.withClose=i,this._init()}_init(){this.popupContainer=new je,this._draw()}_draw(){this.popupNode=new l("div"),this.popupNode.addClass(["popup","hidden"]),this.parent.addClass("popup-parent"),this.parent.appendChild(this.popupNode),this.popupNode.appendChild(this.content),this._initCloseButton()}_initCloseButton(){if(this.withClose){let e=new l("button");e.setAttribute("type","button"),e.addClass(["close","mdl-button","mdl-js-button","mdl-button--icon"]),e.addEventListener("click",()=>{this.close()}),this.popupNode.appendChild(e);let t=new l("em");t.addClass("material-icons"),t.setHtml("close"),e.appendChild(t),g(e)}}open(){this.popupContainer.closeAll(),this.popupContainer.push(ie,this),this.popupNode.removeClass("hidden"),this.popupContainer.setPosition(this.popupNode)}close(){this.popupContainer.delete(this),this.popupContainer.clearPosition(this.popupNode),this.popupNode.addClass("hidden"),this.eventClose()}eventClose(){P("Popup.eventClose()")}toggle(){this.isOpened()?this.close():this.open()}isOpened(){return!this.popupNode.hasClass("hidden")}};var Ws=(s,e,t)=>{let i=s/255,n=e/255,o=t/255,r=Math.max(i,n,o),a=r-Math.min(i,n,o),d=N=>(r-N)/6/a+1/2,c=N=>Math.round(N*100)/100,m=0,v=0;if(a==0)m=v=0;else{v=a/r;let N=d(i),X=d(n),se=d(o);i===r?m=se-X:n===r?m=.3333333333333333+N-se:o===r&&(m=.6666666666666666+X-N),m<0?m+=1:m>1&&(m-=1)}return[Math.round(m*360),c(v*100),c(r*100)]},rt=(s,e,t)=>{let i=[s,e,t],n=[];for(let o=0;o<i.length;o++)i[o]<=16?n[o]="0"+i[o].toString(16):n[o]=""+i[o].toString(16);return"#"+n.join("")},jr=s=>{let[e,t,i]=ci(s);return Ws(e,t,i)},ci=s=>{let e=s||"",t=parseInt(e.substring(1,3),16),i=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return[t,i,n]},Rs=(s,e,t)=>{let i=Math.floor(s*6),n=s*6-i,o=t*(1-e),r=t*(1-n*e),a=t*(1-(1-n)*e),d=0,c=0,m=0;switch(i%6){case 0:d=t,c=a,m=o;break;case 1:d=r,c=t,m=o;break;case 2:d=o,c=t,m=a;break;case 3:d=o,c=r,m=t;break;case 4:d=a,c=o,m=t;break;case 5:d=t,c=o,m=r;break}return[Math.round(d*255),Math.round(c*255),Math.round(m*255)]},Er=(s,e,t)=>{let[i,n,o]=Rs(s,e,t);return rt(i,n,o)},Sr=(s,e="#FEFEFE",t="#252525")=>{let i=ci(s);return(i[0]*299+i[1]*587+i[2]*114)/1e3>=128?t:e},Dr=(s,e=.5)=>{let t=ci(s);for(let i=0;i<t.length;i++)t[i]+=Math.round(t[i]*e),t[i]<0?t[i]=0:t[i]>255&&(t[i]=255);return rt(...t)};var ui=class extends y{constructor(e,t,i,n){super(e,t,i,n);this._init()}_init(){this.inputBlock.addClass("color-field"),this._initInput(),this._initImage(),this._initPreview(),this._setMaterialColors()}render(){this.label&&this.label.exists()&&this.label.addClass("field-label"),this.refresh()}refresh(){this.isRequired()&&this.getValue()===""&&this.inputBlock.addClass("is-invalid"),this.isDisabled()?this.inputBlock.addClass("is-disabled"):this.inputBlock.removeClass("is-disabled");let e=this.getValue()||"#000000";this.setValue(e)}_initInput(){this.input.addClass("hidden"),this.input.addEventListener("change",e=>{let t=e.getNode();return this.tooltip.setMessage(t.value),this.previewNode.setStyle({background:t.value}),this.modelChange(t.value),!0})}_initPreview(){this.previewNode=new l("div"),this.previewNode.addClass("preview"),this.inputBlock.beforeChild(this.previewNode),this.colorNode=new l("div"),this.colorNode.addClass("color"),this.previewNode.appendChild(this.colorNode),this.popup=new ie(this.canvas.canvasNode,this.inputBlock),this.tooltip=new F(this.previewNode),this.previewNode.addEventListener("click",()=>{this.isEnabled()&&(this._draw(),this.popup.open())})}_draw(){if(this.image.isEmpty()){let e=this.colors[0].length,t=this.colors.length,i=15;this.canvas.setSize(e*i,t*i);for(let n=0;n<e;n++)for(let o=0;o<t;o++)this.canvas.drawRectangle(n*i,o*i,i,i,0,{fillStyle:this.colors[o][n]})}else{let e=C(this.image.getAttribute("width")),t=C(this.image.getAttribute("height"));this.canvas.setSize(e,t),this.canvas.drawImage(this.image,e,t)}}_initImage(){this.image=new h("img",this.inputBlock).getItem(),this.image.isEmpty()||this.image.addClass("hidden"),this.canvas=new ri,this.canvas.canvasNode.addEventListener("click",(e,t)=>{let i=0,n=0;t.offsetX?(i=t.offsetX,n=t.offsetY):t.layerX&&(i=t.layerX,n=t.layerY);let o=this.canvas.getImageDataXY(i,n),r=rt(...o);this.setValue(r),this.popup.close()})}_setMaterialColors(){let e=["#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e8eaf6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#e8f5e9","#f1f8e9","#f9fbe7","#fffde7","#fff8e1","#fff3e0","#fbe9e7","#efebe9","#fafafa","#eceff1"],t=["#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#c5cae9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#c8e6c9","#dcedc8","#f0f4c3","#fff9c4","#ffecb3","#ffe0b2","#ffccbc","#d7ccc8","#f5f5f5","#cfd8dc"],i=["#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#9fa8da","#90caf9","#81d4fa","#80deea","#80cbc4","#a5d6a7","#c5e1a5","#e6ee9c","#fff59d","#ffe082","#ffcc80","#ffab91","#bcaaa4","#eeeeee","#b0bec5"],n=["#e57373","#f06292","#ba68c8","#9575cd","#7986cb","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#81c784","#aed581","#dce775","#fff176","#ffd54f","#ffb74d","#ff8a65","#a1887f","#e0e0e0","#90a4ae"],o=["#ef5350","#ec407a","#ab47bc","#7e57c2","#5c6bc0","#42a5f5","#29b6f6","#26c6da","#26a69a","#66bb6a","#9ccc65","#d4e157","#ffee58","#ffca28","#ffa726","#ff7043","#8d6e63","#bdbdbd","#78909c"],r=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],a=["#e53935","#d81b60","#8e24aa","#5e35b1","#3949ab","#1e88e5","#039be5","#00acc1","#00897b","#43a047","#7cb342","#c0ca33","#fdd835","#ffb300","#fb8c00","#f4511e","#6d4c41","#757575","#546e7a"],d=["#d32f2f","#c2185b","#7b1fa2","#512da8","#303f9f","#1976d2","#0288d1","#0097a7","#00796b","#388e3c","#689f38","#afb42b","#fbc02d","#ffa000","#f57c00","#e64a19","#5d4037","#616161","#455a64"],c=["#c62828","#ad1457","#6a1b9a","#4527a0","#283593","#1565c0","#0277bd","#00838f","#00695c","#2e7d32","#558b2f","#9e9d24","#f9a825","#ff8f00","#ef6c00","#d84315","#4e342e","#424242","#37474f"],m=["#b71c1c","#880e4f","#4a148c","#311b92","#1a237e","#0d47a1","#01579b","#006064","#004d40","#1b5e20","#33691e","#827717","#f57f17","#ff6f00","#e65100","#bf360c","#3e2723","#212121","#263238"];this.colors=[r,e,t,i,n,o,r,a,d,c,m]}};var mi=class extends y{constructor(e,t,i,n){super(e,t,i,n);this._init()}_init(){this.inputBlock.addClass("datetime-field"),this.input.addClass("hidden"),this.datetimeContainer=new l("div"),this.datetimeContainer.addClass("datetime-container"),this.input.insertAfter(this.datetimeContainer),this.datetimeInput=new l("div"),this.datetimeInput.addClass("datetime-input"),this.datetimeInput.addEventListener("click",this._onClick.bind(this)),this.datetimeContainer.appendChild(this.datetimeInput),this._initInput()}_initInput(){this.format=this.input.getData("format"),this.input.addEventListener("change",()=>{let i=this.getValue().toString();return this.modelChange(i),!0});let e=this.input.getAttribute("type"),t=this.getValue().toString();if(this.datetimeNode=new l("div"),this.datetime=new Be(this.datetimeNode,{value:t,type:e}),this.datetime.eventClick=i=>{this.setValue(i)},this.popup=new ie(this.datetimeNode,this.inputBlock),this.popup.eventClose=()=>{this.datetimeInput.removeClass("active")},t){let i=this.datetime.getValue();this._setTag(i)}}render(){this.label&&this.label.exists()&&this.label.addClass("field-label");let e=new l("a");e.setAttribute("href","javascript:void(0)"),e.addClass(["material-icons","size-24","expander"]),e.setHtml("date_range"),e.addEventListener("click",this._onClick.bind(this)),this.actionContainerNode.appendChild(e),this.refresh(),this.datetime.draw()}refresh(){this.isDisabled()?this.inputBlock.addClass("is-disabled"):this.inputBlock.removeClass("is-disabled")}setValue(e){this._setTag(e),this.input.setAttribute("value",e),this.input.trigger("change"),this.datetime.setValue(e)}_setTag(e){if(this.datetimeInput.removeChildren(),e){let t=window.moment(e,this.datetime.getConfig().format).format(this.format),i=new l("div");if(i.addClass("field-tag"),i.setHtml(t),this.datetimeInput.appendChild(i),this.isEnabled()){let n=new l("a");n.setAttribute("href","javascript:void(0)"),n.addClass(["material-icons","size-18","close"]),n.setHtml("close"),n.addEventListener("click",()=>{this.setValue("")}),i.addClass("tag-with-action"),i.appendChild(n)}}}_onClick(){this.isEnabled()&&(this.datetimeInput.addClass("active"),this.popup.toggle())}};var pi=class extends y{constructor(e,t,i,n,o){super(e,t,i,n);this.isStartInput=o,this._init()}_init(){this.inputBlock.addClass("datetime-range-field"),this.input.addClass("hidden"),this.datetimeContainer=new h(".datetime-container",this.inputBlock).getItem(),this.isStartInput&&(this.datetimeContainer=new l("div"),this.datetimeContainer.addClass("datetime-container"),this.input.insertAfter(this.datetimeContainer)),this.datetimeInput=new l("div"),this.datetimeInput.addClass("datetime-input"),this.datetimeInput.addEventListener("click",this._onClick.bind(this)),this.datetimeContainer.appendChild(this.datetimeInput),this._initInput()}_initInput(){this.format=this.input.getData("format"),this.input.addEventListener("change",()=>{let i=this.getValue().toString();return this.modelChange(i),!0});let e=this.input.getAttribute("type"),t=this.getValue().toString();if(this.datetimeNode=new l("div"),this.datetime=new Be(this.datetimeNode,{value:t,type:e}),this.datetime.eventClick=i=>{this.setValue(i)},this.popup=new ie(this.datetimeNode,this.inputBlock),this.popup.eventClose=()=>{this.datetimeInput.removeClass("active")},t){let i=this.datetime.getValue();this._setTag(i)}}render(){this.label&&this.label.exists()&&this.label.addClass("field-label");let e=new l("a");e.setAttribute("href","javascript:void(0)"),e.addClass(["material-icons","size-24","expander"]),this.isStartInput?(e.setHtml("remove"),this.datetimeInput.insertAfter(e)):(e.setHtml("date_range"),this.actionContainerNode.appendChild(e)),e.addEventListener("click",this._onClick.bind(this)),this.refresh(),this.datetime.draw()}refresh(){this.isDisabled()?this.inputBlock.addClass("is-disabled"):this.inputBlock.removeClass("is-disabled")}setValue(e){this._setTag(e),this.input.setAttribute("value",e),this.input.trigger("change"),this.datetime.setValue(e)}_setTag(e){if(this.datetimeInput.removeChildren(),e){let t=window.moment(e,this.datetime.getConfig().format).format(this.format),i=new l("div");if(i.addClass("field-tag"),i.setHtml(t),this.datetimeInput.appendChild(i),this.isEnabled()){let n=new l("a");n.setAttribute("href","javascript:void(0)"),n.addClass(["material-icons","size-18","close"]),n.setHtml("close"),n.addEventListener("click",()=>{this.setValue("")}),i.addClass("tag-with-action"),i.appendChild(n)}}}_onClick(){this.isEnabled()&&(this.datetimeInput.addClass("active"),this.popup.toggle())}};var fi=class extends y{constructor(e){super(e);this._init()}_init(){this.input.addEventListener("change",e=>{let t=e.getNode();return this.modelChange(t.value),!0})}render(){}refresh(){}};var gi=class extends we{constructor(e,t,i,n){super(e,t,i,n)}render(){this.label.addClass(["mdl-icon-toggle","mdl-js-icon-toggle","mdl-js-ripple-effect"]),this.checkedIcon=this.input.getData("checked"),this.uncheckedIcon=this.input.getData("unchecked"),this.icon=new l("em"),this.icon.addClass(["mdl-icon-toggle__label","material-icons"]),this.icon.setHtml(this.input.getNode().checked?this.checkedIcon:this.uncheckedIcon),this.input.addClass("mdl-icon-toggle__input");let e=this.label.getText();this.spanLabel=new l("span"),this.spanLabel.addClass("mdl-icon__label"),this.spanLabel.setHtml(e),this.label.insert(this.input),this.label.appendChild(this.icon),this.label.appendChild(this.spanLabel),this.dataLabelNode=new l("span"),this.dataLabelNode.addClass("field-label"),this.label.insertBefore(this.dataLabelNode),this.refresh()}_change(){let e=this.getValue();this.icon.setHtml(this.input.getNode().checked?this.checkedIcon:this.uncheckedIcon),this.modelChange(e)}setValue(e){let t=C(this.input.getAttribute("value"));this.input.getNode().checked=t===e,this.input.getNode().checked||this.input.removeAttribute("checked"),this.icon.setHtml(this.input.getNode().checked?this.checkedIcon:this.uncheckedIcon),this.input.trigger("change")}};var vi=class extends y{constructor(e,t,i,n,o){super(e,t,i,n,o);this._init()}_init(){this.inputBlock.addClass("radiobutton-field"),this.input.addEventListener("change",()=>(this._change(),!0))}_change(){let e=this.input.getAttribute("value");this.modelChange(e);let t=this.input.getAttribute("name");new h(O('input[name="{0}"]',[t]),this.form.formNode).each(n=>{let o=n.getParentNode();o.addClass("is-other-checked"),o.getParentNode().removeClass("is-invalid")})}render(){this.label.addClass(["mdl-radio","mdl-js-radio","mdl-js-ripple-effect"]);let e=this.input.getId();this.label.setFor(e);let t=this.label.getHtml(!0),i=new l("span");i.addClass("mdl-radio__label"),i.setHtml(t),this.input.addClass("mdl-radio__button"),this.label.insert(this.input),this.label.appendChild(i),this.dataLabelNode=new l("span"),this.dataLabelNode.addClass("field-label"),this.label.insertBefore(this.dataLabelNode),this.refresh()}refresh(){let e=this.label.getAttribute("data-label");if(e){let t=this._getLabelRequiredText(e);this.dataLabelNode.setHtml(t)}else this.dataLabelNode.setHtml("");this.isDisabled()&&this.inputBlock.addClass("is-disabled"),g(this.label,!1)}setValue(e){this.input.getAttribute("value")===e&&(this.input.getNode().checked=!0,this.input.trigger("change"))}getValue(){let e=null;return this._getRadioButtonInputs().each(t=>{t.getNode().checked&&(e=t.getAttribute("value"))}),C(e)}setDisabled(e){this._getRadioButtonInputs().each(t=>{e?(t.setAttribute("disabled"),t.getParentNode().addClass("is-disabled"),t.getParentNode().getParentNode().addClass("is-disabled")):(t.removeAttribute("disabled"),t.getParentNode().removeClass("is-disabled"),t.getParentNode().getParentNode().removeClass("is-disabled")),t.getNode().disabled=e}),this.checkValidity(!0,!1)}isDisabled(){let e=!1;return this._getRadioButtonInputs().each(t=>{t.getNode().disabled&&(e=!0)}),e}_getRadioButtonInputs(){let e=this.input.getAttribute("name");return new h(O('input[name="{0}"]',[e]),this.form.formNode)}setLabel(e){this.spanLabel&&!this.spanLabel.isEmpty()&&(this.spanLabel.setHtml(e),this._setAdditionalLabel(this.spanLabel))}};var bi=class extends y{constructor(e){super(e);this._init()}_init(){this.input.setAttribute("name","reset")}render(){this.input.addClass(["mdl-button","mdl-js-button","mdl-js-ripple-effect"]),this.refresh()}refresh(){g(this.input)}};var wi=class extends y{constructor(e,t,i,n){super(e,t,i,n);this._init()}_init(){this.input.addEventListener("keyup",(e,t)=>{let i=e.getNode();return this.modelChange(i.value),f(t.keyCode,13)&&this.eventEnter(i.value),!0}),this.input.addEventListener("change",e=>{let t=e.getNode();return this.modelChange(t.value),!0})}render(){this.inputBlock.addClass(["search-field","mdl-textfield","mdl-js-textfield","mdl-textfield--expandable"]),this.input.addClass(["mdl-textfield__input"]),this.label.addClass(["mdl-button","mdl-js-button","mdl-button--icon"]);let e=new l("em");e.addClass(["material-icons","search-button"]),e.setHtml("search"),this.label.insert(e),this.holderNode=new l("div"),this.holderNode.addClass("mdl-textfield__expandable-holder"),this.holderNode.appendChild(this.input),this.inputBlock.appendChild(this.holderNode);let t=new l("label");t.addClass("mdl-textfield__label"),this.holderNode.appendChild(t),this._initClearButton(),this.refresh()}refresh(){this.isRequired()&&this.getValue()===""&&this.inputBlock.addClass("is-invalid"),g(this.inputBlock)}_initClearButton(){let e=new l("a");e.setAttribute("href","javascript:void(0)"),e.addClass(["material-icons","clear-button"]),e.setHtml("clear"),e.addEventListener("click",()=>{this.isEnabled()&&(this.inputBlock.removeClass(["is-dirty","is-focused"]),this.setValue(""),this.eventEnter(""))}),this.holderNode.appendChild(e)}eventEnter(e){p("Search.eventEnter()",e)}};var _i=class extends y{constructor(e,t,i,n){super(e,t,i,n);this._init()}_init(){this.input.addClass("hidden"),this.inputBlock.addClass("select-field"),this.query="",this.ids=[],this._initOptions(),this._initChangeEvent(),this._initPopup()}isMultiple(){return this.input.hasAttribute("multiple")}_initPopup(){this.containerNode=new l("div"),this._drawSearchInput(),this.listNode=new l("div"),this.listNode.addClass("options-list"),this.containerNode.appendChild(this.listNode),this.popup=new ie(this.containerNode,this.inputBlock)}_initChangeEvent(){this.input.addEventListener("change",()=>(this._change(),!0))}_initOptions(){this.options=new D,new h("option",this.input).each(t=>{let i=t.getAttribute("value")||"",n=t.getAttribute("data-image")||"",o=t.getAttribute("data-item")||{},r=t.getText()||"",a=new u({id:i,name:r,image:n,item:o});a.setRaw("option_node",t),this.options.push(a)})}render(){this.label&&this.label.exists()&&this.label.addClass("field-label"),this.iconNode=new l("a"),this.iconNode.setAttribute("href","javascript:void(0)"),this.iconNode.addClass(["material-icons","size-24","expander"]),this.iconNode.setHtml("expand_more"),this.iconNode.addEventListener("click",()=>{this.isEnabled()&&this.open()}),this.actionContainerNode.appendChild(this.iconNode),this.refresh()}refresh(){new h(".select-container",this.inputBlock).getItem().remove(),this.isDisabled()?this.inputBlock.addClass("is-disabled"):this.inputBlock.removeClass("is-disabled"),this.selectContainerNode=new l("div"),this.selectContainerNode.addClass("select-container"),this.selectContainerNode.addEventListener("click",()=>{this.isEnabled()&&this.open()}),this.input.insertAfter(this.selectContainerNode),this.selectNode=new l("div"),this.selectNode.addClass("select-input"),this.selectContainerNode.appendChild(this.selectNode);let t=this._getSelectedIds();this._setSelectTags(t)}setValue(e){this.ids=e,L(e)||(this.ids=[e]),this._setSelectedIds(this.ids)}getValue(){let e=this._getSelectedIds();return e=e.filter(t=>!f(t,"")),this.isMultiple()?e:e[0]||null}getOptionValue(e){let t=this.getValue();if(t){let i=this.options.findById(t);return e?i.get(O("item.{0}",[e])):i}return t}showLoader(){this.iconNode.setHtml("refresh"),this.iconNode.addClass("rotate")}_hideLoader(){this.iconNode.setHtml("expand_more"),this.iconNode.removeClass("rotate")}setOptions(e,t="value",i="name",n=""){new h("option",this.input).each(r=>{r.getAttribute("value")&&r.remove()}),b(e,r=>{let a=r.get(t),d=r.get(i),c="";n&&(c=r.get(n));let m=new l("option");m.setAttribute("value",a),m.setAttribute("data-image",c),m.setAttribute("data-item",r),m.setHtml(d),this.input.appendChild(m)}),this._initOptions(),this._hideLoader(),this.setValue(this.ids)}_change(){let e=this._getSelectedIds();this._setSelectTags(e);let t=this.getValue();this.modelChange(t)}_setSelectTags(e){this.isRequired()&&e.length===1&&e[0]===""&&this.inputBlock.addClass("is-invalid"),this.isMultiple()?this._setMultipleTag(e):this._setSimpleTag(e[0])}_setSimpleTag(e){let t=this.options.findById(e);this._setTags(t)}_setMultipleTag(e){let t=[];if(b(e,i=>{let n=this.options.findById(i);n&&t.push(n)}),ye(t.length,0))this._setTags(t);else if(this.isRequired()){let i=this.options.get(0);this._setTags(i)}else f(e.length,0)&&this._setTags([])}_setTags(e){L(e)||(e=[e]),this.selectNode.removeChildren(),b(e,t=>{let i=new l("div");i.addClass("field-tag"),i.setHtml(t.get("name")),this.isEnabled()&&i.addEventListener("click",()=>{this.open()}),this.selectNode.appendChild(i);let n=t.get("id");if(ye(n,"")&&this.isEnabled()){let o=new l("a");o.setAttribute("href","javascript:void(0)"),o.addClass(["material-icons","size-18","close"]),o.setHtml("close"),o.addEventListener("click",()=>{this._handleSelectedId(n)}),i.addClass("tag-with-action"),i.appendChild(o)}})}_setSelectedIds(e){this.options.each(t=>{let i=t.get("id"),n=S(e,i),r=t.get("option_node").getNode();n?r.setAttribute("selected","selected"):r.removeAttribute("selected"),r.selected=n}),this._change()}_getSelectedIds(){let e=[];return this.options.each(t=>{if(t.get("option_node").getNode().selected){let o=t.get("id");e.push(o)}}),e.length===0?[""]:e}_handleSelectedId(e){let t=this._getSelectedIds();this.isMultiple()?((f(e,"")||f(t[0],""))&&Ce(t),S(t,e)?xe(t,e):t.push(e),t.length===0&&(t=[""])):S(t,e)?t=[""]:t=[e],this.query="",this._setSelectedIds(t),this.close()}_drawItems(e){this.listNode.removeChildren();let t=this._getSelectedIds();b(e,i=>{let n=i.get("id"),o=new l("a");o.setAttribute("href","javascript:void(0)"),S(t,n)&&o.addClass("selected"),o.addEventListener("click",()=>{this._handleSelectedId(n)}),this.listNode.appendChild(o);let r=i.get("image");if(r){let c=new l("img");c.setAttribute("src",r),o.appendChild(c)}let a=i.get("name"),d=new l("span");d.setHtml(a),o.appendChild(d)})}_drawSearchInput(){let e=new l("div");e.addClass("search-box"),this.containerNode.appendChild(e);let t=new l("div");t.addClass(["mdl-textfield","mdl-js-textfield"]),t.addEventListener("click",()=>{}),e.appendChild(t);let i=U("select");this.searchInputNode=new l("input"),this.searchInputNode.setId(i),this.searchInputNode.setAttribute("type","text"),this.searchInputNode.addClass("mdl-textfield__input"),this.searchInputNode.addEventListener("keyup",o=>{let r=o.getNode();return this._search(r.value),!0}),t.appendChild(this.searchInputNode);let n=new l("label");n.setFor(i),n.addClass("mdl-textfield__label"),t.appendChild(n),g(t)}open(){this._search(this.query),this.popup.open(),this.searchInputNode.getNode().focus()}close(){this.popup.close()}_search(e){this.query=e,this.searchInputNode.getNode().value=e,this.searchInputNode.set("value",e);let t=new RegExp(e,"i"),i=[];this.options.each(n=>{let o=n.get("name");t.test(o)&&i.push(n)}),this._drawItems(i)}};var yi=class extends y{constructor(e){super(e);this._init()}_init(){this.input.setAttribute("name","submit")}render(){this.input.addClass(["mdl-button","mdl-js-button","mdl-button--raised","mdl-js-ripple-effect","mdl-button--primary"]),this.refresh()}refresh(){g(this.input)}};var Ci=class extends we{constructor(e,t,i,n){super(e,t,i,n)}render(){this.label.addClass(["mdl-switch","mdl-js-switch","mdl-js-ripple-effect"]);let e=this.label.getText();this.spanLabel=new l("span"),this.spanLabel.addClass("mdl-switch__label"),this.spanLabel.setHtml(e),this.input.addClass("mdl-switch__input"),this.label.insert(this.input),this.label.appendChild(this.spanLabel),this.dataLabelNode=new l("span"),this.dataLabelNode.addClass("field-label"),this.label.insertBefore(this.dataLabelNode),this.refresh()}};var xi=class extends y{constructor(e,t,i,n){super(e,t,i,n);this._init()}_init(){this.inputBlock.addClass("textarea-field"),this.input.addEventListener("keyup",e=>{let t=e.getNode();return this.modelChange(t.value),this._isRichText()&&this.richText.setHtml(t.value),!0}),this.input.addEventListener("change",e=>{let t=e.getNode();return this.modelChange(t.value),!0})}render(){this.inputBlock.addClass(["mdl-textfield","mdl-js-textfield","mdl-textfield--floating-label"]),this.input.addClass(["mdl-textfield__input","mdl-textarea__input"]),this.label&&this.label.exists()&&this.label.addClass("mdl-textfield__label"),this._isRichText()&&this._renderRichText(),this.refresh()}_renderRichText(){this.input.addClass("hidden");let e=this.getValue();e=e.indexOf("<p>")===0?e:`<p>${e||"<br />"}</p>`,this.richText=new l("div"),this.richText.addClass(["mdl-textfield__input","mdl-textarea__input","textbox"]),this.richText.setHtml(e),this.richText.addEventListener("keydown",(t,i)=>(i.keyCode===13&&document.execCommand("defaultParagraphSeparator",!1,"p"),!0)),this.richText.addEventListener("keyup",t=>(this._setValue(t.getHtml(!0)),!0)),this.richText.addEventListener("paste",(t,i)=>{let n="";return i.clipboardData?n=i.clipboardData.getData("text/plain"):window.clipboardData&&(n=window.clipboardData.getData("Text")),document.queryCommandSupported("insertHTML")?document.execCommand("insertHTML",!1,n):document.execCommand("insertText",!1,n),!1}),this.input.insertAfter(this.richText),this.richTextNode=this.richText.getNode(),this.richTextNode.contentEditable="true",this._renderToolbarButtons()}_isRichText(){return!!this.input.getAttribute("data-rich-text")}_renderToolbarButtons(){this.toolbarNode=new l("div"),this.toolbarNode.addClass("toolbar"),this.input.insertBefore(this.toolbarNode),this._renderToolbarButton("undo",()=>{this._formatDoc("undo")}),this._renderToolbarButton("redo",()=>{this._formatDoc("redo")}),this._renderToolbarButton("format_bold",()=>{this._formatDoc("bold")}),this._renderToolbarButton("format_italic",()=>{this._formatDoc("italic")}),this._renderToolbarButton("format_underline",()=>{this._formatDoc("underline")}),this._renderToolbarButton("format_list_bulleted",()=>{this._formatDoc("insertunorderedlist")}),this._renderToolbarButton("format_list_numbered",()=>{this._formatDoc("insertorderedlist")}),this._renderToolbarButton("format_clear",()=>{this._formatDoc("removeFormat")}),this._renderToolbarButton("code",()=>{this._setHtmlMode(!this._isHtmlMode())})}_renderToolbarButton(e,t){let i=new l("a");i.setAttribute("href","javascript:void(0)"),i.addClass("material-icons"),i.setHtml(e),i.addEventListener("click",()=>{t()}),this.toolbarNode.appendChild(i)}_setHtmlMode(e){this.htmlMode=e,this._setDocMode(this.htmlMode)}_isHtmlMode(){return this.htmlMode===!0}_formatDoc(e,t){this._isHtmlMode()||(document.execCommand(e,!1,t),this._setValue(this.richTextNode.innerHTML))}_setDocMode(e){e?(this.richText.addClass("hidden"),this.input.removeClass("hidden")):(this.richText.removeClass("hidden"),this.input.addClass("hidden")),this.richTextNode.focus()}refresh(){this.isRequired()&&this.getValue()===""&&this.inputBlock.addClass("is-invalid"),this._isRichText()&&this.isDisabled()&&(this.richTextNode.contentEditable="false"),g(this.inputBlock)}_setValue(e){let t=this.input.getNode();t.value=e.toString(),this.input.trigger("change")}setValue(e){this._isRichText()&&(this.richTextNode.innerHTML=e),this._setValue(e)}getValue(){return this.input.getNode().value}};var Ii=class extends y{constructor(e,t,i,n){super(e,t,i,n);this._init()}_init(){this.inputBlock.addClass("url-field"),this.protocol=this.input.getData("protocol"),this.input.addEventListener("keyup",e=>{let t=e.getNode();return this.modelChange(t.value),!0}),this.input.addEventListener("change",e=>{let t=e.getNode();return this.modelChange(t.value),!0})}render(){if(this.inputBlock.addClass(["mdl-textfield","mdl-js-textfield","mdl-textfield--floating-label"]),this.input.addClass(["mdl-textfield__input"]),this.label&&this.label.exists()&&this.label.addClass("mdl-textfield__label"),this.protocol){let e=new l("span");e.addClass("protocol"),e.setHtml(this.protocol),this.input.insertAfter(e)}this.refresh()}refresh(){this.isRequired()&&this.getValue()===""&&this.inputBlock.addClass("is-invalid"),g(this.inputBlock)}};var ki=class extends y{constructor(e,t,i,n){super(e,t,i,n);this._init()}_init(){this.inputBlock.addClass("file-field"),this._initFileIcon(),this._initRemoveButton(),this._initButtons(),this._initDefaultImg(),this._initValueSrc(),this.input.addEventListener("change",e=>{let i=e.getNode().files[0];return this._read(i),!0})}_isDocument(){let e=this.input.getAttribute("accept");return j(e,".docx")||j(e,".xlsx")||j(e,".pdf")}_initDefaultImg(){this.imageTag=new h("img",this.inputBlock).getItem(),this.imageTag.isEmpty()&&(this.imageTag=new l("img"),this.inputBlock.beforeChild(this.imageTag))}_initValueSrc(){if(this.valueSrc=this.imageTag.getAttribute("src"),this.defaultSrc=this.input.getAttribute("data-default-value"),!this.defaultSrc){let e=this.isRequired()?"grey;stroke:red;stroke-width:10;stroke-dasharray:15,10":"grey";this.defaultSrc=this._getFileIconSrc("N/A",e)}this.imageTag.setAttribute("src",this.valueSrc||this.defaultSrc)}_initRemoveButton(){this.removeButton=new l("a"),this.removeButton.setAttribute("href","javascript:void(0)"),this.removeButton.addClass(["remove-button","material-icons"]),this.removeButton.setHtml("delete"),this.removeButton.addEventListener("click",()=>{this.isEnabled()&&this._remove()}),this.actionContainerNode.appendChild(this.removeButton)}_initButtons(){let e=new l("a");e.setAttribute("href","javascript:void(0)"),e.addClass(["browse-button","material-icons"]),this._isDocument()?e.setHtml("description"):e.setHtml("image"),e.addEventListener("click",()=>{this.isEnabled()&&this.input.getNode().click()}),this.actionContainerNode.appendChild(e)}_lookupByMimeType(e){return this.fileTypes[e]}_lookupByExtension(e){let t=[];for(let i in this.fileTypes)if(Object.hasOwnProperty.call(this.fileTypes,i)){let n=this.fileTypes[i];if(n[0]===e){let o=n[1];t=[i,o]}}return t}_initFileIcon(){this.fileTypes={"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx","blue"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx","green"],"application/pdf":["pdf","red"]},this.fileTypeSVG='<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path style="fill:#E2E5E7;" d="M128,0c-17.6,0-32,14.4-32,32v448c0,17.6,14.4,32,32,32h320c17.6,0,32-14.4,32-32V128L352,0H128z"/><path style="fill:#B0B7BD;" d="M384,128h96L352,0v96C352,113.6,366.4,128,384,128z"/><polygon style="fill:#CAD1D8;" points="480,224 384,128 480,128 "/><path style="fill:#CAD1D8;" d="M400,432H96v16h304c8.8,0,16-7.2,16-16v-16C416,424.8,408.8,432,400,432z"/><path style="fill:#000000;" d="M416,416c0,8.8-7.2,16-16,16H48c-8.8,0-16-7.2-16-16V256c0-8.8,7.2-16,16-16h352c8.8,0,16,7.2,16,16V416z"/><text x="220" y="380" text-anchor="middle" style="fill:#FFF;font-weight:700;font-family:Arial;font-size:120px;">TYPE</text></svg>'}_getFileIconSrc(e,t){let i=this.fileTypeSVG;i=i.replace("#000000",t),i=i.replace("TYPE",e);let n=Qe(i);return O("data:image/svg+xml;base64,{0}",[n])}render(){this.inputBlock.addClass(["mdl-textfield","mdl-js-textfield","mdl-textfield--floating-label"]),this.input.addClass("mdl-textfield__input"),this.label&&this.label.exists()&&this.label.addClass("mdl-textfield__label"),this.refresh()}refresh(){this.isRequired()&&this.getValue()===""&&this.inputBlock.addClass("is-invalid"),this._handleRemoveButton(),g(this.inputBlock)}_read(e){if(e){let t=e.name,i=new FileReader;i.onload=n=>{let o=n.target,r=";base64,",a=o.result.replace(r,";filename="+t+r);if(this.valueSrc=a,!j(e.type,"image/")){let[d,c]=this._lookupByMimeType(e.type);a=this._getFileIconSrc(d,c)}this.imageTag.setAttribute("src",a),this._handleRemoveButton(),this.modelChange(this.valueSrc)},i.readAsDataURL(e)}}_handleRemoveButton(){!this.isRequired()&&this.valueSrc?this.removeButton.removeClass("hidden"):this.removeButton.addClass("hidden")}_remove(){this.input.getNode().value="",this.valueSrc=null,this.defaultSrc?this.imageTag.setAttribute("src",this.defaultSrc):this.imageTag.removeAttribute("src"),this._handleRemoveButton(),this.modelChange(null)}setValue(e){let t=e;if(E(e)&&(t=e.url),t){if(this.valueSrc=t,this._isDocument()){let i=ze(t),[n,o]=this._lookupByExtension(i);t=this._getFileIconSrc(i,o)}this.imageTag.setAttribute("src",t),this._handleRemoveButton()}this.modelChange("")}};var Ti=class extends y{constructor(e,t,i,n){super(e,t,i,n);this._init()}_init(){this.inputBlock.addClass("range-field"),this.input.addEventListener("input",e=>{let t=e.getNode();this.input.setAttribute("value",t.value),this.tooltip.setMessage(t.value),this.modelChange(t.value)})}render(){this.inputBlock.addClass(["mdl-textfield","mdl-js-textfield","mdl-sliderfield"]),this.input.addClass(["mdl-slider","mdl-js-slider"]),this.label&&this.label.exists()&&this.label.addClass("mdl-textfield__label"),this.refresh()}refresh(){this.isRequired()&&this.getValue()===""&&this.inputBlock.addClass("is-invalid"),g(this.input),this.isDisabled()?this.inputBlock.addClass("is-disabled"):this.inputBlock.removeClass("is-disabled");let e=new h(".mdl-slider__container",this.inputBlock).getItem(),t=this.getValue();this.tooltip=new F(e),this.tooltip.render(t)}setValue(e){this.input.getNode().MaterialSlider.change(e),this.tooltip.render(e)}};var Ni=class extends y{constructor(e,t,i,n){super(e,t,i,n);this._init()}_init(){this.inputBlock.addClass("number-field"),this._initButtons(),this.input.addEventListener("keyup",()=>{this._checkValue();let e=this.getValue();return this.modelChange(e),!0}),this.input.addEventListener("change",()=>{this._checkValue();let e=this.getValue();return this.modelChange(e),!0})}_initButtons(){let e=new l("span");e.addClass("step-change"),this.actionContainerNode.appendChild(e);let t=new l("a");t.setAttribute("href","javascript:void(0)"),t.addClass(["up-button","material-icons"]),t.setHtml("keyboard_arrow_up"),t.addEventListener("click",()=>{if(this.isEnabled()){let n=this.getValue()||0;n+=this._getStep(),this.setValue(n)}}),e.appendChild(t);let i=new l("a");i.setAttribute("href","javascript:void(0)"),i.addClass(["down-button","material-icons"]),i.setHtml("keyboard_arrow_down"),i.addEventListener("click",()=>{if(this.isEnabled()){let n=this.getValue()||0;n-=this._getStep(),this.setValue(n)}}),e.appendChild(i)}_checkValue(){let e=this.getValue(),t=this._getMin();e<t&&this.setValue(t);let i=this._getMax();e>i&&this.setValue(i)}_getMax(){let e=this.input.getAttribute("max")||9999999999;return C(e)}_getMin(){let e=this.input.getAttribute("min")||0;return C(e)}_getStep(){let e=this.input.getAttribute("step")||1;return C(e)}render(){this.inputBlock.addClass(["mdl-textfield","mdl-js-textfield","mdl-textfield--floating-label"]),this.input.addClass(["mdl-textfield__input"]),this.label&&this.label.exists()&&this.label.addClass("mdl-textfield__label"),this.refresh()}refresh(){this.isRequired()&&this.getValue()===""&&this.inputBlock.addClass("is-invalid"),g(this.inputBlock)}};var Pr=(s,e)=>{let t=new window.MapLabel({text:e,strokeWeight:2,fontFamily:"sans-serif"});return t.bindTo("position",s),t.bindTo("map",s),t},Lr=(s,e,t)=>new window.MapLabel({text:s,strokeWeight:2,fontFamily:"sans-serif",position:e,map:t}),Oi=class{constructor(e,t=".map",i={}){this.mapNode=new h(t,e).getItem(),this._setOptions(i),this._init()}_setOptions(e={}){let t=this;t.options=new u({center:{lat:47.6,lng:17.533333},zoom:8,scrollwheel:!1,streetViewControl:!1,scaleControl:!0,mapTypeControl:!1,mapTypeId:google.maps.MapTypeId.TERRAIN,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.TERRAIN,google.maps.MapTypeId.SATELLITE]}}),this.options.merge(e),this.options=this.options.copy(!0)}getMapType(){return this.map.getMapTypeId()}setMapType(e){this.map.setMapTypeId(e)}setCustomMapStyle(e,t,i){let n=new google.maps.StyledMapType(i,{name:t});this.map.mapTypes.set(e,n)}_init(){this.markerIcons={},this._initMap(),this._initOverlay(),this.setMarkers(),this.setPolygons()}_initMap(){this.map=new google.maps.Map(this.mapNode.getNode(),this.options),this._unbindEventsToMap(),this._bindEventsToMap()}_bindEventsToMap(){this.map.addListener("click",e=>{let t=e.latLng;this.eventMapClick(t.lat(),t.lng(),e)}),this.map.addListener("maptypeid_changed",e=>{this.eventMapTypeChange(this.getMapType(),e)})}_unbindEventsToMap(){google.maps.event.clearInstanceListeners(this.map)}_initOverlay(){this.overlay=new google.maps.OverlayView,this.overlay.draw=()=>{},this.overlay.setMap(this.map)}eventPolygonChanged(e,t){P("GoogleMap.eventPolygonChanged()",e,t)}createOrUpdatePolygon(e,t,i,n={},o={}){this.getPolygon(e)?this.updatePolygon(e,t,i,n,o):this.createPolygon(e,t,i,n,o)}createPolygon(e,t,i,n={},o={}){let r=new u(n);r.get("id")||r.set("id",e);let a=new u(this.polygonOptions);a.merge(o);let d=new google.maps.Polygon(a.copy(!0));d.setMap(this.map),r.setRaw("_polygon",d),this._addPointsToPolygon(r,i);let c=this.getCenterOfPolygon(r),m=Lr(t,new google.maps.LatLng(c.latitude,c.longitude),this.map);r.setRaw("_map_text",m),this.polygons.push(r),this._bindEventsToPolygon(d,r)}updatePolygon(e,t,i,n={},o={}){let r=this.getPolygon(e);b(this._cleanPolygonData(n),(m,v)=>{r.set(v,m)}),r.get("_polygon").setOptions(o),this._addPointsToPolygon(r,i);let d=this.getCenterOfPolygon(r),c=r.get("_map_text");c.set("text",t),c.set("position",new google.maps.LatLng(d.latitude,d.longitude))}_cleanPolygonData(e){let t=new u;return b(e,(i,n)=>{S(["_polygon","_map_text","_bounds"],n)||t.set(n,i)}),t}getPolygon(e){return this.polygons.findById(e)}removePolygon(e){let t=this.getPolygon(e);if(t){t.get("_map_text").set("map",null);let n=t.get("_polygon");n.setMap(null),this._unbindEventsToPolygon(n),this.polygons.deleteById(e)}}removeAllPolygon(){this.polygons.each(e=>{let t=e.get("_polygon");t.setMap(null),e.get("_map_text").set("map",null),this._unbindEventsToPolygon(t)}),this.polygons.clear()}_bindEventsToPolygon(e,t){let i=this._cleanPolygonData(t);e.addListener("rightclick",n=>{if(n.vertex)e.getPath().removeAt(n.vertex);else{let o=n.latLng;this.eventPolygonRightClick(i,o.lat(),o.lng(),n)}}),e.addListener("click",n=>{let o=n.latLng;this.eventPolygonClick(i,o.lat(),o.lng(),n)}),e.addListener("dblclick",n=>{let o=n.latLng;this.eventPolygonDoubleClick(i,o.lat(),o.lng(),n)}),this._bindEventsToPolygonPath(e,t)}_unbindEventsToPolygon(e){google.maps.event.clearInstanceListeners(e),this._unbindEventsToPolygonPath(e)}_bindEventsToPolygonPath(e,t){let i=e.getPath();i&&(i.addListener("insert_at",()=>{this._callPolygonChangeEvent(e,t)}),i.addListener("set_at",()=>{this._callPolygonChangeEvent(e,t)}),i.addListener("remove_at",()=>{this._callPolygonChangeEvent(e,t)}))}_unbindEventsToPolygonPath(e){let t=e.getPath();t&&google.maps.event.clearInstanceListeners(t)}_callPolygonChangeEvent(e,t){let i=this._getPointsFromPolygon(t);this._setBoundsByPoints(t,i);let n=t.get("_map_text"),o=this.getCenterOfPolygon(t);n.set("position",new google.maps.LatLng(o.latitude,o.longitude));let r=this._cleanPolygonData(t);this.eventPolygonChanged(r,i)}eventPolygonClick(e,t,i,n){P("GoogleMap.eventPolygonClick()",e,t,i,n)}eventPolygonDoubleClick(e,t,i,n){P("GoogleMap.eventPolygonDoubleClick()",e,t,i,n)}eventPolygonRightClick(e,t,i,n){P("GoogleMap.eventPolygonRightClick()",e,t,i,n)}eventMapClick(e,t,i){P("GoogleMap.eventMapClick()",e,t,i)}eventMapTypeChange(e,t){P("GoogleMap.eventMapTypeChange()",e,t)}_addPointsToPolygon(e,t){let i=e.get("_polygon"),n=this._convertPointsToPath(t);i.setPath(n),this._bindEventsToPolygonPath(i,e),this._setBoundsByPath(e,n)}_convertPointsToPath(e){let t=[];return b(e,i=>{let n=new google.maps.LatLng(i.latitude,i.longitude);T(i.weight)||(n={location:n,weight:i.weight}),t.push(n)}),t}_setBoundsByPoints(e,t){let i=this._convertPointsToPath(t);this._setBoundsByPath(e,i)}_setBoundsByPath(e,t){let i=new google.maps.LatLngBounds;t.length>0&&b(t,n=>{i.extend(n)}),e.setRaw("_bounds",i)}getCenterOfPolygon(e){let i=e.get("_bounds").getCenter();return{latitude:i.lat(),longitude:i.lng()}}fitPolygonToMap(e){let t=this.getPolygon(e);if(t){let i=t.get("_bounds");if(i){let n=i.getCenter();this.map.setCenter(n),this.map.fitBounds(i)}}}_getPointsFromPolygon(e){let i=e.get("_polygon").getPath().getArray();this._setBoundsByPath(e,i);let n=[];return b(i,o=>{n.push({latitude:o.lat(),longitude:o.lng()})}),n}getComputeArea(e){let i=e.get("_polygon").getPath();return google.maps.geometry.spherical.computeArea(i)}addPointToPolygon(e,t,i){e.get("_polygon").getPath().push(new google.maps.LatLng(t,i))}setMarkers(e={}){this.markers=new D,this.markerOptions=new u({draggable:!1}),this.markerOptions.merge(e)}setHeatmap(e={}){let t=["rgba(102, 255, 0, 0)","rgba(102, 255, 0, 1)","rgba(147, 255, 0, 1)","rgba(193, 255, 0, 1)","rgba(238, 255, 0, 1)","rgba(244, 227, 0, 1)","rgba(249, 198, 0, 1)","rgba(255, 170, 0, 1)","rgba(255, 113, 0, 1)","rgba(255, 57, 0, 1)","rgba(255, 0, 0, 1)"];this.heatmapOptions=new u({opacity:.6,radius:null,gradient:t}),this.heatmapOptions.merge(e)}createHeatmap(e,t={}){this.heatmap=new google.maps.visualization.HeatmapLayer({data:this._convertPointsToPath(e),map:this.map}),this.heatmapOptions.merge(t),G(this.heatmapOptions,(i,n)=>{this.heatmap.set(n,i)})}removeHeatmap(){this.heatmap&&this.heatmap.setMap(null)}setPolygons(e={}){this.polygons=new D,this.polygonOptions=new u({geodesic:!0,strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.2,editable:!1}),this.polygonOptions.merge(e)}createOrUpdateMarker(e,t,i,n,o,r={},a={}){this.getMarker(e)?this.updateMarker(e,t,i,n,o,r,a):this.createMarker(e,t,i,n,o,r,a)}createMarker(e,t,i,n,o,r={},a={}){let d=new u(r);d.get("id")||d.set("id",e);let c=new u(this.markerOptions);c.merge(a);let m=he(t,"string"),v=new google.maps.Marker(c.copy(!0));v.setPosition(new google.maps.LatLng(n,o)),v.setIcon(this.markerIcons[i].icon),v.setShape(this.markerIcons[i].shape),v.setTitle(m),v.setMap(this.map),d.setRaw("_marker",v);let N=Pr(v,m);d.setRaw("_map_label",N),this.markers.push(d),this._bindEventsToMarker(v,d)}createMarkerByXY(e,t,i,n,o,r={}){let a=new google.maps.Point(n,o),c=this.overlay.getProjection().fromContainerPixelToLatLng(a);this.createMarker(e,t,i,c.lat(),c.lng(),r)}_bindEventsToMarker(e,t){let i=this._cleanMarkerData(t);e.addListener("click",n=>{this.eventMarkerClick(i,n)}),e.addListener("dblclick",n=>{this.eventMarkerDoubleClick(i,n)}),e.addListener("rightclick",n=>{this.eventMarkerRightClick(i,n)}),e.addListener("drag",n=>{let o=e.getPosition();t.get("_map_label").set("position",o)}),e.addListener("dragend",n=>{let o=e.getPosition(),r=o.lat(),a=o.lng();this.eventMarkerChanged(i,r,a,n)})}_unbindEventsToMarker(e){google.maps.event.clearInstanceListeners(e)}updateMarker(e,t,i,n,o,r={},a={}){let d=this.getMarker(e);b(this._cleanMarkerData(r),(X,se)=>{d.set(se,X)});let c=he(t,"string"),m=d.get("_marker");m.setOptions(a);let v=this.markerIcons[i];m.setIcon(v.icon),m.setShape(v.shape),m.setTitle(c),m.setPosition(new google.maps.LatLng(n,o)),d.get("_map_label").set("text",c)}_cleanMarkerData(e){let t=new u;return b(e,(i,n)=>{S(["_marker","_map_label"],n)||t.set(n,i)}),t}getMarker(e){return this.markers.findById(e)}removeMarker(e){let t=this.getMarker(e);if(t){t.get("_map_label").setMap(null);let n=t.get("_marker");n.setMap(null),this._unbindEventsToMarker(n),this.markers.deleteById(e)}}removeAllMarker(){this.markers.each(e=>{e.get("_map_label").setMap(null);let i=e.get("_marker");i.setMap(null),this._unbindEventsToMarker(i)}),this.markers.clear()}fitMarkerToMap(e){let t=this.getMarker(e);if(t){let n=t.get("_marker").getPosition(),o=n.lat(),r=n.lng();this.setCenter(o,r)}}openInfoWindow(e,t){let n=this.getMarker(e).get("_marker");new google.maps.InfoWindow({content:he(t,"string")}).open(this.map,n)}eventMarkerClick(e,t){P("GoogleMap.eventMarkerClick()",e,t)}eventMarkerDoubleClick(e,t){P("GoogleMap.eventMarkerDoubleClick()",e,t)}eventMarkerRightClick(e,t){P("GoogleMap.eventMarkerRightClick()",e,t)}eventMarkerChanged(e,t,i,n){P("GoogleMap.eventMarkerChanged()",e,t,i,n)}setMarkerIcon(e,t){let i={url:t.url,size:new google.maps.Size(t.size[0],t.size[1]),origin:new google.maps.Point(t.origin[0],t.origin[1]),anchor:new google.maps.Point(t.anchor[0],t.anchor[1])},n={coords:t.coords,type:"poly"};this.markerIcons[e]={icon:i,shape:n}}searchAddress(e){let t=new _;return new google.maps.Geocoder().geocode({address:he(e,"string")},(n,o)=>{if(o===google.maps.GeocoderStatus.OK&&n.length>0){let r=[];b(n,a=>{let d={address:a.formatted_address,latitude:a.geometry.location.lat(),longitude:a.geometry.location.lng()};r.push(d)}),t.resolve([r])}else t.reject()}),t.promise()}setCenter(e,t,i=!1){let n=new google.maps.LatLng(e,t);i?this.map.getBounds().contains(n)||this.map.setCenter(n):this.map.setCenter(n)}getCenter(){let e=this.map.getCenter();return{latitude:e.lat(),longitude:e.lng()}}triggerResize(){google.maps.event.trigger(this.map,"resize")}getDinamicRadius(e){let t=new google.maps.Point(0,0),i=new google.maps.Point(e,e),n=this.overlay.getProjection(),o=n.fromContainerPixelToLatLng(t),r=n.fromContainerPixelToLatLng(i),a=new google.maps.LatLng(o.lat(),o.lng()),d=new google.maps.LatLng(r.lat(),r.lng());return google.maps.geometry.spherical.computeDistanceBetween(a,d)}};var Mi=class extends y{constructor(e,t,i,n){super(e,t,i,n);this._init()}_init(){this.inputBlock.addClass("location-field"),this._initButtons(),this.icon=this.input.getData("icon"),this.input.addEventListener("keyup",(e,t)=>{let i=e.getNode();return f(t.keyCode,13)?this.eventSearch(i.value):e.trigger("change"),!0}),this.input.addEventListener("change",e=>{let t=e.getNode(),i=this.getValue();return i.address=C(t.value),this._setDataValue(i),this.modelChange(i),!0})}_initButtons(){this._initSearchButton(),this._initAdvancedButton()}_initSearchButton(){let e=new l("a");e.setAttribute("href","javascript:void(0)"),e.addClass(["search-button","material-icons"]),e.setHtml("pin_drop"),e.addEventListener("click",()=>{if(this.isEnabled()){let t=this.input.getNode();this.eventSearch(t.value)}}),this.actionContainerNode.appendChild(e)}_initAdvancedButton(){this.advancedButton=new l("a"),this.advancedButton.setAttribute("href","javascript:void(0)"),this.advancedButton.addClass(["advanced-button","material-icons"]),this.advancedButton.setHtml("settings"),this.advancedButton.addEventListener("click",()=>{this.isEnabled()&&this._toggleAdvancedInputs()}),this.actionContainerNode.appendChild(this.advancedButton)}search(e){this.map.searchAddress(e).then(t=>{let i=t[0],n={address:C(e),latitude:i.latitude,longitude:i.longitude};this.setValue(n)},()=>{})}render(){this.inputBlock.addClass(["mdl-textfield","mdl-js-textfield","mdl-textfield--floating-label"]),this.input.addClass("mdl-textfield__input"),this.label&&this.label.exists()&&this.label.addClass("mdl-textfield__label"),this._renderAdvancedInputs(),this._renderMap(),this._setDefaultValue(),this.refresh()}refresh(){this.isDisabled()?this.mapLockNode.addClass("map-lock"):this.mapLockNode.removeClass("map-lock"),g(this.inputBlock)}_toggleAdvancedInputs(){this.advancedButton.toggleClass("active"),this.advancedNode.toggleClass("hidden")}_renderAdvancedInputs(){this.advancedNode=new l("div"),this.advancedNode.addClass(["advanced","row","hidden"]),this.inputBlock.appendChild(this.advancedNode),this.latitudeInput=this._renderAdvancedInput(U("latitude"),this.input.getData("latitude"),e=>{let t=this.getValue(),i=e.getNode().value;t.latitude=i,this.setValue(t)}),this.longitudeInput=this._renderAdvancedInput(U("longitude"),this.input.getData("longitude"),e=>{let t=this.getValue(),i=e.getNode().value;t.longitude=i,this.setValue(t)})}_renderAdvancedInput(e,t,i){let n=new l("div");n.addClass("col-6"),this.advancedNode.appendChild(n);let o=new l("div");o.addClass(["mdl-textfield","mdl-js-textfield","mdl-textfield--floating-label"]),n.appendChild(o);let r=new l("label");r.setFor(e),r.addClass("mdl-textfield__label"),r.setHtml(t),o.appendChild(r);let a=new l("input");return a.setId(e),a.setAttribute("type","text"),a.addClass("mdl-textfield__input"),o.appendChild(a),this._setAdditionalLabel(r),a.addEventListener("change",d=>(i(d),!0)),a}_renderMap(){let e=new l("div");e.addClass("map"),this.inputBlock.appendChild(e),this.mapLockNode=new l("div"),this.mapLockNode.addClass("map-lock"),this.inputBlock.appendChild(this.mapLockNode),this.map=new Oi(this.inputBlock,".map",{zoom:12,scrollwheel:!0}),this.map.setMarkers({draggable:!0}),this.map.setMarkerIcon("marker",this.icon),this.map.eventMapClick=(t,i)=>{this.updatePosition(t,i)},this.map.eventMarkerRightClick=()=>{this.updatePosition(null,null)},this.map.eventMarkerChanged=(t,i,n)=>{this.updatePosition(i,n)}}setMapType(e){this.map.setMapType(e)}setCustomMapStyle(e,t,i){this.map.setCustomMapStyle(e,t,i)}_setDefaultValue(){let e=this.getValue();!Y(e.latitude)&&!Y(e.longitude)&&(this.map.setCenter(e.latitude,e.longitude),this.map.createMarker(0,"","marker",e.latitude,e.longitude),this._setDataValue(e))}updatePosition(e,t){let i=this.getValue();i.latitude=e,i.longitude=t,this.setValue(i)}_setDataValue(e){this.latitudeInput.getNode().value=e.latitude||"",this.longitudeInput.getNode().value=e.longitude||"",this.input.setAttribute("value",e.address||""),this.input.setData("value",e)}setValue(e){this._setDataValue(e),this.map.removeMarker(0),!Y(e.latitude)&&!Y(e.longitude)&&(this.map.setCenter(e.latitude,e.longitude),this.map.getMarker(0)?this.map.updateMarker(0,"","marker",e.latitude,e.longitude):this.map.createMarker(0,"","marker",e.latitude,e.longitude)),this.input.trigger("change")}getValue(){let e=this.input.getData("value");return C(e)}eventSearch(e){P("Location.eventSearch()",e)}};var at=class extends y{constructor(e,t,i,n){super(e,t,i,n);this._init()}_init(){this.inputBlock.addClass("text-field"),this.input.addEventListener("keyup",e=>{let t=e.getNode();return this.modelChange(t.value),!0}),this.input.addEventListener("change",e=>{let t=e.getNode();return this.modelChange(t.value),!0})}render(){this.inputBlock.addClass(["mdl-textfield","mdl-js-textfield","mdl-textfield--floating-label"]),this.input.addClass(["mdl-textfield__input"]),this.label&&this.label.exists()&&this.label.addClass("mdl-textfield__label"),this.refresh()}refresh(){this.isRequired()&&this.getValue()===""&&this.inputBlock.addClass("is-invalid"),g(this.inputBlock)}getValue(){return this.input.getNode().value}};var ss=function(s,e){let t=s,i=null,n=null,o=null,r=s.getTagName(),a=s.getAttribute("type");if(f(r,"input")&&!S(["hidden","reset","submit","button"],a)&&(s=s.getParentNode(),o=0),r=s.getTagName(),f(r,"div")){let d=new h("input, textarea, select",s).getItems(),c=o!==null?o:d.length-1;t=d[c],i=new h("label",s).getItem(),n=s.createElement("span"),n.addClass(["mdl-textfield__error","text-truncate"]),s.appendChild(n),s.addClass("init-field")}return Ar(t,i,n,s,e)},Ar=(s,e,t,i,n)=>{s.addClass("init-field");let o=s.getData("type"),r=s.getTagName(),a=null;if(f(r,"textarea")&&(a=new xi(s,e,t,i)),f(r,"select"))a=new _i(s,e,t,i);else if(f(r,"input")||f(r,"button"))switch(s.get("type")){case"submit":a=new yi(s);break;case"button":a=new li(s);break;case"reset":a=new bi(s);break;case"datetime":case"datetime-local":case"date":case"time":case"month":case"week":case"year":let c=new h("input",i);if(c.size()===2){let m=c.get(0),v=!0;m.getAttribute("name")===s.getAttribute("name")&&(m=c.get(1),v=!1),a=new pi(m,e,t,i,v)}else a=new mi(s,e,t,i);break;case"file":a=new ki(s,e,t,i);break;case"checkbox":f(o,"switch")?a=new Ci(s,e,t,i):f(o,"icon-toggle")?a=new gi(s,e,t,i):a=new hi(s,e,t,i);break;case"radio":a=new vi(s,e,t,i,n);break;case"range":a=new Ti(s,e,t,i);break;case"color":a=new ui(s,e,t,i);break;case"hidden":a=new fi(s);break;case"number":a=new Ni(s,e,t,i);break;case"url":a=new Ii(s,e,t,i);break;case"search":a=new wi(s,e,t,i);break;case"text":f(o,"location")?a=new Mi(s,e,t,i):a=new at(s,e,t,i);break;default:a=new at(s,e,t,i);break}return a};var Ys=class extends D{constructor(e,t="form"){let i=new h(t,e).getItem();i.setAttribute("novalidate");super([],ss,{parent:i});this.formNode=i,this._init()}_init(){this.previousModel=new u,this.model=new u,this.initFields=[],this.buttonClasses=["input[type=submit]:not(.init-field)","input[type=button]:not(.init-field)","input[type=reset]:not(.init-field)","button:not(.init-field)"],this.fieldClasses=['.input-block input:not([type="hidden"])+input:not([type="hidden"])',".input-block:not(.init-field)","form > input[type=hidden]:not(.init-field)"],this._initFields(),this._initFormEvent()}_initFormEvent(){this.formNode.addEventListener("keydown",(e,t)=>(/textarea/i.test((t.target||t.srcElement).tagName)||(t.keyCode||t.which||t.charCode||0)!==13||t.preventDefault(),!0)),this._initSubmitFormEvent(),this._initResetFormEvent()}_initSubmitFormEvent(){this.formNode.addEventListener("submit",(e,t)=>{t.preventDefault(),this.checkValidity(!0)&&this.eventSubmit(this.model,e)})}_initResetFormEvent(){this.formNode.addEventListener("reset",(e,t)=>{t.preventDefault(),this.eventReset(this.model,e)})}_initFields(){let e=new h(this.fieldClasses.concat(this.buttonClasses).join(", "),this.formNode).getItems();this.load(e);let t=[],i=[];this.each(n=>{let o=n.getName();S(this.initFields,o)?S(t,o)||(n.refresh(),n.setValue(n.getValue()),t.push(o)):(n.modelChange=r=>{this._fieldValueChange(n,r)},n.getPreviousValue=()=>{this._getPreviousValue(n)},n.eventClick=r=>{this.eventButton(this.model,r)},S(t,o)||(this._setValue(o,n.getValue()),t.push(o)),n.render(),S(i,o)||i.push(o))}),this.initFields=this.initFields.concat(i)}setModel(e,t=!0,i=!1){this.previousModel=this.model.copy(),this.model.merge(e),this.each(n=>{let o=n.getName(),r=this.model.get(o);T(r)||(n.setValue(r),n.checkValidity(t,i))})}getModel(){return this.model}reset(e=!0,t=!1){this.each(i=>{i.setValue(),i.checkValidity(e,t)}),this.previousModel=this.model.copy(),this.model.clear()}_setValue(e,t){let i=this._getValue(e);ce(t,i)||(this.previousModel.set(e,i),this.model.set(e,t))}_getValue(e){return this.model.get(e)}_getPreviousValue(e){let t=e.getName();return this.previousModel.get(t)}_fieldValueChange(e,t){let i=e.getName(),n=this._getValue(i);ce(t,n)||(this._setValue(i,t),e.eventChange(t,n)),this.checkValidity(!0,!1)}setErrors(e){let t=new u(e);this.each(i=>{let n=i.getName(),o=t.get(n,[]);i.setError(o.join(", "),!0)})}checkValidity(e=!1,t=!0){return this.each(i=>{i.checkValidity(e,t)}),this.formNode.getNode().checkValidity()}isValid(){return this.checkValidity(!0)}isInvalid(){return!this.isValid()}refresh(){this.deleteAllByCondition(e=>{let t=e.exists();if(!t){let i=e.getName();this.model.remove(i),xe(this.initFields,i)}return!t}),this._initFields()}findByModel(e){return this.findByCondition(t=>t.getName()===e)}lock(){this.each(e=>{e.disabled=e.isDisabled()}),this.each(e=>{e.setDisabled(!0)})}unlock(){this.each(e=>{e.setDisabled(e.disabled)})}eventSubmit(e,t){p("Form.eventSubmit()",e,t)}eventReset(e,t){p("Form.eventReset()",e,t)}eventButton(e,t){p("Form.eventButton()",e,t)}};var Us=class{constructor(e,t={}){this.http=e,this._setOptions(t),this._init()}_setOptions(e={}){let t=this;t.options=new u,t.options.merge(e)}_init(){this.container=new D,this.linkNodeKey="node"}add(e){let t=e.get("id"),i=e.get("image"),n=e.get("icon"),o=e.get("title"),r=e.get("counter"),a=e.get("href"),d=e.get("action"),c=e.get("disabled");i?this.addImage(t,i,o,d,a,e):n?this.addIcon(t,n,o,d,a,e):T(r)?this.addText(t,o,d,a,e):this.addCounter(t,r,o,d,a,e),c&&this.setDisabled(t)}addCounter(e,t,i,n,o="",r={}){let a=this._setItem(e,i,n,o,r),d=new l("span");d.addClass("counter"),d.setHtml(t),a.get(this.linkNodeKey).beforeChild(d)}addIcon(e,t,i,n,o="",r={}){let a=this._setItem(e,i,n,o,r),d=new l("em");d.addClass(["material-icons"]),d.setHtml(t);let c=new l("span");c.addClass("image"),c.appendChild(d),a.get(this.linkNodeKey).beforeChild(c)}addImage(e,t,i,n,o="",r={}){let a=this._setItem(e,i,n,o,r),d=new l("span");if(d.addClass("image"),t.indexOf(".svg")!==-1)this.http.get(t,{},{Authorization:"","X-Requested-With":""}).then(m=>{let v=new h("svg",m).getItem();d.appendChild(v)});else{let m=new l("img");m.setAttribute("src",t),i&&m.setAttribute("alt",i),d.appendChild(m)}a.get(this.linkNodeKey).beforeChild(d)}addText(e,t,i,n="",o={}){this._setItem(e,t,i,n,o)}_setItem(e,t,i,n="",o={}){let r=new l("a");if(t){let m=new l("span");m.addClass("title"),m.setHtml(t),r.appendChild(m)}r.setAttribute("href",n||"javascript:void(0)");let a=r.getAttribute("href"),d=r.addEventListener("click",()=>{i(a)}),c=new u(o);return c.merge({id:e,title:t,href:a,action:i,listener:d}),c.setRaw(this.linkNodeKey,r),this.container.push(c),c}each(e){this.container.each(t=>{e(t)})}bindToContainer(e){e.removeChildren(),this.each(t=>{let i=t.get(this.linkNodeKey);e.appendChild(i)})}setDisabled(e){let t=this.container.findById(e);t&&this._disabled(t)}_disabled(e){let t=e.get(this.linkNodeKey);t.addClass("disabled"),t.removeEventListener("click",e.get("listener")),t.setAttribute("href","javascript:void(0)")}setEnabled(e){let t=this.container.findById(e);t&&this._enabled(t)}_enabled(e){this._disabled(e);let t=e.get(this.linkNodeKey);t.removeClass("disabled");let i=e.get("action"),n=e.get("href");t.setAttribute("href",n);let o=t.addEventListener("click",()=>{i(n)});e.set("listener",o)}setActive(e){this.each(t=>{let i=t.get(this.linkNodeKey);i.removeClass("active");let n=t.get("id");(n[n.length-1]==="."&&j(e,n)||f(e,n))&&i.addClass("active")})}setAllInactive(){this.each(e=>{e.get(this.linkNodeKey).removeClass("active")})}show(e){let t=this.container.findById(e);t&&(t.get(this.linkNodeKey).removeClass("hidden"),this._enabled(t))}hide(e){let t=this.container.findById(e);t&&(t.get(this.linkNodeKey).addClass("hidden"),this._disabled(t))}};var zs=class{constructor(e,t=".progress-status",i={}){this.progressStatusNode=new h(t,e).getItem(),this._setOptions(i),this._init()}_setOptions(e={}){let t=this;t.options=new u({successStyle:"success",infoStyle:"info",warningStyle:"warning",errorStyle:"error"}),t.options.merge(e)}_init(){this.iconNode=new h(".icon",this.progressStatusNode).getItem(),this.textNode=new h(".text",this.progressStatusNode).getItem()}_setStatus(e,t,i=""){this.progressStatusNode.removeClass([this.options.errorStyle,this.options.successStyle,this.options.infoStyle,this.options.warningStyle]),this.progressStatusNode.addClass(e),this.textNode.setHtml(t),i&&this.iconNode.setHtml(i)}setSuccess(e,t=""){this._setStatus(this.options.successStyle,e,t)}setInfo(e,t=""){this._setStatus(this.options.infoStyle,e,t)}setWarning(e,t=""){this._setStatus(this.options.warningStyle,e,t)}setError(e,t=""){this._setStatus(this.options.errorStyle,e,t)}};var Vs=class extends u{constructor(e,t,i,n,o="",r={}){super();this.merge(r),this.set("id",e),this.set("title",t),this.set("url",i),this.set("controller",n),this.set("template",o)}};var qs=class{constructor(e,t="table",i={}){this.tableNode=new h(t,e).getItem(),this._setOptions(i),this._init()}_setOptions(e={}){let t=this;t.options=new u({no_content:{image_url:null,text:""},row_count:10,pager_num:4,sort:{column:null,order:"desc"},columns:[],calculations:{},sorted:[],column:null,rowStyle:null}),t.options.merge(e)}_init(){this.collection=new D,this.query="",this.actions=[],this.tableNode.getId()||(this.tableNode.setId(U("table")),this._initContentHandler(),this._initHeader(),this._initSearch(),this._initStructure())}_initContentHandler(){this.contentHandler=new Ae(this.tableNode,this.options.no_content)}_initSearch(){if(this.options.columns[this.options.columns.length-1]==="search"){let e=new l("div");e.addClass(["mdl-textfield","mdl-js-textfield","mdl-textfield--expandable"]),this.headerNodes.get(this.headerNodes.size()-1).insert(e);let t=new l("label");t.addClass(["mdl-button","mdl-js-button","mdl-button--icon"]),t.setFor("table-search"),e.appendChild(t);let i=new l("em");i.addClass("material-icons"),i.setHtml("search"),t.appendChild(i);let n=new l("div");n.addClass("mdl-textfield__expandable-holder"),e.appendChild(n);let o=new l("input");o.setAttribute("type","text"),o.setId("table-search"),o.addClass("mdl-textfield__input"),o.addEventListener("keypress",(a,d)=>(f(d.keyCode,13)&&(this.query=a.getNode().value,this.refresh(1)),!0)),n.appendChild(o);let r=new l("label");r.addClass("mdl-textfield__label"),n.appendChild(r),g(e)}}_initHeader(){this.headerTexts=[],this.headerNodes=new h("thead th",this.tableNode),this.headerNodes.each((e,t)=>{let i=e.getHtml();this.headerTexts.push(i),this._renderHeader(e,t)})}_renderHeader(e,t){let i=this.options.columns[t];S(["search","actions"],i)&&e.addClass("actions");let n=this.options.sorted.filter(a=>j(a,i));if(n.length===1){e.setData("column",n[0]),e.addEventListener("click",m=>{let v=m.getData("column");this._toggleSorting(v)});let a=new l("span");a.addClass("icons"),e.appendChild(a);let d=new l("em");d.addClass(["material-icons","asc"]),d.setHtml("arrow_drop_up"),a.appendChild(d);let c=new l("em");c.addClass(["material-icons","desc"]),c.setHtml("arrow_drop_down"),a.appendChild(c)}let o=e.getAttribute("title"),r=e.getAttribute("desc");if(o||r){let a=new l("em");o&&a.setAttribute("desc",o),r&&a.setAttribute("desc",r),a.addClass(["material-icons","info"]),a.setHtml("info_outline"),e.appendChild(a),new F(a,"BOTTOM").render()}}_initStructure(){this.tbody=new l("tbody"),this.tableNode.appendChild(this.tbody),this.tfoot=new l("tfoot"),this.tableNode.appendChild(this.tfoot);let e=new l("tr"),t=new l("td");t.addClass("pager-statistics"),e.appendChild(t);let i=new l("td");i.addClass("pager"),i.setAttribute("colspan",this.headerNodes.size()-1),e.appendChild(i),this.tfoot.appendChild(e),this.pager=new He(this.tfoot,[".pager",".pager-statistics"],this.options),this.pager.eventAction=n=>{this.refresh(n)}}refresh(e=-1){e>-1&&this.pager.setPage(e);let t=new u({query:this.query,column:this.options.sort.column,order:this.options.sort.order,offset:this.pager.offset,limit:this.options.row_count});this.eventAction(t)}eventAction(e){p("Table.eventAction()",e)}_toggleSorting(e){let[t,i]=e.split(":",2),n=i||"desc";f(this.options.sort.column,t)&&f(this.options.sort.order,n)&&(n=n==="asc"?"desc":"asc"),this._setSorting(t,n)}_handleSortingColumn(e,t){let i=this.options.columns[t];if(f(this.options.sort.column,null)&&f(t,0)||f(i,this.options.sort.column)){let n=new h(O(".icons em.{0}",[this.options.sort.order]),e).getItem();n.isEmpty()||n.addClass("active")}}_updateSorting(){this._resetSorting(),this.headerNodes.each((e,t)=>{this._handleSortingColumn(e,t)}),this.refresh()}_setSorting(e,t="asc"){this.options.sort.column=e,this.options.sort.order=t,this._updateSorting()}_resetSorting(){new h("thead th .icons em",this.tableNode).each(t=>{t.removeClass("active")})}_getColumn(){return this.options.column||this.options.columns[0]}_addHeaderRow(e,t){let i=new l("tr");i.addEventListener("click",a=>{a.toggleClass("opened"),i.getNextSibling().toggleClass("open")});let n=this._getRowStyle(e,t);i.addClass(["header"].concat(n)),this.tbody.appendChild(i);let o=new l("td");i.appendChild(o),this._renderDataNodeByItem(e,t,this._getColumn(),o),o.setAttribute("colspan",this.headerNodes.size()-2);let r=new l("td");i.appendChild(r),this._renderActions(r,e)}_getRowStyle(e,t){let i=[];if(this.options.rowStyle&&M(this.options.rowStyle)){let n=this.options.rowStyle(e,t);L(n)?i=n:n&&i.push(n)}return i}_addRow(e,t){let i=new l("tr"),n=this._getRowStyle(e,t);i.addClass(["data"].concat(n)),this.tbody.appendChild(i),b(this.options.columns,(o,r)=>{let a=new l("td");i.appendChild(a),this._renderDataNode(a,e,t,o,r)})}setActions(e){this.actions=e}_renderDataNodeByItem(e,t,i,n){let o="",r=this.options.calculations[i];M(r)?o=r(e,this.pager.offset+t,n):o=e.get(i,"");let a=[];L(o)?a=o:a=[o],q(a,d=>{if(!z(d,l)){let c=new l("span");c.setHtml(d),d=c}n.appendChild(d),(d.getAttribute("title")||d.getAttribute("desc"))&&new F(d).render()})}_renderDataNode(e,t,i,n,o){if(S(["search","actions"],n))this._renderActions(e,t);else{let r=new l("span");r.addClass("label"),r.setHtml(this.headerTexts[o]),this._renderHeader(r,o),this._handleSortingColumn(r,o),e.appendChild(r),this._renderDataNodeByItem(t,i,n,e)}}_renderActions(e,t){let i=new l("div");e.addClass("actions"),e.appendChild(i),this.actions.length>3?(i.addClass("dropDown"),this._renderDropDownNode(i,t)):this._renderActionNodes(i,t)}_renderActionNodes(e,t){b(this.actions,i=>{this._createActionButton(e,i,t)})}_renderDropDownNode(e,t){new di(e).setActions(this.actions,t)}_createActionButton(e,t,i){let[n,o,r,a]=t.style(i);if(!a){let d=new l("button");e.appendChild(d),d.addClass(["mdl-button","mdl-js-button","mdl-button--icon","mdl-button--primary"]),r?d.setAttribute("disabled"):d.addEventListener("click",()=>{t.click(i)}),o&&new F(d).render(o);let c=new l("em");c.addClass("material-icons"),c.setHtml(n),d.appendChild(c)}}setData(e){this.collection.reload(e),this.collection.size()===0?this.contentHandler.show():(this.contentHandler.hide(),this._draw())}setCount(e){this.pager.setCount(e),this.pager.draw()}_getItems(){let e=this.collection.getItems();return this.collection.size()>this.options.row_count&&(e=this.collection.limit(this.pager.offset,this.options.row_count)),e}_draw(){this.tbody.removeChildren(),b(this._getItems(),(e,t)=>{this._addHeaderRow(e,t),this._addRow(e,t)}),g(this.tbody)}render(){this.tableNode.isEmpty()||this._updateSorting()}};var Qs=class{constructor(e,t=".tab-panel",i="",n=""){this.tabPanel=new h(t,e).getItem(),this.options={selected_tab:i,default_tab:n||i},this._init()}_init(){this._initTabs(),this._initPanels(),this.activeTab=this.options.selected_tab,this._setActive(this.activeTab)}_initTabs(){this.tabs=new h(".tabs a",this.tabPanel),this.tabs.each(e=>{let t=e.getAttribute("href").substring(1);this.tabs.size()===1&&e.addClass("hidden"),e.setData("panel",t),e.setAttribute("href","javascript:void(0)"),e.addEventListener("click",()=>{this.setActive(t)})})}_initPanels(){this.panels=new h(".panel",this.tabPanel)}_setActive(e){let t=this.options.default_tab;this.panels.each(i=>{i.removeClass("active"),(i.getId()===e||i.hasClass(e))&&(i.addClass("active"),t=e)}),this.tabs.each(i=>{i.removeClass("active"),i.getData("panel")===e&&i.addClass("active")}),this.activeTab=t}eventChange(e){p("TabPanel.eventChange()",e)}setActive(e){let t=new _;return Y(e)?t.reject():(this._setActive(e),new Q().serial([()=>this.eventChange(this.getActive())]).defer(t)),t.promise()}getActive(){return this.activeTab}};var Gs=class{constructor(){this.timeoutWaiting=0,this.counter=0}advancedWaiting(e,t){let i=t||3e3;this._advancedDelayHandler(e,i,this.timeoutWaiting)}_advancedDelayHandler(e,t,i){this.timeoutWaiting+=1e-4,setTimeout(()=>{(this.timeoutWaiting-1e-4).toFixed(4)===i.toFixed(4)&&(this.timeoutWaiting=0,e())},t)}stopAdvancedWaiting(){this.timeoutWaiting+=1e-4,this.intervall=setInterval(()=>{this.timeoutWaiting+=1e-4},1e3)}startAdvancedWaiting(){clearInterval(this.intervall),this.timeoutWaiting-=1e-4}simpleWaiting(e,t){let i=t||3e3;this._simpleDelayHandler(e,i,this.counter)}_simpleDelayHandler(e,t,i){this.counter++,setTimeout(()=>{let n=this.counter-1;i===n&&(this.counter=0,e())},t)}};var Xs=class extends y{constructor(e,t,i,n){super(e,t,i,n)}};var Hr=(s,e=" ",t=",",i=0)=>{s||(s=0),s=ji(s,i*-1);let n=s.toFixed(i).toString().split("."),o=n[1],r=n[0].split("").reverse().map((a,d)=>!(d%3)&&d?a+e:a).reverse().join("");return o&&(r+=t+o),r},Br=(s,e)=>{let t=[{value:1e24,symbol:"Y"},{value:1e21,symbol:"Z"},{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"G"},{value:1e6,symbol:"M"},{value:1e3,symbol:"K"},{value:0,symbol:""}],i=/\.0+$|(\.[0-9]*[1-9])0+$/,n=ji(s,e).toString().replace(i,"$1"),o=0;for(;o<t.length&&s<t[o].value;)n=ji(s/(t[o+1].value||1),e).toString().replace(i,"$1")+t[o+1].symbol,o++;return n},ns=(s,e,t)=>{if(typeof t=="undefined"||+t==0)return Math[s](e);if(e=+e,t=+t,isNaN(e)||!(typeof t=="number"&&t%1===0))return NaN;let i=e.toString().split("e");return e=Math[s](+(i[0]+"e"+(i[1]?+i[1]-t:-t))),i=e.toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+t:t))},ji=(s,e)=>ns("round",s,e),Fr=(s,e)=>ns("floor",s,e),Wr=(s,e)=>ns("ceil",s,e),Rr=(s,e,t=!1)=>{let i;return t?i=Math.random()*(e-s)+s:i=Math.floor(Math.random()*(e-s+1))+s,i};return tn(Yr);})();
/**
 * @license
 * Copyright 2015 Dniel Sipos (siposdani87@gmail.com),
 * SUI-JS
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */
//# sourceMappingURL=sui.min.js.map
