/*

 Copyright 2016 Daniel Sipos (siposdani87@gmail.com),
 SUI-JS

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 either express or implied. See the License for the specific language
 governing permissions and limitations under the License.
*/
'use strict';var e;function h(a,b){for(var c=window,d=a.pop(),g=0;g<a.length;g++)c=c[a[g]]=c[a[g]]||{};c[d]=b}h(['SUI','format'],function(a,b,c,d){c=void 0===c?'\\{':c;d=void 0===d?'\\}':d;k(b,function(b,f){a=a.replace(new RegExp(c+f+d,'gm'),b)});return a});function l(a){return'function'===typeof a}function m(a){return'object'===typeof a}function n(a,b){return a instanceof b}function k(a,b){if(n(a,Array)){var c=a.length;for(var d=0;d<c;d++)b(a[d],d)}else m(a)&&p(a,b)}
function p(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}function q(a){for(var b in a)a.hasOwnProperty(b)&&delete a[b]}function r(a){if(n(a,Array))var b=[].concat(a);else m(a)&&(b={},k(a,function(a,d){b[d]=m(a)?r(a):a}));return b}function t(a){var b=!1;if(n(a,Array))b=0===a.length;else if(m(a)){var c=0;k(a,function(){c++});b=0===c}return b}h(['SUI','getExtensionName'],function(a){a=a.split('?',2)[0];return a.slice((Math.max(0,a.lastIndexOf('.'))||Infinity)+1)});function u(a){a=a||{};this.h(a)}u.prototype=Object.create(Object.prototype);e=u.prototype;e.constructor=u;
e.h=function(a){if(m(a))for(var b in a)if(a.hasOwnProperty(b))if(null===a[b]||!m(a[b])||n(a[b],Array))if(n(a[b],Array)&&null!==a[b][0]&&m(a[b][0]))v(a,b),this[b]=a[b];else{var c=a[b],d=c;'string'===typeof c&&-1===c.indexOf(' ')&&(c=c.toLowerCase(),''===c?d='':'undefined'===c?d=void 0:'null'===c?d=null:'true'===c?d=!0:'false'===c?d=!1:'infinity'===c?d=Infinity:!isNaN(c)&&-1===['0','+'].indexOf(c[0])&&(d=-1!==c.indexOf('.')?parseFloat(c):parseInt(c,0)));this[b]=d}else n(this[b],u)||(this[b]=new u(this[b])),
this[b].h(a[b])};function v(a,b){k(a[b],function(c,d){a[b][d]=new u(c)})}e.get=function(a,b,c){var d=this;a&&(a=(void 0===c?0:c)?[a]:a.split('.'),d=w(this,this,a));return'undefined'===typeof d?b:d};function w(a,b,c){var d=void 0;p(b,function(a,f){1===c.length&&f===c[0]?d=b[f]:f===c[0]&&null!==b[f]&&m(b[f])&&(a=r(c),a.shift(),d=w(this,b[f],a))}.bind(a));return d}e.set=function(a,b){var c={};a=a.split('.');for(var d=a.pop(),g=c,f=0;f<a.length;f++)g=g[a[f]]=g[a[f]]||{};g[d]=b;this.h(c)};
e.remove=function(a){a=a.split('.');x(this,this,a)};e.clear=function(){n(this,Array)?this.splice(0,this.length):m(this)&&q(this)};function x(a,b,c){for(var d in b)if(b.hasOwnProperty(d))if(1===c.length&&d===c[0])delete b[d];else if(d===c[0]&&null!==b[d]&&m(b[d])){var g=r(c);g.shift();x(a,b[d],g)}}e.copy=function(a){var b=r(this);a||(b=new u(b));return b};e.isEmpty=function(){return t(this)};function y(a,b,c){a=void 0===a?[]:a;b=void 0===b?u:b;c=void 0===c?{}:c;this.j=b;b=c;b=void 0===b?{}:b;this.options=new u({id:'id'});this.options.h(b);this.c=[];this.load(a)}e=y.prototype;e.load=function(a){var b=this;k(a,function(a){b.push(a)})};e.push=function(a){var b=a;n(a,this.j)||(b=new this.j(a,this));a=b;this.c.push(a);return a};e.set=function(a,b){var c=b;n(b,this.j)||(c=new this.j(b,this));a<this.size()?this.c[a]=c:this.push(c);return c};
e.replace=function(a){var b=a.get(this.options.id);(b=z(this,this.options.id,b))&&b.h(a);return b};e.iterator=function(a,b,c){c=c||this.c;var d=[];k(c,function(c,f){a(c)&&(b(c,f),d.push(c))});return d};e.get=function(a,b){var c=null;0<=a&&a<this.c.length&&(c=a=this.c[a],b&&(c=a.get(b)));return c};e.clear=function(){var a=this.c;n(a,Array)?a.splice(0,a.length):m(a)&&q(a)};function z(a,b,c){return A(a,function(d,g){return a.get(g,b)===c})}
function A(a,b){for(var c=0;c<a.c.length&&!b(a.c[c],c);)c++;return a.get(c)}e.size=function(){return this.c.length};function B(a,b,c){this.options=new u({type:'Node'});this.options.h(c);this.f=b||document;l(this.f.l)&&(this.f=this.f.node);b=[];-1!==a.indexOf(' ')||1<a.split('.').length-1||-1<a.indexOf('.')&&0!==a.indexOf('.')||-1!==a.indexOf('[')?b=this.f.querySelectorAll(a):0===a.indexOf('#')?(l(this.f.getElementById)||(this.f=document),a=this.f.getElementById(a.replace('#','')),b.push(a)):b=0===a.indexOf('.')?this.f.getElementsByClassName(a.replace('.','')):this.f.getElementsByTagName(a);a=[];for(c=0;c<b.length;c++)b[c]&&
a.push(b[c]);y.call(this,a,C,this.options)}B.prototype=Object.create(y.prototype);B.prototype.constructor=B;B.prototype.getItem=function(){var a=new C(null);return this.get(0)||a};function C(a,b){if('string'===typeof a)if(-1!==a.indexOf('<')&&-1!==a.indexOf('</')){var c=document.createElement('template');c.innerHTML=a;a=c.content.firstElementChild}else a=document.createElement(a);this.node=a;this.c=b}e=C.prototype;e.set=function(a,b){'id'===a?this.node.id=b:(b='undefined'===typeof b?a:b,l(b)?this.node[a]=b:this.node.setAttribute(a,b))};e.h=function(a){k(a,function(a,c){this.set(c,a)}.bind(this))};
e.get=function(a){return'id'===a?this.node.id||null:this.node.getAttribute(a)||null};e.l=function(){return this.node};e.addEventListener=function(a,b){function c(a){b(d,a);a.stopPropagation()}var d=this;this.node.addEventListener(a,c);return c};e.trigger=function(a){a=new Event(a);this.node.dispatchEvent(a)};e.createElement=function(a){a=document.createElement(a);return new C(a,this.c)};e.appendChild=function(a){this.node.appendChild(a.node)};e.removeChild=function(a){if(this.node.hasChildNodes())try{this.node.removeChild(a.node)}catch(b){console.warn(b)}};
e.remove=function(){this.node.parentNode.removeChild(this.node)};e.setData=function(a,b){var c=b;'string'===typeof b||(c=JSON.stringify(b));this.node.dataset[a]=c};e.getComputedStyle=function(){return window.getComputedStyle(this.node)};e.setStyle=function(a){k(a,function(a,c){this.node.style.setProperty(c,a,'')}.bind(this))};e.isEmpty=function(){return!this.node};e.toString=function(a){return void 0===a||a?this.node.outerHTML:this.node.innerHTML};
export default window.SUI;