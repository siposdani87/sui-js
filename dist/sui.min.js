/*

 Copyright 2015 DÃ¡niel Sipos (siposdani87@gmail.com),
 SUI-JS

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 either express or implied. See the License for the specific language
 governing permissions and limitations under the License.
*/
'use strict';var e;function f(a,b){a=a.split('.');for(var c=window,d=a.pop(),g=0;g<a.length;g++)c=c[a[g]]=c[a[g]]||{};c[d]=b}function k(a){var b=a;l(a)&&!m(a,' ')&&(a=a.toLowerCase(),''===a?b='':'undefined'===a?b=void 0:'null'===a?b=null:'true'===a?b=!0:'false'===a?b=!1:'infinity'===a?b=Infinity:n(a)&&(b=-1!==a.indexOf('.')?parseFloat(a):parseInt(a,0)));return b}f('SUI.typeCast',k);function p(a,b){a=q(a);for(var c in b)b.hasOwnProperty(c)&&(a[c]=r(b[c].constructor)?p(a[c],b[c]):b[c]);return a}
f('SUI.merge',p);function t(a,b,c,d){c=void 0===c?'\\{':c;d=void 0===d?'\\}':d;u(b,function(b,h){a=a.replace(new RegExp(c+h+d,'gm'),b)});return a}f('SUI.format',t);function v(){return function(){}}function w(a){return x(a,Array)}f('SUI.isArray',w);function y(a){return z(a,'function')}f('SUI.isFunction',y);function l(a){return z(a,'string')}f('SUI.isString',l);function n(a){return!isNaN(a)&&(!A(['0','+'],a[0])||'0'===a)}f('SUI.isNumber',n);f('SUI.isFloat',function(a){return parseFloat(a)===a});
f('SUI.isInteger',function(a){return parseInt(a,0)===a});function r(a){return z(a,'object')}f('SUI.isObject',r);f('SUI.isNull',function(a){return null===a});function B(a){return z(a,'undefined')}f('SUI.isUndefined',B);f('SUI.isFinite',function(a){return isFinite(a)});function z(a,b){return typeof a===b}f('SUI.is',z);function x(a,b){return a instanceof b}f('SUI.instanceOf',x);function u(a,b,c,d){w(a)?C(a,b,c,d):r(a)&&D(a,b)}f('SUI.each',u);
function C(a,b,c,d){d=d||a.length;for(c=c||0;c<d;c++)b(a[c],c)}f('SUI.eachArray',C);function D(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}f('SUI.eachObject',D);f('SUI.sleepEach',function(a,b,c,d){function g(){a(b);b++;b<c&&setTimeout(g,d)}g()});function E(a){w(a)?F(a):r(a)&&G(a)}f('SUI.clear',E);function F(a){a.splice(0,a.length)}f('SUI.clearArray',F);function G(a){for(var b in a)a.hasOwnProperty(b)&&delete a[b]}f('SUI.clearObject',G);function A(a,b){return-1!==a.indexOf(b)}
f('SUI.inArray',A);function m(a,b){return-1!==a.indexOf(b)}f('SUI.contain',m);function H(a,b){var c=JSON.stringify(a),d=JSON.stringify(b);if(r(a)&&r(b)&&c.length===d.length){var g=!0;D(a,function(a,c){H(b[c],a)||(g=!1)});return g}return c===d}f('SUI.isSame',H);f('SUI.remove',function(a,b){b=a.indexOf(b);-1!==b&&a.splice(b,1)});function q(a){if(w(a))var b=[].concat(a);else r(a)&&(b={},u(a,function(a,d){b[d]=r(a)?q(a):a}));return b}f('SUI.copy',q);
function I(a){var b=!1;if(w(a))b=0===a.length;else if(r(a)){var c=0;u(a,function(){c++});b=0===c}return b}f('SUI.isEmpty',I);f('SUI.random',function(a,b,c){return(void 0===c?0:c)?Math.random()*(b-a)+a:Math.floor(Math.random()*(b-a+1))+a});f('SUI.encodeBase64',function(a){return window.btoa(a)});f('SUI.decodeBase64',function(a){return window.atob(a)});f('SUI.capitalize',function(a){return a.charAt(0).toUpperCase()+a.slice(1)});
f('SUI.pluck',function(a,b){var c=[];u(a,function(a){a=a.get(b);c.push(a)});return c});f('SUI.encrypt',function(a,b){a=JSON.stringify(a);return window.CryptoJS.AES.encrypt(a,b)});f('SUI.decrypt',function(a,b){a=window.CryptoJS.AES.decrypt(a,b).toString(window.CryptoJS.enc.Utf8);return JSON.parse(a||'null')});f('SUI.md5',function(a){return window.CryptoJS.MD5(a)});f('SUI.generateId',function(a){var b=J();return[a,b].join('-')});
function J(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}f('SUI.guid',J);f('SUI.uuid',function(){return[Math.random().toString(16).slice(2,10),Math.random().toString(16).slice(2,6),(.0625*Math.random()+.25).toString(16).slice(2,6),(.25*Math.random()+.5).toString(16).slice(2,6),Math.random().toString(16).slice(2,14)].join('-')});f('SUI.urlWithQueryString',function(a,b){b=K(b);var c=m(a,'?')?'&':'?';return a+(b?c+b:'')});
function K(a){var b=[];u(a,function(a,d){w(a)?C(a,function(a){b.push(t('{0}[]={1}',[d,a]))}):B(a)||b.push(t('{0}={1}',[d,a]))});return I(b)?'':b.join('&')}f('SUI.getExtensionName',function(a){a=a.split('?',2)[0];return a.slice((Math.max(0,a.lastIndexOf('.'))||Infinity)+1)});function L(a){return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}f('SUI.hexColorToRGB',L);
function M(a,b,c){a=[a,b,c];for(b=0;b<a.length;b++)a[b]=16>=a[b]?'0'+a[b].toString(16):''+a[b].toString(16);return'#'+a.join('')}f('SUI.RGBtoHexColor',M);f('SUI.colorContrastYIQ',function(a,b,c){a=L(a);return 128<=(299*a[0]+587*a[1]+114*a[2])/1E3?void 0===c?'#252525':c:void 0===b?'#FEFEFE':b});f('SUI.colorContrast',function(a,b){b=void 0===b?.5:b;a=L(a);for(var c=0;c<a.length;c++)a[c]+=Math.round(a[c]*b),0>a[c]?a[c]=0:255<a[c]&&(a[c]=255);return M.apply(null,a)});function N(a){a=a||{};this.h(a)}N.prototype=Object.create(Object.prototype);e=N.prototype;e.constructor=N;e.h=function(a){if(r(a))for(var b in a)a.hasOwnProperty(b)&&(null===a[b]||!r(a[b])||w(a[b])?w(a[b])&&null!==a[b][0]&&r(a[b][0])?(O(a,b),this[b]=a[b]):this[b]=k(a[b]):(x(this[b],N)||(this[b]=new N(this[b])),this[b].h(a[b])))};function O(a,b){u(a[b],function(c,d){a[b][d]=new N(c)})}e.get=function(a,b,c){var d=this;a&&(a=(void 0===c?0:c)?[a]:a.split('.'),d=P(this,this,a));return B(d)?b:d};
function P(a,b,c){var d=void 0;D(b,function(a,h){1===c.length&&h===c[0]?d=b[h]:h===c[0]&&null!==b[h]&&r(b[h])&&(a=q(c),a.shift(),d=P(this,b[h],a))}.bind(a));return d}e.set=function(a,b){var c={};a=a.split('.');for(var d=a.pop(),g=c,h=0;h<a.length;h++)g=g[a[h]]=g[a[h]]||{};g[d]=b;this.h(c)};e.remove=function(a){a=a.split('.');Q(this,this,a)};e.clear=function(){E(this)};
function Q(a,b,c){for(var d in b)if(b.hasOwnProperty(d))if(1===c.length&&d===c[0])delete b[d];else if(d===c[0]&&null!==b[d]&&r(b[d])){var g=q(c);g.shift();Q(a,b[d],g)}}e.copy=function(a){var b=q(this);a||(b=new N(b));return b};e.isEmpty=function(){return I(this)};function R(a,b,c){a=void 0===a?[]:a;b=void 0===b?N:b;c=void 0===c?{}:c;this.j=b;b=c;b=void 0===b?{}:b;this.options=new N({id:'id',parent:void 0});this.options.h(b);this.c=[];this.load(a)}e=R.prototype;e.load=function(a){var b=this;u(a,function(a){b.push(a)})};e.push=function(a){var b=a;x(a,this.j)||(b=new this.j(a,B(this.options.parent)?this:this.options.parent));a=b;this.c.push(a);return a};e.set=function(a,b){var c=b;x(b,this.j)||(c=new this.j(b,this));a<this.size()?this.c[a]=c:this.push(c);return c};
e.replace=function(a){var b=a.get(this.options.id);(b=S(this,this.options.id,b))&&b.h(a);return b};e.iterator=function(a,b,c){c=c||this.c;var d=[];u(c,function(c,h){a(c)&&(b(c,h),d.push(c))});return d};e.get=function(a,b){var c=null;0<=a&&a<this.c.length&&(c=a=this.c[a],b&&(c=a.get(b)));return c};e.clear=function(){E(this.c)};function S(a,b,c){return T(a,function(d,g){return a.get(g,b)===c})}function T(a,b){for(var c=0;c<a.c.length&&!b(a.c[c],c);)c++;return a.get(c)}
e.delete=function(a){return U(this,function(b){return b===a})};function U(a,b){for(var c=0;c<a.c.length&&!b(a.c[c],c);)c++;b=a.get(c);a.c.splice(c,1);return b}e.size=function(){return this.c.length};function V(a,b){this.f=b||document;y(this.f.l)&&(this.f=this.f.node);b=[];-1!==a.indexOf(' ')||1<a.split('.').length-1||-1<a.indexOf('.')&&0!==a.indexOf('.')||-1!==a.indexOf('[')?b=this.f.querySelectorAll(a):0===a.indexOf('#')?(y(this.f.getElementById)||(this.f=document),a=this.f.getElementById(a.replace('#','')),b.push(a)):b=0===a.indexOf('.')?this.f.getElementsByClassName(a.replace('.','')):this.f.getElementsByTagName(a);a=[];for(var c=0;c<b.length;c++)b[c]&&a.push(b[c]);R.call(this,a,W,{parent:null})}
V.prototype=Object.create(R.prototype);V.prototype.constructor=V;V.prototype.getItem=function(){var a=this.get(0);a||(a=new W(null));return a};function W(a,b){if(l(a))if(m(a,'<')&&m(a,'</')){var c=document.createElement('template');c.innerHTML=a;a=c.content.firstElementChild}else a=document.createElement(a);this.node=a;this.c=b}e=W.prototype;e.set=function(a,b){'id'===a?this.node.id=b:this.setAttribute(a,b)};e.h=function(a){var b=this;u(a,function(a,d){b.set(d,a)})};e.get=function(a){return'id'===a?this.node.id||null:this.node.getAttribute(a)||null};e.l=function(){return this.node};
e.setAttribute=function(a,b){b=B(b)?a:b;y(b)?this.node[a]=b:this.node.setAttribute(a,b)};e.addEventListener=function(a,b){var c=this,d=v();b&&(d=function(a){b(c,a);a.stopPropagation()},this.node.addEventListener(a,d),X(this,a,d));return d};function X(a,b,c){a.node._listeners||(a.node._listeners={});a.node._listeners[b]||(a.node._listeners[b]=[]);a.node._listeners[b].push(c)}e.trigger=function(a){a=new Event(a);this.node.dispatchEvent(a)};
e.createElement=function(a){a=document.createElement(a);return new W(a,this.c)};e.appendChild=function(a){this.node.appendChild(a.node)};e.removeChild=function(a){if(this.node.hasChildNodes())try{this.node.removeChild(a.node)}catch(b){console.warn(b)}};e.remove=function(){var a=this.c&&!this.c.isEmpty()?this.c.node:this.node?this.node.parentElement:null;!this.isEmpty()&&a&&a.removeChild(this.node)};e.getComputedStyle=function(){return window.getComputedStyle(this.node)};
e.setStyle=function(a){var b=this;u(a,function(a,d){b.node.style.setProperty(d,a,'')})};e.isEmpty=function(){return!this.node};e.toString=function(a){return void 0===a||a?this.node.outerHTML:this.node.innerHTML};
export default window.SUI;