/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var COMPILED=false;var goog=goog||{};goog.global=this||self;goog.global.CLOSURE_UNCOMPILED_DEFINES;goog.global.CLOSURE_DEFINES;
goog.exportPath_=function(name,object,overwriteImplicit,objectToExportTo){var parts=name.split('.');var cur=objectToExportTo||goog.global;if(!(parts[0]in cur)&&typeof cur.execScript!='undefined')cur.execScript('var '+parts[0]);for(var part;parts.length&&(part=parts.shift());)if(!parts.length&&object!==undefined)if(!overwriteImplicit&&goog.isObject(object)&&goog.isObject(cur[part]))for(var prop in object){if(object.hasOwnProperty(prop))cur[part][prop]=object[prop]}else cur[part]=object;else if(cur[part]&&
cur[part]!==Object.prototype[part])cur=cur[part];else cur=cur[part]={}};
goog.define=function(name,defaultValue){var value=defaultValue;if(!COMPILED){var uncompiledDefines=goog.global.CLOSURE_UNCOMPILED_DEFINES;var defines=goog.global.CLOSURE_DEFINES;if(uncompiledDefines&&uncompiledDefines.nodeType===undefined&&Object.prototype.hasOwnProperty.call(uncompiledDefines,name))value=uncompiledDefines[name];else if(defines&&defines.nodeType===undefined&&Object.prototype.hasOwnProperty.call(defines,name))value=defines[name]}return value};
goog.FEATURESET_YEAR=goog.define('goog.FEATURESET_YEAR',2012);goog.DEBUG=goog.define('goog.DEBUG',true);goog.LOCALE=goog.define('goog.LOCALE','en');goog.TRUSTED_SITE=goog.define('goog.TRUSTED_SITE',true);goog.DISALLOW_TEST_ONLY_CODE=goog.define('goog.DISALLOW_TEST_ONLY_CODE',COMPILED&&!goog.DEBUG);goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=goog.define('goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING',false);
goog.provide=function(name){if(goog.isInModuleLoader_())throw new Error('goog.provide cannot be used within a module.');if(!COMPILED)if(goog.isProvided_(name))throw new Error('Namespace "'+name+'" already declared.');goog.constructNamespace_(name)};
goog.constructNamespace_=function(name,object,overwriteImplicit){if(!COMPILED){delete goog.implicitNamespaces_[name];var namespace=name;while(namespace=namespace.substring(0,namespace.lastIndexOf('.'))){if(goog.getObjectByName(namespace))break;goog.implicitNamespaces_[namespace]=true}}goog.exportPath_(name,object,overwriteImplicit)};
goog.getScriptNonce=function(opt_window){if(opt_window&&opt_window!=goog.global)return goog.getScriptNonce_(opt_window.document);if(goog.cspNonce_===null)goog.cspNonce_=goog.getScriptNonce_(goog.global.document);return goog.cspNonce_};goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/;goog.cspNonce_=null;goog.getScriptNonce_=function(doc){var script=doc.querySelector&&doc.querySelector('script[nonce]');if(script){var nonce=script['nonce']||script.getAttribute('nonce');if(nonce&&goog.NONCE_PATTERN_.test(nonce))return nonce}return''};
goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(name){if(typeof name!=='string'||!name||name.search(goog.VALID_MODULE_RE_)==-1)throw new Error('Invalid module identifier');if(!goog.isInGoogModuleLoader_())throw new Error('Module '+name+' has been loaded incorrectly. Note, '+'modules cannot be loaded as normal scripts. They require some kind of '+"pre-processing step. You're likely trying to load a module via a "+'script tag or as a part of a concatenated bundle without rewriting the '+'module. For more info see: '+'https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.');
if(goog.moduleLoaderState_.moduleName)throw new Error('goog.module may only be called once per module.');goog.moduleLoaderState_.moduleName=name;if(!COMPILED){if(goog.isProvided_(name))throw new Error('Namespace "'+name+'" already declared.');delete goog.implicitNamespaces_[name]}};goog.module.get=function(name){return goog.module.getInternal_(name)};
goog.module.getInternal_=function(name){if(!COMPILED)if(name in goog.loadedModules_)return goog.loadedModules_[name].exports;else if(!goog.implicitNamespaces_[name]){var ns=goog.getObjectByName(name);return ns!=null?ns:null}return null};goog.ModuleType={ES6:'es6',GOOG:'goog'};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()};
goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG};goog.isInEs6ModuleLoader_=function(){var inLoader=!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6;if(inLoader)return true;var jscomp=goog.global['$jscomp'];if(jscomp){if(typeof jscomp.getCurrentModulePath!='function')return false;return!!jscomp.getCurrentModulePath()}return false};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw new Error('goog.module.declareLegacyNamespace must be called from '+'within a goog.module');if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw new Error('goog.module must be called prior to '+'goog.module.declareLegacyNamespace.');goog.moduleLoaderState_.declareLegacyNamespace=true};
goog.declareModuleId=function(namespace){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw new Error('goog.declareModuleId may only be called from '+'within an ES6 module');if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw new Error('goog.declareModuleId may only be called once per module.');if(namespace in goog.loadedModules_)throw new Error('Module with namespace "'+namespace+'" already exists.');}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=namespace;else{var jscomp=
goog.global['$jscomp'];if(!jscomp||typeof jscomp.getCurrentModulePath!='function')throw new Error('Module with namespace "'+namespace+'" has been loaded incorrectly.');var exports=jscomp.require(jscomp.getCurrentModulePath());goog.loadedModules_[namespace]={exports:exports,type:goog.ModuleType.ES6,moduleId:namespace}}};
goog.setTestOnly=function(opt_message){if(goog.DISALLOW_TEST_ONLY_CODE){opt_message=opt_message||'';throw new Error('Importing test-only code into non-debug environment'+(opt_message?': '+opt_message:'.'));}};goog.forwardDeclare=function(name){};goog.forwardDeclare('Document');goog.forwardDeclare('HTMLScriptElement');goog.forwardDeclare('XMLHttpRequest');
if(!COMPILED){goog.isProvided_=function(name){return name in goog.loadedModules_||!goog.implicitNamespaces_[name]&&goog.getObjectByName(name)!=null};goog.implicitNamespaces_={'goog.module':true}}goog.getObjectByName=function(name,opt_obj){var parts=name.split('.');var cur=opt_obj||goog.global;for(var i=0;i<parts.length;i++){cur=cur[parts[i]];if(cur==null)return null}return cur};
goog.addDependency=function(relPath,provides,requires,opt_loadFlags){if(!COMPILED&&goog.DEPENDENCIES_ENABLED)goog.debugLoader_.addDependency(relPath,provides,requires,opt_loadFlags)};goog.ENABLE_DEBUG_LOADER=goog.define('goog.ENABLE_DEBUG_LOADER',true);goog.logToConsole_=function(msg){if(goog.global.console)goog.global.console['error'](msg)};
goog.require=function(namespace){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER)goog.debugLoader_.requested(namespace);if(goog.isProvided_(namespace)){if(goog.isInModuleLoader_())return goog.module.getInternal_(namespace)}else if(goog.ENABLE_DEBUG_LOADER){var moduleLoaderState=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(namespace)}finally{goog.moduleLoaderState_=moduleLoaderState}}return null}};goog.requireType=function(namespace){return{}};goog.basePath='';goog.global.CLOSURE_BASE_PATH;
goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};goog.abstractMethod=function(){throw new Error('unimplemented abstract method');};goog.addSingletonGetter=function(ctor){ctor.instance_=undefined;ctor.getInstance=function(){if(ctor.instance_)return ctor.instance_;if(goog.DEBUG)goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=ctor;return ctor.instance_=new ctor}};goog.instantiatedSingletons_=[];
goog.LOAD_MODULE_USING_EVAL=goog.define('goog.LOAD_MODULE_USING_EVAL',true);goog.SEAL_MODULE_EXPORTS=goog.define('goog.SEAL_MODULE_EXPORTS',goog.DEBUG);goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;goog.TRANSPILE=goog.define('goog.TRANSPILE','detect');goog.ASSUME_ES_MODULES_TRANSPILED=goog.define('goog.ASSUME_ES_MODULES_TRANSPILED',false);goog.TRANSPILE_TO_LANGUAGE=goog.define('goog.TRANSPILE_TO_LANGUAGE','');goog.TRANSPILER=goog.define('goog.TRANSPILER','transpile.js');
goog.hasBadLetScoping=null;goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){var hasBadLetScoping;try{hasBadLetScoping=!eval('"use strict";'+'let x = 1; function f() { return typeof x; };'+'f() == "number";')}catch(e){hasBadLetScoping=false}goog.hasBadLetScoping=hasBadLetScoping}return goog.hasBadLetScoping};goog.workaroundSafari10EvalBug=function(moduleDef){return'(function(){'+moduleDef+'\n'+';'+'})();\n'};
goog.loadModule=function(moduleDef){var previousState=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:'',declareLegacyNamespace:false,type:goog.ModuleType.GOOG};var origExports={};var exports=origExports;if(typeof moduleDef==='function')exports=moduleDef.call(undefined,exports);else if(typeof moduleDef==='string'){if(goog.useSafari10Workaround())moduleDef=goog.workaroundSafari10EvalBug(moduleDef);exports=goog.loadModuleFromSource_.call(undefined,exports,moduleDef)}else throw new Error('Invalid module definition');
var moduleName=goog.moduleLoaderState_.moduleName;if(typeof moduleName==='string'&&moduleName){if(goog.moduleLoaderState_.declareLegacyNamespace){var isDefaultExport=origExports!==exports;goog.constructNamespace_(moduleName,exports,isDefaultExport)}else if(goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof exports=='object'&&exports!=null)Object.seal(exports);var data={exports:exports,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};goog.loadedModules_[moduleName]=data}else throw new Error('Invalid module name "'+
moduleName+'"');}finally{goog.moduleLoaderState_=previousState}};goog.loadModuleFromSource_=function(exports){eval(arguments[1]);return exports};goog.normalizePath_=function(path){var components=path.split('/');var i=0;while(i<components.length)if(components[i]=='.')components.splice(i,1);else if(i&&components[i]=='..'&&components[i-1]&&components[i-1]!='..')components.splice(--i,2);else i++;return components.join('/')};goog.global.CLOSURE_LOAD_FILE_SYNC;
goog.loadFileSync_=function(src){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(src);else try{var xhr=new goog.global['XMLHttpRequest'];xhr.open('get',src,false);xhr.send();return xhr.status==0||xhr.status==200?xhr.responseText:null}catch(err){return null}};
goog.transpile_=function(code,path,target){var jscomp=goog.global['$jscomp'];if(!jscomp)goog.global['$jscomp']=jscomp={};var transpile=jscomp.transpile;if(!transpile){var transpilerPath=goog.basePath+goog.TRANSPILER;var transpilerCode=goog.loadFileSync_(transpilerPath);if(transpilerCode){(function(){(0,eval)(transpilerCode+'\n//# sourceURL='+transpilerPath)}).call(goog.global);if(goog.global['$gwtExport']&&goog.global['$gwtExport']['$jscomp']&&!goog.global['$gwtExport']['$jscomp']['transpile'])throw new Error('The transpiler did not properly export the "transpile" '+
'method. $gwtExport: '+JSON.stringify(goog.global['$gwtExport']));goog.global['$jscomp'].transpile=goog.global['$gwtExport']['$jscomp']['transpile'];jscomp=goog.global['$jscomp'];transpile=jscomp.transpile}}if(!transpile){var suffix=' requires transpilation but no transpiler was found.';transpile=jscomp.transpile=function(code,path){goog.logToConsole_(path+suffix);return code}}return transpile(code,path,target)};
goog.typeOf=function(value){var s=typeof value;if(s!='object')return s;if(!value)return'null';if(Array.isArray(value))return'array';return s};goog.isArrayLike=function(val){var type=goog.typeOf(val);return type=='array'||type=='object'&&typeof val.length=='number'};goog.isDateLike=function(val){return goog.isObject(val)&&typeof val.getFullYear=='function'};goog.isObject=function(val){var type=typeof val;return type=='object'&&val!=null||type=='function'};
goog.getUid=function(obj){return Object.prototype.hasOwnProperty.call(obj,goog.UID_PROPERTY_)&&obj[goog.UID_PROPERTY_]||(obj[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(obj){return!!obj[goog.UID_PROPERTY_]};goog.removeUid=function(obj){if(obj!==null&&'removeAttribute'in obj)obj.removeAttribute(goog.UID_PROPERTY_);try{delete obj[goog.UID_PROPERTY_]}catch(ex){}};goog.UID_PROPERTY_='closure_uid_'+(Math.random()*1E9>>>0);goog.uidCounter_=0;
goog.cloneObject=function(obj){var type=goog.typeOf(obj);if(type=='object'||type=='array'){if(typeof obj.clone==='function')return obj.clone();var clone=type=='array'?[]:{};for(var key in obj)clone[key]=goog.cloneObject(obj[key]);return clone}return obj};goog.bindNative_=function(fn,selfObj,var_args){return fn.call.apply(fn.bind,arguments)};
goog.bindJs_=function(fn,selfObj,var_args){if(!fn)throw new Error;if(arguments.length>2){var boundArgs=Array.prototype.slice.call(arguments,2);return function(){var newArgs=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(newArgs,boundArgs);return fn.apply(selfObj,newArgs)}}else return function(){return fn.apply(selfObj,arguments)}};
goog.bind=function(fn,selfObj,var_args){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf('native code')!=-1)goog.bind=goog.bindNative_;else goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};goog.partial=function(fn,var_args){var args=Array.prototype.slice.call(arguments,1);return function(){var newArgs=args.slice();newArgs.push.apply(newArgs,arguments);return fn.apply(this,newArgs)}};goog.mixin=function(target,source){for(var x in source)target[x]=source[x]};
goog.now=function(){return Date.now()};goog.globalEval=function(script){(0,eval)(script)};goog.cssNameMapping_;goog.cssNameMappingStyle_;goog.global.CLOSURE_CSS_NAME_MAP_FN;
goog.getCssName=function(className,opt_modifier){if(String(className).charAt(0)=='.')throw new Error('className passed in goog.getCssName must not start with ".".'+' You passed: '+className);var getMapping=function(cssName){return goog.cssNameMapping_[cssName]||cssName};var renameByParts=function(cssName){var parts=cssName.split('-');var mapped=[];for(var i=0;i<parts.length;i++)mapped.push(getMapping(parts[i]));return mapped.join('-')};var rename;if(goog.cssNameMapping_)rename=goog.cssNameMappingStyle_==
'BY_WHOLE'?getMapping:renameByParts;else rename=function(a){return a};var result=opt_modifier?className+'-'+rename(opt_modifier):rename(className);if(goog.global.CLOSURE_CSS_NAME_MAP_FN)return goog.global.CLOSURE_CSS_NAME_MAP_FN(result);return result};goog.setCssNameMapping=function(mapping,opt_style){goog.cssNameMapping_=mapping;goog.cssNameMappingStyle_=opt_style};goog.global.CLOSURE_CSS_NAME_MAPPING;if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING)goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING;
goog.getMsg=function(str,opt_values,opt_options){if(opt_options&&opt_options.html)str=str.replace(/</g,'&lt;');if(opt_options&&opt_options.unescapeHtmlEntities)str=str.replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,'&');if(opt_values)str=str.replace(/\{\$([^}]+)}/g,function(match,key){return opt_values!=null&&key in opt_values?opt_values[key]:match});return str};goog.getMsgWithFallback=function(a,b){return a};
goog.exportSymbol=function(publicPath,object,objectToExportTo){goog.exportPath_(publicPath,object,true,objectToExportTo)};goog.exportProperty=function(object,publicName,symbol){object[publicName]=symbol};
goog.inherits=function(childCtor,parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;childCtor.superClass_=parentCtor.prototype;childCtor.prototype=new tempCtor;childCtor.prototype.constructor=childCtor;childCtor.base=function(me,methodName,var_args){var args=new Array(arguments.length-2);for(var i=2;i<arguments.length;i++)args[i-2]=arguments[i];return parentCtor.prototype[methodName].apply(me,args)}};
goog.scope=function(fn){if(goog.isInModuleLoader_())throw new Error('goog.scope is not supported within a module.');fn.call(goog.global)};if(!COMPILED)goog.global['COMPILED']=COMPILED;
goog.defineClass=function(superClass,def){var constructor=def.constructor;var statics=def.statics;if(!constructor||constructor==Object.prototype.constructor)constructor=function(){throw new Error('cannot instantiate an interface (no constructor defined).');};var cls=goog.defineClass.createSealingConstructor_(constructor,superClass);if(superClass)goog.inherits(cls,superClass);delete def.constructor;delete def.statics;goog.defineClass.applyProperties_(cls.prototype,def);if(statics!=null)if(statics instanceof
Function)statics(cls);else goog.defineClass.applyProperties_(cls,statics);return cls};goog.defineClass.ClassDescriptor;goog.defineClass.SEAL_CLASS_INSTANCES=goog.define('goog.defineClass.SEAL_CLASS_INSTANCES',goog.DEBUG);goog.defineClass.createSealingConstructor_=function(ctr,superClass){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return ctr;var wrappedCtr=function(){var instance=ctr.apply(this,arguments)||this;instance[goog.UID_PROPERTY_]=instance[goog.UID_PROPERTY_];return instance};return wrappedCtr};
goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf'];goog.defineClass.applyProperties_=function(target,source){var key;for(key in source)if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key];for(var i=0;i<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;i++){key=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[i];if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key]}};
if(!COMPILED&&goog.DEPENDENCIES_ENABLED){goog.inHtmlDocument_=function(){var doc=goog.global.document;return doc!=null&&'write'in doc};goog.isDocumentLoading_=function(){var doc=goog.global.document;return doc.attachEvent?doc.readyState!='complete':doc.readyState=='loading'};goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH!=undefined&&typeof goog.global.CLOSURE_BASE_PATH==='string'){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else if(!goog.inHtmlDocument_())return;var doc=goog.global.document;
var currentScript=doc.currentScript;if(currentScript)var scripts=[currentScript];else var scripts=doc.getElementsByTagName('SCRIPT');for(var i=scripts.length-1;i>=0;--i){var script=scripts[i];var src=script.src;var qmark=src.lastIndexOf('?');var l=qmark==-1?src.length:qmark;if(src.substr(l-7,7)=='base.js'){goog.basePath=src.substr(0,l-7);return}}};goog.findBasePath_();goog.Transpiler=function(){this.requiresTranspilation_=null;this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE};goog.Transpiler.prototype.createRequiresTranspilation_=
function(){var transpilationTarget='es3';var requiresTranspilation={'es3':false};var transpilationRequiredForAllLaterModes=false;function addNewerLanguageTranspilationCheck(modeName,isSupported){if(transpilationRequiredForAllLaterModes)requiresTranspilation[modeName]=true;else if(isSupported()){transpilationTarget=modeName;requiresTranspilation[modeName]=false}else{requiresTranspilation[modeName]=true;transpilationRequiredForAllLaterModes=true}}function evalCheck(code){try{return!!eval(code)}catch(ignored){return false}}
var userAgent=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:'';addNewerLanguageTranspilationCheck('es5',function(){return evalCheck('[1,].length==1')});addNewerLanguageTranspilationCheck('es6',function(){var re=/Edge\/(\d+)(\.\d)*/i;var edgeUserAgent=userAgent.match(re);if(edgeUserAgent)return false;var es6fullTest='class X{constructor(){if(new.target!=String)throw 1;this.x=42}}'+'let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof '+'String))throw 1;for(const a of[2,3]){if(a==2)continue;function '+
'f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()'+'==3}';return evalCheck('(()=>{"use strict";'+es6fullTest+'})()')});addNewerLanguageTranspilationCheck('es7',function(){return evalCheck('2 ** 2 == 4')});addNewerLanguageTranspilationCheck('es8',function(){return evalCheck('async () => 1, true')});addNewerLanguageTranspilationCheck('es9',function(){return evalCheck('({...rest} = {}), true')});addNewerLanguageTranspilationCheck('es_next',function(){return false});return{target:transpilationTarget,
map:requiresTranspilation}};goog.Transpiler.prototype.needsTranspile=function(lang,module){if(goog.TRANSPILE=='always')return true;else if(goog.TRANSPILE=='never')return false;else if(!this.requiresTranspilation_){var obj=this.createRequiresTranspilation_();this.requiresTranspilation_=obj.map;this.transpilationTarget_=this.transpilationTarget_||obj.target}if(lang in this.requiresTranspilation_)if(this.requiresTranspilation_[lang])return true;else if(goog.inHtmlDocument_()&&module=='es6'&&!('noModule'in
goog.global.document.createElement('script')))return true;else return false;else throw new Error('Unknown language mode: '+lang);};goog.Transpiler.prototype.transpile=function(code,path){return goog.transpile_(code,path,this.transpilationTarget_)};goog.transpiler_=new goog.Transpiler;goog.protectScriptTag_=function(str){return str.replace(/<\/(SCRIPT)/ig,'\\x3c/$1')};goog.DebugLoader_=function(){this.dependencies_={};this.idToPath_={};this.written_={};this.loadingDeps_=[];this.depsToLoad_=[];this.paused_=
false;this.factory_=new goog.DependencyFactory(goog.transpiler_);this.deferredCallbacks_={};this.deferredQueue_=[]};goog.DebugLoader_.prototype.bootstrap=function(namespaces,callback){var cb=callback;function resolve(){if(cb){goog.global.setTimeout(cb,0);cb=null}}if(!namespaces.length){resolve();return}var deps=[];for(var i=0;i<namespaces.length;i++){var path=this.getPathFromDeps_(namespaces[i]);if(!path)throw new Error('Unregonized namespace: '+namespaces[i]);deps.push(this.dependencies_[path])}var require=
goog.require;var loaded=0;for(var i=0;i<namespaces.length;i++){require(namespaces[i]);deps[i].onLoad(function(){if(++loaded==namespaces.length)resolve()})}};goog.DebugLoader_.prototype.loadClosureDeps=function(){var relPath='deps.js';this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+relPath),relPath,[],[],{},false));this.loadDeps_()};goog.DebugLoader_.prototype.requested=function(absPathOrId,opt_force){var path=this.getPathFromDeps_(absPathOrId);if(path&&(opt_force||
this.areDepsLoaded_(this.dependencies_[path].requires))){var callback=this.deferredCallbacks_[path];if(callback){delete this.deferredCallbacks_[path];callback()}}};goog.DebugLoader_.prototype.setDependencyFactory=function(factory){this.factory_=factory};goog.DebugLoader_.prototype.load_=function(namespace){if(!this.getPathFromDeps_(namespace)){var errorMessage='goog.require could not find: '+namespace;goog.logToConsole_(errorMessage);throw Error(errorMessage);}else{var loader=this;var deps=[];var visit=
function(namespace){var path=loader.getPathFromDeps_(namespace);if(!path)throw new Error('Bad dependency path or symbol: '+namespace);if(loader.written_[path])return;loader.written_[path]=true;var dep=loader.dependencies_[path];for(var i=0;i<dep.requires.length;i++)if(!goog.isProvided_(dep.requires[i]))visit(dep.requires[i]);deps.push(dep)};visit(namespace);var wasLoading=!!this.depsToLoad_.length;this.depsToLoad_=this.depsToLoad_.concat(deps);if(!this.paused_&&!wasLoading)this.loadDeps_()}};goog.DebugLoader_.prototype.loadDeps_=
function(){var loader=this;var paused=this.paused_;while(this.depsToLoad_.length&&!paused)(function(){var loadCallDone=false;var dep=loader.depsToLoad_.shift();var loaded=false;loader.loading_(dep);var controller={pause:function(){if(loadCallDone)throw new Error('Cannot call pause after the call to load.');else paused=true},resume:function(){if(loadCallDone)loader.resume_();else paused=false},loaded:function(){if(loaded)throw new Error('Double call to loaded.');loaded=true;loader.loaded_(dep)},pending:function(){var pending=
[];for(var i=0;i<loader.loadingDeps_.length;i++)pending.push(loader.loadingDeps_[i]);return pending},setModuleState:function(type){goog.moduleLoaderState_={type:type,moduleName:'',declareLegacyNamespace:false}},registerEs6ModuleExports:function(path,exports,opt_closureNamespace){if(opt_closureNamespace)goog.loadedModules_[opt_closureNamespace]={exports:exports,type:goog.ModuleType.ES6,moduleId:opt_closureNamespace||''}},registerGoogModuleExports:function(moduleId,exports){goog.loadedModules_[moduleId]=
{exports:exports,type:goog.ModuleType.GOOG,moduleId:moduleId}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(callback){if(loadCallDone)throw new Error('Cannot register with defer after the call to load.');loader.defer_(dep,callback)},areDepsLoaded:function(){return loader.areDepsLoaded_(dep.requires)}};try{dep.load(controller)}finally{loadCallDone=true}})();if(paused)this.pause_()};goog.DebugLoader_.prototype.pause_=function(){this.paused_=true};goog.DebugLoader_.prototype.resume_=
function(){if(this.paused_){this.paused_=false;this.loadDeps_()}};goog.DebugLoader_.prototype.loading_=function(dep){this.loadingDeps_.push(dep)};goog.DebugLoader_.prototype.loaded_=function(dep){for(var i=0;i<this.loadingDeps_.length;i++)if(this.loadingDeps_[i]==dep){this.loadingDeps_.splice(i,1);break}for(var i=0;i<this.deferredQueue_.length;i++)if(this.deferredQueue_[i]==dep.path){this.deferredQueue_.splice(i,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)while(this.deferredQueue_.length)this.requested(this.deferredQueue_.shift(),
true);dep.loaded()};goog.DebugLoader_.prototype.areDepsLoaded_=function(pathsOrIds){for(var i=0;i<pathsOrIds.length;i++){var path=this.getPathFromDeps_(pathsOrIds[i]);if(!path||!(path in this.deferredCallbacks_)&&!goog.isProvided_(pathsOrIds[i]))return false}return true};goog.DebugLoader_.prototype.getPathFromDeps_=function(absPathOrId){if(absPathOrId in this.idToPath_)return this.idToPath_[absPathOrId];else if(absPathOrId in this.dependencies_)return absPathOrId;else return null};goog.DebugLoader_.prototype.defer_=
function(dependency,callback){this.deferredCallbacks_[dependency.path]=callback;this.deferredQueue_.push(dependency.path)};goog.LoadController=function(){};goog.LoadController.prototype.pause=function(){};goog.LoadController.prototype.resume=function(){};goog.LoadController.prototype.loaded=function(){};goog.LoadController.prototype.pending=function(){};goog.LoadController.prototype.registerEs6ModuleExports=function(path,exports,opt_closureNamespace){};goog.LoadController.prototype.setModuleState=
function(type){};goog.LoadController.prototype.clearModuleState=function(){};goog.LoadController.prototype.defer=function(callback){};goog.LoadController.prototype.areDepsLoaded=function(){};goog.Dependency=function(path,relativePath,provides,requires,loadFlags){this.path=path;this.relativePath=relativePath;this.provides=provides;this.requires=requires;this.loadFlags=loadFlags;this.loaded_=false;this.loadCallbacks_=[]};goog.Dependency.prototype.getPathName=function(){var pathName=this.path;var protocolIndex=
pathName.indexOf('://');if(protocolIndex>=0){pathName=pathName.substring(protocolIndex+3);var slashIndex=pathName.indexOf('/');if(slashIndex>=0)pathName=pathName.substring(slashIndex+1)}return pathName};goog.Dependency.prototype.onLoad=function(callback){if(this.loaded_)callback();else this.loadCallbacks_.push(callback)};goog.Dependency.prototype.loaded=function(){this.loaded_=true;var callbacks=this.loadCallbacks_;this.loadCallbacks_=[];for(var i=0;i<callbacks.length;i++)callbacks[i]()};goog.Dependency.defer_=
false;goog.Dependency.callbackMap_={};goog.Dependency.registerCallback_=function(callback){var key=Math.random().toString(32);goog.Dependency.callbackMap_[key]=callback;return key};goog.Dependency.unregisterCallback_=function(key){delete goog.Dependency.callbackMap_[key]};goog.Dependency.callback_=function(key,var_args){if(key in goog.Dependency.callbackMap_){var callback=goog.Dependency.callbackMap_[key];var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);callback.apply(undefined,
args)}else{var errorMessage='Callback key '+key+' does not exist (was base.js loaded more than once?).';throw Error(errorMessage);}};goog.Dependency.prototype.load=function(controller){if(goog.global.CLOSURE_IMPORT_SCRIPT){if(goog.global.CLOSURE_IMPORT_SCRIPT(this.path))controller.loaded();else controller.pause();return}if(!goog.inHtmlDocument_()){goog.logToConsole_('Cannot use default debug loader outside of HTML documents.');if(this.relativePath=='deps.js'){goog.logToConsole_('Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, '+
'or setting CLOSURE_NO_DEPS to true.');controller.loaded()}else controller.pause();return}var doc=goog.global.document;if(doc.readyState=='complete'&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){var isDeps=/\bdeps.js$/.test(this.path);if(isDeps){controller.loaded();return}else throw Error('Cannot write "'+this.path+'" after document load');}var nonce=goog.getScriptNonce();if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var key;var callback=function(script){if(script.readyState&&
script.readyState!='complete'){script.onload=callback;return}goog.Dependency.unregisterCallback_(key);controller.loaded()};key=goog.Dependency.registerCallback_(callback);var defer=goog.Dependency.defer_?' defer':'';var nonceAttr=nonce?' nonce="'+nonce+'"':'';var script='<script src="'+this.path+'"'+nonceAttr+defer+' id="script-'+key+'">\x3c/script>';script+='<script'+nonceAttr+'>';if(goog.Dependency.defer_)script+="document.getElementById('script-"+key+"').onload = function() {\n"+"  goog.Dependency.callback_('"+
key+"', this);\n"+'};\n';else script+="goog.Dependency.callback_('"+key+"', document.getElementById('script-"+key+"'));";script+='\x3c/script>';doc.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(script):script)}else{var scriptEl=doc.createElement('script');scriptEl.defer=goog.Dependency.defer_;scriptEl.async=false;if(nonce)scriptEl.nonce=nonce;if(goog.DebugLoader_.IS_OLD_IE_){controller.pause();scriptEl.onreadystatechange=function(){if(scriptEl.readyState=='loaded'||scriptEl.readyState==
'complete'){controller.loaded();controller.resume()}}}else scriptEl.onload=function(){scriptEl.onload=null;controller.loaded()};scriptEl.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path;doc.head.appendChild(scriptEl)}};goog.Es6ModuleDependency=function(path,relativePath,provides,requires,loadFlags){goog.Es6ModuleDependency.base(this,'constructor',path,relativePath,provides,requires,loadFlags)};goog.inherits(goog.Es6ModuleDependency,goog.Dependency);goog.Es6ModuleDependency.prototype.load=
function(controller){if(goog.global.CLOSURE_IMPORT_SCRIPT){if(goog.global.CLOSURE_IMPORT_SCRIPT(this.path))controller.loaded();else controller.pause();return}if(!goog.inHtmlDocument_()){goog.logToConsole_('Cannot use default debug loader outside of HTML documents.');controller.pause();return}var doc=goog.global.document;var dep=this;function write(src,contents){var nonceAttr='';var nonce=goog.getScriptNonce();if(nonce)nonceAttr=' nonce="'+nonce+'"';if(contents){var script='<script type="module" crossorigin'+
nonceAttr+'>'+contents+'</'+'script>';doc.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(script):script)}else{var script='<script type="module" crossorigin src="'+src+'"'+nonceAttr+'></'+'script>';doc.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(script):script)}}function append(src,contents){var scriptEl=doc.createElement('script');scriptEl.defer=true;scriptEl.async=false;scriptEl.type='module';scriptEl.setAttribute('crossorigin',true);var nonce=goog.getScriptNonce();
if(nonce)scriptEl.nonce=nonce;if(contents)scriptEl.text=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(contents):contents;else scriptEl.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(src):src;doc.head.appendChild(scriptEl)}var create;if(goog.isDocumentLoading_()){create=write;goog.Dependency.defer_=true}else create=append;var beforeKey=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(beforeKey);controller.setModuleState(goog.ModuleType.ES6)});
create(undefined,'goog.Dependency.callback_("'+beforeKey+'")');create(this.path,undefined);var registerKey=goog.Dependency.registerCallback_(function(exports){goog.Dependency.unregisterCallback_(registerKey);controller.registerEs6ModuleExports(dep.path,exports,goog.moduleLoaderState_.moduleName)});create(undefined,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+registerKey+'", m)');var afterKey=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(afterKey);
controller.clearModuleState();controller.loaded()});create(undefined,'goog.Dependency.callback_("'+afterKey+'")')};goog.TransformedDependency=function(path,relativePath,provides,requires,loadFlags){goog.TransformedDependency.base(this,'constructor',path,relativePath,provides,requires,loadFlags);this.contents_=null;this.lazyFetch_=!goog.inHtmlDocument_()||!('noModule'in goog.global.document.createElement('script'))};goog.inherits(goog.TransformedDependency,goog.Dependency);goog.TransformedDependency.prototype.load=
function(controller){var dep=this;function fetch(){dep.contents_=goog.loadFileSync_(dep.path);if(dep.contents_){dep.contents_=dep.transform(dep.contents_);if(dep.contents_)dep.contents_+='\n//# sourceURL='+dep.path}}if(goog.global.CLOSURE_IMPORT_SCRIPT){fetch();if(this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT('',this.contents_)){this.contents_=null;controller.loaded()}else controller.pause();return}var isEs6=this.loadFlags['module']==goog.ModuleType.ES6;if(!this.lazyFetch_)fetch();function load(){if(dep.lazyFetch_)fetch();
if(!dep.contents_)return;if(isEs6)controller.setModuleState(goog.ModuleType.ES6);var namespace;try{var contents=dep.contents_;dep.contents_=null;goog.globalEval(contents);if(isEs6)namespace=goog.moduleLoaderState_.moduleName}finally{if(isEs6)controller.clearModuleState()}if(isEs6)goog.global['$jscomp']['require']['ensure']([dep.getPathName()],function(){controller.registerEs6ModuleExports(dep.path,goog.global['$jscomp']['require'](dep.getPathName()),namespace)});controller.loaded()}function fetchInOwnScriptThenLoad(){var doc=
goog.global.document;var key=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(key);load()});var nonce=goog.getScriptNonce();var nonceAttr=nonce?' nonce="'+nonce+'"':'';var script='<script'+nonceAttr+'>'+goog.protectScriptTag_('goog.Dependency.callback_("'+key+'");')+'</'+'script>';doc.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(script):script)}var anythingElsePending=controller.pending().length>1;var useOldIeWorkAround=anythingElsePending&&
goog.DebugLoader_.IS_OLD_IE_;var needsAsyncLoading=goog.Dependency.defer_&&(anythingElsePending||goog.isDocumentLoading_());if(useOldIeWorkAround||needsAsyncLoading){controller.defer(function(){load()});return}var doc=goog.global.document;var isInternetExplorer=goog.inHtmlDocument_()&&'ActiveXObject'in goog.global;if(isEs6&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!isInternetExplorer){goog.Dependency.defer_=true;controller.pause();var oldCallback=doc.onreadystatechange;doc.onreadystatechange=
function(){if(doc.readyState=='interactive'){doc.onreadystatechange=oldCallback;load();controller.resume()}if(typeof oldCallback==='function')oldCallback.apply(undefined,arguments)}}else if(goog.DebugLoader_.IS_OLD_IE_||!goog.inHtmlDocument_()||!goog.isDocumentLoading_())load();else fetchInOwnScriptThenLoad()};goog.TransformedDependency.prototype.transform=function(contents){};goog.TranspiledDependency=function(path,relativePath,provides,requires,loadFlags,transpiler){goog.TranspiledDependency.base(this,
'constructor',path,relativePath,provides,requires,loadFlags);this.transpiler=transpiler};goog.inherits(goog.TranspiledDependency,goog.TransformedDependency);goog.TranspiledDependency.prototype.transform=function(contents){return this.transpiler.transpile(contents,this.getPathName())};goog.PreTranspiledEs6ModuleDependency=function(path,relativePath,provides,requires,loadFlags){goog.PreTranspiledEs6ModuleDependency.base(this,'constructor',path,relativePath,provides,requires,loadFlags)};goog.inherits(goog.PreTranspiledEs6ModuleDependency,
goog.TransformedDependency);goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(contents){return contents};goog.GoogModuleDependency=function(path,relativePath,provides,requires,loadFlags,needsTranspile,transpiler){goog.GoogModuleDependency.base(this,'constructor',path,relativePath,provides,requires,loadFlags);this.needsTranspile_=needsTranspile;this.transpiler_=transpiler};goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency);goog.GoogModuleDependency.prototype.transform=
function(contents){if(this.needsTranspile_)contents=this.transpiler_.transpile(contents,this.getPathName());if(!goog.LOAD_MODULE_USING_EVAL||goog.global.JSON===undefined)return''+'goog.loadModule(function(exports) {'+'"use strict";'+contents+'\n'+';return exports'+'});'+'\n//# sourceURL='+this.path+'\n';else return''+'goog.loadModule('+goog.global.JSON.stringify(contents+'\n//# sourceURL='+this.path+'\n')+');'};goog.DebugLoader_.IS_OLD_IE_=!!(!goog.global.atob&&goog.global.document&&goog.global.document['all']);
goog.DebugLoader_.prototype.addDependency=function(relPath,provides,requires,opt_loadFlags){provides=provides||[];relPath=relPath.replace(/\\/g,'/');var path=goog.normalizePath_(goog.basePath+relPath);if(!opt_loadFlags||typeof opt_loadFlags==='boolean')opt_loadFlags=opt_loadFlags?{'module':goog.ModuleType.GOOG}:{};var dep=this.factory_.createDependency(path,relPath,provides,requires,opt_loadFlags,goog.transpiler_.needsTranspile(opt_loadFlags['lang']||'es3',opt_loadFlags['module']));this.dependencies_[path]=
dep;for(var i=0;i<provides.length;i++)this.idToPath_[provides[i]]=path;this.idToPath_[relPath]=path};goog.DependencyFactory=function(transpiler){this.transpiler=transpiler};goog.DependencyFactory.prototype.createDependency=function(path,relativePath,provides,requires,loadFlags,needsTranspile){if(loadFlags['module']==goog.ModuleType.GOOG)return new goog.GoogModuleDependency(path,relativePath,provides,requires,loadFlags,needsTranspile,this.transpiler);else if(needsTranspile)return new goog.TranspiledDependency(path,
relativePath,provides,requires,loadFlags,this.transpiler);else if(loadFlags['module']==goog.ModuleType.ES6)if(goog.TRANSPILE=='never'&&goog.ASSUME_ES_MODULES_TRANSPILED)return new goog.PreTranspiledEs6ModuleDependency(path,relativePath,provides,requires,loadFlags);else return new goog.Es6ModuleDependency(path,relativePath,provides,requires,loadFlags);else return new goog.Dependency(path,relativePath,provides,requires,loadFlags)};goog.debugLoader_=new goog.DebugLoader_;goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()};
goog.setDependencyFactory=function(factory){goog.debugLoader_.setDependencyFactory(factory)};goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+'#base'):null;if(!goog.global.CLOSURE_NO_DEPS)goog.debugLoader_.loadClosureDeps();goog.bootstrap=function(namespaces,callback){goog.debugLoader_.bootstrap(namespaces,callback)}}goog.TRUSTED_TYPES_POLICY_NAME=goog.define('goog.TRUSTED_TYPES_POLICY_NAME','goog');goog.identity_=function(s){return s};
goog.createTrustedTypesPolicy=function(name){var policy=null;var policyFactory=goog.global.trustedTypes;if(!policyFactory||!policyFactory.createPolicy)return policy;try{policy=policyFactory.createPolicy(name,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_})}catch(e){goog.logToConsole_(e.message)}return policy};/*

 Copyright 2015 Dániel Sipos (siposdani87@gmail.com),
 SUI-JS

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 either express or implied. See the License for the specific language
 governing permissions and limitations under the License.
*/
goog.provide('SUI');goog.requireType('SUI.Node');const SUI={title:'SUI-JS',description:'Frontend framework helps to build fast and modern web applications',version:'0.5.0',const:{},config:{},res:{},coreRes:{},_scrollInterval:null};
SUI.coreRes={app:'app',config:'config',event:'event',scheduler:'scheduler',http:'http',notification:'notification',template:'template',dialog:'dialog',confirm:'confirm',viewer:'viewer',header:'header',topMenu:'topMenu',leftMenu:'leftMenu',leftSidebar:'leftSidebar',rightSidebar:'rightSidebar',footer:'footer',bottomMenu:'bottomMenu',navBar:'navBar',script:'script',style:'style',state:'state',dom:'dom',document:'document',window:'window',helper:'helper',cookie:'cookie',localStorage:'localStorage',sessionStorage:'sessionStorage',
browser:'browser',loader:'loader',progressBar:'progressBar',geoLocation:'geoLocation',instances:'instances',console:'console',serviceWorker:'serviceWorker',actionCable:'actionCable'};SUI.production=false;
SUI.typeCast=function(value){let result=value;if(SUI.isString(value)&&!SUI.contain(value,' ')){const lowerCaseValue=value.toLowerCase();if(SUI.eq(lowerCaseValue,''))result='';else if(SUI.eq(lowerCaseValue,'undefined'))result=undefined;else if(SUI.eq(lowerCaseValue,'null'))result=null;else if(SUI.eq(lowerCaseValue,'true'))result=true;else if(SUI.eq(lowerCaseValue,'false'))result=false;else if(SUI.eq(lowerCaseValue,'infinity'))result=Infinity;else if(SUI.isNumber(lowerCaseValue))if(SUI.neq(lowerCaseValue.indexOf('.'),
-1))result=parseFloat(lowerCaseValue);else result=parseInt(lowerCaseValue,10)}return result};
SUI.invoke=function(baseModule,baseModuleArgs,opt_extendModule,opt_extendModuleArgs){SUI.Cls=function(){if(opt_extendModule)opt_extendModule.apply(this,opt_extendModuleArgs||baseModuleArgs);return baseModule.apply(this,baseModuleArgs)};if(opt_extendModule){SUI.Cls.prototype=SUI.merge(opt_extendModule.prototype,baseModule.prototype);SUI.Cls.prototype.constructor=SUI.Cls}else SUI.Cls.prototype=baseModule.prototype;return new SUI.Cls};
SUI.merge=function(objA,objB){const obj=SUI.copy(objA);for(const key in objB)if(objB.hasOwnProperty(key))if(SUI.isObject(objB[key].constructor))obj[key]=SUI.merge(obj[key],objB[key]);else obj[key]=objB[key];return obj};SUI.format=function(str,opt_params=null,opt_prefix='\\{',opt_postfix='\\}'){SUI.each(opt_params,(value,key)=>{const regex=new RegExp(opt_prefix+key+opt_postfix,'gm');str=str.replace(regex,value)});return str};
SUI.convert=function(value,type){let result=value;if(SUI.isNumber(value))result=SUI.convertNumber(value,type);else if(SUI.isString(value))result=SUI.convertString(value,type);return result};SUI.convertNumber=function(value,type){let result=value;switch(type){case 'string':result=value.toString();break}return result};SUI.convertString=function(value,type){let result=value;switch(type){case 'integer':result=parseInt(value,10);break;case 'float':result=parseFloat(value);break}return result};
SUI.defaultValue=function(value,default_value){return!SUI.isUndefined(value)?value:default_value};SUI.noop=function(opt_result){return function(){return opt_result}};SUI.eq=function(a,b){return a===b};SUI.neq=function(a,b){return a!==b};SUI.gt=function(a,b){return a>b};SUI.gte=function(a,b){return a>=b};SUI.lt=function(a,b){return a<b};SUI.lte=function(a,b){return a<=b};SUI.isArray=function(value){return SUI.instanceOf(value,Array)};SUI.isFunction=function(value){return SUI.is(value,'function')};
SUI.isString=function(value){return SUI.is(value,'string')};SUI.isNumber=function(value){return value!==''&&!isNaN(value)&&(!SUI.inArray(['0','+'],value[0])||value==='0')};SUI.isFloat=function(value){return parseFloat(value)===value};SUI.isInteger=function(value){return parseInt(value,10)===value};SUI.isObject=function(value){return SUI.is(value,'object')};SUI.isNull=function(value){return value===null};SUI.isUndefined=function(value){return SUI.is(value,'undefined')};SUI.isFinite=function(value){return isFinite(value)};
SUI.is=function(value,type){return typeof value===type};SUI.instanceOf=function(value,object){return value instanceof object};SUI.each=function(items,next,opt_start,opt_end){if(SUI.isArray(items))SUI.eachArray(items,next,opt_start,opt_end);else if(SUI.isObject(items))SUI.eachObject(items,next)};SUI.eachArray=function(items,next,opt_start,opt_end){opt_start=opt_start||0;opt_end=opt_end||items.length;for(let i=opt_start;i<opt_end;i++)next(items[i],i)};
SUI.eachObject=function(object,next){for(const key in object)if(object.hasOwnProperty(key))next(object[key],key)};SUI.sleepEach=function(next,i,length,duration){const loop=function(){next(i);i++;if(i<length)setTimeout(loop,duration)};loop()};SUI.clear=function(items){if(SUI.isArray(items))SUI.clearArray(items);else if(SUI.isObject(items))SUI.clearObject(items)};SUI.clearArray=function(items){items.splice(0,items.length)};SUI.clearObject=function(items){for(const key in items)if(items.hasOwnProperty(key))delete items[key]};
SUI.inArray=function(items,item){return items.indexOf(item)!==-1};SUI.contain=function(str,subStr){return str.indexOf(subStr)!==-1};SUI.inContainArray=function(items,item){let i=0;while(i<items.length&&!SUI.contain(item,items[i]))i++;return i<items.length};
SUI.isSame=function(a,b){const strA=JSON.stringify(a);const strB=JSON.stringify(b);if(SUI.isObject(a)&&SUI.isObject(b)&&SUI.eq(strA.length,strB.length)){let result=true;SUI.eachObject(a,(value,key)=>{if(!SUI.isSame(b[key],value))result=false});return result}return SUI.eq(strA,strB)};SUI.remove=function(items,item){const position=items.indexOf(item);if(SUI.neq(position,-1))items.splice(position,1)};
SUI.copy=function(items){let results;if(SUI.isArray(items))results=[].concat(items);else if(SUI.isObject(items)){results={};SUI.each(items,function(item,key){results[key]=SUI.isObject(item)?SUI.copy(item):item})}return results};SUI.isEmpty=function(items){let result=false;if(SUI.isArray(items))result=items.length===0;else if(SUI.isObject(items)){let counter=0;SUI.each(items,function(){counter++});result=counter===0}return result};SUI.list=function(args,callback){callback(...args)};
SUI.random=function(min,max,opt_onlyFloat=false){let result;if(opt_onlyFloat)result=Math.random()*(max-min)+min;else result=Math.floor(Math.random()*(max-min+1))+min;return result};SUI.encodeBase64=function(text){const words=window['CryptoJS']['enc']['Utf8']['parse'](text);return window['CryptoJS']['enc']['Base64']['stringify'](words)};SUI.decodeBase64=function(encodedText){const words=window['CryptoJS']['enc']['Base64']['parse'](encodedText);return window['CryptoJS']['enc']['Utf8']['stringify'](words)};
SUI.capitalize=function(str){return str.charAt(0).toUpperCase()+str.slice(1)};SUI.pluck=function(items,attribute){const results=[];SUI.each(items,item=>{const result=item.get(attribute);results.push(result)});return results};SUI.pluckKeys=function(obj,condition){const results=[];SUI.eachObject(obj,(value,key)=>{if(condition(value))results.push(key)});return results};
SUI.currency=function(price,opt_delimiter=' ',opt_separator=',',opt_precision=0){if(!price)price=0;price=Math10.round(price,opt_precision*-1);const parts=price.toFixed(opt_precision).toString().split('.');const decimal=parts[1];let currency=parts[0].split('').reverse().map((char,index)=>{return!(index%3)&&index?char+opt_delimiter:char}).reverse().join('');if(decimal)currency+=opt_separator+decimal;return currency};
SUI.number=function(num,exp){const si=[{value:1E24,symbol:'Y'},{value:1E21,symbol:'Z'},{value:1E18,symbol:'E'},{value:1E15,symbol:'P'},{value:1E12,symbol:'T'},{value:1E9,symbol:'G'},{value:1E6,symbol:'M'},{value:1E3,symbol:'k'},{value:0,symbol:''}];const rx=/\.0+$|(\.[0-9]*[1-9])0+$/;let result=Math10.round(num,exp).toString().replace(rx,'$1');let i=0;while(i<si.length&&num<si[i].value){result=Math10.round(num/(si[i+1].value||1),exp).toString().replace(rx,'$1')+si[i+1].symbol;i++}return result};
SUI.mdl=function(opt_node,opt_forceDowngrade=true){let element=opt_node||document;if(SUI.isFunction(element.getNode))element=element.getNode();if(opt_node){if(opt_forceDowngrade)window['componentHandler']['downgradeElements'](element);window['componentHandler']['upgradeElement'](element)}else window['componentHandler']['upgradeDom']()};SUI.reactRender=function(type,props,mountNode){return window['ReactDOM']['render'](window['React']['createElement'](window[type],props),mountNode.getNode())};
SUI.reactUnmount=function(mountNode){window['ReactDOM']['unmountComponentAtNode'](mountNode.getNode())};SUI.mapLabel=function(marker,title){const mapLabel=new window['MapLabel']({'text':title,'strokeWeight':2,'fontFamily':'sans-serif'});mapLabel['bindTo']('position',marker);mapLabel['bindTo']('map',marker);return mapLabel};SUI.mapText=function(title,position,map){return new window['MapLabel']({'text':title,'strokeWeight':2,'fontFamily':'sans-serif','position':position,'map':map})};
SUI.encrypt=function(value,passPhrase){const item=JSON.stringify(value);return window['CryptoJS']['AES']['encrypt'](item,passPhrase)};SUI.decrypt=function(item,passPhrase){const value=window['CryptoJS']['AES']['decrypt'](item,passPhrase)['toString'](window['CryptoJS']['enc']['Utf8']);return JSON.parse(value||'null')};SUI.md5=function(str){return window['CryptoJS']['MD5'](str)};SUI.generateId=function(name){const guid=SUI.guid();return[name,guid].join('-')};
SUI.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)};SUI.uuid=function(){return[Math.random().toString(16).slice(2,10),Math.random().toString(16).slice(2,6),(Math.random()*.0625+.25).toString(16).slice(2,6),(Math.random()*.25+.5).toString(16).slice(2,6),Math.random().toString(16).slice(2,14)].join('-')};
SUI.scrollTo=function(x,y,opt_duration=500,opt_step=20){clearInterval(SUI._scrollInterval);let scrollStepX=-(window.scrollX-x)/(opt_duration/opt_step);let scrollStepY=-(window.scrollY-y)/(opt_duration/opt_step);SUI._scrollInterval=setInterval(()=>{if(scrollStepX>0&&window.scrollX+scrollStepX>x||scrollStepX<0&&window.scrollX+scrollStepX<x)scrollStepX=x-window.scrollX;if(scrollStepY>0&&window.scrollY+scrollStepY>y||scrollStepY<0&&window.scrollY+scrollStepY<y)scrollStepY=y-window.scrollY;if(window.scrollX!==
x||window.scrollY!==y)window.scrollBy(scrollStepX,scrollStepY);else clearInterval(SUI._scrollInterval)},opt_step)};SUI.scrollToElement=function(selector,opt_duration=500,opt_step=20){const nodeList=document.querySelectorAll(selector);const element=nodeList[0];const x=element.offsetLeft;const y=element.offsetTop;SUI.scrollTo(x,y,opt_duration,opt_step)};SUI.scrollIntoView=function(selector,opt_behavior='smooth'){document.querySelector(selector).scrollIntoView({behavior:opt_behavior})};
SUI.debounce=function(func,opt_wait=250,opt_immediate=false){let timeout;return function(...args){const later=function(){timeout=null;if(!opt_immediate)func(...args)};const callNow=opt_immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,opt_wait);if(callNow)func(...args)}};SUI.urlWithQueryString=function(url,opt_params){const queryString=SUI.getQueryString(opt_params);const separator=SUI.contain(url,'?')?'&':'?';return url+(queryString?separator+queryString:'')};
SUI.getQueryString=function(opt_params){const queries=[];SUI.each(opt_params,function(param,key){if(SUI.isArray(param))SUI.eachArray(param,value=>{queries.push(SUI.format('{0}[]={1}',[key,value]))});else if(!SUI.isUndefined(param)&&!SUI.isNull(param))queries.push(SUI.format('{0}={1}',[key,param]))});return SUI.isEmpty(queries)?'':queries.join('&')};SUI.getExtensionName=function(url){const realUrl=url.split('?',2)[0];return realUrl.slice((Math.max(0,realUrl.lastIndexOf('.'))||Infinity)+1)};
SUI.RGBToHSV=function(red,green,blue){const rabs=red/255;const gabs=green/255;const babs=blue/255;const v=Math.max(rabs,gabs,babs);const diff=v-Math.min(rabs,gabs,babs);const diffc=c=>(v-c)/6/diff+1/2;const percentRoundFn=num=>Math.round(num*100)/100;let h=0;let s=0;if(diff==0)h=s=0;else{s=diff/v;const rr=diffc(rabs);const gg=diffc(gabs);const bb=diffc(babs);if(rabs===v)h=bb-gg;else if(gabs===v)h=1/3+rr-bb;else if(babs===v)h=2/3+gg-rr;if(h<0)h+=1;else if(h>1)h-=1}return[Math.round(h*360),percentRoundFn(s*
100),percentRoundFn(v*100)]};SUI.RGBToHEX=function(red,green,blue){const colors=[red,green,blue];for(let i=0;i<colors.length;i++)if(colors[i]<=16)colors[i]='0'+colors[i].toString(16);else colors[i]=''+colors[i].toString(16);return'#'+colors.join('')};SUI.HEXToHSV=function(hexColor){const [red,green,blue]=SUI.HEXToRGB(hexColor);return SUI.RGBToHSV(red,green,blue)};
SUI.HEXToRGB=function(hexColor){const hex=hexColor||'';const red=parseInt(hex.substr(1,2),16);const green=parseInt(hex.substr(3,2),16);const blue=parseInt(hex.substr(5,2),16);return[red,green,blue]};
SUI.HSVToRGB=function(h,s,v){const i=Math.floor(h*6);const f=h*6-i;const p=v*(1-s);const q=v*(1-f*s);const t=v*(1-(1-f)*s);let r=0;let g=0;let b=0;switch(i%6){case 0:r=v;g=t;b=p;break;case 1:r=q;g=v;b=p;break;case 2:r=p;g=v;b=t;break;case 3:r=p;g=q;b=v;break;case 4:r=t;g=p;b=v;break;case 5:r=v;g=p;b=q;break}return[Math.round(r*255),Math.round(g*255),Math.round(b*255)]};SUI.HSVToHEX=function(h,s,v){const [red,green,blue]=SUI.HSVToRGB(h,s,v);return SUI.RGBToHEX(red,green,blue)};
SUI.colorContrastYIQ=function(hexColor,opt_lightColor='#FEFEFE',opt_darkColor='#252525'){const colors=SUI.HEXToRGB(hexColor);const yiq=(colors[0]*299+colors[1]*587+colors[2]*114)/1E3;return yiq>=128?opt_darkColor:opt_lightColor};SUI.colorContrast=function(hexColor,opt_diff=.5){const colors=SUI.HEXToRGB(hexColor);for(let i=0;i<colors.length;i++){colors[i]+=Math.round(colors[i]*opt_diff);if(colors[i]<0)colors[i]=0;else if(colors[i]>255)colors[i]=255}return SUI.RGBToHEX.apply(null,colors)};
SUI.normalize=function(str){return str.normalize('NFD').replace(/[\u0300-\u036f]/g,'')};SUI.copyToClipboard=function(str){const textareaElement=document.createElement('textarea');textareaElement.value=str;textareaElement.setAttribute('readonly','');textareaElement.style.position='absolute';textareaElement.style.left='-9999px';document.body.appendChild(textareaElement);textareaElement.select();document.execCommand('copy');document.body.removeChild(textareaElement)};goog.provide('SUI.Object');goog.require('SUI');SUI.Object=function(opt_object){opt_object=opt_object||{};Object.call(this,opt_object);this.merge(opt_object)};SUI.Object.prototype=Object.create(Object.prototype);SUI.Object.prototype.constructor=SUI.Object;
SUI.Object.prototype.merge=function(object){if(SUI.isObject(object))for(const key in object)if(object.hasOwnProperty(key))if(!SUI.isNull(object[key])&&SUI.isObject(object[key])&&!SUI.isArray(object[key])){if(!SUI.instanceOf(this[key],SUI.Object))this[key]=new SUI.Object(this[key]);this[key].merge(object[key])}else if(SUI.isArray(object[key])&&!SUI.isNull(object[key][0])&&SUI.isObject(object[key][0])){this._convertObject(object,key);this[key]=object[key]}else this[key]=SUI.typeCast(object[key]);return this};
SUI.Object.prototype._convertObject=function(object,key){SUI.each(object[key],function(obj,i){object[key][i]=new SUI.Object(obj)})};
SUI.Object.prototype.speedGet=function(opt_attribute,opt_defaultValue,opt_isSafe=false){let value=this;if(opt_attribute){value=this[opt_attribute];const attributes=opt_isSafe?[opt_attribute]:opt_attribute.split('.');if(attributes.length>1){let properties=this;let i=0;while(i<attributes.length&&!SUI.isUndefined(properties[attributes[i]])){value=properties=properties[attributes[i]];i++}if(attributes.length!==i)return opt_defaultValue}}return value};
SUI.Object.prototype.get=function(opt_attribute,opt_defaultValue,opt_isSafe=false){let value=this;if(opt_attribute){const attributes=opt_isSafe?[opt_attribute]:opt_attribute.split('.');value=this._get(this,attributes)}return!SUI.isUndefined(value)?value:opt_defaultValue};
SUI.Object.prototype._get=function(object,attributes){let result=undefined;SUI.each(object,(_value,property)=>{if(attributes.length===1&&property.toString()===attributes[0])result=object[property];else if(property.toString()===attributes[0]&&!SUI.isNull(object[property])&&SUI.isObject(object[property])){const copyAttributes=SUI.copy(attributes);copyAttributes.shift();result=this._get(object[property],copyAttributes)}});return result};
SUI.Object.prototype._set=function(object,attributes,value){SUI.eachObject(object,(_oldValue,property)=>{if(attributes.length===1&&property===attributes[0])object[property]=value;else if(property===attributes[0]&&!SUI.isNull(object[property])&&SUI.isObject(object[property])){const copyAttributes=SUI.copy(attributes);copyAttributes.shift();this._set(object[property],copyAttributes,value)}})};
SUI.Object.prototype.set=function(attribute,value){let object={};object=this._attributesToObject(object,attribute.split('.'),value);this.merge(object)};SUI.Object.prototype.setRaw=function(attribute,value,opt_isSafe=false){this.set(attribute,null);const attributes=opt_isSafe?[attribute]:attribute.split('.');this._set(this,attributes,value)};SUI.Object.prototype.remove=function(attribute){const attributes=attribute.split('.');this._remove(this,attributes)};SUI.Object.prototype.clear=function(){SUI.clear(this)};
SUI.Object.prototype._remove=function(object,attributes){for(const property in object)if(object.hasOwnProperty(property))if(attributes.length===1&&property===attributes[0])delete object[property];else if(property===attributes[0]&&!SUI.isNull(object[property])&&SUI.isObject(object[property])){const copyAttributes=SUI.copy(attributes);copyAttributes.shift();this._remove(object[property],copyAttributes)}};
SUI.Object.prototype.each=function(next,opt_properties,opt_attributes){const properties=opt_properties||this;const attributes=opt_attributes||[];SUI.eachObject(properties,(value,property)=>{const attributesCopy=SUI.copy(attributes);attributesCopy.push(property);if(!SUI.isNull(value)&&SUI.isObject(value))this.each(next,value,attributesCopy);else next(value,attributesCopy.join('.'))})};
SUI.Object.prototype._attributesToObject=function(object,attributes,value){const lastAttribute=attributes.pop();let base=object;for(let i=0;i<attributes.length;i++)base=base[attributes[i]]=base[attributes[i]]||{};base[lastAttribute]=value;return object};SUI.Object.prototype.copy=function(opt_isNative=false){let result=SUI.copy(this);if(!opt_isNative)result=new SUI.Object(result);return result};SUI.Object.prototype.isEmpty=function(){return SUI.isEmpty(this)};
SUI.Object.prototype.allowKeys=function(keys){return this.filterKeys(this,key=>{return SUI.inContainArray(keys,key)})};SUI.Object.prototype.denyKeys=function(keys){return this.filterKeys(this,key=>{return!SUI.inContainArray(keys,key)})};SUI.Object.prototype.filterKeys=function(obj,condition){const resultObj=new SUI.Object;obj.each((value,key)=>{if(condition(key))resultObj.set(key,value)});return resultObj};goog.provide('SUI.Collection');goog.require('SUI');goog.require('SUI.Object');SUI.Collection=function(opt_items=[],opt_type=SUI.Object,opt_options={}){this.Type=opt_type;this._setOptions(opt_options);this.items=[];this.load(opt_items)};SUI.Collection.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({id:'id',parent:undefined});_self.options.merge(opt_options)};SUI.Collection.prototype.load=function(items){SUI.each(items,item=>{this.push(item)})};
SUI.Collection.prototype.reload=function(items){this.clear();this.load(items)};SUI.Collection.prototype.push=function(object){const item=this._createItem(object);this.items.push(item);return item};SUI.Collection.prototype._createItem=function(object){let item=object;if(!SUI.instanceOf(object,this.Type)){const parent=!SUI.isUndefined(this.options.parent)?this.options.parent:this;item=new this.Type(object,parent)}return item};
SUI.Collection.prototype.set=function(index,item){let itemObject=item;if(!SUI.instanceOf(item,this.Type))itemObject=new this.Type(item,this);if(index<this.size())this.items[index]=itemObject;else this.push(itemObject);return itemObject};SUI.Collection.prototype.replace=function(item){const oldItem=this.findById(item.get(this.options.id));if(oldItem)oldItem.merge(item);return oldItem};SUI.Collection.prototype.getItems=function(){return this.items};
SUI.Collection.prototype.iterator=function(callback,next,opt_items){opt_items=opt_items||this.items;const results=[];SUI.each(opt_items,(item,index)=>{if(callback(item)){next(item,index);results.push(item)}});return results};SUI.Collection.prototype.each=function(next){this.iterator(function(){return true},next)};SUI.Collection.prototype.get=function(index,opt_attribute){let value=null;if(index>=0&&index<this.items.length){const item=this.items[index];value=item;if(opt_attribute)value=item.get(opt_attribute)}return value};
SUI.Collection.prototype.getById=function(id,opt_attribute){const item=this.findById(id);if(item&&opt_attribute)return item.get(opt_attribute);return item};SUI.Collection.prototype.clear=function(){SUI.clear(this.items)};SUI.Collection.prototype.findById=function(value){return this.findBy(this.options.id,value)};SUI.Collection.prototype.findBy=function(attribute,value){return this.findByCondition((item,i)=>{return this.get(i,attribute)===value})};
SUI.Collection.prototype.findByCondition=function(conditionCallback){let i=0;while(i<this.items.length&&!conditionCallback(this.items[i],i))i++;return this.get(i)};SUI.Collection.prototype.findAllBy=function(attribute,value){return this.findAllByCondition((item,i)=>{return this.get(i,attribute)===value})};SUI.Collection.prototype.findAllByCondition=function(conditionCallback){const items=[];SUI.each(this.items,(item,i)=>{if(conditionCallback(item,i))items.push(this.get(i))});return items};
SUI.Collection.prototype.delete=function(value){return this.deleteByCondition(item=>{return SUI.eq(item,value)})};SUI.Collection.prototype.deleteById=function(value){return this.deleteBy(this.options.id,value)};SUI.Collection.prototype.deleteBy=function(attribute,value){return this.deleteByCondition((item,i)=>{return this.get(i,attribute)===value})};
SUI.Collection.prototype.deleteByCondition=function(conditionCallback){let i=0;while(i<this.items.length&&!conditionCallback(this.items[i],i))i++;const item=this.get(i);this.items.splice(i,1);return item};SUI.Collection.prototype.deleteAllBy=function(attribute,value){return this.deleteAllByCondition((item,i)=>{return this.get(i,attribute)===value})};
SUI.Collection.prototype.deleteAllByCondition=function(conditionCallback){const items=[];const deletedItems=[];SUI.each(this.items,(item,i)=>{if(conditionCallback(item,i))deletedItems.push(this.get(i));else items.push(this.get(i))});this.items=items;return deletedItems};SUI.Collection.prototype.size=function(){return this.items.length};SUI.Collection.prototype.limit=function(offset,opt_count=10){return this.items.slice(offset,offset+opt_count)};
SUI.Collection.prototype.pluck=function(attribute){return SUI.pluck(this.items,attribute)};goog.provide('SUI.Node');goog.require('SUI');SUI.Node=function(node,opt_parentNode){if(SUI.isString(node))if(SUI.contain(node,'<')&&SUI.contain(node,'</')){const template=document.createElement('template');template.innerHTML=node;node=template.content.firstElementChild}else node=document.createElement(node);this.node=node;this.parentNode=opt_parentNode;this.listenerStoreKey='_listeners'};
SUI.Node.prototype.set=function(attribute,value){if(SUI.eq(attribute,'id'))this.setId(value);else this.setAttribute(attribute,value)};SUI.Node.prototype.merge=function(properties){SUI.each(properties,(value,attribute)=>{this.set(attribute,value)})};SUI.Node.prototype.get=function(attribute){if(SUI.eq(attribute,'id'))return this.getId();return this.getAttribute(attribute)};SUI.Node.prototype.getNode=function(){return this.node};SUI.Node.prototype.getTagName=function(){return this.node.tagName.toLowerCase()};
SUI.Node.prototype.getId=function(){return this.node.id||null};SUI.Node.prototype.setId=function(id){this.node.id=id};SUI.Node.prototype.setFor=function(htmlFor){this.node.htmlFor=htmlFor;this.setAttribute('for',htmlFor)};SUI.Node.prototype.getFor=function(){return this.node.htmlFor||this.getAttribute('for')};SUI.Node.prototype.hasClass=function(cssClass){return this.node.classList.contains(cssClass)};
SUI.Node.prototype._handleClassList=function(cssClasses,callback){if(SUI.isArray(cssClasses))SUI.each(cssClasses,function(cssClass){callback(cssClass)});else callback(cssClasses)};SUI.Node.prototype.addClass=function(cssClasses){this._handleClassList(cssClasses,cssClass=>{if(cssClass&&!this.hasClass(cssClass))this.node.classList.add(cssClass)})};SUI.Node.prototype.removeClass=function(cssClasses){this._handleClassList(cssClasses,cssClass=>{this.node.classList.remove(cssClass)})};
SUI.Node.prototype.toggleClass=function(cssClasses){this._handleClassList(cssClasses,cssClass=>{this.node.classList.toggle(cssClass)})};SUI.Node.prototype.getClasses=function(){return this.node.classList.value.split(' ')};
SUI.Node.prototype.setAttribute=function(attribute,opt_value){const value=SUI.isUndefined(opt_value)?attribute:opt_value;if(SUI.isFunction(value))this.node[attribute]=value;else if(SUI.contain(attribute,'data-')&&SUI.isObject(value))this.node.setAttribute(attribute,JSON.stringify(value));else this.node.setAttribute(attribute,value)};
SUI.Node.prototype.getAttribute=function(attribute){const data=this.node.getAttribute(attribute);if(SUI.contain(attribute,'data-')&&data&&(SUI.eq(data[0],'"')||SUI.eq(data[0],'[')||SUI.eq(data[0],'{')))return JSON.parse(data)||null;return SUI.typeCast(data||null)};SUI.Node.prototype.removeAttribute=function(attribute){this.node.removeAttribute(attribute)};SUI.Node.prototype.hasAttribute=function(attribute){return this.node.hasAttribute(attribute)};
SUI.Node.prototype.addEventListener=function(eventName,opt_callback){let listener=SUI.noop();if(opt_callback){listener=event=>{event.stopPropagation();if(!opt_callback(this,event))event.preventDefault()};this.node.addEventListener(eventName,listener);this._addListenerToStore(eventName,listener)}return listener};
SUI.Node.prototype._addListenerToStore=function(eventName,listener){if(!this.node[this.listenerStoreKey])this.node[this.listenerStoreKey]={};if(!this.node[this.listenerStoreKey][eventName])this.node[this.listenerStoreKey][eventName]=[];this.node[this.listenerStoreKey][eventName].push(listener)};SUI.Node.prototype._getListenerToStore=function(eventName){if(this.node[this.listenerStoreKey]||this.node[this.listenerStoreKey][eventName])return this.node[this.listenerStoreKey][eventName];return[]};
SUI.Node.prototype.removeEventListener=function(eventName,listener){this.node.removeEventListener(eventName,listener)};SUI.Node.prototype.removeEventListeners=function(eventName){const listeners=this._getListenerToStore(eventName);SUI.eachArray(listeners,listener=>{this.removeEventListener(eventName,listener)})};SUI.Node.prototype.dispatchEvent=function(event){this.node.dispatchEvent(event)};SUI.Node.prototype.trigger=function(eventName){const event=new Event(eventName);this.dispatchEvent(event)};
SUI.Node.prototype.createElement=function(tagName){const node=document.createElement(tagName);return new SUI.Node(node,this)};SUI.Node.prototype.appendChild=function(node){this.node.appendChild(node.getNode())};SUI.Node.prototype.removeChildren=function(){while(this.hasChildren())this.node.removeChild(this.node.firstChild)};SUI.Node.prototype.hasChildren=function(){return this.node.hasChildNodes()};SUI.Node.prototype.removeChild=function(node){if(this.hasChildren())try{this.node.removeChild(node.getNode())}catch(e){console.warn(e)}};
SUI.Node.prototype.remove=function(){const parentElement=this._getParentElement();if(!this.isEmpty()&&parentElement)parentElement.removeChild(this.node)};SUI.Node.prototype.insert=function(node){this.removeChildren();this.appendChild(node)};SUI.Node.prototype.beforeChild=function(node){const referenceNode=this.node.firstChild||this.node.firstElementChild;this.node.insertBefore(node.getNode(),referenceNode)};
SUI.Node.prototype.afterChild=function(node){const parentElement=this._getParentElement();if(parentElement)parentElement.appendChild(node.getNode())};SUI.Node.prototype.insertBefore=function(node){const parentElement=this._getParentElement();if(parentElement)parentElement.insertBefore(node.getNode(),this.node)};
SUI.Node.prototype.insertAfter=function(node){const nextSiblingNode=this.getNextSibling();const parentElement=this._getParentElement();if(parentElement)parentElement.insertBefore(node.getNode(),nextSiblingNode.getNode())};SUI.Node.prototype.getNextSibling=function(){const referenceNode=this.node.nextSibling||this.node.nextElementSibling;return new SUI.Node(referenceNode)};
SUI.Node.prototype.replaceChild=function(node){const parentElement=this._getParentElement();if(parentElement)parentElement.replaceChild(node.getNode(),this.node)};SUI.Node.prototype.setHtml=function(text){this.node.innerHTML=text};SUI.Node.prototype.getHtml=function(opt_isInner=false){if(!this.isEmpty())return opt_isInner?this.node.innerHTML:this.node.outerHTML;return''};SUI.Node.prototype.setText=function(text){this.node.nodeValue=text};SUI.Node.prototype.getText=function(){return this.node.textContent};
SUI.Node.prototype.setData=function(name,value){if(!this.isEmpty()){let data=value;if(!SUI.isString(value))data=JSON.stringify(value);this.node.dataset[name]=data}};SUI.Node.prototype.getData=function(name){let data=this.node.dataset[name];if(data&&(SUI.eq(data[0],'[')||SUI.eq(data[0],'{')))data=JSON.parse(data);return SUI.typeCast(data)};SUI.Node.prototype.removeData=function(name){if(!this.isEmpty()){delete this.node.dataset[name];this.node.removeAttribute('data-'+name)}};
SUI.Node.prototype.getParentNode=function(){const parentElement=this._getParentElement();if(parentElement)return new SUI.Node(parentElement);return null};SUI.Node.prototype._getParentElement=function(){if(this.parentNode&&!this.parentNode.isEmpty())return this.parentNode.getNode();else if(this.node)return this.node.parentElement;return null};SUI.Node.prototype.getComputedStyle=function(){return window.getComputedStyle(this.node)};SUI.Node.prototype.getStyle=function(){return this.node.style};
SUI.Node.prototype.setStyle=function(properties){SUI.each(properties,(value,propertyName)=>{this.node.style.setProperty(propertyName,value,'')})};SUI.Node.prototype.removeStyle=function(properties){SUI.each(properties,property=>{this.node.style.removeProperty(property)})};SUI.Node.prototype.isEmpty=function(){return!this.node};SUI.Node.prototype.exists=function(){return document.body.contains(this.node)};
SUI.Node.prototype.toString=function(opt_isRoot=true){if(opt_isRoot)return this.node.outerHTML;return this.node.innerHTML};SUI.Node.prototype.cloneNode=function(opt_deep=false){if(!this.isEmpty()){const cloneNode=this.node.cloneNode(opt_deep);return new SUI.Node(cloneNode,this.parentNode)}return null};SUI.Node.prototype.clearNode=function(){const cloneNode=this.cloneNode(true);if(cloneNode){this.replaceChild(cloneNode);this.node=cloneNode.getNode()}};goog.provide('SUI.Query');goog.require('SUI');goog.require('SUI.Collection');goog.require('SUI.Node');SUI.Query=function(selector,opt_element){this.element=opt_element||document;if(SUI.isFunction(this.element.getNode))this.element=this.element.getNode();const items=this._querySelector(selector);SUI.Collection.call(this,items,SUI.Node,{parent:null})};goog.inherits(SUI.Query,SUI.Collection);
SUI.Query.prototype._querySelector=function(selector){let nodeList=[];if(selector.indexOf(' ')!==-1||selector.split('.').length-1>1||selector.indexOf('.')>-1&&selector.indexOf('.')!==0||selector.indexOf('[')!==-1)nodeList=this.element.querySelectorAll(selector);else if(selector.indexOf('#')===0){if(!SUI.isFunction(this.element.getElementById))this.element=document;const node=this.element.getElementById(selector.replace('#',''));nodeList.push(node)}else if(selector.indexOf('.')===0)nodeList=this.element.getElementsByClassName(selector.replace('.',
''));else nodeList=this.element.getElementsByTagName(selector);const nodes=[];for(let i=0;i<nodeList.length;i++)if(nodeList[i])nodes.push(nodeList[i]);return nodes};SUI.Query.prototype.getItem=function(){let firstNode=this.get(0);if(!firstNode)firstNode=new SUI.Node(null);return firstNode};goog.provide('SUI.PopupContainer');goog.requireType('SUI.Popup');goog.require('SUI');goog.require('SUI.Collection');goog.require('SUI.Node');goog.require('SUI.Query');SUI.PopupContainer=function(opt_selector='body'){this.selector=opt_selector;this._init()};SUI.PopupContainer.prototype._init=function(){this.container=(new SUI.Query(this.selector)).getItem()};SUI.PopupContainer.prototype._initCollection=function(type){window['popup_collection']=window['popup_collection']||new SUI.Collection([],type)};
SUI.PopupContainer.prototype.push=function(type,popup){this._initCollection(type);if(window['popup_collection'])window['popup_collection'].push(popup)};SUI.PopupContainer.prototype.delete=function(popup){if(window['popup_collection'])window['popup_collection'].delete(popup)};SUI.PopupContainer.prototype.closeAll=function(){if(window['popup_collection'])window['popup_collection'].each(popup=>{popup.close()})};SUI.PopupContainer.prototype.setPosition=function(popupNode){popupNode.setStyle({'left':0})};
SUI.PopupContainer.prototype.clearPosition=function(popupNode){popupNode.setStyle({'top':'auto','bottom':'auto','left':'auto','right':'auto'})};goog.provide('SUI.Promise');goog.requireType('SUI.Deferred');goog.require('SUI');goog.require('SUI.Object');SUI.Promise=function(opt_options={}){const _self=this;_self.options=new SUI.Object({status:null,data:null,resolve:null,reject:null,complete:null});_self.options.merge(opt_options)};
SUI.Promise.prototype._resolve=function(opt_data){if(!SUI.isArray(opt_data))opt_data=[opt_data];if(SUI.isFunction(this.options.resolve)&&SUI.isFunction(this.options.complete)){this.options.resolve.apply(this,opt_data);this.options.complete.apply(this,opt_data)}else{this.options.data=opt_data;this.options.status=true}};
SUI.Promise.prototype._reject=function(opt_data){if(!SUI.isArray(opt_data))opt_data=opt_data?[opt_data]:[];if(SUI.isFunction(this.options.reject)&&SUI.isFunction(this.options.complete)){this.options.reject.apply(this,opt_data);this.options.complete.apply(this,opt_data)}else{this.options.data=opt_data;this.options.status=false}};
SUI.Promise.prototype.then=function(resolve,opt_reject,opt_complete){const reject=opt_reject||SUI.noop();const complete=opt_complete||SUI.noop();switch(this.options.status){case true:resolve.apply(this,this.options.data);complete.apply(this,this.options.data);break;case false:reject.apply(this,this.options.data);complete.apply(this,this.options.data);break;default:this.options.merge({resolve:resolve,reject:reject,complete:complete})}};
SUI.Promise.prototype.defer=function(defer,opt_complete){this.then((...args)=>{defer.resolve(args)},(...args)=>{defer.reject(args)},opt_complete)};goog.provide('SUI.Deferred');goog.require('SUI');goog.require('SUI.Promise');SUI.Deferred=function(){this._promise=new SUI.Promise};SUI.Deferred.prototype.promise=function(){return this._promise};SUI.Deferred.prototype.resolve=function(opt_object){this._promise._resolve(opt_object)};SUI.Deferred.prototype.reject=function(opt_object){this._promise._reject(opt_object)};goog.provide('SUI.Async');goog.require('SUI');goog.require('SUI.Deferred');goog.require('SUI.Promise');SUI.Async=function(opt_sum){this.sum=opt_sum||0;this._clear()};
SUI.Async.prototype.parallel=function(calls,opt_args){const deferred=new SUI.Deferred;if(calls.length===0){const results=opt_args||this.call.results;deferred.resolve(results);this._clear()}else SUI.each(calls,function(call,index){this.call.results[index]=null;this._parallelWrapper(call,calls.length,false,index,opt_args).defer(deferred)}.bind(this));return deferred.promise()};
SUI.Async.prototype.parallelFunction=function(call,opt_args,opt_index){const index=!SUI.isUndefined(opt_index)?opt_index:this.call.counter++;this.call.results[index]=null;this._parallelWrapper(call,this.sum,true,index,opt_args)};
SUI.Async.prototype._parallelWrapper=function(call,length,allowEvent,index,opt_args){const deferred=new SUI.Deferred;const args=opt_args||[];const promise=call.apply(this,args);if(promise&&SUI.isFunction(promise.then))promise.then(object=>{this._parallelCaller(length,false,object,allowEvent,index,opt_args).defer(deferred)},object=>{this._parallelCaller(length,true,object,allowEvent,index,opt_args).defer(deferred)});else if(promise||SUI.isUndefined(promise))this._parallelCaller(length,false,promise,
allowEvent,index,opt_args).defer(deferred);else this._parallelCaller(length,true,promise,allowEvent,index,opt_args).defer(deferred);return deferred.promise()};
SUI.Async.prototype._parallelCaller=function(length,isError,result,allowEvent,index,opt_args){const deferred=new SUI.Deferred;this.call.results[index]=result;if(isError)this.call.isError=isError;this.call.sum++;if(SUI.eq(this.call.sum,length)){const results=opt_args||SUI.copy(this.call.results);this._clear();if(!this.call.isError)if(allowEvent)this.eventComplete(this.call.isError,results);else deferred.resolve(results);else if(allowEvent)this.eventComplete(this.call.isError,results);else deferred.reject(results)}return deferred.promise()};
SUI.Async.prototype._clear=function(){this.call={sum:0,isError:false,counter:0,results:[]}};SUI.Async.prototype.setStatus=function(sum,isError,counter,results){this.call.sum=sum;this.call.isError=isError;this.call.counter=counter;this.call.results=results};SUI.Async.prototype.eventComplete=function(isError,results){console.warn('Async.eventComplete(isError, results)',isError,results)};
SUI.Async.prototype.serial=function(calls,opt_args){const deferred=new SUI.Deferred;if(calls.length===0){const results=opt_args||this.call.results;deferred.resolve(results);this._clear()}else this._serialWrapper(calls,0,opt_args).defer(deferred);return deferred.promise()};
SUI.Async.prototype._serialWrapper=function(calls,index,opt_args){const deferred=new SUI.Deferred;const call=calls[index];const results=opt_args||this.call.results;const args=(opt_args||[]).concat(this.call.results);const promise=call.apply(this,args);if(promise&&SUI.isFunction(promise.then))promise.then(function(result){this._serialCaller(calls,index,result,opt_args).defer(deferred)}.bind(this),function(){const results=opt_args||this.call.results;deferred.reject(results);this._clear()}.bind(this));
else if(promise||SUI.isUndefined(promise))this._serialCaller(calls,index,promise,opt_args).defer(deferred);else{deferred.reject(results);this._clear()}return deferred.promise()};SUI.Async.prototype._serialCaller=function(calls,index,result,opt_args){const deferred=new SUI.Deferred;this.call.results[index]=result;const nextIndex=index+1;if(nextIndex<calls.length)this._serialWrapper(calls,nextIndex,opt_args).defer(deferred);else{const results=opt_args||this.call.results;deferred.resolve(results);this._clear()}return deferred.promise()};goog.provide('SUI.Router');goog.require('SUI');SUI.Router=function(opt_route=''){this.route=opt_route;this.param=new RegExp('([:*])(\\w+)','g');this.escape=new RegExp('[-[]{}()+?.,]','g');this._init()};
SUI.Router.prototype._init=function(){this.paramNames=[];this.regex=this.route;this.regex=this.regex.replace(this.escape,'\\$&');this.regex=this.regex.replace(this.param,(param,mode,paramName)=>{this.paramNames.push(paramName);return mode===':'?'([^/]*)':'(.*)'});this.regex=new RegExp('^'+this.regex+'$')};
SUI.Router.prototype.stringify=function(opt_params={}){let route=this.route;for(const key in opt_params)if(opt_params.hasOwnProperty(key)){const param=opt_params[key];const regex=new RegExp('[:*]'+key+'\\b');if(regex.test(route))route=route.replace(regex,param);else{const char=route.charAt(route.length-1)==='&'?'':'&';route+=route.indexOf('?')===-1?'?':char;if(SUI.isArray(param))SUI.eachArray(param,(value,index)=>{if(index>0)route+='&';route+=SUI.format('{0}[]={1}',[key,value])});else if(!SUI.isUndefined(param))route+=
SUI.format('{0}={1}',[key,param])}}route=route.replace(this.param,'');return route[route.length-1]==='?'?route.substring(0,route.length-1):route};SUI.Router.prototype.getMatches=function(url){const questionMark=url.indexOf('?');if(questionMark!==-1)url=url.substring(0,questionMark);return url.match(this.regex)};
SUI.Router.prototype.parse=function(url){const matches=this.getMatches(url);if(!matches)return{};const params=this._parseParams(url);for(let i=0;i<this.paramNames.length;i++){const key=this.paramNames[i];params[key]=SUI.typeCast(matches[i+1])}return params};
SUI.Router.prototype._parseParams=function(url){const params={};const question=url.indexOf('?');if(question!==-1){const pieces=url.substr(question+1).split('&');for(let i=0;i<pieces.length;i++){const parts=pieces[i].replace('==','&&').split('=');if(parts.length<2)parts.push('');const key=window.decodeURIComponent(parts[0]);const value=SUI.typeCast(window.decodeURIComponent(parts[1].replace('&&','==')));if(SUI.contain(key,'[]')){const realKey=key.replace('[]','');if(!SUI.isArray(params[realKey]))params[realKey]=
[value];else params[realKey].push(value)}else params[key]=value}}return params};goog.provide('SUI.State');goog.require('SUI');goog.require('SUI.Collection');goog.require('SUI.Object');goog.require('SUI.Query');goog.require('SUI.Router');SUI.State=function(routes,options){this._current=new SUI.Object;this._previous=this._current;this.routes=new SUI.Collection(routes);this._setOptions(options);this._init()};SUI.State.prototype._setRealUrls=function(){this.routes.each(route=>{const url=route.get('url');const realUrl=this._getRealUrl(url);route.set('realUrl',realUrl)})};
SUI.State.prototype._getUrlPrefix=function(){return this.basePath==='#'?'/#':''};SUI.State.prototype._getRealUrl=function(url){return SUI.format('{0}{1}',[this._getUrlPrefix(),url])};SUI.State.prototype._setBasePath=function(){this.basePath='#';const baseMetaTag=(new SUI.Query('base')).getItem();if(!baseMetaTag.isEmpty())this.basePath=baseMetaTag.getAttribute('href')||'#'};
SUI.State.prototype._setOptions=function(options){const _self=this;_self.options=new SUI.Object({root:{id:'root',params:undefined},home:{id:'home',params:undefined}});_self.options.merge(options)};SUI.State.prototype._init=function(){this._setBasePath();this._setRealUrls();this._initPopstate();this._parseUrl()};
SUI.State.prototype._initPopstate=function(){window.addEventListener('popstate',()=>{if(window.history.state){const state=new SUI.Object;state.merge(window.history.state);this._setCurrent(state);this._triggerChange()}else{this._parseUrl();this._triggerChange()}})};SUI.State.prototype.run=function(){this._triggerChange()};
SUI.State.prototype._parseUrl=function(){const path=window.location.hash?window.location.hash:window.location.pathname.replace(this.basePath,'/')+window.location.search;this._parsePath(path,(state,path,params)=>{this._setHistory(state,path,params,true)},()=>{this.goRoot(true)})};
SUI.State.prototype._parsePath=function(urlPath,successCallback,errorCallback){const path=urlPath[0]==='#'?urlPath.substr(1):urlPath;const items=this.routes.getItems();let state=null;let params=null;let matches=null;let i=0;while(i<items.length&&SUI.isNull(matches)){state=items[i];const stateUrl=state.get('url');const router=new SUI.Router(stateUrl);matches=router.getMatches(path);params=router.parse(path);i++}if(state&&params&&matches)successCallback(state,path,params);else errorCallback(state,path,
params)};SUI.State.prototype._setHistory=function(state,url,opt_params={},opt_overwrite=false,opt_force=false){url=this.basePath==='#'?this.basePath+url:url;const template=state.get('template');const router=new SUI.Router(template);state.set('templateUrl',router.stringify(opt_params));state.set('params',opt_params);if(opt_overwrite)window.history.replaceState(state.get(),state.get('title',''),url);else window.history.pushState(state.get(),state.get('title',''),url);this._setCurrent(state);if(!opt_overwrite)this._triggerChange(opt_force)};
SUI.State.prototype._triggerChange=function(opt_force=false){const currentState=this.getCurrent();const previousState=this.getPrevious();this.eventChange(currentState,previousState,opt_force)};SUI.State.prototype._setCurrent=function(state){this._previous=this._current;this._current=state};SUI.State.prototype.getCurrent=function(opt_attribute){return this._current.get(opt_attribute)};SUI.State.prototype.getPrevious=function(opt_attribute){return this._previous.get(opt_attribute)};
SUI.State.prototype.go=function(id,opt_params=undefined,opt_overwrite=false,opt_force=false){if(SUI.eq(id[0],'#')||SUI.eq(id[0],'/'))this._parsePath(id,(state,path,params)=>{this._setHistory(state,path,params,opt_overwrite,opt_force)},()=>{});else{const [url,state]=this._resolveUrlWithState(id,opt_params);if(url&&state)this._setHistory(state,url,opt_params,opt_overwrite,opt_force)}};
SUI.State.prototype._resolveUrlWithState=function(id,opt_params=undefined){const state=this.routes.findById(id);let url='';if(state){const stateUrl=state.get('url');const router=new SUI.Router(stateUrl);url=router.stringify(opt_params)}return[url,state]};SUI.State.prototype.resolveUrl=function(id,opt_params=undefined){const url=this._resolveUrlWithState(id,opt_params)[0];return this._getRealUrl(url)};
SUI.State.prototype.goState=function(state,opt_overwrite=false,opt_force=false){this.go(state['id'],state['params'],opt_overwrite,opt_force)};SUI.State.prototype.goHome=function(opt_overwrite=false,opt_force=false){this.go(this.options.home.id,this.options.home.params,opt_overwrite,opt_force)};SUI.State.prototype.goRoot=function(opt_overwrite=false,opt_force=false){this.go(this.options.root.id,this.options.root.params,opt_overwrite,opt_force)};
SUI.State.prototype.goBack=function(id,opt_params,opt_overwrite=false,opt_force=false){if(SUI.eq(window.history.length,0))this.go(id,opt_params,opt_overwrite,opt_force);else this.back()};SUI.State.prototype.back=function(){window.history.go(-1)};SUI.State.prototype.redirect=function(url,opt_inTab=false){if(opt_inTab)window.open(url,'_blank');else window.location.href=url};SUI.State.prototype.forward=function(){window.history.forward()};
SUI.State.prototype.eventChange=function(currentState,previousState,opt_force=false){console.warn('SUI.State.eventChange()',currentState,previousState,opt_force)};SUI.State.prototype.getRoutes=function(){return this.routes};SUI.State.prototype.setParams=function(properties){SUI.eachObject(properties,(value,name)=>{this.setParam(name,value)})};SUI.State.prototype.setParam=function(name,value){const id=this.getCurrent('id');const params=this.getParams();params.set(name,value);this.go(id,params,true)};
SUI.State.prototype.getParams=function(){return this.getCurrent('params')};SUI.State.prototype.getParam=function(name,opt_defaultValue){const params=this.getParams();return params.get(name,opt_defaultValue)};SUI.State.prototype.reload=function(){window.location.reload()};SUI.State.prototype.refresh=function(opt_force=false){this._triggerChange(opt_force)};SUI.State.prototype.getRoot=function(){return[this.options.root.id,this.options.root.params]};
SUI.State.prototype.getHome=function(){return[this.options.home.id,this.options.home.params]};goog.provide('SUI.Module');goog.require('SUI');goog.require('SUI.Async');goog.require('SUI.Deferred');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Promise');goog.require('SUI.State');SUI.Module=function(){this._modules={};this._instances={};this._injections={};this._dependencies=[];this._services=[];this._controller={enter:SUI.noop(),exit:SUI.noop()}};
SUI.Module.prototype.load=function(instances,injections){this._instances=instances;this._injections=injections;this._instances[this._injections.instances]=this._instances};SUI.Module.prototype.getController=function(){return this._controller};SUI.Module.prototype.add=function(name,moduleInjections,moduleCallback,opt_extendModule){this._modules[name]=this._getDependencies(moduleInjections,moduleCallback,opt_extendModule)};
SUI.Module.prototype._getDependencies=function(moduleInjections,moduleCallback,opt_extendModule){if(opt_extendModule)moduleInjections.push(opt_extendModule);return{moduleInjections:moduleInjections,moduleCallback:moduleCallback,extendModule:opt_extendModule}};
SUI.Module.prototype._resolveDependencies=function(dependency){const moduleArgs=[];SUI.each(dependency.moduleInjections,injection=>{moduleArgs.push(this._instances[injection])});let extendCallback;let extendArgs;if(this._modules[dependency.extendModule]){extendCallback=this._modules[dependency.extendModule].moduleCallback;extendArgs=[];SUI.each(this._modules[dependency.extendModule].moduleInjections,injection=>{extendArgs.push(this._instances[injection])})}return SUI.invoke(dependency.moduleCallback,
moduleArgs,extendCallback,extendArgs)};SUI.Module.prototype._orderServices=function(){for(const key in this._modules)if(this._modules.hasOwnProperty(key)&&this._isModule(key)){if(this._services.indexOf(key)===-1)this._services.push(key);const injections=this._modules[key].moduleInjections;for(let j=0;j<injections.length;j++)if(this._isModule(injections[j])){if(this._services.indexOf(injections[j])===-1)this._services.push(injections[j]);this._changeServices(key,injections[j])}}};
SUI.Module.prototype._isModule=function(value){const lastCharacters=value.substr(value.length-7);return SUI.eq(lastCharacters,'Service')||SUI.eq(lastCharacters,'Factory')};
SUI.Module.prototype._changeServices=function(service,injection){if(this._dependencies.indexOf([injection,service].join('-'))!==-1)console.error('SUI.Modules._changeServices()','Dependency injection circular loop',injection,'<=>',service);this._dependencies.push([service,injection].join('-'));const servicePosition=this._services.indexOf(service);const injectionPosition=this._services.indexOf(injection);if(injectionPosition>servicePosition){const tmpService=this._services[servicePosition];this._services.splice(servicePosition,
1);this._services.push(tmpService)}};
SUI.Module.prototype.handleServices=function(){this._orderServices();const calls=[];SUI.each(this._services,function(serviceName){const moduleCall=function(){this._instances[serviceName]=this._resolveDependencies(this._modules[serviceName]);let enter=SUI.noop();if(SUI.isFunction(this._instances[serviceName].enter))enter=this._instances[serviceName].enter.bind(this._instances[serviceName]);return enter()}.bind(this);calls.push(moduleCall)}.bind(this));this.eventAfterInit();const async=new SUI.Async;
async.serial(calls).then(function(){this.eventServiceLoaded();this._instances[this._injections.state].run()}.bind(this),function(){this.eventServiceFailed()}.bind(this))};
SUI.Module.prototype.handleRoutes=function(routes,options){this._instances[this._injections.state]=new SUI.State(routes,options);this._instances[this._injections.state].eventChange=function(currentState,previousState,force){let exit=SUI.noop();if(!previousState.isEmpty()&&SUI.isObject(this._controller)&&SUI.isFunction(this._controller.exit))exit=this._controller.exit.bind(this._controller);const async=new SUI.Async;async.serial([exit]).then(function(){this._handleStateChange(currentState,force)}.bind(this))}.bind(this)};
SUI.Module.prototype._handleStateChange=function(currentState,opt_force=false){this.eventStateChange(currentState).then(()=>{const template=currentState.get('template');if(template){const templateUrl=currentState.get('templateUrl');this._instances[this._injections.template].load(templateUrl,opt_force).then(dom=>{this.eventModuleLoaded(currentState);this._initController(currentState,dom)},()=>{this.eventModuleFailed(currentState)})}else{this.eventModuleLoaded(currentState);this._initController(currentState,
this._instances[this._injections.template].getViewNode())}},()=>{this.eventModuleFailed(currentState)})};
SUI.Module.prototype._initController=function(state,dom){this._instances[this._injections.dom]=dom;const controller=this._modules[state.get('controller')];if(controller)this.eventDomChange(state,dom).then(()=>{this._controller=this._resolveDependencies(controller);if(SUI.isObject(this._controller)&&SUI.isFunction(this._controller.enter)){const async=new SUI.Async;async.serial([this._controller.enter.bind(this._controller)]).then(()=>{this.eventControllerLoaded(dom)})}else this.eventControllerLoaded(dom)});
else this.eventControllerFailed()};SUI.Module.prototype.eventControllerLoaded=function(dom){console.warn('SUI.Module.eventControllerLoaded()',dom)};SUI.Module.prototype.eventControllerFailed=function(){console.warn('SUI.Module.eventControllerFailed()')};SUI.Module.prototype.eventModuleFailed=function(state){console.warn('SUI.Module.eventModuleFailed()',state)};SUI.Module.prototype.eventModuleLoaded=function(state){console.warn('SUI.Module.eventModuleLoaded()',state)};
SUI.Module.prototype.eventStateChange=function(state){const deferred=new SUI.Deferred;console.warn('SUI.Module.eventStateChange()',state);deferred.resolve();return deferred.promise()};SUI.Module.prototype.eventDomChange=function(state,dom){const deferred=new SUI.Deferred;console.warn('SUI.Module.eventDomChange()',state,dom);deferred.resolve();return deferred.promise()};SUI.Module.prototype.eventAfterInit=function(){console.warn('SUI.Module.eventAfterInit()')};
SUI.Module.prototype.eventServiceLoaded=function(){console.warn('SUI.Module.eventServiceLoaded()')};SUI.Module.prototype.eventServiceFailed=function(){console.warn('SUI.Module.eventServiceFailed()')};goog.provide('SUI.test');goog.require('SUI');SUI.test=function(){};goog.provide('SUI.BaseTest');goog.require('SUI');SUI.BaseTest=function(opt_name){this.name=opt_name};SUI.BaseTest.prototype.init=function(){};SUI.BaseTest.prototype.showError=function(message,object){console.error(this.name+'.'+message,object)};SUI.BaseTest.prototype.showLog=function(message,object){console.info(this.name+'.'+message,object)};goog.provide('SUI.test.Container');goog.require('SUI.test');goog.require('SUI.Collection');goog.require('SUI.Object');goog.require('SUI.BaseTest');SUI.test.Container=function(){SUI.BaseTest.call(this,'Container')};goog.inherits(SUI.test.Container,SUI.BaseTest);SUI.test.Container.prototype.init=function(){this.container=new SUI.Collection([{id:1,text:'text'},{id:2,text:'text2'}]);this.testInit();this.testLoad()};SUI.test.Container.prototype.testInit=function(){};
SUI.test.Container.prototype.testLoad=function(){};goog.provide('SUI.test.Deferred');goog.require('SUI.test');goog.require('SUI.Deferred');goog.require('SUI.Promise');goog.require('SUI.BaseTest');SUI.test.Deferred=function(){SUI.BaseTest.call(this,'Deferred')};goog.inherits(SUI.test.Deferred,SUI.BaseTest);
SUI.test.Deferred.prototype.init=function(){this.ajaxResolve=function(){const deferred=new SUI.Deferred;window.setTimeout(function(){deferred.resolve(1)},100);return deferred.promise()};this.funcResolve=function(){const deferred=new SUI.Deferred;deferred.resolve(2);return deferred.promise()};this.ajaxReject=function(){const deferred=new SUI.Deferred;window.setTimeout(function(){deferred.reject(1)},100);return deferred.promise()};this.funcReject=function(){const deferred=new SUI.Deferred;deferred.reject(2);
return deferred.promise()};this.testPromise();this.testResolve();this.testReject()};SUI.test.Deferred.prototype.testPromise=function(){const deferred=new SUI.Deferred;const promise=deferred.promise();if(!(promise instanceof SUI.Promise))this.showError('promise',1)};
SUI.test.Deferred.prototype.testResolve=function(){this.ajaxResolve().then(value=>{if(value!==1)this.showError('resolve',1)},()=>{this.showError('resolve',2)});this.funcResolve().then(value=>{if(value!==2)this.showError('resolve',3)},()=>{this.showError('resolve',4)})};
SUI.test.Deferred.prototype.testReject=function(){this.ajaxReject().then(()=>{this.showError('reject',1)},value=>{if(value!==1)this.showError('reject',2)});this.funcReject().then(()=>{this.showError('reject',3)},value=>{if(value!==2)this.showError('reject',4)})};goog.provide('SUI.Item');goog.require('SUI');goog.require('SUI.Object');SUI.Item=function(properties,parent){this.properties=new SUI.Object(properties);this.parent=parent};SUI.Item.prototype.set=function(attribute,value){this.properties.set(attribute,value)};SUI.Item.prototype.merge=function(properties){this.properties.merge(properties)};SUI.Item.prototype.get=function(attribute){return this.properties.get(attribute)};goog.provide('SUI.test.Item');goog.require('SUI.test');goog.require('SUI.Item');goog.require('SUI.BaseTest');SUI.test.Item=function(){SUI.BaseTest.call(this,'Item')};goog.inherits(SUI.test.Item,SUI.BaseTest);SUI.test.Item.prototype.init=function(){this.item=new SUI.Item(this,{attr1:2,obj1:{attr2:3.1}});this.testGet();this.testSet();this.testMerge()};
SUI.test.Item.prototype.testGet=function(){this.item.set('attr1',2);if(this.item.get('attr1')!==2)this.showError('get',1);this.item.set('obj1.attr2',3.1);if(this.item.get('obj1.attr2')!==3.1)this.showError('get',2)};SUI.test.Item.prototype.testSet=function(){this.item.set('attr1',3);if(this.item.get('attr1')!==3)this.showError('set',1);this.item.set('obj1.attr5',5.34);if(this.item.get('obj1.attr5')!==5.34)this.showError('set',2)};
SUI.test.Item.prototype.testMerge=function(){this.item.merge({attr1:1,obj1:{obj2:{attr4:null}},attr3:null});this.item.set('attr1',1);if(this.item.get('attr1')!==1)this.showError('merge',1);this.item.set('obj1.attr2',3.1);if(this.item.get('obj1.attr2')!==3.1)this.showError('merge',2);this.item.set('obj1.obj2.attr4',null);if(this.item.get('obj1.obj2.attr4')!==null)this.showError('merge',3);this.item.set('attr3',null);if(this.item.get('attr3')!==null)this.showError('merge',4)};goog.provide('SUI.test.Node');goog.require('SUI');goog.require('SUI.test');goog.require('SUI.Node');goog.require('SUI.BaseTest');SUI.test.Node=function(){SUI.BaseTest.call(this,'Node')};goog.inherits(SUI.test.Node,SUI.BaseTest);SUI.test.Node.prototype.init=function(){this.node=new SUI.Node('div');this.testAttribute();this.testAttributeData();this.testData()};
SUI.test.Node.prototype.testAttribute=function(){const values=['text',null,true,false,Infinity,0,1,10];for(let i=0;i<values.length;i++){this.node.setAttribute('data',values[i]);const value=this.node.getAttribute('data');if(!SUI.isSame(value,values[i])){this.showError('setAttribute(data)',values[i]);this.showError('getAttribute(data)',value)}}};
SUI.test.Node.prototype.testAttributeData=function(){const values=['text',null,true,false,Infinity,0,1,10,[0,1,10],{key:'value'}];for(let i=0;i<values.length;i++){this.node.setAttribute('data-value',values[i]);const value=this.node.getAttribute('data-value');if(!SUI.isSame(value,values[i])){this.showError('setAttribute(data-value)',values[i]);this.showError('getAttribute(data-value)',value)}}this.node.removeAttribute('data-value')};
SUI.test.Node.prototype.testData=function(){const values=['','text',null,true,false,undefined,Infinity,0,1,10,[0,1,10],{key:'value'}];for(let i=0;i<values.length;i++){this.node.setData('value',values[i]);const value=this.node.getData('value');if(!SUI.isSame(value,values[i])){this.showError('setData(value)',values[i]);this.showError('getData(value)',value)}}this.node.removeData('value')};goog.provide('SUI.test.Object');goog.require('SUI.test');goog.require('SUI.Object');goog.require('SUI.BaseTest');SUI.test.Object=function(){SUI.BaseTest.call(this,'Object')};goog.inherits(SUI.test.Object,SUI.BaseTest);SUI.test.Object.prototype.init=function(){this.testMerge();this.testGetTypedValue();this.testGet();this.testSet();this.testRemove();this.testCopy()};
SUI.test.Object.prototype.testMerge=function(){const options=new SUI.Object({attr:null,obj:{attr2:1,attr4:3}});if(options.attr!==null)this.showError('merge',1);options.merge({attr:'value1',obj:{attr2:2,attr3:null}});if(options.attr!=='value1')this.showError('merge',2);if(options.obj.attr2!==2)this.showError('merge',3);if(options.obj.attr3!==null)this.showError('merge',4);if(options.obj.attr4!==3)this.showError('merge',5)};
SUI.test.Object.prototype.testGetTypedValue=function(){const options=new SUI.Object({attr:'null',obj:{attr2:'1',attr3:'3.2'},attr4:'false',attr5:'true',attr6:'string123,456.789',attr7:undefined,attr8:null});if(options.attr!==null)this.showError('_getTypedValue',0);if(options.obj.attr2!==1)this.showError('_getTypedValue',1);if(options.obj.attr3!==3.2)this.showError('_getTypedValue',2);if(options.attr4!==false)this.showError('_getTypedValue',3);if(options.attr5!==true)this.showError('_getTypedValue',
4);if(options.attr6!=='string123,456.789')this.showError('_getTypedValue',5);if(options.attr7!==undefined)this.showError('_getTypedValue',6);if(options.attr8!==null)this.showError('_getTypedValue',7)};
SUI.test.Object.prototype.testGet=function(){const options=new SUI.Object({attr:null,obj:{attr2:1,obj2:{attr4:2,attr3:3.2,attr5:4.5}},arr:[{attr1:-4}]});options.set('attr',null);if(options.get('attr')!==null)this.showError('get',0);options.set('obj.attr2',1);if(options.get('obj.attr2')!==1)this.showError('get',1);options.set('obj.obj2.attr3',3.2);if(options.get('obj.obj2.attr3')!==3.2)this.showError('get',2);if(options.get('obj.obj3')!==undefined)this.showError('get',3);if(options.get('arr.0.attr1')!==
-4)this.showError('get',4)};SUI.test.Object.prototype.testSet=function(){const options=new SUI.Object({attr:0,obj:{attr2:0,obj2:{attr3:0}}});options.set('attr',null);if(options.get('attr')!==null)this.showError('set',0);options.set('obj.attr2',1);if(options.get('obj.attr2')!==1)this.showError('set',1);options.set('obj.obj2.attr3',3.2);if(options.get('obj.obj2.attr3')!==3.2)this.showError('set',2);options.set('obj.obj3',5);if(options.get('obj.obj3')===undefined)this.showError('set',3)};
SUI.test.Object.prototype.testRemove=function(){const options=new SUI.Object({attr:0,obj:{attr2:0,obj2:{attr3:0}}});options.remove('attr');if(options.get('attr')!==undefined)this.showError('remove',0);options.remove('obj.attr2');if(options.get('obj.attr2')!==undefined)this.showError('remove',1);options.remove('obj.obj2.attr3');if(options.get('obj.obj2.attr3')!==undefined)this.showError('remove',2);options.remove('obj.obj3');if(options.get('obj.obj3')!==undefined)this.showError('remove',3)};
SUI.test.Object.prototype.testCopy=function(){const options=new SUI.Object({attr:0,obj:{attr2:0,obj2:{attr3:0}}});options.set('obj.attr2',0);const optionsCopy=options.copy();optionsCopy.remove('obj.attr2');if(options.get('obj.attr2')!==0)this.showError('copy',0)};goog.provide('SUI.Test');goog.require('SUI');goog.require('SUI.test.Container');goog.require('SUI.test.Deferred');goog.require('SUI.test.Item');goog.require('SUI.test.Node');goog.require('SUI.test.Object');SUI.Test=function(){};SUI.Test.prototype.run=function(){const tests=[new SUI.test.Container,new SUI.test.Deferred,new SUI.test.Item,new SUI.test.Node,new SUI.test.Object];for(const test of tests){test.init();console.info(`SUI.test.${test.name}.init()`)}};
SUI.Test.prototype.showError=function(message,object){console.error(this.name+'.'+message,object)};SUI.Test.prototype.showLog=function(message,object){console.info(this.name+'.'+message,object)};goog.provide('SUI.lib');goog.require('SUI');SUI.lib=function(){};goog.provide('SUI.lib.ActionCableClient');goog.requireType('SUI.lib.ActionCable');goog.require('SUI.Deferred');goog.require('SUI.Object');goog.require('SUI.Promise');goog.require('SUI.lib');SUI.lib.ActionCableClient=function(parent,options){this.parent=parent;this._init(options)};SUI.lib.ActionCableClient.prototype._init=function(options){this.subscription=this._getSubscription(options)};
SUI.lib.ActionCableClient.prototype._getSubscription=function(options){const deferred=new SUI.Deferred;this.client=this.parent.cable['subscriptions']['create'](options,{received:payload=>{const response=new SUI.Object(JSON.parse(payload['message']));deferred.resolve(response)}});return deferred.promise()};SUI.lib.ActionCableClient.prototype.subscribe=function(){return this.subscription};SUI.lib.ActionCableClient.prototype.send=function(message,opt_data={}){opt_data['message']=message;this.client['send'](opt_data)};
SUI.lib.ActionCableClient.prototype.unsubscribe=function(){this.client['unsubscribe']()};goog.provide('SUI.lib.ActionCable');goog.require('SUI');goog.require('SUI.Deferred');goog.require('SUI.Promise');goog.require('SUI.Query');goog.require('SUI.lib');goog.require('SUI.lib.ActionCableClient');SUI.lib.ActionCable=function(){this._init()};SUI.lib.ActionCable.prototype._init=function(){if(window['ActionCable'])this.cable=window['ActionCable']['createConsumer']();this.clients=[];this.identifiers=[]};
SUI.lib.ActionCable.prototype.getUrl=function(){let url='';const cableMeta=(new SUI.Query('meta[name="action-cable-url"]')).getItem();if(!cableMeta.isEmpty())url=cableMeta.getAttribute('content');return url};
SUI.lib.ActionCable.prototype.subscribe=function(channel,room){const options={channel,room};const identifier=this._generateIdentifier(options);if(!SUI.inArray(this.identifiers,identifier)){this.identifiers.push(identifier);const client=new SUI.lib.ActionCableClient(this,options);client.identifier=identifier;this.clients.push(client);return client.subscribe()}const deferred=new SUI.Deferred;return deferred.promise()};
SUI.lib.ActionCable.prototype.unsubscribeAll=function(){SUI.eachArray(this.clients,client=>{client.unsubscribe();SUI.remove(this.identifiers,client.identifier)});SUI.clearArray(this.clients)};SUI.lib.ActionCable.prototype._generateIdentifier=function(options){return SUI.md5(JSON.stringify(options))};goog.provide('SUI.lib.Footer');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Query');goog.require('SUI.lib');SUI.lib.Footer=function(opt_options={}){this._setOptions(opt_options);this._init()};SUI.lib.Footer.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object;_self.options.merge(opt_options)};
SUI.lib.Footer.prototype._init=function(){this.footerNode=(new SUI.Query('#footer')).getItem();this.templateViewNode=(new SUI.Query('.template-view')).getItem();this.contentNode=(new SUI.Query('.content',this.footerNode)).getItem();this.localesNode=(new SUI.Query('.locales',this.footerNode)).getItem()};
SUI.lib.Footer.prototype.show=function(){this.footerNode.removeClass(['static','hidden','has-footer']);const contentNode=(new SUI.Query('.page-content.fullscreen',this.templateViewNode)).getItem();if(contentNode&&!contentNode.isEmpty()){const isLightContent=contentNode.hasClass('light');if(isLightContent)this.footerNode.addClass('dark');else this.footerNode.removeClass('dark');this.footerNode.addClass('static');this.templateViewNode.addClass('has-footer')}};
SUI.lib.Footer.prototype.hide=function(){this.footerNode.addClass('hidden');this.footerNode.removeClass('static');this.templateViewNode.removeClass('has-footer')};SUI.lib.Footer.prototype.setContent=function(contentNode){this.contentNode.appendChild(contentNode)};SUI.lib.Footer.prototype.getLocalesContainer=function(){return this.localesNode};SUI.lib.Footer.prototype.open=function(){this.footerNode.addClass('open')};SUI.lib.Footer.prototype.close=function(){this.footerNode.removeClass('open')};
SUI.lib.Footer.prototype.isOpened=function(){return this.footerNode.hasClass('open')};SUI.lib.Footer.prototype.toogle=function(){if(this.isOpened())this.close();else this.open()};goog.provide('SUI.lib.BottomMenu');goog.require('SUI.Node');goog.require('SUI.Query');goog.require('SUI.lib');goog.require('SUI.lib.Footer');SUI.lib.BottomMenu=function(footer){this.footer=footer;this._init()};
SUI.lib.BottomMenu.prototype._init=function(){this.bottomMenu=(new SUI.Query('#bottom-menu',this.footer.footerNode)).getItem();const openBottomMenu=(new SUI.Query('#open-bottom-menu',this.footer.footerNode)).getItem();openBottomMenu.setAttribute('href','javascript:void(0)');openBottomMenu.addEventListener('click',()=>{this.toggle()});const closeBottomMenu=(new SUI.Query('#close-bottom-menu',this.footer.footerNode)).getItem();closeBottomMenu.setAttribute('href','javascript:void(0)');closeBottomMenu.addEventListener('click',
()=>{this.toggle()})};SUI.lib.BottomMenu.prototype.toggle=function(){if(this.isOpened())this.close();else this.open()};SUI.lib.BottomMenu.prototype.isOpened=function(){return this.bottomMenu.hasClass('visible-flex')};SUI.lib.BottomMenu.prototype.open=function(){this.bottomMenu.addClass('visible-flex');this.footer.open()};SUI.lib.BottomMenu.prototype.close=function(){this.bottomMenu.removeClass('visible-flex');this.footer.close()};SUI.lib.BottomMenu.prototype.getContainer=function(){return this.bottomMenu};goog.provide('SUI.lib.Browser');goog.require('SUI');goog.require('SUI.lib');SUI.lib.Browser=function(){this._init()};SUI.lib.Browser.prototype._init=function(){this._detectOS();this._detectBrowsers();this._detectMissingFeatures()};
SUI.lib.Browser.prototype._detectMissingFeatures=function(){this.features=[];this._setFeature('navigator.geolocation',navigator&&navigator.geolocation);this._setFeature('window.history',window.history);this._setFeature('window.localStorage',window.localStorage);this._setFeature('window.sessionStorage',window.sessionStorage);this._setFeature('window.btoa',window.btoa);this._setFeature('window.atob',window.atob);this._setFeature('console.log',console.log);this._setFeature('console.info',console.info);
this._setFeature('console.warn',console.warn);this._setFeature('console.error',console.error)};SUI.lib.Browser.prototype.detect=function(){if(!SUI.isEmpty(this.features))this.eventMissingFeatures(this.features)};SUI.lib.Browser.prototype._setFeature=function(name,value){if(SUI.eq(!!value,false))this.features.push(name)};SUI.lib.Browser.prototype.eventMissingFeatures=function(features){console.error('SUI.lib.Browser.eventMissingFeatures()',features)};
SUI.lib.Browser.prototype._detectBrowsers=function(){this.browsers={};const userAgent=window.navigator.userAgent.toLowerCase();this.browsers.webkit='WebkitAppearance'in document.documentElement.style;this.browsers.chromium=!!window['chrome'];this.browsers.chrome=!!window['chrome']&&!!window['chrome']['webstore'];this.browsers.opera=!!window.opera||/opera|opr/i.test(navigator.userAgent);this.browsers.firefox='MozAppearance'in document.documentElement.style;this.browsers.safari=/constructor/i.test(window.HTMLElement);
this.browsers.IE10='behavior'in document.documentElement.style&&'-ms-user-select'in document.documentElement.style;this.browsers.lteIE10=false;this.browsers.gteIE10=document.body.style.msTouchAction!==undefined;this.browsers.IE11='-ms-scroll-limit'in document.documentElement.style&&'-ms-ime-align'in document.documentElement.style;this.browsers.edge=userAgent.indexOf('edge')!==-1;this.browsers.chromiumEdge=userAgent.indexOf('edge')===-1&&userAgent.indexOf('edg')!==-1};
SUI.lib.Browser.prototype._detectOS=function(){this.os=null;const userAgent=window.navigator.userAgent;const platform=window.navigator.platform;const macosPlatforms=['Macintosh','MacIntel','MacPPC','Mac68K','darwin'];const windowsPlatforms=['Win32','Win64','Windows','WinCE'];const iosPlatforms=['iPhone','iPad','iPod'];if(macosPlatforms.indexOf(platform)!==-1)this.os='macOS';else if(iosPlatforms.indexOf(platform)!==-1)this.os='iOS';else if(windowsPlatforms.indexOf(platform)!==-1)this.os='Windows';
else if(/Android/.test(userAgent))this.os='Android';else if(/Linux/.test(platform))this.os='Linux'};SUI.lib.Browser.prototype.isMacOS=function(){return this.os==='macOS'};SUI.lib.Browser.prototype.isIOS=function(){return this.os==='iOS'};SUI.lib.Browser.prototype.isWindows=function(){return this.os==='Windows'};SUI.lib.Browser.prototype.isAndroid=function(){return this.os==='Android'};SUI.lib.Browser.prototype.isLinux=function(){return this.os==='Linux'};
SUI.lib.Browser.prototype.isInternetExplorer=function(opt_version){let result=this.browsers.lteIE10||this.browsers.gteIE10;if(opt_version)switch(opt_version){case 11:result=this.browsers.IE11;break;case 10:result=this.browsers.IE10;break;default:result=this.browsers.lteIE10;break}return result};SUI.lib.Browser.prototype.isEdge=function(){return this.browsers.edge};SUI.lib.Browser.prototype.isChromiumEdge=function(){return this.browsers.chromiumEdge};SUI.lib.Browser.prototype.isFirefox=function(){return this.browsers.firefox};
SUI.lib.Browser.prototype.isChrome=function(){return this.browsers.chrome};SUI.lib.Browser.prototype.isOpera=function(){return this.browsers.opera};SUI.lib.Browser.prototype.isSafari=function(){return this.browsers.safari};SUI.lib.Browser.prototype.isWebkit=function(){return this.browsers.webkit};SUI.lib.Browser.prototype.isChromium=function(){return this.browsers.chromium};goog.provide('SUI.Tooltip');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Query');SUI.Tooltip=function(element,opt_position='TOP'){this.element=element;this._initPositions(opt_position);this._init()};
SUI.Tooltip.prototype._initPositions=function(opt_position=''){this.positionCssClass='mdl-tooltip--top';switch(opt_position){case 'TOP':this.positionCssClass='mdl-tooltip--top';break;case 'BOTTOM':this.positionCssClass='mdl-tooltip--bottom';break;case 'LEFT':this.positionCssClass='mdl-tooltip--left';break;case 'RIGHT':this.positionCssClass='mdl-tooltip--right';break}};SUI.Tooltip.prototype._init=function(){this._createTooltip()};
SUI.Tooltip.prototype._getMessage=function(opt_message=''){if(!opt_message){opt_message=this.element.getAttribute('desc')||'';this.element.removeAttribute('desc');if(opt_message)this.tooltip.addClass('mdl-tooltip--large');opt_message=this.element.getAttribute('title')||opt_message;this.element.removeAttribute('title')}return opt_message};
SUI.Tooltip.prototype._createTooltip=function(){let id=this.element.getId();if(SUI.isNull(id)){id=SUI.generateId('tooltip');this.element.setId(id);this.element.addClass('has-tooltip')}const oldElement=(new SUI.Query(SUI.format('[for="{0}"]',[id]),this.element)).getItem();oldElement.remove();const cssClasses=['mdl-tooltip',this.positionCssClass];this.tooltip=new SUI.Node('span');this.tooltip.addClass(cssClasses);this.tooltip.setFor(id);this.element.insertAfter(this.tooltip)};
SUI.Tooltip.prototype.render=function(opt_message){const message=this._getMessage(opt_message);this.setMessage(message);SUI.mdl(this.tooltip)};SUI.Tooltip.prototype.setMessage=function(opt_message=''){if(opt_message){this.tooltip.removeStyle(['display']);this.tooltip.setHtml(opt_message)}else{this.tooltip.setStyle({'display':'none'});this.tooltip.setHtml('')}};SUI.Tooltip.prototype.open=function(){this.tooltip.addClass('is-active')};SUI.Tooltip.prototype.close=function(){this.tooltip.removeClass('is-active')};
SUI.Tooltip.prototype.isOpen=function(){return this.tooltip.hasClass('is-active')};SUI.Tooltip.prototype.toggle=function(){if(this.isOpen())this.close();else this.open()};goog.provide('SUI.lib.BaseModal');goog.require('SUI');goog.require('SUI.Async');goog.require('SUI.Query');goog.require('SUI.lib');SUI.lib.BaseModal=function(){};SUI.lib.BaseModal.prototype._initBase=function(){this.windowWidth=0;this.windowHeight=0;this.mainContainerNode=(new SUI.Query('.main-container')).getItem();this.hasBlur=false;this._initButtons()};SUI.lib.BaseModal.prototype._initButtons=function(){this._initCloseButton();this._initMinimizeButton();this._initMaximizeButton()};
SUI.lib.BaseModal.prototype._initMinimizeButton=function(){const btnMinimize=(new SUI.Query('.minimize',this.modal)).getItem();if(!btnMinimize.isEmpty()){btnMinimize.addClass(['mdl-button','mdl-js-button','mdl-button--icon']);btnMinimize.addEventListener('click',()=>{this._actionMinimize()});this.btnMinimize=btnMinimize}};
SUI.lib.BaseModal.prototype._initMaximizeButton=function(){const btnMaximize=(new SUI.Query('.maximize',this.modal)).getItem();if(!btnMaximize.isEmpty()){btnMaximize.addClass(['mdl-button','mdl-js-button','mdl-button--icon']);btnMaximize.addEventListener('click',()=>{this._actionMaximize()});this.btnMaximize=btnMaximize}};
SUI.lib.BaseModal.prototype._initCloseButton=function(){const btnClose=(new SUI.Query('.close',this.modal)).getItem();if(!btnClose.isEmpty()){btnClose.addClass(['mdl-button','mdl-js-button','mdl-button--icon']);btnClose.addEventListener('click',()=>{this._actionCancel()});this.btnClose=btnClose}};SUI.lib.BaseModal.prototype.isOpened=function(){return this.modal.hasClass('visible-flex')};
SUI.lib.BaseModal.prototype._handleCloseButton=function(opt_allowClose=true){if(this.btnClose)if(opt_allowClose)this.btnClose.removeClass('hidden');else this.btnClose.addClass('hidden')};
SUI.lib.BaseModal.prototype.open=function(opt_allowClose=true){this.hasBlur=this.mainContainerNode.hasClass('blur');if(!this.hasBlur){this.mainContainerNode.addClass('blur');this.body.addClass('overflow-hidden')}this.modal.addClass('visible-flex');this.modal.removeClass('hidden');this._handleCloseButton(opt_allowClose);this._handleCenterPosition();this.interval=setInterval(()=>{this._handleCenterPosition()},1E3)};
SUI.lib.BaseModal.prototype.close=function(){clearInterval(this.interval);if(!this.hasBlur){this.mainContainerNode.removeClass('blur');this.body.removeClass('overflow-hidden')}this.modal.addClass('hidden');this.modal.removeClass('visible-flex');this.modalTitle.removeChildren();this.modalBody.removeChildren();this.modalFooter.removeChildren()};
SUI.lib.BaseModal.prototype._setTitle=function(opt_title){this.modalTitle.setHtml(opt_title);if(SUI.isString(opt_title)&&opt_title.length>0||SUI.isNumber(opt_title))this.modalHeader.removeClass('hidden');else this.modalHeader.addClass('hidden');this.tooltip.setMessage(opt_title)};SUI.lib.BaseModal.prototype._reset=function(){this.eventOK=SUI.noop();this.eventCancel=SUI.noop()};
SUI.lib.BaseModal.prototype._actionOK=function(){const async=new SUI.Async;const calls=[this.eventOK.bind(this),this.close.bind(this)];async.serial(calls)};SUI.lib.BaseModal.prototype._actionCancel=function(){const async=new SUI.Async;const calls=[this.eventCancel.bind(this),this.close.bind(this)];async.serial(calls)};SUI.lib.BaseModal.prototype._actionMinimize=function(){};SUI.lib.BaseModal.prototype._actionMaximize=function(){};
SUI.lib.BaseModal.prototype.setSize=function(width,height){this.windowWidth=width;this.windowHeight=height;this._handleCenterPosition()};SUI.lib.BaseModal.prototype._handleCenterPosition=function(){const style=this.modalWindow.getComputedStyle();let height=style.getPropertyValue('height');if(SUI.contain(height,'px')){height=parseInt(height.slice(0,-2),10);if(height>this.windowHeight)this.modal.removeClass('center');else this.modal.addClass('center')}else this.modal.addClass('center')};goog.provide('SUI.lib.Confirm');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Query');goog.require('SUI.Tooltip');goog.require('SUI.lib');goog.require('SUI.lib.BaseModal');SUI.lib.Confirm=function(opt_options={}){this._setOptions(opt_options);this._init();this._initBase()};goog.inherits(SUI.lib.Confirm,SUI.lib.BaseModal);SUI.lib.Confirm.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({id:'#confirm'});_self.options.merge(opt_options)};
SUI.lib.Confirm.prototype._init=function(){this.body=(new SUI.Query('body')).getItem();this.modal=(new SUI.Query(this.options.id)).getItem();this.modalWindow=(new SUI.Query('#confirm-window',this.modal)).getItem();this.modalHeader=(new SUI.Query('.modal-header',this.modal)).getItem();this.modalTitle=(new SUI.Query('.modal-title',this.modalHeader)).getItem();this.modalBody=(new SUI.Query('.modal-body',this.modal)).getItem();this.modalFooter=(new SUI.Query('.modal-footer',this.modal)).getItem();this.tooltip=
new SUI.Tooltip(this.modalTitle);this.tooltip.render()};
SUI.lib.Confirm.prototype.load=function(message,okText,opt_cancelText='',opt_title='',opt_type='normal'){this._reset();this._setTitle(opt_title);this.modalWindow.removeClass(['normal','info','warning','error','success','choice']);this.modalWindow.addClass(opt_type);this.modalBody.setHtml(message);this.modalFooter.removeChildren();if(opt_cancelText){const cancelCssClasses=['mdl-button','mdl-js-button','mdl-js-ripple-effect'];if(opt_type==='choice')cancelCssClasses.push('mdl-button--primary');const cancelButton=
new SUI.Node('button');cancelButton.setAttribute('type','button');cancelButton.setHtml(opt_cancelText);cancelButton.addClass(cancelCssClasses);cancelButton.addEventListener('click',this._actionCancel.bind(this));this.modalFooter.appendChild(cancelButton)}const okCssClasses=['mdl-button','mdl-js-button','mdl-js-ripple-effect','mdl-button--primary'];const okButton=new SUI.Node('button');okButton.setAttribute('type','button');okButton.setHtml(okText);okButton.addClass(okCssClasses);okButton.addEventListener('click',
this._actionOK.bind(this));this.modalFooter.appendChild(okButton);SUI.mdl(this.modalFooter)};goog.provide('SUI.lib.Console');goog.require('SUI.Object');goog.require('SUI.lib');SUI.lib.Console=function(config,opt_options={}){this.config=config;this._setOptions(opt_options)};SUI.lib.Console.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object;_self.options.merge(opt_options)};SUI.lib.Console.prototype.log=function(...message){if(!this.config.get('production'))console.log(...message)};SUI.lib.Console.prototype.warn=function(...message){if(!this.config.get('production'))console.warn(...message)};
SUI.lib.Console.prototype.info=function(...message){if(!this.config.get('production'))console.info(...message)};SUI.lib.Console.prototype.error=function(...message){if(!this.config.get('production'))console.error(...message)};goog.provide('SUI.lib.Cookie');goog.require('SUI');goog.require('SUI.Object');goog.require('SUI.lib');SUI.lib.Cookie=function(opt_options={}){this._setOptions(opt_options)};SUI.lib.Cookie.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({prefix:'app',hours:24});_self.options.merge(opt_options)};SUI.lib.Cookie.prototype._getPropertyName=function(name){return[this.options.prefix,name].join('.').replace(/\./g,'_')};
SUI.lib.Cookie.prototype._getName=function(propertyName){const parts=propertyName.split('_');parts.shift();return parts.join('.')};
SUI.lib.Cookie.prototype.set=function(name,value,opt_expires='',opt_path='/',opt_domain='',opt_secure=false){const propertyName=this._getPropertyName(name);if(/^(?:expires|max\-age|path|domain|secure)$/i.test(propertyName))return;if(opt_expires)switch(opt_expires.constructor){case Number:opt_expires=opt_expires===Infinity?'; expires=Fri, 31 Dec 9999 23:59:59 GMT':'; max-age='+opt_expires*60*60;break;case Date:opt_expires='; expires='+opt_expires.toGMTString();break;default:break}else{const date=new Date;
date.setTime(date.getTime()+this.options.hours*60*60*1E3);opt_expires='; expires='+date.toGMTString()}document.cookie=encodeURIComponent(propertyName)+'='+encodeURIComponent(value)+opt_expires+(opt_domain?'; domain='+opt_domain:'')+(opt_path?'; path='+opt_path:'')+(opt_secure?'; secure':'')};
SUI.lib.Cookie.prototype.get=function(name){const propertyName=this._getPropertyName(name);const regex=new RegExp('(?:(?:^|.*;)\\s*'+encodeURIComponent(propertyName).replace(/[\-\.\+\*]/g,'\\$&')+'\\s*\\=\\s*([^;]*).*$)|^.*$');return SUI.typeCast(decodeURIComponent(document.cookie.replace(regex,'$1'))||null)};
SUI.lib.Cookie.prototype.remove=function(name,opt_path='',opt_domain='',opt_secure=false){if(this.hasKey(name)){const expires=new Date(1970,0,1);this.set(name,'',expires,opt_path,opt_domain,opt_secure)}};SUI.lib.Cookie.prototype.hasKey=function(name){const propertyName=this._getPropertyName(name);const regex=new RegExp('(?:^|;\\s*)'+encodeURIComponent(propertyName).replace(/[\-\.\+\*]/g,'\\$&')+'\\s*\\=');return regex.test(document.cookie)};
SUI.lib.Cookie.prototype.getKeys=function(){const keys=document.cookie.replace(/((?:^|\s*;)[^=]+)(?=;|$)|^\s*|\s*(?:=[^;]*)?(?:\1|$)/g,'').split(/\s*(?:=[^;]*)?;\s*/);for(let i=0;i<keys.length;i++)keys[i]=this._getName(decodeURIComponent(keys[i]));return keys};SUI.lib.Cookie.prototype.clear=function(){const keys=this.getKeys();SUI.each(keys,key=>{this.remove(key)})};goog.provide('SUI.lib.Xhr');goog.require('SUI');goog.require('SUI.Deferred');goog.require('SUI.Object');goog.require('SUI.Promise');goog.require('SUI.lib');SUI.lib.Xhr=function(opt_options={}){this._setOptions(opt_options);this._init()};SUI.lib.Xhr.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({backend:'',locale:''});_self.options.merge(opt_options)};
SUI.lib.Xhr.prototype._init=function(){this.requestHeaders={};this.authorization=null;this.types={};this._setTypes();this.http=new XMLHttpRequest;this.http.onreadystatechange=this._onReadyStateChange();this.deferred=new SUI.Deferred};
SUI.lib.Xhr.prototype._setTypes=function(){this._setType('json',['application/json','json','application/json']);this._setType('form',['application/x-www-form-urlencoded','json','application/json']);this._setType('html',['','document','text/html']);this._setType('svg',['','document','image/svg-xml']);this._setType('xml',['','document','application/xml'])};SUI.lib.Xhr.prototype._setType=function(name,value){this.types[name]=value};
SUI.lib.Xhr.prototype._getType=function(name){return this.types[name]||[]};SUI.lib.Xhr.prototype._getContentType=function(name){return this._getType(name)[0]||''};SUI.lib.Xhr.prototype._getResponseType=function(name){return this._getType(name)[1]||'text'};SUI.lib.Xhr.prototype._getAccept=function(name){return this._getType(name)[2]||'*/*'};
SUI.lib.Xhr.prototype._onReadyStateChange=function(){return()=>{switch(this.http.readyState){case 0:case 1:case 2:case 3:break;case 4:this._getResponseData(this.http.response).then(response=>{if(SUI.eq(this.http.status,200))this.deferred.resolve([this.http].concat(response));else this.deferred.reject([this.http].concat(response))});break;default:console.error('SUI.lib.Xhr._onReadyStateChange()',this.http.readyState);break}}};
SUI.lib.Xhr.prototype.get=function(url,opt_params,opt_headers={}){return this._handleRequest('GET',url,{},opt_params,opt_headers)};SUI.lib.Xhr.prototype.post=function(url,opt_data,opt_params,opt_headers={}){return this._handleRequest('POST',url,opt_data,opt_params,opt_headers)};SUI.lib.Xhr.prototype.put=function(url,opt_data,opt_params,opt_headers={}){return this._handleRequest('PUT',url,opt_data,opt_params,opt_headers)};
SUI.lib.Xhr.prototype.patch=function(url,opt_data,opt_params,opt_headers={}){return this._handleRequest('PATCH',url,opt_data,opt_params,opt_headers)};SUI.lib.Xhr.prototype.delete=function(url,opt_data,opt_params,opt_headers={}){return this._handleRequest('DELETE',url,opt_data,opt_params,opt_headers)};SUI.lib.Xhr.prototype._getUrl=function(url,opt_params){const urlWithQueryString=SUI.urlWithQueryString(url,opt_params);return url[0]==='/'?this.options.backend+urlWithQueryString:urlWithQueryString};
SUI.lib.Xhr.prototype._handleRequest=function(type,url,opt_data,opt_params,opt_headers={}){this.http.open(type,this._getUrl(url,opt_params),true);const urlType=SUI.getExtensionName(url);this._setResponseType(urlType);this._setRequestHeaders(urlType,opt_headers);this.http.send(this._getRequestData(opt_data));return this.deferred.promise()};
SUI.lib.Xhr.prototype._getRequestData=function(opt_data){let result='';if(opt_data)switch(this.getHeader('Content-Type')){case this._getContentType('json'):result=JSON.stringify(opt_data);break;case this._getContentType('form'):result=this._stringifyObject(opt_data);break}return result};
SUI.lib.Xhr.prototype._parseObject=function(obj,key,stringKey){stringKey+=stringKey?'['+key+']':key;let results=[];if(obj instanceof Array){stringKey+='[]';for(let i=0;i<obj.length;i++)results.push([stringKey,obj[i]].join('='))}else if(typeof obj==='object')for(const j in obj){if(obj.hasOwnProperty(j)){const pairs=this._parseObject(obj[j],j,stringKey);results=results.concat(pairs)}}else results.push([stringKey,obj].join('='));return results};
SUI.lib.Xhr.prototype._stringifyObject=function(obj){let results=[];for(const key in obj)if(obj.hasOwnProperty(key)){const pair=this._parseObject(obj[key],key,'');results=results.concat(pair)}return results.join('&')};
SUI.lib.Xhr.prototype._getResponseData=function(data){const deferred=new SUI.Deferred;const contentType=this.http.getResponseHeader('Content-Type');let filename='';if(contentType)switch(contentType.split(';')[0]){case 'application/json':if(SUI.instanceOf(data,Blob)){const contentDisposition=this.http.getResponseHeader('Content-Disposition');if(contentDisposition)filename=contentDisposition.match(/filename="(.+)"/)[1];const reader=new FileReader;reader.addEventListener('loadend',e=>{data=JSON.parse(e.srcElement.result||
'null');const object=new SUI.Object;object.merge(data);deferred.resolve([[object,filename]])});reader.readAsText(data)}else{data=SUI.isString(data)?JSON.parse(data||'null'):data;const object=new SUI.Object;object.merge(data);deferred.resolve([[object,filename]])}break;default:deferred.resolve([[data,filename]]);break}return deferred.promise()};
SUI.lib.Xhr.prototype._setRequestHeaders=function(urlType,opt_headers={}){SUI.eachObject(opt_headers,(value,key)=>{if(SUI.eq(key,'responseType'))this.http.responseType=value;else this.setHeader(key,value)});if(SUI.isUndefined(this.getHeader('Accept')))this.setHeader('Accept',this._getAccept(urlType));if(SUI.isUndefined(this.getHeader('Accept-Language')))this.setHeader('Accept-Language',this.options.locale);if(SUI.isUndefined(this.getHeader('Content-Type')))this.setHeader('Content-Type',this._getContentType(urlType));
if(SUI.isUndefined(this.getHeader('Authorization'))&&this.authorization){this.setHeader('Authorization',this.authorization);this.http.withCredentials=true}if(SUI.isUndefined(this.getHeader('X-Requested-With')))this.setHeader('X-Requested-With','XMLHttpRequest')};SUI.lib.Xhr.prototype._setResponseType=function(urlType,opt_headers={}){this.http.responseType=this._getResponseType(urlType)};
SUI.lib.Xhr.prototype.setHeader=function(name,value){if(name&&value)this.http.setRequestHeader(name,value);this.requestHeaders[name]=value};SUI.lib.Xhr.prototype.getHeader=function(name){return this.requestHeaders[name]};SUI.lib.Xhr.prototype.setBasicAuthorization=function(username,password){if(username&&password){const hash=[username,password].join(':');this.authorization='Basic '+SUI.encodeBase64(hash)}};
SUI.lib.Xhr.prototype.setBearerAuthorization=function(token){if(token)this.authorization='Bearer '+token};goog.provide('SUI.lib.Http');goog.require('SUI.Deferred');goog.require('SUI.Object');goog.require('SUI.Promise');goog.require('SUI.lib');goog.require('SUI.lib.Xhr');SUI.lib.Http=function(opt_options={}){this._setOptions(opt_options);this._init()};SUI.lib.Http.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({backend:'',locale:''});_self.options.merge(opt_options)};SUI.lib.Http.prototype._init=function(){this.username=null;this.password=null;this.token=null};
SUI.lib.Http.prototype.setBasicAuthorization=function(username,password){this.username=username;this.password=password};SUI.lib.Http.prototype.setBearerAuthorization=function(token){this.token=token};SUI.lib.Http.prototype.get=function(url,opt_params,opt_headers){const http=this._getRequestHandler();return this._getPromise(http.get(url,opt_params,opt_headers))};
SUI.lib.Http.prototype.post=function(url,opt_data,opt_params,opt_headers){const http=this._getRequestHandler();return this._getPromise(http.post(url,opt_data,opt_params,opt_headers))};SUI.lib.Http.prototype.put=function(url,opt_data,opt_params,opt_headers){const http=this._getRequestHandler();return this._getPromise(http.put(url,opt_data,opt_params,opt_headers))};
SUI.lib.Http.prototype.patch=function(url,opt_data,opt_params,opt_headers){const http=this._getRequestHandler();return this._getPromise(http.patch(url,opt_data,opt_params,opt_headers))};SUI.lib.Http.prototype.delete=function(url,opt_data,opt_params,opt_headers){const http=this._getRequestHandler();return this._getPromise(http.delete(url,opt_data,opt_params,opt_headers))};
SUI.lib.Http.prototype._getRequestHandler=function(){const http=new SUI.lib.Xhr(this.options);http.setBasicAuthorization(this.username,this.password);http.setBearerAuthorization(this.token);this.eventBeforeRequest(http);return http};
SUI.lib.Http.prototype._getPromise=function(promise){const deferred=new SUI.Deferred;promise.then((...params)=>{this.eventAfterRequest(...params);deferred.resolve.apply(deferred,[params.slice(1)])},(...params)=>{this.eventAfterRequest(...params);deferred.reject.apply(deferred,[params.slice(1)])});return deferred.promise()};SUI.lib.Http.prototype.eventBeforeRequest=function(http){console.warn('SUI.lib.Http.eventBeforeRequest',http)};
SUI.lib.Http.prototype.eventAfterRequest=function(http,response){console.warn('SUI.lib.Http.eventAfterRequest',http,response)};goog.provide('SUI.lib.Dialog');goog.require('SUI');goog.require('SUI.Deferred');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Promise');goog.require('SUI.Query');goog.require('SUI.Tooltip');goog.require('SUI.lib');goog.require('SUI.lib.BaseModal');goog.require('SUI.lib.Http');SUI.lib.Dialog=function(http,opt_options={}){this.http=http;this._setOptions(opt_options);this._init();this._initBase()};goog.inherits(SUI.lib.Dialog,SUI.lib.BaseModal);
SUI.lib.Dialog.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({id:'#dialog'});_self.options.merge(opt_options)};
SUI.lib.Dialog.prototype._init=function(){this.body=(new SUI.Query('body')).getItem();this.modal=(new SUI.Query(this.options.id,this.body)).getItem();this.modalWindow=(new SUI.Query('#dialog-window',this.modal)).getItem();this.modalHeader=(new SUI.Query('.modal-header',this.modal)).getItem();this.modalTitle=(new SUI.Query('.modal-title',this.modalHeader)).getItem();this.modalBody=(new SUI.Query('.modal-body',this.modal)).getItem();this.modalFooter=(new SUI.Query('.modal-footer',this.modal)).getItem();
this.tooltip=new SUI.Tooltip(this.modalTitle);this.tooltip.render()};SUI.lib.Dialog.prototype.loadTemplate=function(url){this._reset();const deferred=new SUI.Deferred;this.http.get(url).then(data=>{const node=this._handleDom(data);deferred.resolve(node)},data=>{const node=this._handleMessage(data);deferred.reject(node);this.open()});return deferred.promise()};
SUI.lib.Dialog.prototype._handleMessage=function(dom){const messageNode=(new SUI.Query('.message',dom)).getItem();const title=(new SUI.Query('title',dom)).getItem();this._setTitle(title.getText());this.modalBody.insert(messageNode);SUI.mdl(messageNode);return messageNode};
SUI.lib.Dialog.prototype._handleDom=function(dom){const titleNode=(new SUI.Query('#title',dom)).getItem();if(!titleNode.isEmpty())this._setTitle(titleNode.getText());const contentNode=(new SUI.Query('#content',dom)).getItem();this.modalBody.insert(contentNode);SUI.mdl(contentNode);this._handleActions(dom);return contentNode};
SUI.lib.Dialog.prototype._handleActions=function(dom){const actionNode=(new SUI.Query('#action',dom)).getItem();if(!actionNode.isEmpty()){const buttons=new SUI.Query('button',actionNode);const size=buttons.size();let actions=[this._actionOK.bind(this)];let cssClasses=['mdl-button--primary'];if(size===2){actions=[this._actionCancel.bind(this),this._actionOK.bind(this)];cssClasses=['mdl-button--accent','mdl-button--primary']}buttons.each(function(button,i){const buttonClasses=['mdl-button','mdl-js-button',
'mdl-js-ripple-effect'].concat([cssClasses[i]]);button.addClass(buttonClasses);button.addEventListener('click',actions[i])});this.modalFooter.insert(actionNode);SUI.mdl(actionNode)}else this.modalFooter.removeChildren()};goog.provide('SUI.lib.Document');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.lib');SUI.lib.Document=function(options){this._setOptions(options);this._init()};SUI.lib.Document.prototype._setOptions=function(options){const _self=this;_self.options=new SUI.Object;_self.options.merge(options)};SUI.lib.Document.prototype._init=function(){this.document=document;this.document.addEventListener('click',event=>{const target=new SUI.Node(event.target);this.eventClick(target,event)})};
SUI.lib.Document.prototype.setTitle=function(title){this.document.title=title};SUI.lib.Document.prototype.getAppTitle=function(){return this.options.title};SUI.lib.Document.prototype.eventClick=function(target,event){console.warn('Document.eventClick()',target,event)};SUI.lib.Document.prototype.mailTo=function(email,opt_subject=''){this.document.location.href='mailto:'+email+'?subject='+opt_subject};goog.provide('SUI.lib.Event');goog.require('SUI');goog.require('SUI.Async');goog.require('SUI.Object');goog.require('SUI.Promise');goog.require('SUI.lib');SUI.lib.Event=function(){this.eventContainer=new SUI.Object};SUI.lib.Event.prototype.set=function(name,callback){if(SUI.isFunction(callback)){const events=this.eventContainer.get(name,[]);events.push(callback);this.eventContainer.set(name,events)}return callback};
SUI.lib.Event.prototype.remove=function(name,callback){const events=this.eventContainer.get(name,[]);const index=events.indexOf(callback);if(index>-1)events.splice(index,1)};SUI.lib.Event.prototype.pop=function(name){const events=this.eventContainer.get(name,[]);events.pop();this.eventContainer.set(name,events)};SUI.lib.Event.prototype.call=function(name,opt_args=[]){const calls=this.eventContainer.get(name,[SUI.noop()]);const async=new SUI.Async;return async.serial(calls,opt_args)};
SUI.lib.Event.prototype.override=function(name,args,callback){const calls=this.eventContainer.get(name,[callback]);const async=new SUI.Async;return async.serial(calls,args)};goog.provide('SUI.lib.GeoLocation');goog.require('SUI.Deferred');goog.require('SUI.Promise');goog.require('SUI.lib');SUI.lib.GeoLocation=function(){this._init()};SUI.lib.GeoLocation.prototype._init=function(){this.options={enableHighAccuracy:true,timeout:5E3,maximumAge:Infinity}};SUI.lib.GeoLocation.prototype.setWatcher=function(){this.watcherId=navigator.geolocation.watchPosition(position=>{this._handlePosition(position)},error=>{this._handleError(error)},this.options)};
SUI.lib.GeoLocation.prototype.getPosition=function(){const deferred=new SUI.Deferred;navigator.geolocation.getCurrentPosition(position=>{deferred.resolve([position.coords.latitude,position.coords.longitude])},error=>{deferred.reject([null,null])},this.options);return deferred.promise()};SUI.lib.GeoLocation.prototype.clearWatcher=function(){navigator.geolocation.clearWatch(this.watcherId)};
SUI.lib.GeoLocation.prototype.eventChange=function(latitude,longitude,message){console.warn('SUI.lib.GeoLocation.eventChange()',latitude,longitude,message)};SUI.lib.GeoLocation.prototype._handlePosition=function(position){const message='User allowed the request for GeoLocation.';this.eventChange(position.coords.latitude,position.coords.longitude,message)};
SUI.lib.GeoLocation.prototype._handleError=function(error){switch(error.code){case error.PERMISSION_DENIED:this.eventError('User denied the request for GeoLocation.','permission_denied');break;case error.POSITION_UNAVAILABLE:this.eventError('Location information is unavailable.','position_unavailable');break;case error.TIMEOUT:this.eventError('The request to get user location timed out.','timeout');break;default:this.eventError('An unknown error occurred.','unknown');break}};
SUI.lib.GeoLocation.prototype.eventError=function(message,code){console.warn('SUI.lib.GeoLocation.eventError()',message,code)};goog.provide('SUI.lib.Header');goog.require('SUI.Object');goog.require('SUI.Query');goog.require('SUI.lib');SUI.lib.Header=function(opt_options={}){const _self=this;_self.options=new SUI.Object;_self.options.merge(opt_options);this._init()};
SUI.lib.Header.prototype._init=function(){this.headerNode=(new SUI.Query('#header')).getItem();this.leftMenuButton=(new SUI.Query('#open-left-menu',this.headerNode)).getItem();this.topMenuButton=(new SUI.Query('#toggle-top-menu',this.headerNode)).getItem();this.brandNode=(new SUI.Query('.brand',this.headerNode)).getItem();this.brandNode.setAttribute('href','javascript:void(0)');this.brandNode.addEventListener('click',()=>{this.eventLogoClick()});this.brandNodeImage=(new SUI.Query('.brand img',this.brandNode)).getItem();
this.brandNodeTitle=(new SUI.Query('.brand .app-title',this.brandNode)).getItem();this.mainContainerNode=(new SUI.Query('.main-container')).getItem();this.templateViewNode=(new SUI.Query('.template-view')).getItem()};SUI.lib.Header.prototype.eventLogoClick=function(){console.warn('SUI.lib.Header.eventLogoClick()')};SUI.lib.Header.prototype.setTitle=function(title){this.brandNodeTitle.setHtml(title)};SUI.lib.Header.prototype.setUrl=function(url){this.brandNode.setAttribute('href',url)};
SUI.lib.Header.prototype.setImage=function(imagePath){this.brandNodeImage.setAttribute('src',imagePath)};SUI.lib.Header.prototype.open=function(){this.headerNode.addClass('open')};SUI.lib.Header.prototype.close=function(){this.headerNode.removeClass('open')};SUI.lib.Header.prototype.show=function(){this.headerNode.removeClass('hidden');this.mainContainerNode.addClass('header-padding');this.templateViewNode.addClass('has-header')};
SUI.lib.Header.prototype.hide=function(){this.headerNode.addClass('hidden');this.mainContainerNode.removeClass('header-padding');this.templateViewNode.removeClass('has-header')};SUI.lib.Header.prototype.showShadow=function(){this.headerNode.addClass('shadow')};SUI.lib.Header.prototype.hideShadow=function(){this.headerNode.removeClass('shadow')};SUI.lib.Header.prototype.showLeftMenuButton=function(){this.leftMenuButton.removeClass('hidden')};SUI.lib.Header.prototype.hideLeftMenuButton=function(){this.leftMenuButton.addClass('hidden')};
SUI.lib.Header.prototype.showTopMenuButton=function(){this.topMenuButton.removeClass('hidden')};SUI.lib.Header.prototype.hideTopMenuButton=function(){this.topMenuButton.addClass('hidden')};goog.provide('SUI.lib.Helper');goog.require('SUI');goog.require('SUI.Tooltip');goog.require('SUI.Node');goog.require('SUI.Query');goog.require('SUI.lib');SUI.lib.Helper=function(){this._init()};SUI.lib.Helper.prototype._init=function(){};
SUI.lib.Helper.prototype.createLink=function(name,opt_callback,opt_href='javascript:void(0)',opt_description='',opt_allowAccess=true,opt_cssClasses=[]){const linkNode=new SUI.Node('a');linkNode.setHtml(name);this.linkElement(linkNode,opt_callback,opt_href,opt_description,opt_allowAccess,opt_cssClasses);return linkNode};
SUI.lib.Helper.prototype.multipleLink=function(selector,dom,opt_callback,opt_cssClasses=[]){const linkNodes=new SUI.Query(selector,dom);linkNodes.each(linkNode=>{this.linkElement(linkNode,opt_callback,'','',true,opt_cssClasses)})};
SUI.lib.Helper.prototype.link=function(selector,dom,opt_callback,opt_href='',opt_description='',opt_allowAccess=true,opt_cssClasses=[]){const linkNode=(new SUI.Query(selector,dom)).getItem();this.linkElement(linkNode,opt_callback,opt_href,opt_description,opt_allowAccess,opt_cssClasses);return linkNode};
SUI.lib.Helper.prototype.linkElement=function(linkNode,opt_callback,opt_href='',opt_description='',opt_allowAccess=true,opt_cssClasses=[]){if(!linkNode.isEmpty())if(opt_allowAccess){linkNode.addClass(opt_cssClasses);if(!linkNode.getId())linkNode.setId(SUI.generateId('link'));else linkNode.removeEventListeners('click');if(opt_href)linkNode.setAttribute('href',opt_href);if(opt_callback){const href=linkNode.getAttribute('href');linkNode.addEventListener('click',function(){opt_callback(href)})}const tooltip=
new SUI.Tooltip(linkNode);tooltip.render(opt_description);SUI.mdl(linkNode)}else linkNode.remove()};SUI.lib.Helper.prototype.createButton=function(name,callback,opt_description='',opt_allowAccess=true,opt_cssClasses=['mdl-button--primary']){const buttonNode=new SUI.Node('button');buttonNode.setHtml(name);this.buttonElement(buttonNode,callback,opt_description,opt_allowAccess,opt_cssClasses);return buttonNode};
SUI.lib.Helper.prototype.multipleButton=function(selector,dom,opt_cssClasses=['mdl-button--primary']){const buttonNodes=new SUI.Query(selector,dom);buttonNodes.each(buttonNode=>{this.buttonElement(buttonNode,undefined,'',true,opt_cssClasses)})};
SUI.lib.Helper.prototype.button=function(selector,dom,callback,opt_description='',opt_allowAccess=true,opt_cssClasses=['mdl-button--primary']){const buttonNode=(new SUI.Query(selector,dom)).getItem();this.buttonElement(buttonNode,callback,opt_description,opt_allowAccess,opt_cssClasses);return buttonNode};
SUI.lib.Helper.prototype.buttonElement=function(buttonNode,opt_callback,opt_description='',opt_allowAccess=true,opt_cssClasses=['mdl-button--primary']){if(!buttonNode.isEmpty())if(opt_allowAccess){if(!buttonNode.getId())buttonNode.setId(SUI.generateId('button'));else{const oldCssClasses=buttonNode.getData('cssClasses');buttonNode.removeClass(oldCssClasses);buttonNode.removeEventListeners('click')}const cssClasses=['mdl-button','mdl-js-button','mdl-js-ripple-effect','mdl-button--raised'].concat(opt_cssClasses);
buttonNode.setData('cssClasses',cssClasses);buttonNode.addClass(cssClasses);if(opt_callback)buttonNode.addEventListener('click',opt_callback);const tooltip=new SUI.Tooltip(buttonNode);tooltip.render(opt_description);SUI.mdl(buttonNode)}else buttonNode.remove()};
SUI.lib.Helper.prototype.createIconButton=function(iconName,callback,opt_description='',opt_allowAccess=true,opt_cssClasses=['mdl-button--accent','mdl-button--fab','mdl-button--mini-fab']){const buttonNode=new SUI.Node('button');this._createIconNode(iconName,buttonNode);this.iconButtonElement(buttonNode,callback,opt_description,opt_allowAccess,opt_cssClasses);return buttonNode};
SUI.lib.Helper.prototype.multipleIconButton=function(selector,dom,opt_cssClasses=['mdl-button--accent','mdl-button--fab','mdl-button--mini-fab']){const buttonNodes=new SUI.Query(selector,dom);buttonNodes.each(buttonNode=>{this.iconButtonElement(buttonNode,undefined,undefined,true,opt_cssClasses)})};
SUI.lib.Helper.prototype.iconButton=function(selector,dom,callback,opt_description='',opt_allowAccess=true,opt_cssClasses=['mdl-button--accent','mdl-button--fab','mdl-button--mini-fab']){const buttonNode=(new SUI.Query(selector,dom)).getItem();this.iconButtonElement(buttonNode,callback,opt_description,opt_allowAccess,opt_cssClasses);return buttonNode};
SUI.lib.Helper.prototype.iconButtonElement=function(buttonNode,opt_callback,opt_description='',opt_allowAccess=true,opt_cssClasses=['mdl-button--accent','mdl-button--fab','mdl-button--mini-fab']){if(!buttonNode.isEmpty())if(opt_allowAccess){if(!buttonNode.getId())buttonNode.setId(SUI.generateId('button'));else{const oldCssClasses=buttonNode.getData('cssClasses');buttonNode.removeClass(oldCssClasses);buttonNode.removeEventListeners('click')}const cssClasses=['mdl-button','mdl-js-button','mdl-js-ripple-effect',
'mdl-button--icon'].concat(opt_cssClasses);buttonNode.setData('cssClasses',cssClasses);buttonNode.addClass(cssClasses);buttonNode.addEventListener('click',opt_callback);const tooltip=new SUI.Tooltip(buttonNode);tooltip.render(opt_description);SUI.mdl(buttonNode)}else buttonNode.remove()};SUI.lib.Helper.prototype._createIconNode=function(iconName,parentNode){const iconNode=new SUI.Node('em');iconNode.addClass('material-icons');iconNode.setHtml(iconName);parentNode.appendChild(iconNode)};
SUI.lib.Helper.prototype.setGravatar=function(imageNode,defaultImageUrl,email,opt_size=500,opt_rating='g'){const src=SUI.format('https://www.gravatar.com/avatar/{0}?s={1}&r={2}&d=404',[SUI.md5(email),opt_size,opt_rating]);imageNode.setAttribute('src',src);imageNode.setAttribute('onError',SUI.format("this.onerror=null;this.src='{0}';",[defaultImageUrl]))};goog.provide('SUI.lib.LeftMenu');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Query');goog.require('SUI.lib');SUI.lib.LeftMenu=function(){this._init()};
SUI.lib.LeftMenu.prototype._init=function(){this.body=(new SUI.Query('body')).getItem();this.mainContainerNode=(new SUI.Query('.main-container')).getItem();this.leftMenu=(new SUI.Query('#left-menu')).getItem();this.mainMenu=(new SUI.Query('.main-menu',this.leftMenu)).getItem();this.subMenu=(new SUI.Query('.sub-menu',this.leftMenu)).getItem();this.subMenu.addClass('hidden');this.mainMenuContainer=(new SUI.Query('.menu-container',this.mainMenu)).getItem();this.subMenuContainer=(new SUI.Query('.menu-container',
this.subMenu)).getItem();this.mainMenuTitle=(new SUI.Query('h3',this.mainMenu)).getItem();this.subMenuTitle=(new SUI.Query('h3',this.subMenu)).getItem();this._initEvents()};
SUI.lib.LeftMenu.prototype._initEvents=function(){this.leftMenu.addEventListener('click',()=>{this.close()});this.mainMenuContainer.addEventListener('click',()=>{SUI.noop();return true});this.subMenuContainer.addEventListener('click',()=>{SUI.noop();return true});const openLeftMenu=(new SUI.Query('#open-left-menu')).getItem();openLeftMenu.setAttribute('href','javascript:void(0)');openLeftMenu.addEventListener('click',()=>{this.open()});const closeLeftMenu=(new SUI.Query('#close-left-menu',this.mainMenu)).getItem();
closeLeftMenu.setAttribute('href','javascript:void(0)');closeLeftMenu.addEventListener('click',()=>{this.close()});const closeSubMenu=(new SUI.Query('#close-sub-menu',this.subMenu)).getItem();closeSubMenu.setAttribute('href','javascript:void(0)');closeSubMenu.addEventListener('click',()=>{this.closeSubMenu()})};SUI.lib.LeftMenu.prototype.open=function(opt_title=''){this.body.addClass('overflow-hidden');this.mainContainerNode.addClass('blur');this.leftMenu.addClass('visible');this.mainMenuTitle.setHtml(opt_title)};
SUI.lib.LeftMenu.prototype.close=function(){this.body.removeClass('overflow-hidden');this.mainContainerNode.removeClass('blur');this.leftMenu.removeClass('visible')};SUI.lib.LeftMenu.prototype.openSubMenu=function(opt_title=''){this.mainMenu.addClass('hidden');this.subMenu.removeClass('hidden');this.subMenuTitle.setHtml(opt_title)};SUI.lib.LeftMenu.prototype.closeSubMenu=function(){this.mainMenu.removeClass('hidden');this.subMenu.addClass('hidden')};SUI.lib.LeftMenu.prototype.getMainContainer=function(){return this.mainMenuContainer};
SUI.lib.LeftMenu.prototype.getSubContainer=function(){return this.subMenuContainer};goog.provide('SUI.lib.Loader');goog.require('SUI');goog.require('SUI.Object');goog.require('SUI.Query');goog.require('SUI.lib');SUI.lib.Loader=function(opt_options={}){this._setOptions(opt_options);this._init()};SUI.lib.Loader.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({counter:0});_self.options.merge(opt_options)};
SUI.lib.Loader.prototype._init=function(){this.loader=(new SUI.Query('#loader')).getItem();this.spinner=this.loader.createElement('div');this.spinner.addClass(['mdl-spinner','mdl-spinner--single-color','mdl-js-spinner']);this.loader.appendChild(this.spinner)};SUI.lib.Loader.prototype.show=function(){this.options.counter++;this.loader.removeClass('hidden');this.spinner.addClass('is-active')};
SUI.lib.Loader.prototype.hide=function(opt_force){this.options.counter--;if(opt_force||SUI.eq(this.options.counter,0)){this.options.counter=0;this.loader.addClass('hidden');this.spinner.removeClass('is-active')}};goog.provide('SUI.lib.NavBar');goog.require('SUI.Node');goog.require('SUI.Query');goog.require('SUI.lib');SUI.lib.NavBar=function(){this._init()};
SUI.lib.NavBar.prototype._init=function(){this.navBarHeader=(new SUI.Query('.nav-bar-header')).getItem();this.navBar=(new SUI.Query('#nav-bar',this.navBarHeader)).getItem();const toggleNavBar=(new SUI.Query('#toggle-nav-bar',this.navBarHeader)).getItem();toggleNavBar.setAttribute('href','javascript:void(0)');toggleNavBar.addEventListener('click',()=>{this.toggle()});this.toggleNavBarIcon=(new SUI.Query('.material-icons',toggleNavBar)).getItem()};
SUI.lib.NavBar.prototype.toggle=function(){if(this.isOpened())this.close();else this.open()};SUI.lib.NavBar.prototype.isOpened=function(){return this.navBar.hasClass('open')};SUI.lib.NavBar.prototype.open=function(){this.navBar.addClass('open');this.toggleNavBarIcon.setHtml('close')};SUI.lib.NavBar.prototype.close=function(){this.navBar.removeClass('open');this.toggleNavBarIcon.setHtml('menu')};SUI.lib.NavBar.prototype.show=function(){this.navBarHeader.removeClass('hidden')};
SUI.lib.NavBar.prototype.hide=function(){this.navBarHeader.addClass('hidden')};SUI.lib.NavBar.prototype.showShadow=function(){this.navBar.addClass('shadow')};SUI.lib.NavBar.prototype.hideShadow=function(){this.navBar.removeClass('shadow')};SUI.lib.NavBar.prototype.getContainer=function(){return this.navBar};goog.provide('SUI.lib.Notification');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Query');goog.require('SUI.lib');SUI.lib.Notification=function(opt_options={}){this._setOptions(opt_options);this._init()};SUI.lib.Notification.prototype._init=function(){this.container=(new SUI.Query(this.options.id)).getItem()};
SUI.lib.Notification.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({id:'#notifications',duration:4E3,closable:['error']});_self.options.merge(opt_options)};
SUI.lib.Notification.prototype._getNotificationNode=function(type,message,opt_duration=0,opt_closeCallback=null,opt_id=''){const notificationNode=this.container.createElement('div');if(opt_id)notificationNode.setAttribute('data-id',opt_id);notificationNode.addClass(['notification',type]);notificationNode.setHtml(message);if(this._isClosable(type,opt_closeCallback)&&!SUI.eq(opt_duration,Infinity)){const buttonNode=this._getCloseButton(notificationNode,opt_closeCallback);notificationNode.beforeChild(buttonNode)}return notificationNode};
SUI.lib.Notification.prototype._getCloseButton=function(notificationNode,opt_closeCallback=null){const buttonNode=notificationNode.createElement('button');buttonNode.addClass(['mdl-button','mdl-js-button','mdl-button--icon']);const buttonIcon=buttonNode.createElement('i');buttonIcon.addClass('material-icons');buttonIcon.setHtml('close');buttonNode.appendChild(buttonIcon);buttonNode.addEventListener('click',function(){this.remove(notificationNode,opt_closeCallback)}.bind(this));SUI.mdl(buttonNode);
return buttonNode};
SUI.lib.Notification.prototype._add=function(type,message,opt_duration=0,opt_closeCallback=null,opt_id=''){this.removeNotificationNode(opt_id);const notificationNode=this._getNotificationNode(type,message,opt_duration,opt_closeCallback,opt_id);this.container.appendChild(notificationNode);if(!this._isClosable(type,opt_closeCallback)&&!SUI.eq(opt_duration,Infinity)){notificationNode.addClass('closable');notificationNode.addEventListener('click',()=>{this.remove(notificationNode,opt_closeCallback)});window.setTimeout(function(){this.remove(notificationNode,
opt_closeCallback)}.bind(this),opt_duration||this.options.duration)}return notificationNode};SUI.lib.Notification.prototype.removeNotificationNode=function(opt_id=''){if(opt_id){const selector=SUI.format('[data-id={0}]',[opt_id]);const notifications=new SUI.Query(selector,this.container);notifications.each(notification=>{this.container.removeChild(notification)})}};SUI.lib.Notification.prototype._isClosable=function(type,opt_closeCallback=null){return this.options.closable.indexOf(type)!==-1||SUI.isFunction(opt_closeCallback)};
SUI.lib.Notification.prototype.remove=function(notification,opt_closeCallback=null){if(SUI.isFunction(opt_closeCallback))opt_closeCallback();this.container.removeChild(notification)};SUI.lib.Notification.prototype.addSuccess=function(message,opt_duration=0,opt_closeCallback=null,opt_id=''){return this._add('success',message,opt_duration,opt_closeCallback,opt_id)};
SUI.lib.Notification.prototype.addInfo=function(message,opt_duration=0,opt_closeCallback=null,opt_id=''){return this._add('info',message,opt_duration,opt_closeCallback,opt_id)};SUI.lib.Notification.prototype.addWarning=function(message,opt_duration=0,opt_closeCallback=null,opt_id=''){return this._add('warning',message,opt_duration,opt_closeCallback,opt_id)};
SUI.lib.Notification.prototype.addError=function(message,opt_duration=0,opt_closeCallback=null,opt_id=''){return this._add('error',message,opt_duration,opt_closeCallback,opt_id)};SUI.lib.Notification.prototype.addMessage=function(message,opt_duration=0,opt_closeCallback=null,opt_id=''){if(SUI.isObject(message)){const closeCallback=message['closable']?SUI.noop:opt_closeCallback;return this._add(message['type'],message['content'],opt_duration,closeCallback,opt_id)}return null};
SUI.lib.Notification.prototype.addDefault=function(message,opt_duration=0,opt_closeCallback=null,opt_id=''){return this._add('default',message,opt_duration,opt_closeCallback,opt_id)};goog.provide('SUI.lib.ProgressBar');goog.require('SUI');goog.require('SUI.Async');goog.require('SUI.Object');goog.require('SUI.Query');goog.require('SUI.Node');goog.require('SUI.lib');goog.require('SUI.lib.Confirm');goog.require('SUI.lib.Dialog');SUI.lib.ProgressBar=function(dialog,confirm,opt_options={}){this.dialog=dialog;this.confirm=confirm;this._setOptions(opt_options);this._init()};
SUI.lib.ProgressBar.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({lock:false,counter:0});_self.options.merge(opt_options)};
SUI.lib.ProgressBar.prototype._init=function(){this.progressBarContainer=(new SUI.Query('.main-container > .progress-bar')).getItem();this.progressBarHeader=(new SUI.Query('#header > .progress-bar')).getItem();this.progressBarDialog=(new SUI.Query('#dialog-window > .progress-bar')).getItem();this.progressBarConfirm=(new SUI.Query('#confirm-window > .progress-bar')).getItem();this.async=new SUI.Async(4);this.async.eventComplete=(_isError,nodes)=>{if(nodes[0]['MaterialProgress'])this.mProgressContainer=
nodes[0]['MaterialProgress'];if(nodes[1]['MaterialProgress'])this.mProgressHeader=nodes[1]['MaterialProgress'];if(nodes[2]['MaterialProgress'])this.mProgressDialog=nodes[2]['MaterialProgress'];if(nodes[3]['MaterialProgress'])this.mProgressConfirm=nodes[3]['MaterialProgress'];if(this.progressValue)this.setProgress(this.progressValue);this.progressValue=0;if(this.bufferValue)this.setBuffer(this.bufferValue);this.bufferValue=0};this.progressValue=0;this.bufferValue=0;this.mProgressContainer=this._getProgressBar(this.progressBarContainer);
this.mProgressHeader=this._getProgressBar(this.progressBarHeader);this.mProgressDialog=this._getProgressBar(this.progressBarDialog);this.mProgressConfirm=this._getProgressBar(this.progressBarConfirm)};SUI.lib.ProgressBar.prototype._getProgressBar=function(node){node.addClass('mdl-js-progress');node.addEventListener('mdl-componentupgraded',node=>{this.async.parallelFunction(()=>{return node})});return{setProgress:value=>{this.progressValue=value},setBuffer:value=>{this.bufferValue=value}}};
SUI.lib.ProgressBar.prototype._separateProgressBars=function(containerCallback,headerCallback,dialogCallback,confirmCallback){containerCallback(!this.dialog.isOpened()&&!this.confirm.isOpened());headerCallback(!this.dialog.isOpened()&&!this.confirm.isOpened());dialogCallback(this.dialog.isOpened()&&!this.confirm.isOpened());confirmCallback(this.confirm.isOpened())};
SUI.lib.ProgressBar.prototype._progress=function(){if(!this.options.get('lock'))this._separateProgressBars(condition=>{if(condition)this.progressBarContainer.addClass('mdl-progress');else this.progressBarContainer.removeClass('mdl-progress')},condition=>{if(condition)this.progressBarHeader.addClass('mdl-progress');else this.progressBarHeader.removeClass('mdl-progress')},condition=>{if(condition)this.progressBarDialog.addClass('mdl-progress');else this.progressBarDialog.removeClass('mdl-progress')},
condition=>{if(condition)this.progressBarConfirm.addClass('mdl-progress');else this.progressBarConfirm.removeClass('mdl-progress')})};
SUI.lib.ProgressBar.prototype.show=function(){this._progress();this.options.counter++;this._separateProgressBars(condition=>{if(condition)this.progressBarContainer.addClass('mdl-progress__indeterminate');else this.progressBarContainer.removeClass('mdl-progress__indeterminate')},condition=>{if(condition)this.progressBarHeader.addClass('mdl-progress__indeterminate');else this.progressBarHeader.removeClass('mdl-progress__indeterminate')},condition=>{if(condition)this.progressBarDialog.addClass('mdl-progress__indeterminate');
else this.progressBarDialog.removeClass('mdl-progress__indeterminate')},condition=>{if(condition)this.progressBarConfirm.addClass('mdl-progress__indeterminate');else this.progressBarConfirm.removeClass('mdl-progress__indeterminate')})};
SUI.lib.ProgressBar.prototype.setProgress=function(value){this._progress();this._separateProgressBars(condition=>{if(condition)this.mProgressContainer.setProgress(value)},condition=>{if(condition)this.mProgressHeader.setProgress(value)},condition=>{if(condition)this.mProgressDialog.setProgress(value)},condition=>{if(condition)this.mProgressConfirm.setProgress(value)})};
SUI.lib.ProgressBar.prototype.setBuffer=function(value){this._progress();this._separateProgressBars(condition=>{if(condition)this.mProgressContainer.setBuffer(value)},condition=>{if(condition)this.mProgressHeader.setBuffer(value)},condition=>{if(condition)this.mProgressDialog.setBuffer(value)},condition=>{if(condition)this.mProgressConfirm.setBuffer(value)})};
SUI.lib.ProgressBar.prototype.hide=function(opt_force){this.options.counter--;if(opt_force||SUI.eq(this.options.counter,0)){this.options.counter=0;this.progressBarContainer.removeClass(['mdl-progress','mdl-progress__indeterminate']);this.progressBarHeader.removeClass(['mdl-progress','mdl-progress__indeterminate']);this.progressBarDialog.removeClass(['mdl-progress','mdl-progress__indeterminate']);this.progressBarConfirm.removeClass(['mdl-progress','mdl-progress__indeterminate'])}};
SUI.lib.ProgressBar.prototype.lock=function(){this.options.set('lock',true)};SUI.lib.ProgressBar.prototype.unlock=function(){this.options.set('lock',false)};goog.provide('SUI.lib.Scheduler');goog.require('SUI');goog.require('SUI.Object');goog.require('SUI.lib');SUI.lib.Scheduler=function(){this.schedulerContainer=new SUI.Object;this._callRunner()};SUI.lib.Scheduler.prototype._callRunner=function(){};SUI.lib.Scheduler.prototype.everyDay=function(time,callback){const name=time;if(SUI.isFunction(callback)){const schedulers=this.schedulerContainer.get(name,[]);schedulers.push(callback);this.schedulerContainer.set(name,schedulers)}return callback};goog.provide('SUI.lib.Script');goog.require('SUI');goog.require('SUI.Deferred');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Promise');goog.require('SUI.Query');goog.require('SUI.lib');goog.require('SUI.lib.ProgressBar');SUI.lib.Script=function(progressBar,opt_options={}){this.progressBar=progressBar;this._setOptions(opt_options);this._init()};SUI.lib.Script.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object;_self.options.merge(opt_options)};
SUI.lib.Script.prototype._init=function(){this.head=(new SUI.Query('head')).getItem()};
SUI.lib.Script.prototype.load=function(id,url,opt_params){this.progressBar.show();const deferred=new SUI.Deferred;const script=new SUI.Query('#'+id);if(script.size()>0){this.progressBar.hide();deferred.resolve()}else{const node=new SUI.Node('script');node.setId(id);const urlWithQueryString=SUI.urlWithQueryString(url,opt_params);node.setAttribute('src',urlWithQueryString);node.setAttribute('onload',()=>{this.progressBar.hide();deferred.resolve()});node.setAttribute('onerror',()=>{this.progressBar.hide();
deferred.reject()});this.head.appendChild(node)}return deferred.promise()};SUI.lib.Script.prototype.remove=function(id){const script=(new SUI.Query('#'+id)).getItem();if(!script.isEmpty())script.remove()};goog.provide('SUI.lib.ServiceWorker');goog.require('SUI');goog.require('SUI.lib');SUI.lib.ServiceWorker=function(){this._init()};SUI.lib.ServiceWorker.prototype._init=function(){if('serviceWorker'in navigator);else this.eventMissingFeatures(['navigator.serviceWorker'])};SUI.lib.ServiceWorker.prototype.eventMissingFeatures=function(features){console.warn('SUI.lib.ServiceWorker.eventMissingFeatures()',features)};goog.provide('SUI.lib.Sidebar');goog.require('SUI.Query');goog.require('SUI.lib');SUI.lib.Sidebar=function(selector){this.selector=selector;this._init()};SUI.lib.Sidebar.prototype._init=function(){this.sidebar=(new SUI.Query(this.selector)).getItem();this.button=(new SUI.Query('a',this.sidebar)).getItem();this.button.setAttribute('href','javascript:void(0)');this.button.addEventListener('click',function(){this.toggle()}.bind(this))};
SUI.lib.Sidebar.prototype.toggle=function(){if(this.isOpened())this.close();else this.open()};SUI.lib.Sidebar.prototype.isOpened=function(){return this.sidebar.hasClass('open')};SUI.lib.Sidebar.prototype.open=function(){this.sidebar.addClass('open')};SUI.lib.Sidebar.prototype.close=function(){this.sidebar.removeClass('open')};SUI.lib.Sidebar.prototype.show=function(){this.sidebar.removeClass('hidden')};SUI.lib.Sidebar.prototype.hide=function(){this.sidebar.addClass('hidden')};
SUI.lib.Sidebar.prototype.setButtonPosition=function(scrollTop,windowHeight){const height=Math.round(scrollTop+windowHeight/2);this.button.setStyle({'top':height+'px'})};goog.provide('SUI.lib.Storage');goog.require('SUI');goog.require('SUI.Object');goog.require('SUI.lib');SUI.lib.Storage=function(options){const _self=this;_self.options=new SUI.Object({type:'local',prefix:'app',secret:'',hours:24*7,interval:60*1E3});_self.options.merge(options);this._init()};SUI.lib.Storage.prototype._init=function(){this.storage=this.options.type==='local'?window.localStorage:window.sessionStorage;setInterval(()=>{this._checkExpires()},this.options.interval)};
SUI.lib.Storage.prototype._getPropertyName=function(name){return[this.options.prefix,name].join('.')};SUI.lib.Storage.prototype._getName=function(propertyName){const parts=propertyName.split('.');parts.shift();return parts.join('.')};SUI.lib.Storage.prototype.set=function(name,value,opt_expires){const expires=this._getExpires(opt_expires);const encrypted=expires+';'+SUI.encrypt(value,this.options.secret);const propertyName=this._getPropertyName(name);this.storage.setItem(propertyName,encrypted)};
SUI.lib.Storage.prototype.get=function(name){const propertyName=this._getPropertyName(name);const item=this.storage.getItem(propertyName);let result=null;if(item&&item.indexOf(';')!==-1){const encrypted=item.split(';',2)[1]||SUI.encrypt(null,this.options.secret);const decrypted=SUI.decrypt(encrypted,this.options.secret);result=SUI.typeCast(decrypted)}return result};SUI.lib.Storage.prototype.remove=function(name){const propertyName=this._getPropertyName(name);this.storage.removeItem(propertyName)};
SUI.lib.Storage.prototype.clear=function(){this.storage.clear()};SUI.lib.Storage.prototype._checkExpires=function(){const properyNames=Object.keys(this.storage);SUI.eachArray(properyNames,properyName=>{const name=this._getName(properyName);const isExpired=this._isExpired(name);if(isExpired)this.remove(name)})};SUI.lib.Storage.prototype._isExpired=function(name){const date=new Date;const expireDate=this._getExpiresDate(name);return!!expireDate&&date.getTime()>=expireDate.getTime()};
SUI.lib.Storage.prototype._getExpiresDate=function(name){const propertyName=this._getPropertyName(name);const item=this.storage.getItem(propertyName);if(item){const utcString=item.split(';',2)[0];return new Date(utcString)}return null};
SUI.lib.Storage.prototype._getExpires=function(opt_expires){const date=new Date;if(opt_expires)switch(opt_expires.constructor){case Number:date.setTime(date.getTime()+opt_expires*60*60*1E3);opt_expires=opt_expires===Infinity?'Fri, 31 Dec 9999 23:59:59 GMT':date.toUTCString();break;case Date:opt_expires=opt_expires.toUTCString();break;default:break}else{date.setTime(date.getTime()+this.options.hours*60*60*1E3);opt_expires=date.toUTCString()}return opt_expires};goog.provide('SUI.lib.Style');goog.require('SUI');goog.require('SUI.Deferred');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Promise');goog.require('SUI.Query');goog.require('SUI.lib');goog.require('SUI.lib.ProgressBar');SUI.lib.Style=function(progressBar,opt_options={}){this.progressBar=progressBar;this._setOptions(opt_options);this._init()};SUI.lib.Style.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object;_self.options.merge(opt_options)};
SUI.lib.Style.prototype._init=function(){this.head=(new SUI.Query('head')).getItem()};
SUI.lib.Style.prototype.load=function(id,url,opt_params,opt_rel='stylesheet',opt_media='all'){this.progressBar.show();const deferred=new SUI.Deferred;const style=new SUI.Query('#'+id);if(style.size()>0){this.progressBar.hide();deferred.resolve(true)}else{const node=new SUI.Node('link');node.setId(id);const urlWithQueryString=SUI.urlWithQueryString(url,opt_params);node.setAttribute('href',urlWithQueryString);node.setAttribute('rel',opt_rel);node.setAttribute('media',opt_media);node.setAttribute('onload',
()=>{this.progressBar.hide();deferred.resolve(true)});node.setAttribute('onerror',()=>{this.progressBar.hide();deferred.reject(false)});this.head.appendChild(node)}return deferred.promise()};SUI.lib.Style.prototype.remove=function(id){const style=(new SUI.Query('#'+id)).getItem();if(!style.isEmpty())style.remove()};goog.provide('SUI.lib.Template');goog.require('SUI');goog.require('SUI.Deferred');goog.require('SUI.Object');goog.require('SUI.Promise');goog.require('SUI.Query');goog.require('SUI.Node');goog.require('SUI.lib');goog.require('SUI.lib.Http');SUI.lib.Template=function(http,opt_options={}){this.http=http;this._setOptions(opt_options);this._init()};
SUI.lib.Template.prototype._setOptions=function(opt_options){const _self=this;_self.options=new SUI.Object({selector:'.template-view',locale:navigator.language});_self.options.merge(opt_options)};SUI.lib.Template.prototype._init=function(){this.viewNode=(new SUI.Query(this.options.selector)).getItem()};SUI.lib.Template.prototype.getViewNode=function(){return this.viewNode};
SUI.lib.Template.prototype.load=function(url,opt_force=false){const deferred=new SUI.Deferred;const templateUrl=this.viewNode.getAttribute('data-template-url');const locale=this.viewNode.getAttribute('data-locale');if(!opt_force&&SUI.contain(this.options.locale,locale)&&templateUrl===url){this.viewNode.removeAttribute('data-locale');const node=(new SUI.Query('.page-content',this.viewNode)).getItem();deferred.resolve(node)}else{this.viewNode.setAttribute('data-template-url',url);this.http.get(url).then(data=>
{deferred.resolve(this._handleData(data,false))},data=>{deferred.reject(this._handleData(data,true))})}return deferred.promise()};SUI.lib.Template.prototype._handleData=function(data,error){const node=(new SUI.Query('.page-content',data)).getItem();if(error){const messageItem=(new SUI.Query('.message',node)).getItem();const message={'content':messageItem.getText(),'type':messageItem.getAttribute('class').split(' ')[1]};this.eventError(message)}else this.viewNode.insert(node);return node};
SUI.lib.Template.prototype.eventError=function(message){console.warn('SUI.lib.Template.eventError()',message)};goog.provide('SUI.lib.TopMenu');goog.require('SUI.Node');goog.require('SUI.Query');goog.require('SUI.lib');goog.require('SUI.lib.Header');SUI.lib.TopMenu=function(header){this.header=header;this._init()};
SUI.lib.TopMenu.prototype._init=function(){this.topMenu=(new SUI.Query('#top-menu',this.header.headerNode)).getItem();this.toggleTopMenu=(new SUI.Query('#toggle-top-menu',this.header.headerNode)).getItem();this.toggleTopMenu.setAttribute('href','javascript:void(0)');this.toggleTopMenu.addEventListener('click',()=>{this.toggle()})};SUI.lib.TopMenu.prototype.toggle=function(){if(this.isOpened())this.close();else this.open()};SUI.lib.TopMenu.prototype.isOpened=function(){return this.topMenu.hasClass('visible-flex')};
SUI.lib.TopMenu.prototype.open=function(){this.header.open();this.topMenu.addClass('visible-flex');this.toggleTopMenu.addClass('active');this.header.showShadow()};SUI.lib.TopMenu.prototype.close=function(){this.header.close();this.topMenu.removeClass('visible-flex');this.toggleTopMenu.removeClass('active');this.header.hideShadow()};SUI.lib.TopMenu.prototype.getContainer=function(){return this.topMenu};goog.provide('SUI.lib.Viewer');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Query');goog.require('SUI.Tooltip');goog.require('SUI.lib');goog.require('SUI.lib.BaseModal');SUI.lib.Viewer=function(opt_options={}){this._setOptions(opt_options);this._init();this._initBase()};goog.inherits(SUI.lib.Viewer,SUI.lib.BaseModal);SUI.lib.Viewer.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({id:'#viewer'});_self.options.merge(opt_options)};
SUI.lib.Viewer.prototype._init=function(){this.body=(new SUI.Query('body')).getItem();this.modal=(new SUI.Query(this.options.id,this.body)).getItem();this.modalWindow=(new SUI.Query('#viewer-window',this.modal)).getItem();this.modalHeader=(new SUI.Query('.modal-header',this.modal)).getItem();this.modalTitle=(new SUI.Query('.modal-title',this.modalHeader)).getItem();this.modalBody=(new SUI.Query('.modal-body',this.modal)).getItem();this.modalFooter=(new SUI.Query('.modal-footer',this.modal)).getItem();
this.tooltip=new SUI.Tooltip(this.modalTitle,'BOTTOM');this.tooltip.render()};SUI.lib.Viewer.prototype.loadImage=function(imageUrl,opt_title=''){this._reset();this._setImage(imageUrl);this._setTitle(opt_title);this.open()};SUI.lib.Viewer.prototype._setImage=function(imageUrl){const imageNode=new SUI.Node('img');imageNode.setAttribute('src',imageUrl);this.modalBody.appendChild(imageNode)};goog.provide('SUI.lib.Window');goog.require('SUI');goog.require('SUI.Object');goog.require('SUI.lib');SUI.lib.Window=function(opt_options={}){this._setOptions(opt_options);this._init()};SUI.lib.Window.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({delay:250});_self.options.merge(opt_options)};
SUI.lib.Window.prototype._init=function(){this.window=window;this.document=document;this.orientation=this.getOrientation();this._initResizeEvent();this._initScrollEvent();this._initConnectionEvent();this._initColorSchemeEvent()};SUI.lib.Window.prototype._initResizeEvent=function(){this.window.addEventListener('resize',SUI.debounce(event=>{this._resize(event)},this.options.delay),false)};
SUI.lib.Window.prototype._initScrollEvent=function(){this.window.addEventListener('scroll',SUI.debounce(event=>{this._scroll(event)},this.options.delay),false)};SUI.lib.Window.prototype._initConnectionEvent=function(){this.window.addEventListener('online',event=>{this.eventOnline(event)},false);this.window.addEventListener('offline',event=>{this.eventOffline(event)},false)};SUI.lib.Window.prototype.eventOffline=function(event){console.warn('SUI.Window.eventOffline()',event)};
SUI.lib.Window.prototype.eventOnline=function(event){console.warn('SUI.Window.eventOffline()',event)};SUI.lib.Window.prototype.eventResize=function(width,height,event){console.warn('SUI.Window.eventResize()',width,height,event)};SUI.lib.Window.prototype.eventOrientationChange=function(orientation,width,height,event){console.warn('SUI.Window.eventOrientationChange()',orientation,width,height,event)};
SUI.lib.Window.prototype.eventScroll=function(scrollTop,event){console.warn('SUI.Window.eventScroll()',scrollTop,event)};SUI.lib.Window.prototype._resize=function(event){this.eventResize(this.getWidth(),this.getHeight(),event);const orientation=this.getOrientation();if(SUI.neq(this.orientation,orientation)){this.orientation=orientation;this.eventOrientationChange(this.orientation,this.getWidth(),this.getHeight(),event)}};
SUI.lib.Window.prototype._scroll=function(event){this.eventScroll(this.getScrollTop(),event)};SUI.lib.Window.prototype.getScrollTop=function(){return this.document.documentElement.scrollTop||this.document.body.scrollTop};SUI.lib.Window.prototype.getWidth=function(){return this.window.innerWidth};SUI.lib.Window.prototype.getHeight=function(){return this.window.innerHeight};SUI.lib.Window.prototype.getOrientation=function(){return SUI.gte(this.getWidth(),this.getHeight())?'landscape':'portrait'};
SUI.lib.Window.prototype._initColorSchemeEvent=function(){if(window.matchMedia)window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change',event=>{if(event.matches)this.eventColorSchemeChange('dark',event);else this.eventColorSchemeChange('light',event)})};SUI.lib.Window.prototype.eventColorSchemeChange=function(colorScheme,event){console.warn('SUI.Window.eventColorSchemeChange()',colorScheme,event)};SUI.lib.Window.prototype.isColorScheme=function(type){return window.matchMedia&&window.matchMedia(`(prefers-color-scheme: ${type})`).matches};goog.provide('SUI.Application');goog.require('SUI');goog.require('SUI.PopupContainer');goog.require('SUI.Module');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Promise');goog.require('SUI.Query');goog.require('SUI.Test');goog.require('SUI.lib.ActionCable');goog.require('SUI.lib.BottomMenu');goog.require('SUI.lib.Browser');goog.require('SUI.lib.Confirm');goog.require('SUI.lib.Console');goog.require('SUI.lib.Cookie');goog.require('SUI.lib.Dialog');goog.require('SUI.lib.Document');
goog.require('SUI.lib.Event');goog.require('SUI.lib.Footer');goog.require('SUI.lib.GeoLocation');goog.require('SUI.lib.Header');goog.require('SUI.lib.Helper');goog.require('SUI.lib.Http');goog.require('SUI.lib.LeftMenu');goog.require('SUI.lib.Loader');goog.require('SUI.lib.NavBar');goog.require('SUI.lib.Notification');goog.require('SUI.lib.ProgressBar');goog.require('SUI.lib.Scheduler');goog.require('SUI.lib.Script');goog.require('SUI.lib.ServiceWorker');goog.require('SUI.lib.Sidebar');goog.require('SUI.lib.Storage');
goog.require('SUI.lib.Style');goog.require('SUI.lib.Template');goog.require('SUI.lib.TopMenu');goog.require('SUI.lib.Viewer');goog.require('SUI.lib.Window');SUI.Application=function(options,resources){this._setOptions(options);this._init(resources)};
SUI.Application.prototype._setOptions=function(options){const _self=this;_self.options=new SUI.Object({app_id:'sui-app',title:'SUI-APP',locale:navigator.language,backend:'',production:false,secret:'f74pej3qpb9qmpvregu7ef33m5w6f6qz',log_color:'#3f51b5'});_self.options.merge(options)};
SUI.Application.prototype._init=function(resources){this.types={};this._injections=resources;this._instances={};this._initCertificate();this._initApp();this._initRoutes();this._initStorage();this._initLocale();this._initModule();this._initEvent();this._initScheduler();this._initLoader();this._initHttp();this._initDialog();this._initConfirm();this._initViewer();this._initProgressBar();this._initCookie();this._initNotification();this._initTemplate();this._initDocument();this._initWindow();this._initHelper();
this._initHeader();this._initTopMenu();this._initLeftMenu();this._initNavBar();this._initSidebar();this._initFooter();this._initBottomMenu();this._initBrowser();this._initGeoLocation();this._initScript();this._initStyle();this._initConfig();this._initConsole();this._initServiceWorker();this._initActionCable();this._loadModules()};SUI.Application.prototype.getLanguage=function(){const locale=this.getLocale();return locale.split('-',2)[0]};
SUI.Application.prototype.getLocale=function(){let locale=this._instances[this._injections.localStorage].get('app.locale');if(!locale)locale=this.options.locale;return locale};SUI.Application.prototype.setLocale=function(locale){this._instances[this._injections.localStorage].set('app.locale',locale);this.options.locale=locale};SUI.Application.prototype.setLocaleWithReload=function(locale){this.setLocale(locale);this._instances[this._injections.state].reload()};
SUI.Application.prototype._initLocale=function(){const locale=this.getLocale();window['moment']['locale'](locale);this.setLocale(locale)};SUI.Application.prototype._initCertificate=function(){const rootNode=(new SUI.Query('html')).getItem();rootNode.addClass('sui-js')};
SUI.Application.prototype._initModule=function(){this._module=new SUI.Module;this._module.eventAfterInit=()=>{this._instances[this._injections.progressBar].lock();this._instances[this._injections.loader].show();this._instances[this._injections.event].call('module.afterInit')};this._module.eventStateChange=currentState=>{this._instances[this._injections.progressBar].lock();this._instances[this._injections.loader].show();this._instances[this._injections.dialog].close();this._instances[this._injections.confirm].close();
this._instances[this._injections.actionCable].unsubscribeAll();return this._instances[this._injections.event].call('state.change',[currentState])};this._module.eventDomChange=(state,dom)=>{return this._instances[this._injections.event].call('dom.change',[state,dom])};this._module.eventServiceLoaded=()=>{this._instances[this._injections.browser].detect();this._instances[this._injections.event].call('module.serviceLoaded')};this._module.eventServiceFailed=()=>{this._instances[this._injections.event].call('module.serviceFailed')};
this._module.eventModuleLoaded=state=>{this._instances[this._injections.progressBar].unlock();this._instances[this._injections.loader].hide(true);this._instances[this._injections.event].call('module.loaded',[state])};this._module.eventModuleFailed=state=>{this._instances[this._injections.progressBar].unlock();this._instances[this._injections.loader].hide(true);this._instances[this._injections.event].call('module.failed',[state])};this._module.eventControllerLoaded=dom=>{this._instances[this._injections.event].call('controller.loaded',
[dom])};this._module.eventControllerFailed=()=>{this._instances[this._injections.event].call('controller.failed',[])}};SUI.Application.prototype._loadModules=function(){this._module.load(this._instances,this._injections)};SUI.Application.prototype._initScript=function(){this._instances[this._injections.script]=new SUI.lib.Script(this._instances[this._injections.progressBar])};SUI.Application.prototype._initStyle=function(){this._instances[this._injections.style]=new SUI.lib.Style(this._instances[this._injections.progressBar])};
SUI.Application.prototype._initConsole=function(){this._instances[this._injections.console]=new SUI.lib.Console(this._instances[this._injections.config])};SUI.Application.prototype._initConfig=function(){this._instances[this._injections.config]=this.options};SUI.Application.prototype._initApp=function(){this._instances[this._injections.app]=this};
SUI.Application.prototype._initGeoLocation=function(){this._instances[this._injections.geoLocation]=new SUI.lib.GeoLocation;this._instances[this._injections.geoLocation].eventChange=(latitude,longitude,message)=>{this._instances[this._injections.event].override('geoLocation.success',[message],message=>{this._instances[this._injections.notification].addInfo(message)});this._instances[this._injections.event].call('geoLocation.change',[latitude,longitude])};this._instances[this._injections.geoLocation].eventError=
(message,code)=>{this._instances[this._injections.event].override('geoLocation.error',[message,code],message=>{this._instances[this._injections.notification].addError(message)})}};SUI.Application.prototype._initCookie=function(){this._instances[this._injections.cookie]=new SUI.lib.Cookie({prefix:this.options.app_id})};SUI.Application.prototype._initLoader=function(){this._instances[this._injections.loader]=new SUI.lib.Loader};
SUI.Application.prototype._initProgressBar=function(){this._instances[this._injections.progressBar]=new SUI.lib.ProgressBar(this._instances[this._injections.dialog],this._instances[this._injections.confirm])};
SUI.Application.prototype._initStorage=function(){this._instances[this._injections.localStorage]=new SUI.lib.Storage({type:'local',prefix:this.options.app_id,secret:this.options.secret});this._instances[this._injections.sessionStorage]=new SUI.lib.Storage({type:'session',prefix:this.options.app_id,secret:this.options.secret})};SUI.Application.prototype._initHelper=function(){this._instances[this._injections.helper]=new SUI.lib.Helper};
SUI.Application.prototype._initDocument=function(){const popupContainer=new SUI.PopupContainer;this._instances[this._injections.document]=new SUI.lib.Document(this.options);this._instances[this._injections.document].eventClick=function(target,event){popupContainer.closeAll();this._instances[this._injections.event].call('document.click',[target,event])}.bind(this)};
SUI.Application.prototype._initWindow=function(){this._instances[this._injections.window]=new SUI.lib.Window;const width=this._instances[this._injections.window].getWidth();const height=this._instances[this._injections.window].getHeight();this._instances[this._injections.dialog].setSize(width,height);this._instances[this._injections.confirm].setSize(width,height);this._instances[this._injections.viewer].setSize(width,height);this._instances[this._injections.window].eventResize=function(width,height,
event){this._instances[this._injections.dialog].setSize(width,height);this._instances[this._injections.confirm].setSize(width,height);this._instances[this._injections.viewer].setSize(width,height);this._instances[this._injections.event].call('window.resize',[width,height,event])}.bind(this);this._instances[this._injections.window].eventOrientationChange=function(orientation,width,height,event){this._instances[this._injections.dialog].setSize(width,height);this._instances[this._injections.confirm].setSize(width,
height);this._instances[this._injections.viewer].setSize(width,height);this._instances[this._injections.event].call('window.orientationChange',[orientation,width,height,event])}.bind(this);this._instances[this._injections.window].eventScroll=function(scrollTop,event){this._instances[this._injections.event].call('window.scroll',[scrollTop,event])}.bind(this);this._instances[this._injections.window].eventColorSchemeChange=function(colorScheme,event){this._instances[this._injections.event].call('window.colorSchemeChange',
[colorScheme,event])}.bind(this);const notification={node:null,message:'Unable to connect to the Internet',duration:Infinity};this._instances[this._injections.window].eventOnline=function(){if(notification.node)this._instances[this._injections.notification].remove(notification.node)}.bind(this);this._instances[this._injections.window].eventOffline=function(event){this._instances[this._injections.event].override('window.offline',[notification,event],function(notification){notification.node=this._instances[this._injections.notification].addWarning(notification.message,
notification.duration)}.bind(this))}.bind(this)};SUI.Application.prototype._initEvent=function(){this._instances[this._injections.event]=new SUI.lib.Event};SUI.Application.prototype._initScheduler=function(){this._instances[this._injections.scheduler]=new SUI.lib.Scheduler};
SUI.Application.prototype._initHttp=function(){this._instances[this._injections.http]=new SUI.lib.Http(this.options);this._instances[this._injections.http].eventBeforeRequest=function(...params){this._instances[this._injections.progressBar].show();this._instances[this._injections.event].call('http.beforeRequest',params)}.bind(this);this._instances[this._injections.http].eventAfterRequest=function(...params){this._instances[this._injections.event].call('http.afterRequest',params);this._instances[this._injections.progressBar].hide()}.bind(this)};
SUI.Application.prototype._initTemplate=function(){this._instances[this._injections.template]=new SUI.lib.Template(this._instances[this._injections.http],{locale:this.getLocale()});this._instances[this._injections.template].eventError=function(message){this._instances[this._injections.state].back();this._instances[this._injections.loader].hide();this._instances[this._injections.notification].addMessage(message)}.bind(this)};
SUI.Application.prototype._initNotification=function(){this._instances[this._injections.notification]=new SUI.lib.Notification};SUI.Application.prototype._initDialog=function(){this._instances[this._injections.dialog]=new SUI.lib.Dialog(this._instances[this._injections.http])};SUI.Application.prototype._initConfirm=function(){this._instances[this._injections.confirm]=new SUI.lib.Confirm};SUI.Application.prototype._initViewer=function(){this._instances[this._injections.viewer]=new SUI.lib.Viewer};
SUI.Application.prototype._initHeader=function(){this._instances[this._injections.header]=new SUI.lib.Header};SUI.Application.prototype._initTopMenu=function(){this._instances[this._injections.topMenu]=new SUI.lib.TopMenu(this._instances[this._injections.header])};SUI.Application.prototype._initNavBar=function(){this._instances[this._injections.navBar]=new SUI.lib.NavBar};SUI.Application.prototype._initBottomMenu=function(){this._instances[this._injections.bottomMenu]=new SUI.lib.BottomMenu(this._instances[this._injections.footer])};
SUI.Application.prototype._initSidebar=function(){this._instances[this._injections.leftSidebar]=new SUI.lib.Sidebar('#left-sidebar');this._instances[this._injections.rightSidebar]=new SUI.lib.Sidebar('#right-sidebar')};SUI.Application.prototype._initLeftMenu=function(){this._instances[this._injections.leftMenu]=new SUI.lib.LeftMenu};SUI.Application.prototype._initFooter=function(){this._instances[this._injections.footer]=new SUI.lib.Footer};
SUI.Application.prototype._initBrowser=function(){this._instances[this._injections.browser]=new SUI.lib.Browser;this._instances[this._injections.browser].eventMissingFeatures=features=>{this._instances[this._injections.notification].addError(features.join(', '))}};SUI.Application.prototype._initServiceWorker=function(){this._instances[this._injections.serviceWorker]=new SUI.lib.ServiceWorker;this._instances[this._injections.serviceWorker].eventMissingFeatures=features=>{this._instances[this._injections.notification].addError(features.join(', '))}};
SUI.Application.prototype._initActionCable=function(){this._instances[this._injections.actionCable]=new SUI.lib.ActionCable};SUI.Application.prototype._initRoutes=function(){this._routes=[];this._routeOptions=new SUI.Object};SUI.Application.prototype.addState=function(id,title,url,controller,opt_template='',opt_params={}){const state=new SUI.Object(opt_params);state.set('id',id);state.set('title',title);state.set('url',url);state.set('controller',controller);state.set('template',opt_template);this._routes.push(state)};
SUI.Application.prototype.setRootState=function(id,opt_params){this._routeOptions.set('root.id',id);this._routeOptions.set('root.params',opt_params)};SUI.Application.prototype.setHomeState=function(id,opt_params){this._routeOptions.set('home.id',id);this._routeOptions.set('home.params',opt_params)};SUI.Application.prototype.getInstance=function(name){return this._instances[name]};SUI.Application.prototype.getController=function(){return this._module.getController()};
SUI.Application.prototype.run=function(){if(this.options.production)console.info('%cApplication run in production environment...',`font-weight:bold;color:${this.options.log_color};`);else{console.info('%cApplication run in development environment...',`font-weight:bold;color:${this.options.log_color};`);const test=new SUI.Test;test.run()}this._module.handleRoutes(this._routes,this._routeOptions);this._module.handleServices()};
SUI.Application.prototype.controller=function(name,moduleInjections,moduleCallback,opt_extendModule){this._module.add(name,moduleInjections,moduleCallback,opt_extendModule)};SUI.Application.prototype.service=function(name,moduleInjections,moduleCallback,opt_extendModule){this._module.add(name,moduleInjections,moduleCallback,opt_extendModule)};SUI.Application.prototype.factory=function(name,moduleInjections,moduleCallback,opt_extendModule){this.service(name,moduleInjections,moduleCallback,opt_extendModule)};goog.provide('SUI.widget');goog.require('SUI');SUI.widget=function(){};goog.provide('SUI.Day');goog.require('SUI.Node');SUI.Day=function(date,currentDate,options){this.date=window['moment'](date,'YYYY-MM-DD');this.currentDate=currentDate;this._setOptions(options);this._init()};SUI.Day.prototype._setOptions=function(options){this.options=options};
SUI.Day.prototype._init=function(){const current=window['moment'](this.date)['isSame'](this.currentDate['format']('YYYY-MM-DD'))?'current':null;const now=window['moment'](this.date)['isSame'](window['moment']()['format']('YYYY-MM-DD'))?'now':null;this.cssClasses=['day',this.options.css_class,now,current]};
SUI.Day.prototype.getNode=function(){const node=new SUI.Node('span');node.addClass(this.cssClasses);const text=parseInt(this.date['format']('DD'),10);node.setHtml(text);node.addEventListener('click',()=>{this.eventClick(this.date)});return node};SUI.Day.prototype.eventClick=function(date){console.warn('SUI.Day.eventClick()',date)};goog.provide('SUI.Month');goog.require('SUI.Node');SUI.Month=function(date,currentDate,options){this.date=window['moment'](date,'YYYY-MM-DD');this.currentDate=currentDate;this._setOptions(options);this._init()};SUI.Month.prototype._setOptions=function(options){this.options=options};
SUI.Month.prototype._init=function(){const current=this.date['format']('YYYY-MM')===this.currentDate['format']('YYYY-MM')?'current':null;const now=this.date['format']('YYYY-MM')===window['moment']()['format']('YYYY-MM')?'now':null;this.cssClasses=['month',this.options.css_class,now,current]};
SUI.Month.prototype.getNode=function(){const node=new SUI.Node('span');node.addClass(this.cssClasses);const i=this.date['month']();const text=window['moment']['monthsShort'](i);node.setHtml(text);node.addEventListener('click',()=>{this.eventClick(this.date)});return node};SUI.Month.prototype.eventClick=function(date){console.warn('SUI.Month.eventClick()',date)};goog.provide('SUI.Year');goog.require('SUI.Node');SUI.Year=function(date,currentDate,options){this.date=window['moment'](date,'YYYY-MM-DD');this.currentDate=currentDate;this._setOptions(options);this._init()};SUI.Year.prototype._setOptions=function(options){this.options=options};
SUI.Year.prototype._init=function(){const current=this.date['format']('YYYY')===this.currentDate['format']('YYYY')?'current':null;const now=this.date['format']('YYYY')===window['moment']()['format']('YYYY')?'now':null;this.cssClasses=['year',this.options.css_class,now,current]};
SUI.Year.prototype.getNode=function(){const node=new SUI.Node('span');node.addClass(this.cssClasses);const text=parseInt(this.date['format']('YYYY'),10);node.setHtml(text);node.addEventListener('click',()=>{this.eventClick(this.date)});return node};SUI.Year.prototype.eventClick=function(date){console.warn('SUI.Year.eventClick()',date)};goog.provide('SUI.Calendar');goog.require('SUI.Day');goog.require('SUI.Month');goog.require('SUI.Node');goog.require('SUI.Year');SUI.Calendar=function(node,options){this.calendarNode=node;this._setOptions(options);this._init()};SUI.Calendar.prototype._setOptions=function(options){this.options=options};
SUI.Calendar.prototype._init=function(){this.maxDays=6*7;this.maxMonths=12;this.maxYears=16;this.modes=['YEAR','MONTH','DAY'];this.types={'date':this.modes[2],'month':this.modes[1],'year':this.modes[0],'week':this.modes[2],'range':this.modes[2]};this._initStructure()};SUI.Calendar.prototype._initStructure=function(){this._initHeaderNode();this._initContentNode();this._initMode(this.types[this.options.type]);const date=window['moment'](this.options.date);this._setSelectedDate(date);this._setDate(date)};
SUI.Calendar.prototype._initHeaderNode=function(){this.headerNode=new SUI.Node('div');this.headerNode.addClass('header');this.calendarNode.appendChild(this.headerNode);const previousButton=new SUI.Node('a');previousButton.setAttribute('href','javascript:void(0)');previousButton.addClass(['previous','mdl-button','mdl-js-button','mdl-button--icon']);const prevIconNode=new SUI.Node('i');prevIconNode.addClass('material-icons');prevIconNode.setHtml('chevron_left');previousButton.appendChild(prevIconNode);
previousButton.addEventListener('click',this._previous.bind(this));this.headerNode.appendChild(previousButton);this.currentModeNode=new SUI.Node('span');this.currentModeNode.addClass('current-mode');this.currentModeNode.addEventListener('click',()=>{this._changeMode(-1);this.draw()});this.headerNode.appendChild(this.currentModeNode);const nextButton=new SUI.Node('a');nextButton.setAttribute('href','javascript:void(0)');nextButton.addClass(['previous','mdl-button','mdl-js-button','mdl-button--icon']);
const nextIconNode=new SUI.Node('i');nextIconNode.addClass('material-icons');nextIconNode.setHtml('chevron_right');nextButton.appendChild(nextIconNode);nextButton.addEventListener('click',this._next.bind(this));this.headerNode.appendChild(nextButton)};SUI.Calendar.prototype._initContentNode=function(){this.contentNode=new SUI.Node('div');this.contentNode.addClass('content');this.calendarNode.appendChild(this.contentNode)};
SUI.Calendar.prototype._changeMode=function(direction){const mode=this._getMode(direction);this._initMode(mode)};SUI.Calendar.prototype._getMode=function(direction){let position=this.modes.indexOf(this.activeMode);if(position!==-1)position+=direction;const mode=this.modes[position];return mode?mode:this.types[this.options.type]};
SUI.Calendar.prototype._switchMode=function(dayFun,monthFun,yearFun){let result=null;switch(this.activeMode){case 'DAY':result=dayFun();break;case 'MONTH':result=monthFun();break;case 'YEAR':result=yearFun();break;default:break}return result};SUI.Calendar.prototype._initMode=function(mode){this.contentNode.removeChildren();this.activeMode=mode;this._switchMode(this._initDaysMode.bind(this),this._initMonthsMode.bind(this),this._initYearsMode.bind(this))};
SUI.Calendar.prototype._initYearsMode=function(){this.yearsNode=new SUI.Node('div');this.yearsNode.addClass('years');this.contentNode.appendChild(this.yearsNode)};SUI.Calendar.prototype._initMonthsMode=function(){this.monthsNode=new SUI.Node('div');this.monthsNode.addClass('months');this.contentNode.appendChild(this.monthsNode)};
SUI.Calendar.prototype._initDaysMode=function(){this.weekDaysNode=new SUI.Node('div');this.weekDaysNode.addClass('week-days');this.contentNode.appendChild(this.weekDaysNode);this.daysNode=new SUI.Node('div');this.daysNode.addClass('days');this.contentNode.appendChild(this.daysNode)};
SUI.Calendar.prototype._previous=function(){const date=this._switchMode(()=>{return this.previous.month},()=>{return this.previous.year},()=>{let date=this.current.day['clone']()['subtract'](this.maxYears,'years');if(date['year']()<0)date=this.current.day['clone']();return date});this._setDate(date);this.draw()};
SUI.Calendar.prototype._next=function(){const date=this._switchMode(()=>{return this.next.month},()=>{return this.next.year},()=>{return this.current.day['clone']()['add'](this.maxYears,'years')});this._setDate(date);this.draw()};SUI.Calendar.prototype._setDate=function(date){this._setVariables(date);this._setPreviousMonth();this._setCurrentMonth();this._setNextMonth()};
SUI.Calendar.prototype._setVariables=function(date){this.days=[];this.previous={day:window['moment'](date)['subtract'](1,'days'),month:window['moment'](date)['subtract'](1,'months'),year:window['moment'](date)['subtract'](1,'years')};this.current={day:window['moment'](date)};this.next={day:window['moment'](date)['add'](1,'days'),month:window['moment'](date)['add'](1,'months'),year:window['moment'](date)['add'](1,'years')}};
SUI.Calendar.prototype.draw=function(){this._switchMode(this._drawDaysStructure.bind(this),this._drawMonthsStructure.bind(this),this._drawYearsStructure.bind(this))};SUI.Calendar.prototype._drawDaysStructure=function(){this._drawHeader('YYYY MMMM');this._drawWeekDays();this._drawDays()};SUI.Calendar.prototype._drawMonthsStructure=function(){this._drawHeader('YYYY');this._drawMonths()};SUI.Calendar.prototype._drawYearsStructure=function(){this._drawHeader(null);this._drawYears()};
SUI.Calendar.prototype._drawHeader=function(format){this.currentModeNode.removeChildren();const text=format?this.current.day['format'](format):'';this.currentModeNode.setHtml(text)};SUI.Calendar.prototype._drawMonths=function(){this.monthsNode.removeChildren();for(let i=0;i<this.maxMonths;i++){const month=new SUI.Month(this.current.day['clone']()['month'](i),this.selectedDate,{});month.eventClick=this._onClick.bind(this);const node=month.getNode();this.monthsNode.appendChild(node)}};
SUI.Calendar.prototype._drawYears=function(){this.yearsNode.removeChildren();const startYear=this.current.day['year']()-this.current.day['year']()%this.maxYears;for(let i=startYear;i<startYear+this.maxYears;i++){const year=new SUI.Year(this.current.day['clone']()['year'](i),this.selectedDate,{});year.eventClick=this._onClick.bind(this);const node=year.getNode();this.yearsNode.appendChild(node)}};
SUI.Calendar.prototype._drawWeekDays=function(){this.weekDaysNode.removeChildren();for(let i=this.options.start_day;i<this.options.start_day+7;i++){const node=new SUI.Node('span');node.addClass('day');const text=window['moment']['weekdaysMin'](i%7);node.setHtml(text);this.weekDaysNode.appendChild(node)}};SUI.Calendar.prototype._drawDays=function(){this.daysNode.removeChildren();for(let i=0;i<this.days.length;i++){const day=this.days[i];const node=day.getNode();this.daysNode.appendChild(node)}};
SUI.Calendar.prototype._getDate=function(year,month,day){const results=[year,month+1,day];return results.join('-')};
SUI.Calendar.prototype._setPreviousMonth=function(){const diffDays=this.previous.month['endOf']('month')['day']()-this.options.start_day;for(let i=this.previous.month['daysInMonth']()-diffDays;i<=this.previous.month['daysInMonth']();i++){const date=this._getDate(this.previous.month['year'](),this.previous.month['month'](),i);const day=new SUI.Day(date,this.selectedDate,{css_class:'previous-month'});day.eventClick=this._onClick.bind(this);this.days.push(day)}};
SUI.Calendar.prototype._setCurrentMonth=function(){for(let i=1;i<=this.current.day['daysInMonth']();i++){const date=this._getDate(this.current.day['year'](),this.current.day['month'](),i);const day=new SUI.Day(date,this.selectedDate,{css_class:'current-month'});day.eventClick=this._onClick.bind(this);this.days.push(day)}};
SUI.Calendar.prototype._setNextMonth=function(){const numOfDays=this.days.length;const diffDays=this.maxDays-numOfDays;for(let i=1;i<=diffDays;i++){const date=this._getDate(this.next.month['year'](),this.next.month['month'](),i);const day=new SUI.Day(date,this.selectedDate,{css_class:'next-month'});day.eventClick=this._onClick.bind(this);this.days.push(day)}};
SUI.Calendar.prototype._setModeDate=function(selectedDate){const date=this.current.day['clone']();this._switchMode(()=>{date['month'](selectedDate['month']());date['date'](selectedDate['date']())},()=>{date['month'](selectedDate['month']())},()=>{date['year'](selectedDate['year']())});this._setSelectedDate(date);this._setDate(date)};
SUI.Calendar.prototype._onClick=function(selectedDate){this._setModeDate(selectedDate);const mode=this.types[this.options.type];if(this.activeMode!==mode)this._changeMode(1);this.draw();this.eventClick(selectedDate)};SUI.Calendar.prototype._setSelectedDate=function(date){this.selectedDate=date};SUI.Calendar.prototype.eventClick=function(date){console.warn('SUI.Calendar.eventClick()',date)};goog.provide('SUI.Canvas');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Query');SUI.Canvas=function(opt_selector){this._init(opt_selector);this._initEvents()};SUI.Canvas.prototype._init=function(opt_selector){this.canvasNode=opt_selector;if(SUI.isString(opt_selector))this.canvasNode=(new SUI.Query(opt_selector)).getItem();else if(SUI.isUndefined(opt_selector))this.canvasNode=new SUI.Node('canvas');this.canvasRaw=this.canvasNode.getNode();this.context=this.canvasRaw.getContext('2d')};
SUI.Canvas.prototype._initEvents=function(){this.canvasNode.addEventListener('mousemove',(canvasNode,event)=>{const rect=canvasNode.getNode().getBoundingClientRect();const x=event.clientX-rect.left;const y=event.clientY-rect.top;this.eventMouseMove(x,y)})};SUI.Canvas.prototype.setWidth=function(width){this.canvasRaw.width=width};SUI.Canvas.prototype.getWidth=function(){return this.canvasRaw.width};SUI.Canvas.prototype.setHeight=function(height){this.canvasRaw.height=height};
SUI.Canvas.prototype.getHeight=function(){return this.canvasRaw.height};SUI.Canvas.prototype.setSize=function(width,height){this.setWidth(width);this.setHeight(height)};
SUI.Canvas.prototype.drawPolygon=function(x,y,radius,sides,rotateAngle,options){if(sides<3)return;const a=Math.PI*2/sides;this.context.save();this.context.translate(x,y);this.context.beginPath();this.context.rotate(rotateAngle);this.context.moveTo(radius,0);for(let i=1;i<sides;i++)this.context.lineTo(radius*Math.cos(a*i),radius*Math.sin(a*i));this.context.closePath();SUI.each(options,(value,key)=>{this.context[key]=value});this.context.fill();this.context.stroke();this.context.restore()};
SUI.Canvas.prototype.drawRectangle=function(x,y,width,height,rotateAngle,options){this.context.save();this.context.translate(x,y);this.context.beginPath();this.context.rotate(rotateAngle);this.context.rect(0,0,width,height);SUI.each(options,(value,key)=>{this.context[key]=value});if(options['fillStyle'])this.context.fill();if(options['strokeStyle'])this.context.stroke();this.context.restore()};
SUI.Canvas.prototype.drawImage=function(image,opt_width,opt_height){const width=opt_width||SUI.typeCast(image.getAttribute('width'));const height=opt_height||SUI.typeCast(image.getAttribute('height'));this.context.save();this.context.drawImage(image.getNode(),0,0,width,height);this.context.restore()};SUI.Canvas.prototype.getImageDataXY=function(x,y){return this.context.getImageData(x,y,1,1).data};SUI.Canvas.prototype.eventMouseMove=function(x,y){};
SUI.Canvas.prototype.clear=function(){this.context.clearRect(0,0,this.getWidth(),this.getHeight())};goog.provide('SUI.ContentHandler');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Object');SUI.ContentHandler=function(containerNode,opt_options={}){this.containerNode=containerNode;this._setOptions(opt_options);this._init()};SUI.ContentHandler.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({image_url:null,text:''});_self.options.merge(opt_options)};
SUI.ContentHandler.prototype._init=function(){this.contentNode=new SUI.Node('div');this.contentNode.addClass('content-handler');this.containerNode.insertAfter(this.contentNode);if(this.options.image_url){const imageNode=new SUI.Node('img');imageNode.setAttribute('src',this.options.image_url);this.contentNode.appendChild(imageNode)}if(this.options.text){const textNode=new SUI.Node('p');textNode.setHtml(this.options.text);this.contentNode.appendChild(textNode)}this.show()};
SUI.ContentHandler.prototype.show=function(){this.contentNode.addClass('visible-flex');this.containerNode.addClass('hidden')};SUI.ContentHandler.prototype.hide=function(){this.contentNode.removeClass('visible-flex');this.containerNode.removeClass('hidden')};goog.provide('SUI.Pager');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Query');SUI.Pager=function(dom,opt_selectors=['.pager','.pager-statistics'],opt_options={}){this.pager=(new SUI.Query(opt_selectors[0],dom)).getItem();this.pagerStatistics=(new SUI.Query(opt_selectors[1],dom)).getItem();this._setOptions(opt_options);this._init()};
SUI.Pager.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({row_count:10,pager_num:4});_self.options.merge(opt_options)};SUI.Pager.prototype._init=function(){this.count=this.options.row_count;this.setPage(1)};SUI.Pager.prototype._drawPager=function(){this.pager.removeChildren();this.pageNum=Math.ceil(this.count/this.options.row_count);this._drawPreviousButton();this._drawPageNumbers();this._drawNextButton()};
SUI.Pager.prototype._drawStatistics=function(){const page=this.page-1;const from=page*this.options.row_count+1;let to=page*this.options.row_count+this.options.row_count;to=to>this.count?this.count:to;if(to>0)this.pagerStatistics.setHtml(SUI.format('{0}\u2012{1} / {2}',[from,to,this.count]));else this.pagerStatistics.setHtml('')};
SUI.Pager.prototype._drawPreviousButton=function(){if(this.pageNum>1){const previousButton=new SUI.Node('button');previousButton.addClass(['mdl-button','mdl-js-button','mdl-js-ripple-effect']);previousButton.addEventListener('click',()=>{this._previous()});const iconNode=new SUI.Node('i');iconNode.addClass('material-icons');iconNode.setHtml('chevron_left');previousButton.appendChild(iconNode);SUI.mdl(previousButton);this.pager.appendChild(previousButton)}};
SUI.Pager.prototype._drawNextButton=function(){if(this.pageNum>1){const nextButton=new SUI.Node('button');nextButton.addClass(['mdl-button','mdl-js-button','mdl-js-ripple-effect']);nextButton.addEventListener('click',()=>{this._next()});const iconNode=new SUI.Node('i');iconNode.addClass('material-icons');iconNode.setHtml('chevron_right');nextButton.appendChild(iconNode);SUI.mdl(nextButton);this.pager.appendChild(nextButton)}};
SUI.Pager.prototype._drawPageNumbers=function(){const pagers=this._getPagers();if(pagers.length>1)SUI.each(pagers,pager=>{const pageNode=new SUI.Node('button');pageNode.setData('page',pager.page);pageNode.setHtml(pager.text);pageNode.addClass(['mdl-button','mdl-js-button','mdl-js-ripple-effect']);if(this.page===pager.page)pageNode.addClass('mdl-button--accent');pageNode.addEventListener('click',node=>{const page=node.getData('page');this._go(page)});SUI.mdl(pageNode);this.pager.appendChild(pageNode)})};
SUI.Pager.prototype._getPagers=function(){const part=Math.floor((this.page-1)/this.options.pager_num);const pagers=[];if(part>0)pagers.push({text:'...',page:part*this.options.pager_num});for(let i=1;i<=this.options.pager_num;i++){const page=part*this.options.pager_num+i;if(page<=this.pageNum)pagers.push({text:page,page:page})}if(this.pageNum>this.options.pager_num&&part!==Math.floor((this.pageNum-1)/this.options.pager_num))pagers.push({text:'...',page:part*this.options.pager_num+this.options.pager_num+
1});return pagers};SUI.Pager.prototype._next=function(){let page=this.page+1;if(page>this.pageNum)page=1;this._go(page)};SUI.Pager.prototype._previous=function(){let page=this.page-1;if(page<1)page=this.pageNum;this._go(page)};SUI.Pager.prototype.setCount=function(count){this.count=count};SUI.Pager.prototype._go=function(page){this.setPage(page);this.eventAction(this.page)};SUI.Pager.prototype.setPage=function(page){this.page=page;this.offset=(this.page-1)*this.options.row_count};
SUI.Pager.prototype.draw=function(){this._drawStatistics();this._drawPager()};SUI.Pager.prototype.eventAction=function(page){console.warn('SUI.Pager.eventAction()',page)};goog.provide('SUI.CardCollection');goog.require('SUI');goog.require('SUI.Collection');goog.require('SUI.ContentHandler');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Pager');goog.require('SUI.Query');SUI.CardCollection=function(dom,opt_selector='.card-collection',opt_ctrl=null,opt_options={}){this.cardCollectionNode=(new SUI.Query(opt_selector,dom)).getItem();this.ctrl=opt_ctrl;this._setOptions(opt_options);this._init()};
SUI.CardCollection.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({no_content:{image_url:null,text:''},row_count:12,pager_num:4,sort:{column:null,order:'asc'}});_self.options.merge(opt_options)};
SUI.CardCollection.prototype._init=function(){this.collection=new SUI.Collection;this.query='';this._initContentHandler();this._initStructure();this._initTemplate();this.pager=new SUI.Pager(this.cardCollectionNode,['.pager','.pager-statistics'],this.options);this.pager.eventAction=page=>{this.refresh(page)}};SUI.CardCollection.prototype._initContentHandler=function(){this.contentHandler=new SUI.ContentHandler(this.cardCollectionNode,this.options.no_content)};
SUI.CardCollection.prototype._initStructure=function(){this.cardCollectionNode.addClass('card-collection');this.body=new SUI.Node('div');this.body.addClass('cards');this.cardCollectionNode.appendChild(this.body);this.cardFooterNode=new SUI.Node('div');this.cardFooterNode.addClass('card-footer');this.cardCollectionNode.appendChild(this.cardFooterNode);this.pagerNode=new SUI.Node('div');this.pagerNode.addClass('pager-statistics');this.cardFooterNode.appendChild(this.pagerNode);this.pagerNode=new SUI.Node('div');
this.pagerNode.addClass('pager');this.cardFooterNode.appendChild(this.pagerNode)};SUI.CardCollection.prototype._initTemplate=function(){this.cardTemplate=(new SUI.Query('template',this.cardCollectionNode)).getItem();this.cardTemplate.remove();this.template=this.cardTemplate.toString(false)};
SUI.CardCollection.prototype._getCardNode=function(item){const regex=new RegExp('{{[a-zA-Z._,() ]*}}','g');const matches=this.template.match(regex);let cloneTemplate=this.template;SUI.each(matches,match=>{const expression=match.replace('{{','').replace('}}','');if(SUI.contain(expression,'ctrl.')){const paramsRegex=new RegExp('(([a-zA-Z._, ]*))','g');const expressionMatches=expression.match(paramsRegex);const fnName=expressionMatches[0].replace('ctrl.','');const fnKeys=expressionMatches[2].split(', ');
const fnParams=[];SUI.each(fnKeys,key=>{if(key==='item')fnParams.push(item);else fnParams.push(item.get(key))});if(this.ctrl){const method=this.ctrl[fnName];if(method){const result=method.apply(this.ctrl,fnParams);cloneTemplate=cloneTemplate.replace(match,result)}else console.warn(SUI.format('ctrl.{0}() missing',[fnName]))}}else cloneTemplate=cloneTemplate.replace(match,item.get(expression))});return new SUI.Node(cloneTemplate)};
SUI.CardCollection.prototype.refresh=function(opt_page=-1){if(opt_page>-1)this.pager.setPage(opt_page);const params=new SUI.Object({'query':this.query,'column':this.options.sort.column,'order':this.options.sort.order,'offset':this.pager.offset,'limit':this.options.row_count});this.eventAction(params)};SUI.CardCollection.prototype.eventAction=function(params){console.warn('SUI.CardCollection.eventAction()',params)};
SUI.CardCollection.prototype.eventCardNode=function(cardNode,item){console.warn('SUI.CardCollection.eventCardNode()',cardNode,item)};SUI.CardCollection.prototype._addCard=function(item){const cardNode=this._getCardNode(item);this.body.appendChild(cardNode);this.eventCardNode(cardNode,item);SUI.mdl(cardNode)};SUI.CardCollection.prototype.setData=function(items){this.collection.reload(items);if(this.collection.size()===0)this.contentHandler.show();else{this.contentHandler.hide();this._draw()}};
SUI.CardCollection.prototype.setCount=function(count){this.pager.setCount(count);this.pager.draw()};SUI.CardCollection.prototype._getItems=function(){let items=this.collection.getItems();if(this.collection.size()>this.options.row_count)items=this.collection.limit(this.pager.offset,this.options.row_count);return items};SUI.CardCollection.prototype._draw=function(){this.body.removeChildren();SUI.each(this._getItems(),item=>{this._addCard(item)});SUI.mdl(this.body)};
SUI.CardCollection.prototype.render=function(){this.refresh()};goog.provide('SUI.Carousel');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Query');SUI.Carousel=function(dom,opt_selector='.carousel',opt_options={}){this.carouselNode=(new SUI.Query(opt_selector,dom)).getItem();this._setOptions(opt_options);this._init()};SUI.Carousel.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({});_self.options.merge(opt_options)};SUI.Carousel.prototype._init=function(){};goog.provide('SUI.Time');goog.require('SUI.Node');SUI.Time=function(node,options){this.timeNode=node;this._setOptions(options);this._init()};SUI.Time.prototype._setOptions=function(options){this.options=options};SUI.Time.prototype._init=function(){this._initCircleNode();this._initPointerNode()};
SUI.Time.prototype._initCircleNode=function(){const circleNode=new SUI.Node('div');circleNode.addClass('circle');this.timeNode.appendChild(circleNode);const circleNodeStyle=window.getComputedStyle(circleNode.getNode());const width=parseInt(circleNodeStyle.width.slice(0,-2),10);const height=parseInt(circleNodeStyle.height.slice(0,-2),10);this.timeNode.removeChild(circleNode);this._initSize(width,height)};
SUI.Time.prototype._initSize=function(width,height){const timeNodeStyle=window.getComputedStyle(this.timeNode.getNode());this.options.width=parseInt(timeNodeStyle.width.slice(0,-2),10)-width;this.options.height=parseInt(timeNodeStyle.height.slice(0,-2),10)-height;this.options.radius_x=this.options.width/2;this.options.radius_y=this.options.height/2};
SUI.Time.prototype._initPointerNode=function(){const centerPointNode=new SUI.Node('div');centerPointNode.addClass('center-point');this.timeNode.appendChild(centerPointNode);this.pointerNode=new SUI.Node('div');this.pointerNode.addClass('pointer');this.timeNode.appendChild(this.pointerNode)};SUI.Time.prototype.draw=function(start,n,opt_j=1,opt_isClockWise=true){this._drawCircles(start,n,opt_j,opt_isClockWise)};
SUI.Time.prototype._drawCircles=function(start,n,opt_j=1,opt_isClockWise=true){let k=0;for(let i=start;i<=n;i++){const circle=new SUI.Node('div');this.timeNode.appendChild(circle);if(i%opt_j===0){const text=this.options.captions&&this.options.captions[k]?this.options.captions[k]:i;circle.setHtml(text);k++}this._setCircleStyle(circle,start,n,i,opt_j,opt_isClockWise);this._setCircleEvent(circle,i)}};
SUI.Time.prototype._setCircleEvent=function(circle,i){circle.setData('index',i);circle.addEventListener('click',circle=>{const index=circle.getData('index');this.eventClick(index)})};
SUI.Time.prototype._setCircleStyle=function(circle,start,n,i,opt_j=1,opt_isClockWise=true){const index=opt_j/2>i%opt_j?i%opt_j:opt_j-i%opt_j;const selected=this.options.selected===i?'selected':null;const top=this.options.radius_y+this.options.radius_y*Math.cos(360/(n+1-start)/180*i*Math.PI)*-1;const left=this.options.radius_x+this.options.radius_x*Math.sin(360/(n+1-start)/180*i*Math.PI)*(opt_isClockWise?1:-1);circle.addClass(['circle','highlight'+index,selected]);circle.setStyle({'position':'absolute',
'z-index':100-index,'top':top+'px','left':left+'px'});if(selected){const radian=360/(n+1-start)/180*i*Math.PI;const degrees=radian*(180/Math.PI)-90;this.pointerNode.setStyle({'transform':'rotate('+degrees+'deg)'})}};SUI.Time.prototype.eventClick=function(index){console.warn('SUI.Time.eventClick()',index)};goog.provide('SUI.Clock');goog.require('SUI.Node');goog.require('SUI.Time');SUI.Clock=function(node,options){this.clockNode=node;this._setOptions(options);this._init()};SUI.Clock.prototype._setOptions=function(options){this.options=options};SUI.Clock.prototype._init=function(){this.modes=['HOUR','MINUTE'];this.types={'hour':this.modes[0],'minute':this.modes[1]};this._initStructure()};
SUI.Clock.prototype._switchMode=function(hourCallback,minuteCallback){let result=null;switch(this.activeMode){case 'HOUR':result=hourCallback();break;case 'MINUTE':result=minuteCallback();break;default:break}return result};SUI.Clock.prototype._initStructure=function(){this._initHeaderNode();this._initContentNode();this._initMode(this.types[this.options.type]);this.setTime(this.options.time)};
SUI.Clock.prototype._initHeaderNode=function(){this.headerNode=new SUI.Node('div');this.headerNode.addClass('header');this.clockNode.appendChild(this.headerNode);this._initHoursHeaderNode();this._initSeparatorHeaderNode();this._initMinutesHeaderNode();this._initPeriodHeaderNode()};SUI.Clock.prototype._initPeriodHeaderNode=function(){this.periodHeaderNode=new SUI.Node('div');this.periodHeaderNode.addClass('period');this.periodHeaderNode.addEventListener('click',this._togglePeriod.bind(this));this.headerNode.appendChild(this.periodHeaderNode)};
SUI.Clock.prototype._togglePeriod=function(){if(this.period==='pm')this.time['subtract'](12,'hours');else this.time['add'](12,'hours');this._onClick(this.time)};SUI.Clock.prototype._initMinutesHeaderNode=function(){this.minutesHeaderNode=new SUI.Node('div');this.minutesHeaderNode.addClass('minutes');this.minutesHeaderNode.addEventListener('click',()=>{this._setMode(this.types['minute'])});this.headerNode.appendChild(this.minutesHeaderNode)};
SUI.Clock.prototype._initHoursHeaderNode=function(){this.hoursHeaderNode=new SUI.Node('div');this.hoursHeaderNode.addClass('hours');this.hoursHeaderNode.addEventListener('click',()=>{this._setMode(this.types['hour'])});this.headerNode.appendChild(this.hoursHeaderNode)};SUI.Clock.prototype._setMode=function(mode){this._initMode(mode);this.setTime(this.time);this.draw()};
SUI.Clock.prototype._initSeparatorHeaderNode=function(){const separatorHeaderNode=new SUI.Node('div');separatorHeaderNode.addClass('separator');separatorHeaderNode.setHtml(':');this.headerNode.appendChild(separatorHeaderNode)};SUI.Clock.prototype._initContentNode=function(){this.contentNode=new SUI.Node('div');this.contentNode.addClass('content');this.clockNode.appendChild(this.contentNode)};
SUI.Clock.prototype._getTimeNode=function(){this.contentNode.removeChildren();const hoursNode=new SUI.Node('div');hoursNode.addClass('time');this.contentNode.appendChild(hoursNode);return hoursNode};SUI.Clock.prototype._setHours=function(hours){this.hours=hours;const cssClass=this.activeMode===this.types['hour']?'active':null;this.hoursHeaderNode.removeClass('active');this.hoursHeaderNode.addClass(['hours',cssClass]);const text=hours<10?'0'+hours:hours;this.hoursHeaderNode.setHtml(text)};
SUI.Clock.prototype._setMinutes=function(minutes){this.minutes=minutes;const cssClass=this.activeMode===this.types['minute']?'active':null;this.minutesHeaderNode.removeClass('active');this.minutesHeaderNode.addClass(['minutes',cssClass]);const text=minutes<10?'0'+minutes:minutes;this.minutesHeaderNode.setHtml(text)};
SUI.Clock.prototype._setPeriod=function(period){this.period=period;this.periodHeaderNode.removeClass(['am','pm']);this.periodHeaderNode.addClass(['period',this.period]);const text=window['moment']['localeData']()['meridiem'](this.time['hour'](),this.time['minute'](),true);this.periodHeaderNode.setHtml(text)};
SUI.Clock.prototype.setTime=function(time){this.time=window['moment'](time);const hours=this.time['hour']()%12||12;this._setHours(hours);const minutes=this.time['minute']();this._setMinutes(minutes);const period=this.time['hour']()>12?'pm':'am';this._setPeriod(period)};SUI.Clock.prototype._initMode=function(mode){this.contentNode.removeChildren();this.activeMode=mode};
SUI.Clock.prototype._getMode=function(direction){let position=this.modes.indexOf(this.activeMode);if(position!==-1)position+=direction;const mode=this.modes[position];return mode?mode:this.types[this.options.type]};SUI.Clock.prototype._changeMode=function(direction){const mode=this._getMode(direction);this._initMode(mode)};SUI.Clock.prototype.draw=function(){const timeNode=this._getTimeNode();this._switchMode(()=>{this._drawHours(timeNode)},()=>{this._drawMinutes(timeNode)})};
SUI.Clock.prototype._drawMinutes=function(timeNode){const timeMinutes=new SUI.Time(timeNode,{selected:this.minutes,captions:['00','05']});timeMinutes.eventClick=index=>{this._changeMode(-1);const time=this.time['minute'](index);this._onClick(time)};timeMinutes.draw(0,59,5,true)};
SUI.Clock.prototype._drawHours=function(timeNode){const timeHours=new SUI.Time(timeNode,{selected:this.hours});timeHours.eventClick=index=>{this._changeMode(1);let hour=this.period==='pm'?index+12:index;hour=hour===24?0:hour;const time=this.time['hour'](hour);this._onClick(time)};timeHours.draw(1,12,1,true)};SUI.Clock.prototype._onClick=function(selectedTime){this.setTime(selectedTime);this.draw();this.eventClick(selectedTime)};
SUI.Clock.prototype.eventClick=function(time){console.warn('SUI.Clock.eventClick()',time)};goog.provide('SUI.Datetime');goog.require('SUI.Calendar');goog.require('SUI.Clock');goog.require('SUI.Node');SUI.Datetime=function(node,options){this.datetimeNode=node;this._setOptions(options);this._init()};SUI.Datetime.prototype._setOptions=function(options){this.options=options};SUI.Datetime.prototype._init=function(){this._initVariables();this._initStructure();this._setValue(this.options.value)};
SUI.Datetime.prototype._initVariables=function(){this.types={'datetime-local':{format:'YYYY-MM-DDTHH:mm:ss',calendar_type:'date',clock_type:'hour'},'datetime':{format:'',calendar_type:'date',clock_type:'hour'},'date':{format:'YYYY-MM-DD',calendar_type:'date',clock_type:''},'time':{format:'HH:mm:ss',calendar_type:'',clock_type:'hour'},'month':{format:'YYYY-MM',calendar_type:'month',clock_type:''},'week':{format:'YYYY-\\Www',calendar_type:'week',clock_type:''},'year':{format:'YYYY',calendar_type:'year',
clock_type:''}};this.config=this.types[this.options.type]};SUI.Datetime.prototype._initStructure=function(){this._initDateTimeNode();this._initCalendarNode();this._initClockNode()};SUI.Datetime.prototype._initDateTimeNode=function(){this.datetimeNode.addClass('datetime');this.datetimeNode.removeChildren()};SUI.Datetime.prototype._initCalendarNode=function(){if(this.config.calendar_type){this.calendarNode=new SUI.Node('div');this.calendarNode.addClass('calendar');this.datetimeNode.appendChild(this.calendarNode)}};
SUI.Datetime.prototype._initClockNode=function(){if(this.config.clock_type){this.clockNode=new SUI.Node('div');this.clockNode.addClass('clock');this.datetimeNode.appendChild(this.clockNode)}};SUI.Datetime.prototype.getConfig=function(){return this.config};SUI.Datetime.prototype._setValue=function(value){value=value||window['moment']()['format'](this.config.format);this.value=window['moment'](value,this.config.format)};
SUI.Datetime.prototype.setValue=function(value){this._initStructure();this._setValue(value);this.draw()};SUI.Datetime.prototype.getValue=function(){return this.value['format'](this.config.format)};SUI.Datetime.prototype.draw=function(){this._drawCalendar();this._drawClock()};
SUI.Datetime.prototype._drawCalendar=function(){if(this.config.calendar_type){const calendar=new SUI.Calendar(this.calendarNode,{date:this.value,type:this.config.calendar_type,start_day:1});calendar.eventClick=date=>{this.value['year'](date['year']());this.value['month'](date['month']());this.value['date'](date['date']());this._onClick()};calendar.draw()}};
SUI.Datetime.prototype._drawClock=function(){if(this.config.clock_type){const clock=new SUI.Clock(this.clockNode,{time:this.value,type:this.config.clock_type});clock.eventClick=date=>{this.value['hour'](date['hour']());this.value['minute'](date['minute']());this._onClick()};clock.draw()}};SUI.Datetime.prototype._onClick=function(){const value=this.getValue();this.eventClick(value)};SUI.Datetime.prototype.eventClick=function(value){console.warn(value)};goog.provide('SUI.Dropdown');goog.require('SUI');goog.require('SUI.Collection');goog.require('SUI.Node');goog.require('SUI.Object');SUI.Dropdown=function(element,opt_options={}){this.dropdown=element;this._setOptions(opt_options);this._init()};SUI.Dropdown.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({id:SUI.generateId('dropdown')});_self.options.merge(opt_options)};
SUI.Dropdown.prototype._init=function(){this.collection=new SUI.Collection;this.actions=[];this.item=null;this._appendButton();this._appendMenu()};SUI.Dropdown.prototype._appendButton=function(){this.buttonNode=new SUI.Node('button');this.buttonNode.setId(this.options.id);this.buttonNode.addClass(['mdl-button','mdl-js-button','mdl-button--icon']);const iconNode=new SUI.Node('i');iconNode.addClass('material-icons');iconNode.setHtml('more_vert');this.buttonNode.appendChild(iconNode);this.dropdown.appendChild(this.buttonNode)};
SUI.Dropdown.prototype._appendMenu=function(){this.menuNode=new SUI.Node('ul');this.menuNode.setFor(this.options.id);this.menuNode.addClass(['mdl-menu','mdl-menu--bottom-right','mdl-js-menu','mdl-js-ripple-effect']);this.dropdown.appendChild(this.menuNode)};SUI.Dropdown.prototype.setActions=function(actions,item){this.actions=actions;this.item=item;this._renderMenu();SUI.mdl(this.menuNode);SUI.mdl(this.buttonNode)};
SUI.Dropdown.prototype._renderMenu=function(){SUI.eachArray(this.actions,action=>{const [icon,title,disabled,removed]=action.style(this.item);if(!removed){const menuItemNode=new SUI.Node('li');menuItemNode.addClass('mdl-menu__item');menuItemNode.setHtml(title||icon);if(disabled)menuItemNode.setAttribute('disabled');menuItemNode.addEventListener('click',()=>{action.click(this.item)});this.menuNode.appendChild(menuItemNode)}})};goog.provide('SUI.Widget');goog.requireType('SUI.Form');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Query');goog.require('SUI.Tooltip');SUI.Widget=function(input,opt_label,opt_error,opt_inputBlock,opt_form){this.input=input;this.label=opt_label;this.error=opt_error;this.inputBlock=opt_inputBlock;this.form=opt_form;if(this.error)this.errorTooltip=new SUI.Tooltip(this.error);this._setInfoContainer();this._setActionContainer();this._setMutation();this._setAdditionalLabel(this.label)};
SUI.Widget.prototype.eventChange=function(value,oldValue){};SUI.Widget.prototype.render=function(){console.warn('SUI.Widget.render()')};SUI.Widget.prototype.refresh=function(){console.warn('SUI.Widget.refresh()')};SUI.Widget.prototype.modelChange=function(value){console.warn('SUI.Widget.modelChange()',value)};SUI.Widget.prototype.getName=function(){const name=this.input.getAttribute('name');return this._getAttributeName(name)};
SUI.Widget.prototype.getValue=function(){const value=this.input.getNode().value;return SUI.typeCast(value)};SUI.Widget.prototype._getAttributeName=function(inputName){let attribute=inputName||'';attribute=attribute.replace(/]/g,'');attribute=attribute.replace(/\[/g,'.');attribute=SUI.eq(attribute.slice(-1),'.')?attribute.slice(0,-1):attribute;return attribute};
SUI.Widget.prototype.setError=function(opt_message='',opt_isCustomError=false){if(this.error){this.errorTooltip.setMessage(opt_message);this.error.setHtml(opt_message);if(opt_message&&opt_isCustomError&&this.inputBlock)this.inputBlock.addClass('is-invalid')}};
SUI.Widget.prototype.checkValidity=function(opt_force=false,opt_showMessage=true){const isValid=this.isValid();if(isValid)this.setError('');else if(opt_showMessage)this.setError(this.input.getNode().validationMessage);const upgradedNode=this._getUpgradedNode();if(opt_force&&upgradedNode){if(this.getValue())upgradedNode.addClass('is-dirty');if(isValid)upgradedNode.removeClass('is-invalid');else upgradedNode.addClass('is-invalid')}};
SUI.Widget.prototype.isValidityValid=function(){const node=this.input.getNode();return node.validity.valid};SUI.Widget.prototype.isValid=function(){return this.isValidityValid()};SUI.Widget.prototype._getUpgradedNode=function(){return this.inputBlock};SUI.Widget.prototype.setValue=function(value){this.input.getNode().value=value;this.input.setAttribute('value',value);this.input.trigger('change')};SUI.Widget.prototype.exists=function(){return this.existsInputBlock()||this.existsInput()};
SUI.Widget.prototype.existsInput=function(){return!!this.input&&this.input.exists()};SUI.Widget.prototype.existsInputBlock=function(){return!!this.inputBlock&&this.inputBlock.exists()};SUI.Widget.prototype.get=function(attribute){if(attribute==='model')return this.getName();return this.input.get(attribute)};SUI.Widget.prototype.isRequired=function(){return this.input.getNode().required};
SUI.Widget.prototype.setRequired=function(state){if(state)this.input.setAttribute('required');else this.input.removeAttribute('required');this.input.getNode().required=state;this.checkValidity(true,false);this._setAdditionalLabel(this.label)};SUI.Widget.prototype.isEnabled=function(){return!this.isDisabled()};SUI.Widget.prototype.isDisabled=function(){return this.input.getNode().disabled};
SUI.Widget.prototype.setDisabled=function(state){if(state)this.input.setAttribute('disabled');else this.input.removeAttribute('disabled');this.input.getNode().disabled=state;this.checkValidity(true,false)};SUI.Widget.prototype.isVisible=function(){return!this.inputBlock.hasClass('hidden')};SUI.Widget.prototype.setVisibility=function(state){if(state)this.show();else this.hide()};SUI.Widget.prototype.show=function(){if(!this.isVisible())this.inputBlock.removeClass('hidden')};
SUI.Widget.prototype.hide=function(){if(this.isVisible())this.inputBlock.addClass('hidden')};SUI.Widget.prototype.setLabel=function(text){if(this.label&&!this.label.isEmpty()){this.label.setHtml(text);this._setAdditionalLabel(this.label)}};
SUI.Widget.prototype._setInfoContainer=function(){if(this.inputBlock&&!this.inputBlock.isEmpty()){this.infoContainerNode=(new SUI.Query('.info-container',this.inputBlock)).getItem();if(this.infoContainerNode.isEmpty()){this.infoContainerNode=new SUI.Node('div');this.infoContainerNode.addClass(['info-container']);this.inputBlock.appendChild(this.infoContainerNode)}}};
SUI.Widget.prototype._setActionContainer=function(){if(this.inputBlock&&!this.inputBlock.isEmpty()){this.actionContainerNode=(new SUI.Query('.action-container',this.inputBlock)).getItem();if(this.actionContainerNode.isEmpty()){this.actionContainerNode=new SUI.Node('div');this.actionContainerNode.addClass(['action-container']);this.inputBlock.appendChild(this.actionContainerNode)}}};
SUI.Widget.prototype._setInfo=function(label){const title=label.getAttribute('title');const description=label.getAttribute('desc');if(title||description){let infoButton=(new SUI.Query('a.info-button',this.infoContainerNode)).getItem();if(!infoButton.isEmpty())infoButton.remove();infoButton=new SUI.Node('a');infoButton.setAttribute('title',title||'');infoButton.setAttribute('desc',description||'');infoButton.setAttribute('href','javascript:void(0)');infoButton.addClass(['info-button','material-icons']);
infoButton.setHtml('info_outline');this.infoContainerNode.appendChild(infoButton);const tooltip=new SUI.Tooltip(infoButton,'LEFT');tooltip.render()}};SUI.Widget.prototype._setAdditionalLabel=function(label){if(label&&label.exists()){const labelText=this._getLabelRequiredText(label.getHtml(true));label.setHtml(labelText);this._setInfo(label)}};
SUI.Widget.prototype._getLabelRequiredText=function(labelText){if(SUI.eq(labelText,true))return'&nbsp;';const requiredPostfix=' *';const postfix=labelText.substr(labelText.length-requiredPostfix.length);if(this.isRequired()&&postfix!==requiredPostfix)labelText+=requiredPostfix;else if(!this.isRequired()&&postfix===requiredPostfix)labelText=labelText.replace(requiredPostfix,'');return labelText};
SUI.Widget.prototype._setMutation=function(){const observer=new MutationObserver(mutationsList=>{for(let i=0;i<mutationsList.length;i++){const mutation=mutationsList[i];if(mutation.attributeName==='disabled')this.refresh();else if(mutation.attributeName==='required')this.refresh()}});observer.observe(this.input.getNode(),{attributeFilter:['disabled','required'],attributes:true,attributeOldValue:true})};goog.provide('SUI.widget.Button');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Button=function(input){SUI.Widget.call(this,input);this._init()};goog.inherits(SUI.widget.Button,SUI.Widget);SUI.widget.Button.prototype._init=function(){this.input.setAttribute('name','button')};
SUI.widget.Button.prototype.render=function(){this.input.addClass(['mdl-button','mdl-js-button','mdl-button--raised','mdl-js-ripple-effect','mdl-button--accent']);this.input.addEventListener('click',node=>{this.eventClick(node)});this.refresh()};SUI.widget.Button.prototype.refresh=function(){SUI.mdl(this.input)};SUI.widget.Button.prototype.eventClick=function(node){console.warn('SUI.widget.Button.eventClick()',node)};goog.provide('SUI.widget.BaseCheckbox');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Query');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.BaseCheckbox=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.BaseCheckbox,SUI.Widget);
SUI.widget.BaseCheckbox.prototype._init=function(){this.hiddenInput=(new SUI.Query('input[type=hidden]',this.inputBlock)).getItem();this.inputBlock.addClass('checkbox-widget');this.input.addEventListener('change',()=>{this._change();return true})};SUI.widget.BaseCheckbox.prototype._change=function(){const value=this.getValue();this.modelChange(value);this.checkValidity()};
SUI.widget.BaseCheckbox.prototype.getValue=function(){const checked=this.input.getNode().checked;let value=this.hiddenInput.getAttribute('value');if(checked)value=this.input.getAttribute('value');return SUI.typeCast(value)};SUI.widget.BaseCheckbox.prototype.setValue=function(value){const currentValue=SUI.typeCast(this.input.getAttribute('value'));this.input.getNode().checked=currentValue===value;if(!this.input.getNode().checked)this.input.removeAttribute('checked');this.input.trigger('change')};
SUI.widget.BaseCheckbox.prototype.setDisabled=function(state){if(state){this.input.setAttribute('disabled');this.label.addClass('is-disabled');this.inputBlock.addClass('is-disabled')}else{this.input.removeAttribute('disabled');this.label.removeClass('is-disabled');this.inputBlock.removeClass('is-disabled')}this.input.getNode().disabled=state;this.checkValidity(true,false)};
SUI.widget.BaseCheckbox.prototype.setLabel=function(text){if(this.spanLabel&&!this.spanLabel.isEmpty()){this.spanLabel.setHtml(text);this._setAdditionalLabel(this.spanLabel)}};
SUI.widget.BaseCheckbox.prototype.refresh=function(){const dataLabelText=this.label.getAttribute('data-label');if(dataLabelText){const labelText=this._getLabelRequiredText(dataLabelText);this.dataLabelNode.setHtml(labelText)}else this.dataLabelNode.setHtml('');if(this.isDisabled())this.inputBlock.addClass('is-disabled');SUI.mdl(this.label,false)};goog.provide('SUI.widget.Checkbox');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.widget');goog.require('SUI.widget.BaseCheckbox');SUI.widget.Checkbox=function(input,label,error,inputBlock){SUI.widget.BaseCheckbox.call(this,input,label,error,inputBlock)};goog.inherits(SUI.widget.Checkbox,SUI.widget.BaseCheckbox);
SUI.widget.Checkbox.prototype.render=function(){this.label.addClass(['mdl-checkbox','mdl-js-checkbox','mdl-js-ripple-effect']);const id=this.input.getId();this.label.setFor(id);const labelText=this.label.getHtml(true);this.spanLabel=new SUI.Node('span');this.spanLabel.addClass('mdl-checkbox__label');this.spanLabel.setHtml(labelText);this.input.addClass('mdl-checkbox__input');this.label.insert(this.input);this.label.appendChild(this.spanLabel);this.dataLabelNode=new SUI.Node('span');this.dataLabelNode.addClass('widget-label');
this.label.insertBefore(this.dataLabelNode);this.refresh()};goog.provide('SUI.Popup');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.PopupContainer');SUI.Popup=function(content,opt_parent,opt_withClose=false){this.content=content;this.parent=opt_parent;this.withClose=opt_withClose;this._init()};SUI.Popup.prototype._init=function(){this.popupContainer=new SUI.PopupContainer;this._draw()};
SUI.Popup.prototype._draw=function(){this.popupNode=new SUI.Node('div');this.popupNode.addClass(['popup','hidden']);this.parent.addClass('popup-parent');this.parent.appendChild(this.popupNode);this.popupNode.appendChild(this.content);this._initCloseButton()};
SUI.Popup.prototype._initCloseButton=function(){if(this.withClose){const btnClose=new SUI.Node('button');btnClose.setAttribute('type','button');btnClose.addClass(['close','mdl-button','mdl-js-button','mdl-button--icon']);btnClose.addEventListener('click',()=>{this.close()});this.popupNode.appendChild(btnClose);const iconNode=new SUI.Node('i');iconNode.addClass('material-icons');iconNode.setHtml('close');btnClose.appendChild(iconNode);SUI.mdl(btnClose)}};
SUI.Popup.prototype.open=function(){this.popupContainer.closeAll();this.popupContainer.push(SUI.Popup,this);this.popupNode.removeClass('hidden');this.popupContainer.setPosition(this.popupNode)};SUI.Popup.prototype.close=function(){this.popupContainer.delete(this);this.popupContainer.clearPosition(this.popupNode);this.popupNode.addClass('hidden');this.eventClose()};SUI.Popup.prototype.eventClose=function(){};SUI.Popup.prototype.toggle=function(){if(this.isOpened())this.close();else this.open()};
SUI.Popup.prototype.isOpened=function(){return!this.popupNode.hasClass('hidden')};goog.provide('SUI.widget.Color');goog.require('SUI');goog.require('SUI.Canvas');goog.require('SUI.Node');goog.require('SUI.Popup');goog.require('SUI.Query');goog.require('SUI.Tooltip');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Color=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.Color,SUI.Widget);
SUI.widget.Color.prototype._init=function(){this.inputBlock.addClass('color-widget');this._initInput();this._initImage();this._initPreview();this._setMaterialColors()};SUI.widget.Color.prototype.render=function(){if(this.label&&this.label.exists())this.label.addClass('widget-label');this.refresh()};
SUI.widget.Color.prototype.refresh=function(){if(this.isRequired()&&this.getValue()==='')this.inputBlock.addClass('is-invalid');if(this.isDisabled())this.inputBlock.addClass('is-disabled');else this.inputBlock.removeClass('is-disabled');const color=this.getValue()||'#000000';this.setValue(color)};
SUI.widget.Color.prototype._initInput=function(){this.input.addClass('hidden');this.input.addEventListener('change',input=>{const inputNode=input.getNode();this.tooltip.setMessage(inputNode.value);this.previewNode.setStyle({'background':inputNode.value});this.modelChange(inputNode.value);this.checkValidity();return true})};
SUI.widget.Color.prototype._initPreview=function(){this.previewNode=new SUI.Node('div');this.previewNode.addClass('preview');this.inputBlock.beforeChild(this.previewNode);this.colorNode=new SUI.Node('div');this.colorNode.addClass('color');this.previewNode.appendChild(this.colorNode);this.popup=new SUI.Popup(this.canvas.canvasNode,this.inputBlock);this.tooltip=new SUI.Tooltip(this.previewNode);this.previewNode.addEventListener('click',()=>{if(this.isEnabled()){this._draw();this.popup.open()}})};
SUI.widget.Color.prototype._draw=function(){if(!this.image.isEmpty()){const width=SUI.typeCast(this.image.getAttribute('width'));const height=SUI.typeCast(this.image.getAttribute('height'));this.canvas.setSize(width,height);this.canvas.drawImage(this.image,width,height)}else{const maxX=this.colors[0].length;const maxY=this.colors.length;const size=15;this.canvas.setSize(maxX*size,maxY*size);for(let i=0;i<maxX;i++)for(let j=0;j<maxY;j++)this.canvas.drawRectangle(i*size,j*size,size,size,0,{'fillStyle':this.colors[j][i]})}};
SUI.widget.Color.prototype._initImage=function(){this.image=(new SUI.Query('img',this.inputBlock)).getItem();if(!this.image.isEmpty())this.image.addClass('hidden');this.canvas=new SUI.Canvas;this.canvas.canvasNode.addEventListener('click',(_image,e)=>{let x=0;let y=0;if(e.offsetX){x=e.offsetX;y=e.offsetY}else if(e.layerX){x=e.layerX;y=e.layerY}const rgb=this.canvas.getImageDataXY(x,y);const hex=SUI.RGBToHEX.apply(null,rgb);this.setValue(hex);this.popup.close()})};
SUI.widget.Color.prototype._setMaterialColors=function(){const colors50=['#ffebee','#fce4ec','#f3e5f5','#ede7f6','#e8eaf6','#e3f2fd','#e1f5fe','#e0f7fa','#e0f2f1','#e8f5e9','#f1f8e9','#f9fbe7','#fffde7','#fff8e1','#fff3e0','#fbe9e7','#efebe9','#fafafa','#eceff1'];const colors100=['#ffcdd2','#f8bbd0','#e1bee7','#d1c4e9','#c5cae9','#bbdefb','#b3e5fc','#b2ebf2','#b2dfdb','#c8e6c9','#dcedc8','#f0f4c3','#fff9c4','#ffecb3','#ffe0b2','#ffccbc','#d7ccc8','#f5f5f5','#cfd8dc'];const colors200=['#ef9a9a','#f48fb1',
'#ce93d8','#b39ddb','#9fa8da','#90caf9','#81d4fa','#80deea','#80cbc4','#a5d6a7','#c5e1a5','#e6ee9c','#fff59d','#ffe082','#ffcc80','#ffab91','#bcaaa4','#eeeeee','#b0bec5'];const colors300=['#e57373','#f06292','#ba68c8','#9575cd','#7986cb','#64b5f6','#4fc3f7','#4dd0e1','#4db6ac','#81c784','#aed581','#dce775','#fff176','#ffd54f','#ffb74d','#ff8a65','#a1887f','#e0e0e0','#90a4ae'];const colors400=['#ef5350','#ec407a','#ab47bc','#7e57c2','#5c6bc0','#42a5f5','#29b6f6','#26c6da','#26a69a','#66bb6a','#9ccc65',
'#d4e157','#ffee58','#ffca28','#ffa726','#ff7043','#8d6e63','#bdbdbd','#78909c'];const colors500=['#f44336','#e91e63','#9c27b0','#673ab7','#3f51b5','#2196f3','#03a9f4','#00bcd4','#009688','#4caf50','#8bc34a','#cddc39','#ffeb3b','#ffc107','#ff9800','#ff5722','#795548','#9e9e9e','#607d8b'];const colors600=['#e53935','#d81b60','#8e24aa','#5e35b1','#3949ab','#1e88e5','#039be5','#00acc1','#00897b','#43a047','#7cb342','#c0ca33','#fdd835','#ffb300','#fb8c00','#f4511e','#6d4c41','#757575','#546e7a'];const colors700=
['#d32f2f','#c2185b','#7b1fa2','#512da8','#303f9f','#1976d2','#0288d1','#0097a7','#00796b','#388e3c','#689f38','#afb42b','#fbc02d','#ffa000','#f57c00','#e64a19','#5d4037','#616161','#455a64'];const colors800=['#c62828','#ad1457','#6a1b9a','#4527a0','#283593','#1565c0','#0277bd','#00838f','#00695c','#2e7d32','#558b2f','#9e9d24','#f9a825','#ff8f00','#ef6c00','#d84315','#4e342e','#424242','#37474f'];const colors900=['#b71c1c','#880e4f','#4a148c','#311b92','#1a237e','#0d47a1','#01579b','#006064','#004d40',
'#1b5e20','#33691e','#827717','#f57f17','#ff6f00','#e65100','#bf360c','#3e2723','#212121','#263238'];this.colors=[colors500,colors50,colors100,colors200,colors300,colors400,colors500,colors600,colors700,colors800,colors900]};goog.provide('SUI.widget.Datetime');goog.require('SUI');goog.require('SUI.Datetime');goog.require('SUI.Node');goog.require('SUI.Popup');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Datetime=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.Datetime,SUI.Widget);
SUI.widget.Datetime.prototype._init=function(){this.inputBlock.addClass('datetime-widget');this.input.addClass('hidden');this.datetimeContainer=new SUI.Node('div');this.datetimeContainer.addClass('datetime-container');this.input.insertAfter(this.datetimeContainer);this.datetimeInput=new SUI.Node('div');this.datetimeInput.addClass('datetime-input');this.datetimeInput.addEventListener('click',this._onClick.bind(this));this.datetimeContainer.appendChild(this.datetimeInput);this._initInput()};
SUI.widget.Datetime.prototype._initInput=function(){this.format=this.input.getData('format');this.input.addEventListener('change',()=>{const value=this.getValue().toString();this.modelChange(value);this.checkValidity();return true});const type=this.input.getAttribute('type');const value=this.getValue().toString();this.datetimeNode=new SUI.Node('div');this.datetime=new SUI.Datetime(this.datetimeNode,{value:value,type:type});this.datetime.eventClick=value=>{this.setValue(value)};this.popup=new SUI.Popup(this.datetimeNode,
this.inputBlock);this.popup.eventClose=()=>{this.datetimeInput.removeClass('active')};if(value){const formattedValue=this.datetime.getValue();this._setTag(formattedValue)}};
SUI.widget.Datetime.prototype.render=function(){if(this.label&&this.label.exists())this.label.addClass('widget-label');const iconNode=new SUI.Node('a');iconNode.setAttribute('href','javascript:void(0)');iconNode.addClass(['material-icons','size-24','expander']);iconNode.setHtml('date_range');iconNode.addEventListener('click',this._onClick.bind(this));this.actionContainerNode.appendChild(iconNode);this.refresh();this.datetime.draw()};
SUI.widget.Datetime.prototype.refresh=function(){if(this.isDisabled())this.inputBlock.addClass('is-disabled');else this.inputBlock.removeClass('is-disabled')};SUI.widget.Datetime.prototype.setValue=function(value){this._setTag(value);this.input.setAttribute('value',value);this.input.trigger('change');this.datetime.setValue(value)};
SUI.widget.Datetime.prototype._setTag=function(value){this.datetimeInput.removeChildren();if(value){const formattedValue=window['moment'](value,this.datetime.getConfig().format)['format'](this.format);const tagNode=new SUI.Node('div');tagNode.addClass('widget-tag');tagNode.setHtml(formattedValue);this.datetimeInput.appendChild(tagNode);if(this.isEnabled()){const iconNode=new SUI.Node('a');iconNode.setAttribute('href','javascript:void(0)');iconNode.addClass(['material-icons','size-18','close']);iconNode.setHtml('close');
iconNode.addEventListener('click',()=>{this.setValue('')});tagNode.addClass('tag-with-action');tagNode.appendChild(iconNode)}}};SUI.widget.Datetime.prototype._onClick=function(){if(this.isEnabled()){this.datetimeInput.addClass('active');this.popup.toggle()}};goog.provide('SUI.widget.DatetimeRange');goog.require('SUI');goog.require('SUI.Datetime');goog.require('SUI.Node');goog.require('SUI.Popup');goog.require('SUI.Query');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.DatetimeRange=function(input,label,error,inputBlock,isStartInput){SUI.Widget.call(this,input,label,error,inputBlock);this.isStartInput=isStartInput;this._init()};goog.inherits(SUI.widget.DatetimeRange,SUI.Widget);
SUI.widget.DatetimeRange.prototype._init=function(){this.inputBlock.addClass('datetime-range-widget');this.input.addClass('hidden');this.datetimeContainer=(new SUI.Query('.datetime-container',this.inputBlock)).getItem();if(this.isStartInput){this.datetimeContainer=new SUI.Node('div');this.datetimeContainer.addClass('datetime-container');this.input.insertAfter(this.datetimeContainer)}this.datetimeInput=new SUI.Node('div');this.datetimeInput.addClass('datetime-input');this.datetimeInput.addEventListener('click',
this._onClick.bind(this));this.datetimeContainer.appendChild(this.datetimeInput);this._initInput()};
SUI.widget.DatetimeRange.prototype._initInput=function(){this.format=this.input.getData('format');this.input.addEventListener('change',()=>{const value=this.getValue().toString();this.modelChange(value);this.checkValidity();return true});const type=this.input.getAttribute('type');const value=this.getValue().toString();this.datetimeNode=new SUI.Node('div');this.datetime=new SUI.Datetime(this.datetimeNode,{value:value,type:type});this.datetime.eventClick=value=>{this.setValue(value)};this.popup=new SUI.Popup(this.datetimeNode,
this.inputBlock);this.popup.eventClose=()=>{this.datetimeInput.removeClass('active')};if(value){const formattedValue=this.datetime.getValue();this._setTag(formattedValue)}};
SUI.widget.DatetimeRange.prototype.render=function(){if(this.label&&this.label.exists())this.label.addClass('widget-label');const iconNode=new SUI.Node('a');iconNode.setAttribute('href','javascript:void(0)');iconNode.addClass(['material-icons','size-24','expander']);if(this.isStartInput){iconNode.setHtml('remove');this.datetimeInput.insertAfter(iconNode)}else{iconNode.setHtml('date_range');this.actionContainerNode.appendChild(iconNode)}iconNode.addEventListener('click',this._onClick.bind(this));this.refresh();
this.datetime.draw()};SUI.widget.DatetimeRange.prototype.refresh=function(){if(this.isDisabled())this.inputBlock.addClass('is-disabled');else this.inputBlock.removeClass('is-disabled')};SUI.widget.DatetimeRange.prototype.setValue=function(value){this._setTag(value);this.input.setAttribute('value',value);this.input.trigger('change');this.datetime.setValue(value)};
SUI.widget.DatetimeRange.prototype._setTag=function(value){this.datetimeInput.removeChildren();if(value){const formattedValue=window['moment'](value,this.datetime.getConfig().format)['format'](this.format);const tagNode=new SUI.Node('div');tagNode.addClass('widget-tag');tagNode.setHtml(formattedValue);this.datetimeInput.appendChild(tagNode);if(this.isEnabled()){const iconNode=new SUI.Node('a');iconNode.setAttribute('href','javascript:void(0)');iconNode.addClass(['material-icons','size-18','close']);
iconNode.setHtml('close');iconNode.addEventListener('click',()=>{this.setValue('')});tagNode.addClass('tag-with-action');tagNode.appendChild(iconNode)}}};SUI.widget.DatetimeRange.prototype._onClick=function(){if(this.isEnabled()){this.datetimeInput.addClass('active');this.popup.toggle()}};goog.provide('SUI.widget.File');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Query');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.File=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.File,SUI.Widget);
SUI.widget.File.prototype._init=function(){this.inputBlock.addClass('file-widget');this._initButtons();this.defaultSrc=null;this.imageTag=(new SUI.Query('img',this.inputBlock)).getItem();if(this.imageTag.isEmpty()){this.imageTag=new SUI.Node('img');this.inputBlock.beforeChild(this.imageTag)}else this.defaultSrc=this.imageTag.getAttribute('src');this.imageTag.addEventListener('click',()=>{this._remove()});this.input.addEventListener('change',inputNode=>{const input=inputNode.getNode();const file=input.files[0];
this._read(file);return true})};SUI.widget.File.prototype._initButtons=function(){const browseButton=new SUI.Node('a');browseButton.setAttribute('href','javascript:void(0)');browseButton.addClass(['browse-button','material-icons']);browseButton.setHtml('collections');browseButton.addEventListener('click',()=>{if(this.isEnabled())this.input.getNode().click()});this.actionContainerNode.appendChild(browseButton)};
SUI.widget.File.prototype.render=function(){this.inputBlock.addClass(['mdl-textfield','mdl-js-textfield','mdl-textfield--floating-label']);this.input.addClass('mdl-textfield__input');if(this.label&&this.label.exists())this.label.addClass('mdl-textfield__label');this.refresh()};SUI.widget.File.prototype.refresh=function(){if(this.isRequired()&&this.getValue()==='')this.inputBlock.addClass('is-invalid');SUI.mdl(this.inputBlock)};
SUI.widget.File.prototype._read=function(file){if(file){const reader=new FileReader;reader.onload=event=>{const source=event.target.result;if(SUI.contain(file.type,'image/')&&!this.imageTag.isEmpty())this.imageTag.setAttribute('src',source);this.modelChange(source);this.checkValidity()};reader.readAsDataURL(file)}};
SUI.widget.File.prototype._remove=function(){this.input.getNode().value='';if(this.defaultSrc)this.imageTag.setAttribute('src',this.defaultSrc);else this.imageTag.removeAttribute('src');this.modelChange(null);this.checkValidity()};goog.provide('SUI.widget.Hidden');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Hidden=function(input){SUI.Widget.call(this,input);this._init()};goog.inherits(SUI.widget.Hidden,SUI.Widget);SUI.widget.Hidden.prototype._init=function(){this.input.addEventListener('change',input=>{const inputNode=input.getNode();this.modelChange(inputNode.value);this.checkValidity();return true})};SUI.widget.Hidden.prototype.render=function(){};
SUI.widget.Hidden.prototype.refresh=function(){};goog.provide('SUI.widget.IconToggle');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.widget');goog.require('SUI.widget.BaseCheckbox');SUI.widget.IconToggle=function(input,label,error,inputBlock){SUI.widget.BaseCheckbox.call(this,input,label,error,inputBlock)};goog.inherits(SUI.widget.IconToggle,SUI.widget.BaseCheckbox);
SUI.widget.IconToggle.prototype.render=function(){this.label.addClass(['mdl-icon-toggle','mdl-js-icon-toggle','mdl-js-ripple-effect']);this.checkedIcon=this.input.getData('checked');this.uncheckedIcon=this.input.getData('unchecked');this.icon=new SUI.Node('i');this.icon.addClass(['mdl-icon-toggle__label','material-icons']);this.icon.setHtml(this.input.getNode().checked?this.checkedIcon:this.uncheckedIcon);this.input.addClass('mdl-icon-toggle__input');const labelText=this.label.getText();this.spanLabel=
new SUI.Node('span');this.spanLabel.addClass('mdl-icon__label');this.spanLabel.setHtml(labelText);this.label.insert(this.input);this.label.appendChild(this.icon);this.label.appendChild(this.spanLabel);this.dataLabelNode=new SUI.Node('span');this.dataLabelNode.addClass('widget-label');this.label.insertBefore(this.dataLabelNode);this.refresh()};
SUI.widget.IconToggle.prototype.setValue=function(value){const currentValue=SUI.typeCast(this.input.getAttribute('value'));this.input.getNode().checked=currentValue===value;if(!this.input.getNode().checked)this.input.removeAttribute('checked');this.icon.setHtml(this.input.getNode().checked?this.checkedIcon:this.uncheckedIcon);this.input.trigger('change')};goog.provide('SUI.GoogleMap');goog.require('SUI');goog.require('SUI.Collection');goog.require('SUI.Deferred');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Promise');goog.require('SUI.Query');SUI.GoogleMap=function(dom,opt_selector='.map',opt_options={}){this.mapNode=(new SUI.Query(opt_selector,dom)).getItem();this._setOptions(opt_options);this._init()};
SUI.GoogleMap.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({center:{lat:47.6,lng:17.533333},zoom:8,scrollwheel:false,streetViewControl:false,scaleControl:true,mapTypeControl:false,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN]}});this.options.merge(opt_options);this.options=this.options.copy(true)};
SUI.GoogleMap.prototype._getCustomMapType=function(){return new google.maps.StyledMapType([{elementType:'geometry',stylers:[{color:'#ebe3cd'}]},{elementType:'labels.text.fill',stylers:[{color:'#523735'}]},{elementType:'labels.text.stroke',stylers:[{color:'#f5f1e6'}]},{featureType:'administrative',elementType:'geometry.stroke',stylers:[{color:'#c9b2a6'}]},{featureType:'administrative.land_parcel',elementType:'geometry.stroke',stylers:[{color:'#dcd2be'}]},{featureType:'administrative.land_parcel',elementType:'labels.text.fill',
stylers:[{color:'#ae9e90'}]},{featureType:'landscape.natural',elementType:'geometry',stylers:[{color:'#dfd2ae'}]},{featureType:'poi',elementType:'geometry',stylers:[{color:'#dfd2ae'}]},{featureType:'poi',elementType:'labels.text.fill',stylers:[{color:'#93817c'}]},{featureType:'poi.park',elementType:'geometry.fill',stylers:[{color:'#a5b076'}]},{featureType:'poi.park',elementType:'labels.text.fill',stylers:[{color:'#447530'}]},{featureType:'road',elementType:'geometry',stylers:[{color:'#f5f1e6'}]},
{featureType:'road.arterial',elementType:'geometry',stylers:[{color:'#fdfcf8'}]},{featureType:'road.highway',elementType:'geometry',stylers:[{color:'#f8c967'}]},{featureType:'road.highway',elementType:'geometry.stroke',stylers:[{color:'#e9bc62'}]},{featureType:'road.highway.controlled_access',elementType:'geometry',stylers:[{color:'#e98d58'}]},{featureType:'road.highway.controlled_access',elementType:'geometry.stroke',stylers:[{color:'#db8555'}]},{featureType:'road.local',elementType:'labels.text.fill',
stylers:[{color:'#806b63'}]},{featureType:'transit.line',elementType:'geometry',stylers:[{color:'#dfd2ae'}]},{featureType:'transit.line',elementType:'labels.text.fill',stylers:[{color:'#8f7d77'}]},{featureType:'transit.line',elementType:'labels.text.stroke',stylers:[{color:'#ebe3cd'}]},{featureType:'transit.station',elementType:'geometry',stylers:[{color:'#dfd2ae'}]},{featureType:'water',elementType:'geometry.fill',stylers:[{color:'#b9d3c2'}]},{featureType:'water',elementType:'labels.text.fill',stylers:[{color:'#92998d'}]}],
{name:'Custom'})};SUI.GoogleMap.prototype._init=function(){this.markerIcons={};this._initMap();this._initOverlay();this.setMarkers();this.setPolygons()};SUI.GoogleMap.prototype._initMap=function(){this.map=new google.maps.Map(this.mapNode.getNode(),this.options);const customMapType=this._getCustomMapType();this.map.mapTypes.set('custom',customMapType);this._unbindEventsToMap();this._bindEventsToMap()};
SUI.GoogleMap.prototype._bindEventsToMap=function(){this.map.addListener('click',event=>{const vertex=event.latLng;this.eventMapClick(vertex.lat(),vertex.lng(),event)})};SUI.GoogleMap.prototype._unbindEventsToMap=function(){google.maps.event.clearInstanceListeners(this.map)};SUI.GoogleMap.prototype._initOverlay=function(){this.overlay=new google.maps.OverlayView;this.overlay.draw=function(){};this.overlay.setMap(this.map)};
SUI.GoogleMap.prototype.eventPolygonChanged=function(polygonData,points,computeArea,center){};SUI.GoogleMap.prototype.createOrUpdatePolygon=function(id,title,points,opt_polygonData={},opt_options={}){const polygon=this.getPolygon(id);if(polygon)this.updatePolygon(id,title,points,opt_polygonData,opt_options);else this.createPolygon(id,title,points,opt_polygonData,opt_options)};
SUI.GoogleMap.prototype.createPolygon=function(id,title,points,opt_polygonData={},opt_options={}){const polygonData=new SUI.Object(opt_polygonData);if(!polygonData.get('id'))polygonData.set('id',id);const options=new SUI.Object(this.polygonOptions);options.merge(opt_options);const polygon=new google.maps.Polygon(options.copy(true));polygon.setMap(this.map);polygonData.setRaw('_polygon',polygon);this._addPointsToPolygon(polygonData,points);const latLng=this._getCenterOfPolygon(polygonData);const mapText=
SUI.mapText(title,new google.maps.LatLng(latLng.latitude,latLng.longitude),this.map);polygonData.setRaw('_map_text',mapText);this.polygons.push(polygonData);this._bindEventsToPolygon(polygon,polygonData)};
SUI.GoogleMap.prototype.updatePolygon=function(id,title,points,opt_polygonData={},opt_options={}){const polygonData=this.getPolygon(id);SUI.each(this._cleanPolygonData(opt_polygonData),(value,key)=>{polygonData.set(key,value)});const polygon=polygonData.get('_polygon');polygon.setOptions(opt_options);this._addPointsToPolygon(polygonData,points);const latLng=this._getCenterOfPolygon(polygonData);const mapText=polygonData.get('_map_text');mapText.set('text',title);mapText.set('position',new google.maps.LatLng(latLng.latitude,
latLng.longitude))};SUI.GoogleMap.prototype._cleanPolygonData=function(polygonData){const cleanData=new SUI.Object;SUI.each(polygonData,(value,key)=>{if(!SUI.inArray(['_polygon','_map_text','_bounds'],key))cleanData.set(key,value)});return cleanData};SUI.GoogleMap.prototype.getPolygon=function(id){return this.polygons.findById(id)};
SUI.GoogleMap.prototype.removePolygon=function(id){const polygonData=this.getPolygon(id);if(polygonData){const polygon=polygonData.get('_polygon');polygon.setMap(null);const mapText=polygonData.get('_map_text');mapText.set('map',null);this._unbindEventsToPolygon(polygon);this.polygons.deleteById(id)}};
SUI.GoogleMap.prototype.removeAllPolygon=function(opt_callback=SUI.noop){this.polygons.each(polygonData=>{const polygon=polygonData.get('_polygon');polygon.setMap(null);const mapText=polygonData.get('_map_text');mapText.set('map',null);this._unbindEventsToPolygon(polygon);opt_callback(polygonData)});this.polygons.clear()};
SUI.GoogleMap.prototype._bindEventsToPolygon=function(polygon,polygonData){polygon.addListener('rightclick',event=>{if(event.vertex){const path=polygon.getPath();path.removeAt(event.vertex)}else{const vertex=event.latLng;this.eventPolygonRightClick(polygonData,vertex.lat(),vertex.lng(),event)}});polygon.addListener('click',event=>{const vertex=event.latLng;this.eventPolygonClick(polygonData,vertex.lat(),vertex.lng(),event)});this._bindEventsToPolygonPath(polygon,polygonData)};
SUI.GoogleMap.prototype._unbindEventsToPolygon=function(polygon){google.maps.event.clearInstanceListeners(polygon);this._unbindEventsToPolygonPath(polygon)};
SUI.GoogleMap.prototype._bindEventsToPolygonPath=function(polygon,polygonData){const path=polygon.getPath();if(path){path.addListener('insert_at',()=>{this._callPolygonChangeEvent(polygon,polygonData)});path.addListener('set_at',()=>{this._callPolygonChangeEvent(polygon,polygonData)});path.addListener('remove_at',()=>{this._callPolygonChangeEvent(polygon,polygonData)})}};SUI.GoogleMap.prototype._unbindEventsToPolygonPath=function(polygon){const path=polygon.getPath();if(path)google.maps.event.clearInstanceListeners(path)};
SUI.GoogleMap.prototype._callPolygonChangeEvent=function(polygon,polygonData){const points=this._getPointsFromPolygon(polygonData);this._setBoundsByPoints(polygonData,points);const latLng=this._getCenterOfPolygon(polygonData);const mapText=polygonData.get('_map_text');mapText.set('position',new google.maps.LatLng(latLng.latitude,latLng.longitude));const cleanPolygonData=this._cleanPolygonData(polygonData);this.eventPolygonChanged(cleanPolygonData,points,this._getComputeArea(polygon),latLng)};
SUI.GoogleMap.prototype.eventPolygonClick=function(polygonData,latitude,longitude,event){};SUI.GoogleMap.prototype.eventPolygonRightClick=function(polygonData,latitude,longitude,event){};SUI.GoogleMap.prototype.eventMapClick=function(latitude,longitude,event){};
SUI.GoogleMap.prototype._addPointsToPolygon=function(polygonData,points){const polygon=polygonData.get('_polygon');const path=this._convertPointsToPath(points);polygon.setPath(path);this._bindEventsToPolygonPath(polygon,polygonData);this._setBoundsByPath(polygonData,path)};
SUI.GoogleMap.prototype._convertPointsToPath=function(points){const path=[];SUI.each(points,point=>{let vertex=new google.maps.LatLng(point.latitude,point.longitude);if(!SUI.isUndefined(point.weight))vertex={'location':vertex,'weight':point.weight};path.push(vertex)});return path};SUI.GoogleMap.prototype._setBoundsByPoints=function(polygonData,points){const path=this._convertPointsToPath(points);this._setBoundsByPath(polygonData,path)};
SUI.GoogleMap.prototype._setBoundsByPath=function(polygonData,path){const bounds=new google.maps.LatLngBounds;if(path.length>0)SUI.each(path,vertex=>{bounds.extend(vertex)});polygonData.setRaw('_bounds',bounds)};SUI.GoogleMap.prototype._getCenterOfPolygon=function(polygonData){const bounds=polygonData.get('_bounds');const vertex=bounds.getCenter();return{'latitude':vertex.lat(),'longitude':vertex.lng()}};
SUI.GoogleMap.prototype.fitPolygonToMap=function(polygonId){const polygonData=this.getPolygon(polygonId);if(polygonData){const bounds=polygonData.get('_bounds');if(bounds){const center=bounds.getCenter();this.map.setCenter(center);this.map.fitBounds(bounds)}}};
SUI.GoogleMap.prototype._getPointsFromPolygon=function(polygonData){const polygon=polygonData.get('_polygon');const path=polygon.getPath().getArray();this._setBoundsByPath(polygonData,path);const points=[];SUI.each(path,vertex=>{points.push({latitude:vertex.lat(),longitude:vertex.lng()})});return points};SUI.GoogleMap.prototype._getComputeArea=function(polygon){const path=polygon.getPath();return google.maps.geometry.spherical.computeArea(path)};
SUI.GoogleMap.prototype.addPointToPolygon=function(polygonData,latitude,longitude){const polygon=polygonData.get('_polygon');const path=polygon.getPath();path.push(new google.maps.LatLng(latitude,longitude))};SUI.GoogleMap.prototype.setMarkers=function(opt_options={}){this.markers=new SUI.Collection;this.markerOptions=new SUI.Object({draggable:false});this.markerOptions.merge(opt_options)};
SUI.GoogleMap.prototype.setHeatmap=function(opt_options={}){const gradient=['rgba(102, 255, 0, 0)','rgba(102, 255, 0, 1)','rgba(147, 255, 0, 1)','rgba(193, 255, 0, 1)','rgba(238, 255, 0, 1)','rgba(244, 227, 0, 1)','rgba(249, 198, 0, 1)','rgba(255, 170, 0, 1)','rgba(255, 113, 0, 1)','rgba(255, 57, 0, 1)','rgba(255, 0, 0, 1)'];this.heatmapOptions=new SUI.Object({opacity:.6,radius:null,gradient:gradient});this.heatmapOptions.merge(opt_options)};
SUI.GoogleMap.prototype.createHeatmap=function(points,opt_heatmapOptions={}){this.heatmap=new google.maps.visualization.HeatmapLayer({data:this._convertPointsToPath(points),map:this.map});this.heatmapOptions.merge(opt_heatmapOptions);SUI.eachObject(this.heatmapOptions,(value,property)=>{this.heatmap.set(property,value)})};SUI.GoogleMap.prototype.removeHeatmap=function(){if(this.heatmap)this.heatmap.setMap(null)};
SUI.GoogleMap.prototype.setPolygons=function(opt_options={}){this.polygons=new SUI.Collection;this.polygonOptions=new SUI.Object({geodesic:true,strokeColor:'#FF0000',strokeOpacity:.5,strokeWeight:2,fillColor:'#FF0000',fillOpacity:.2,editable:false});this.polygonOptions.merge(opt_options)};
SUI.GoogleMap.prototype.createOrUpdateMarker=function(id,title,iconName,latitude,longitude,opt_markerData={},opt_options={}){const marker=this.getMarker(id);if(marker)this.updateMarker(id,title,iconName,latitude,longitude,opt_markerData,opt_options);else this.createMarker(id,title,iconName,latitude,longitude,opt_markerData,opt_options)};
SUI.GoogleMap.prototype.createMarker=function(id,title,iconName,latitude,longitude,opt_markerData={},opt_options={}){const markerData=new SUI.Object(opt_markerData);if(!markerData.get('id'))markerData.set('id',id);const options=new SUI.Object(this.markerOptions);options.merge(opt_options);const text=SUI.convert(title,'string');const marker=new google.maps.Marker(options.copy(true));marker.setPosition(new google.maps.LatLng(latitude,longitude));marker.setIcon(this.markerIcons[iconName].icon);marker.setShape(this.markerIcons[iconName].shape);
marker.setTitle(text);marker.setMap(this.map);markerData.setRaw('_marker',marker);const mapLabel=SUI.mapLabel(marker,text);markerData.setRaw('_map_label',mapLabel);this.markers.push(markerData);this._bindEventsToMarker(marker,markerData)};
SUI.GoogleMap.prototype.createMarkerByXY=function(id,title,iconName,x,y,markerData={}){const point=new google.maps.Point(x,y);const projection=this.overlay.getProjection();const location=projection.fromContainerPixelToLatLng(point);this.createMarker(id,title,iconName,location.lat(),location.lng(),markerData)};
SUI.GoogleMap.prototype._bindEventsToMarker=function(marker,markerData){const cleanMarkerData=this._cleanMarkerData(markerData);marker.addListener('click',event=>{this.eventMarkerClick(cleanMarkerData,event)});marker.addListener('rightclick',event=>{this.eventMarkerRightClick(cleanMarkerData,event)});marker.addListener('dragend',event=>{const vertex=marker.getPosition();const latitude=vertex.lat();const longitude=vertex.lng();this.eventMarkerChanged(cleanMarkerData,latitude,longitude,event)})};
SUI.GoogleMap.prototype._unbindEventsToMarker=function(marker){google.maps.event.clearInstanceListeners(marker)};
SUI.GoogleMap.prototype.updateMarker=function(id,title,iconName,latitude,longitude,opt_markerData={},opt_options={}){const markerData=this.getMarker(id);SUI.each(this._cleanMarkerData(opt_markerData),(value,key)=>{markerData.set(key,value)});const text=SUI.convert(title,'string');const marker=markerData.get('_marker');marker.setOptions(opt_options);const markerIcon=this.markerIcons[iconName];marker.setIcon(markerIcon.icon);marker.setShape(markerIcon.shape);marker.setTitle(text);marker.setPosition(new google.maps.LatLng(latitude,
longitude));const mapLabel=markerData.get('_map_label');mapLabel.set('text',text)};SUI.GoogleMap.prototype._cleanMarkerData=function(markerData){const cleanData=new SUI.Object;SUI.each(markerData,(value,key)=>{if(!SUI.inArray(['_marker','_map_label'],key))cleanData.set(key,value)});return cleanData};SUI.GoogleMap.prototype.getMarker=function(id){return this.markers.findById(id)};
SUI.GoogleMap.prototype.removeMarker=function(id){const markerData=this.getMarker(id);if(markerData){const marker=markerData.get('_marker');marker.setMap(null);this._unbindEventsToMarker(marker);this.markers.deleteById(id)}};SUI.GoogleMap.prototype.removeAllMarker=function(opt_callback=SUI.noop){this.markers.each(markerData=>{const marker=markerData.get('_marker');marker.setMap(null);this._unbindEventsToMarker(marker);opt_callback(markerData)});this.markers.clear()};
SUI.GoogleMap.prototype.fitMarkerToMap=function(markerId){const markerData=this.getMarker(markerId);if(markerData){const marker=markerData.get('_marker');const vertex=marker.getPosition();const latitude=vertex.lat();const longitude=vertex.lng();this.setCenter(latitude,longitude)}};
SUI.GoogleMap.prototype.openInfoWindow=function(markerId,content){const markerData=this.getMarker(markerId);const marker=markerData.get('_marker');const infoWindow=new google.maps.InfoWindow({content:SUI.convert(content,'string')});infoWindow.open(this.map,marker)};SUI.GoogleMap.prototype.eventMarkerClick=function(markerData,event){};SUI.GoogleMap.prototype.eventMarkerRightClick=function(markerData,event){};SUI.GoogleMap.prototype.eventMarkerChanged=function(markerData,latitude,longitude,event){};
SUI.GoogleMap.prototype.setMarkerIcon=function(name,iconOptions){const icon={url:iconOptions.url,size:new google.maps.Size(iconOptions.size[0],iconOptions.size[1]),origin:new google.maps.Point(iconOptions.origin[0],iconOptions.origin[1]),anchor:new google.maps.Point(iconOptions.anchor[0],iconOptions.anchor[1])};const shape={coords:iconOptions.coords,type:'poly'};this.markerIcons[name]={icon:icon,shape:shape}};
SUI.GoogleMap.prototype.searchAddress=function(query){const deferred=new SUI.Deferred;const geoCoder=new google.maps.Geocoder;geoCoder.geocode({address:SUI.convert(query,'string')},(results,status)=>{if(status===google.maps.GeocoderStatus.OK&&results.length>0){const points=[];SUI.each(results,result=>{const point={'address':result.formatted_address,'latitude':result.geometry.location.lat(),'longitude':result.geometry.location.lng()};points.push(point)});deferred.resolve([points])}else deferred.reject()});
return deferred.promise()};SUI.GoogleMap.prototype.setCenter=function(latitude,longitude,opt_boundCheck=false){const position=new google.maps.LatLng(latitude,longitude);if(opt_boundCheck){if(!this.map.getBounds().contains(position))this.map.setCenter(position)}else this.map.setCenter(position)};SUI.GoogleMap.prototype.getCenter=function(){const vertex=this.map.getCenter();return{'latitude':vertex.lat(),'longitude':vertex.lng()}};
SUI.GoogleMap.prototype.triggerResize=function(){google.maps.event.trigger(this.map,'resize')};
SUI.GoogleMap.prototype.getDinamicRadius=function(radiusPx){const point1=new google.maps.Point(0,0);const point2=new google.maps.Point(radiusPx,radiusPx);const projection=this.overlay.getProjection();const location1=projection.fromContainerPixelToLatLng(point1);const location2=projection.fromContainerPixelToLatLng(point2);const latLng1=new google.maps.LatLng(location1.lat(),location1.lng());const latLng2=new google.maps.LatLng(location2.lat(),location2.lng());return google.maps.geometry.spherical.computeDistanceBetween(latLng1,
latLng2)};goog.provide('SUI.widget.Location');goog.require('SUI');goog.require('SUI.GoogleMap');goog.require('SUI.Node');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Location=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.Location,SUI.Widget);
SUI.widget.Location.prototype._init=function(){this.inputBlock.addClass('location-widget');this._initButtons();this.icon=this.input.getData('icon');this.input.addEventListener('keyup',(input,event)=>{const inputNode=input.getNode();if(SUI.eq(event.keyCode,13))this.eventSearch(inputNode.value);else input.trigger('change');return true});this.input.addEventListener('change',input=>{const inputNode=input.getNode();const location=this.getValue();location['address']=SUI.typeCast(inputNode.value);this._setDataValue(location);
this.modelChange(location);this.checkValidity();return true})};SUI.widget.Location.prototype._initButtons=function(){this._initSearchButton();this._initAdvancedButton()};
SUI.widget.Location.prototype._initSearchButton=function(){const searchButton=new SUI.Node('a');searchButton.setAttribute('href','javascript:void(0)');searchButton.addClass(['search-button','material-icons']);searchButton.setHtml('pin_drop');searchButton.addEventListener('click',()=>{if(this.isEnabled()){const inputNode=this.input.getNode();this.eventSearch(inputNode.value)}});this.actionContainerNode.appendChild(searchButton)};
SUI.widget.Location.prototype._initAdvancedButton=function(){this.advancedButton=new SUI.Node('a');this.advancedButton.setAttribute('href','javascript:void(0)');this.advancedButton.addClass(['advanced-button','material-icons']);this.advancedButton.setHtml('settings');this.advancedButton.addEventListener('click',()=>{if(this.isEnabled())this._toggleAdvancedInputs()});this.actionContainerNode.appendChild(this.advancedButton)};
SUI.widget.Location.prototype.search=function(address){this.map.searchAddress(address).then(locations=>{const position=locations[0];const location={'address':SUI.typeCast(address),'latitude':position['latitude'],'longitude':position['longitude']};this.setValue(location)},()=>{})};
SUI.widget.Location.prototype.render=function(){this.inputBlock.addClass(['mdl-textfield','mdl-js-textfield','mdl-textfield--floating-label']);this.input.addClass('mdl-textfield__input');if(this.label&&this.label.exists())this.label.addClass('mdl-textfield__label');this._renderAdvancedInputs();this._renderMap();this._setDefaultValue();this.refresh()};
SUI.widget.Location.prototype.refresh=function(){if(this.isDisabled())this.mapLockNode.addClass('map-lock');else this.mapLockNode.removeClass('map-lock');SUI.mdl(this.inputBlock)};SUI.widget.Location.prototype._toggleAdvancedInputs=function(){this.advancedButton.toggleClass('active');this.advancedNode.toggleClass('hidden')};
SUI.widget.Location.prototype._renderAdvancedInputs=function(){this.advancedNode=new SUI.Node('div');this.advancedNode.addClass(['advanced','row','hidden']);this.inputBlock.appendChild(this.advancedNode);this.latitudeInput=this._renderAdvancedInput(SUI.generateId('latitude'),this.input.getData('latitude'),inputNode=>{const location=this.getValue();const latitude=inputNode.getNode().value;location['latitude']=latitude;this.setValue(location)});this.longitudeInput=this._renderAdvancedInput(SUI.generateId('longitude'),
this.input.getData('longitude'),inputNode=>{const location=this.getValue();const longitude=inputNode.getNode().value;location['longitude']=longitude;this.setValue(location)})};
SUI.widget.Location.prototype._renderAdvancedInput=function(id,labelText,callback){const blockNode=new SUI.Node('div');blockNode.addClass('col-6');this.advancedNode.appendChild(blockNode);const boxNode=new SUI.Node('div');boxNode.addClass(['mdl-textfield','mdl-js-textfield','mdl-textfield--floating-label']);blockNode.appendChild(boxNode);const advancedLabel=new SUI.Node('label');advancedLabel.setFor(id);advancedLabel.addClass('mdl-textfield__label');advancedLabel.setHtml(labelText);boxNode.appendChild(advancedLabel);
const advancedInput=new SUI.Node('input');advancedInput.setId(id);advancedInput.setAttribute('type','text');advancedInput.addClass('mdl-textfield__input');boxNode.appendChild(advancedInput);this._setAdditionalLabel(advancedLabel);advancedInput.addEventListener('change',input=>{callback(input);return true});return advancedInput};
SUI.widget.Location.prototype._renderMap=function(){const mapNode=new SUI.Node('div');mapNode.addClass('map');this.inputBlock.appendChild(mapNode);this.mapLockNode=new SUI.Node('div');this.mapLockNode.addClass('map-lock');this.inputBlock.appendChild(this.mapLockNode);this.map=new SUI.GoogleMap(this.inputBlock,'.map',{zoom:12,scrollwheel:true});this.map.setMarkers({'draggable':true});this.map.setMarkerIcon('marker',this.icon);this.map.eventMapClick=(latitude,longitude)=>{this.updatePosition(latitude,
longitude)};this.map.eventMarkerRightClick=()=>{this.updatePosition(null,null)};this.map.eventMarkerChanged=(_data,latitude,longitude)=>{this.updatePosition(latitude,longitude)}};SUI.widget.Location.prototype._setDefaultValue=function(){const location=this.getValue();if(!SUI.isNull(location['latitude'])&&!SUI.isNull(location['longitude'])){this.map.setCenter(location['latitude'],location['longitude']);this.map.createMarker(0,'','marker',location['latitude'],location['longitude']);this._setDataValue(location)}};
SUI.widget.Location.prototype.updatePosition=function(latitude,longitude){const location=this.getValue();location['latitude']=latitude;location['longitude']=longitude;this.setValue(location)};SUI.widget.Location.prototype._setDataValue=function(value){this.latitudeInput.getNode().value=value['latitude']||'';this.longitudeInput.getNode().value=value['longitude']||'';this.input.setAttribute('value',value['address']||'');this.input.setData('value',value)};
SUI.widget.Location.prototype.setValue=function(value){this._setDataValue(value);this.map.removeMarker(0);if(!SUI.isNull(value['latitude'])&&!SUI.isNull(value['longitude'])){this.map.setCenter(value['latitude'],value['longitude']);if(this.map.getMarker(0))this.map.updateMarker(0,'','marker',value['latitude'],value['longitude']);else this.map.createMarker(0,'','marker',value['latitude'],value['longitude'])}this.input.trigger('change')};
SUI.widget.Location.prototype.getValue=function(){const value=this.input.getData('value');return SUI.typeCast(value)};SUI.widget.Location.prototype.eventSearch=function(address){};goog.provide('SUI.widget.Number');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Number=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.Number,SUI.Widget);
SUI.widget.Number.prototype._init=function(){this.inputBlock.addClass('number-widget');this._initButtons();this.input.addEventListener('keyup',input=>{this._checkValue();const value=this.getValue();this.modelChange(value);this.checkValidity(true);return true});this.input.addEventListener('change',()=>{this._checkValue();const value=this.getValue();this.modelChange(value);this.checkValidity(true);return true})};
SUI.widget.Number.prototype._initButtons=function(){const actionNode=new SUI.Node('span');actionNode.addClass('step-change');this.actionContainerNode.appendChild(actionNode);const upButton=new SUI.Node('a');upButton.setAttribute('href','javascript:void(0)');upButton.addClass(['up-button','material-icons']);upButton.setHtml('keyboard_arrow_up');upButton.addEventListener('click',()=>{if(this.isEnabled()){let value=this.getValue()||0;value+=this._getStep();this.setValue(value);this.checkValidity(true)}});
actionNode.appendChild(upButton);const downButton=new SUI.Node('a');downButton.setAttribute('href','javascript:void(0)');downButton.addClass(['down-button','material-icons']);downButton.setHtml('keyboard_arrow_down');downButton.addEventListener('click',()=>{if(this.isEnabled()){let value=this.getValue()||0;value-=this._getStep();this.setValue(value);this.checkValidity(true)}});actionNode.appendChild(downButton)};
SUI.widget.Number.prototype._checkValue=function(){const value=this.getValue();const min=this._getMin();if(value<min)this.setValue(min);const max=this._getMax();if(value>max)this.setValue(max)};SUI.widget.Number.prototype._getMax=function(){const max=this.input.getAttribute('max')||9999999999;return SUI.typeCast(max)};SUI.widget.Number.prototype._getMin=function(){const min=this.input.getAttribute('min')||0;return SUI.typeCast(min)};
SUI.widget.Number.prototype._getStep=function(){const step=this.input.getAttribute('step')||1;return SUI.typeCast(step)};SUI.widget.Number.prototype.render=function(){this.inputBlock.addClass(['mdl-textfield','mdl-js-textfield','mdl-textfield--floating-label']);this.input.addClass(['mdl-textfield__input']);if(this.label&&this.label.exists())this.label.addClass('mdl-textfield__label');this.refresh()};
SUI.widget.Number.prototype.refresh=function(){if(this.isRequired()&&this.getValue()==='')this.inputBlock.addClass('is-invalid');SUI.mdl(this.inputBlock)};goog.provide('SUI.widget.Radiobutton');goog.requireType('SUI.Form');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Query');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Radiobutton=function(input,label,error,inputBlock,form){SUI.Widget.call(this,input,label,error,inputBlock,form);this._init()};goog.inherits(SUI.widget.Radiobutton,SUI.Widget);
SUI.widget.Radiobutton.prototype._init=function(){this.inputBlock.addClass('radiobutton-widget');this.input.addEventListener('change',()=>{this._change();return true})};
SUI.widget.Radiobutton.prototype._change=function(){const value=this.input.getAttribute('value');this.modelChange(value);this.checkValidity();const name=this.input.getAttribute('name');const radioButtonInputs=new SUI.Query(SUI.format('input[name="{0}"]',[name]),this.form.formNode);radioButtonInputs.each(radioButtonInput=>{const labelNode=radioButtonInput.getParentNode();labelNode.addClass('is-other-checked');const inputBlockNode=labelNode.getParentNode();inputBlockNode.removeClass('is-invalid')})};
SUI.widget.Radiobutton.prototype.render=function(){this.label.addClass(['mdl-radio','mdl-js-radio','mdl-js-ripple-effect']);const id=this.input.getId();this.label.setFor(id);const labelText=this.label.getHtml(true);const spanLabel=new SUI.Node('span');spanLabel.addClass('mdl-radio__label');spanLabel.setHtml(labelText);this.input.addClass('mdl-radio__button');this.label.insert(this.input);this.label.appendChild(spanLabel);this.dataLabelNode=new SUI.Node('span');this.dataLabelNode.addClass('widget-label');
this.label.insertBefore(this.dataLabelNode);this.refresh()};SUI.widget.Radiobutton.prototype.refresh=function(){const dataLabelText=this.label.getAttribute('data-label');if(dataLabelText){const labelText=this._getLabelRequiredText(dataLabelText);this.dataLabelNode.setHtml(labelText)}else this.dataLabelNode.setHtml('');if(this.isDisabled())this.inputBlock.addClass('is-disabled');SUI.mdl(this.label,false)};
SUI.widget.Radiobutton.prototype.setValue=function(value){if(this.input.getAttribute('value')===value){this.input.getNode().checked=true;this.input.trigger('change')}};SUI.widget.Radiobutton.prototype.getValue=function(){let value=null;this._getRadioButtonInputs().each(radioButtonInput=>{const checked=radioButtonInput.getNode().checked;if(checked)value=radioButtonInput.getAttribute('value')});return SUI.typeCast(value)};
SUI.widget.Radiobutton.prototype.setDisabled=function(state){this._getRadioButtonInputs().each(radioButtonInput=>{if(state){radioButtonInput.setAttribute('disabled');radioButtonInput.getParentNode().addClass('is-disabled');radioButtonInput.getParentNode().getParentNode().addClass('is-disabled')}else{radioButtonInput.removeAttribute('disabled');radioButtonInput.getParentNode().removeClass('is-disabled');radioButtonInput.getParentNode().getParentNode().removeClass('is-disabled')}radioButtonInput.getNode().disabled=
state});this.checkValidity(true,false)};SUI.widget.Radiobutton.prototype.isDisabled=function(){let isDisabled=false;this._getRadioButtonInputs().each(radioButtonInput=>{if(radioButtonInput.getNode().disabled)isDisabled=true});return isDisabled};SUI.widget.Radiobutton.prototype._getRadioButtonInputs=function(){const name=this.input.getAttribute('name');return new SUI.Query(SUI.format('input[name="{0}"]',[name]),this.form.formNode)};
SUI.widget.Radiobutton.prototype.setLabel=function(text){if(this.spanLabel&&!this.spanLabel.isEmpty()){this.spanLabel.setHtml(text);this._setAdditionalLabel(this.spanLabel)}};goog.provide('SUI.widget.Range');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Query');goog.require('SUI.Tooltip');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Range=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.Range,SUI.Widget);
SUI.widget.Range.prototype._init=function(){this.inputBlock.addClass('range-widget');this.input.addEventListener('input',input=>{const inputNode=input.getNode();this.input.setAttribute('value',inputNode.value);this.tooltip.setMessage(inputNode.value);this.modelChange(inputNode.value);this.checkValidity()})};
SUI.widget.Range.prototype.render=function(){this.inputBlock.addClass(['mdl-textfield','mdl-js-textfield','mdl-sliderfield']);this.input.addClass(['mdl-slider','mdl-js-slider']);if(this.label&&this.label.exists())this.label.addClass('mdl-textfield__label');this.refresh()};
SUI.widget.Range.prototype.refresh=function(){if(this.isRequired()&&this.getValue()==='')this.inputBlock.addClass('is-invalid');SUI.mdl(this.input);if(this.isDisabled())this.inputBlock.addClass('is-disabled');else this.inputBlock.removeClass('is-disabled');const containerNode=(new SUI.Query('.mdl-slider__container',this.inputBlock)).getItem();const value=this.getValue();this.tooltip=new SUI.Tooltip(containerNode);this.tooltip.render(value)};
SUI.widget.Range.prototype.setValue=function(value){const inputNode=this.input.getNode();inputNode['MaterialSlider']['change'](value);this.tooltip.render(value)};goog.provide('SUI.widget.Reset');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Reset=function(input){SUI.Widget.call(this,input);this._init()};goog.inherits(SUI.widget.Reset,SUI.Widget);SUI.widget.Reset.prototype._init=function(){this.input.setAttribute('name','reset')};SUI.widget.Reset.prototype.render=function(){this.input.addClass(['mdl-button','mdl-js-button','mdl-js-ripple-effect']);this.refresh()};
SUI.widget.Reset.prototype.refresh=function(){SUI.mdl(this.input)};goog.provide('SUI.widget.Search');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Search=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.Search,SUI.Widget);
SUI.widget.Search.prototype._init=function(){this.input.addEventListener('keyup',(input,event)=>{const inputNode=input.getNode();this.modelChange(inputNode.value);this.checkValidity();if(SUI.eq(event.keyCode,13))this.eventEnter(inputNode.value);return true});this.input.addEventListener('change',input=>{const inputNode=input.getNode();this.modelChange(inputNode.value);this.checkValidity();return true})};
SUI.widget.Search.prototype.render=function(){this.inputBlock.addClass(['search-widget','mdl-textfield','mdl-js-textfield','mdl-textfield--expandable']);this.input.addClass(['mdl-textfield__input']);this.label.addClass(['mdl-button','mdl-js-button','mdl-button--icon']);const iconNode=new SUI.Node('i');iconNode.addClass(['material-icons','search-button']);iconNode.setHtml('search');this.label.insert(iconNode);this.holderNode=new SUI.Node('div');this.holderNode.addClass('mdl-textfield__expandable-holder');
this.holderNode.appendChild(this.input);this.inputBlock.appendChild(this.holderNode);const labelNode=new SUI.Node('label');labelNode.addClass('mdl-textfield__label');this.holderNode.appendChild(labelNode);this._initClearButton();this.refresh()};SUI.widget.Search.prototype.refresh=function(){if(this.isRequired()&&this.getValue()==='')this.inputBlock.addClass('is-invalid');SUI.mdl(this.inputBlock)};
SUI.widget.Search.prototype._initClearButton=function(){const clearButton=new SUI.Node('a');clearButton.setAttribute('href','javascript:void(0)');clearButton.addClass(['material-icons','clear-button']);clearButton.setHtml('clear');clearButton.addEventListener('click',()=>{if(this.isEnabled()){this.inputBlock.removeClass(['is-dirty','is-focused']);this.setValue('');this.eventEnter('')}});this.holderNode.appendChild(clearButton)};SUI.widget.Search.prototype.eventEnter=function(value){};goog.provide('SUI.widget.Select');goog.require('SUI');goog.require('SUI.Collection');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Popup');goog.require('SUI.Query');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Select=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.Select,SUI.Widget);
SUI.widget.Select.prototype._init=function(){this.input.addClass('hidden');this.inputBlock.addClass('select-widget');this.query='';this.ids=[];this._initOptions();this._initChangeEvent();this._initPopup()};SUI.widget.Select.prototype.isMultiple=function(){return this.input.hasAttribute('multiple')};
SUI.widget.Select.prototype._initPopup=function(){this.containerNode=new SUI.Node('div');this._drawSearchInput();this.listNode=new SUI.Node('div');this.listNode.addClass('options-list');this.containerNode.appendChild(this.listNode);this.popup=new SUI.Popup(this.containerNode,this.inputBlock)};SUI.widget.Select.prototype._initChangeEvent=function(){this.input.addEventListener('change',()=>{this._change(true);return true})};
SUI.widget.Select.prototype._initOptions=function(){this.options=new SUI.Collection;const optionNodes=new SUI.Query('option',this.input);optionNodes.each(optionNode=>{const value=optionNode.getAttribute('value')||'';const image=optionNode.getAttribute('data-image')||'';const item=optionNode.getAttribute('data-item')||{};const text=optionNode.getText()||'';const option=new SUI.Object({'id':value,'name':text,'image':image,'item':item});option.setRaw('option_node',optionNode);this.options.push(option)})};
SUI.widget.Select.prototype.render=function(){if(this.label&&this.label.exists())this.label.addClass('widget-label');this.iconNode=new SUI.Node('a');this.iconNode.setAttribute('href','javascript:void(0)');this.iconNode.addClass(['material-icons','size-24','expander']);this.iconNode.setHtml('expand_more');this.iconNode.addEventListener('click',()=>{if(this.isEnabled())this.open()});this.actionContainerNode.appendChild(this.iconNode);this.refresh()};
SUI.widget.Select.prototype.refresh=function(){const selectContainerNode=(new SUI.Query('.select-container',this.inputBlock)).getItem();selectContainerNode.remove();if(this.isDisabled())this.inputBlock.addClass('is-disabled');else this.inputBlock.removeClass('is-disabled');this.selectContainerNode=new SUI.Node('div');this.selectContainerNode.addClass('select-container');this.selectContainerNode.addEventListener('click',()=>{if(this.isEnabled())this.open()});this.input.insertAfter(this.selectContainerNode);
this.selectNode=new SUI.Node('div');this.selectNode.addClass('select-input');this.selectContainerNode.appendChild(this.selectNode);const ids=this._getSelectedIds();this._setSelectTags(ids)};SUI.widget.Select.prototype.setValue=function(value){this.ids=value;if(!SUI.isArray(value))this.ids=[value];this._setSelectedIds(this.ids)};SUI.widget.Select.prototype.getValue=function(){let ids=this._getSelectedIds();ids=ids.filter(id=>{return!SUI.eq(id,'')});return this.isMultiple()?ids:ids[0]||null};
SUI.widget.Select.prototype.getOptionValue=function(opt_attribute){const value=this.getValue();if(value){const option=this.options.findById(value);return opt_attribute?option.get(SUI.format('item.{0}',[opt_attribute])):option}return value};SUI.widget.Select.prototype.showLoader=function(){this.iconNode.setHtml('refresh');this.iconNode.addClass('rotate')};SUI.widget.Select.prototype._hideLoader=function(){this.iconNode.setHtml('expand_more');this.iconNode.removeClass('rotate')};
SUI.widget.Select.prototype.setOptions=function(items,opt_value='value',opt_name='name',opt_image=''){const optionNodes=new SUI.Query('option',this.input);optionNodes.each(optionNode=>{if(optionNode.getAttribute('value'))optionNode.remove()});SUI.each(items,item=>{const value=item.get(opt_value);const name=item.get(opt_name);let image='';if(opt_image)image=item.get(opt_image);const optionNode=new SUI.Node('option');optionNode.setAttribute('value',value);optionNode.setAttribute('data-image',image);
optionNode.setAttribute('data-item',item);optionNode.setHtml(name);this.input.appendChild(optionNode)});this._initOptions();this._hideLoader();this.setValue(this.ids)};SUI.widget.Select.prototype._change=function(opt_force=false){const ids=this._getSelectedIds();this._setSelectTags(ids);const value=this.getValue();this.modelChange(value);this.checkValidity(opt_force)};
SUI.widget.Select.prototype._setSelectTags=function(ids){if(this.isRequired()&&ids.length===1&&ids[0]==='')this.inputBlock.addClass('is-invalid');if(this.isMultiple())this._setMultipleTag(ids);else this._setSimpleTag(ids[0])};SUI.widget.Select.prototype._setSimpleTag=function(id){const option=this.options.findById(id);this._setTags(option)};
SUI.widget.Select.prototype._setMultipleTag=function(ids){const options=[];SUI.each(ids,id=>{const option=this.options.findById(id);if(option)options.push(option)});if(SUI.neq(options.length,0))this._setTags(options);else if(this.isRequired()){const option=this.options.get(0);this._setTags(option)}else if(SUI.eq(ids.length,0))this._setTags([])};
SUI.widget.Select.prototype._setTags=function(tags){if(!SUI.isArray(tags))tags=[tags];this.selectNode.removeChildren();SUI.each(tags,tag=>{const tagNode=new SUI.Node('div');tagNode.addClass('widget-tag');tagNode.setHtml(tag.get('name'));if(this.isEnabled())tagNode.addEventListener('click',()=>{this.open()});this.selectNode.appendChild(tagNode);const id=tag.get('id');if(SUI.neq(id,'')&&this.isEnabled()){const iconNode=new SUI.Node('a');iconNode.setAttribute('href','javascript:void(0)');iconNode.addClass(['material-icons',
'size-18','close']);iconNode.setHtml('close');iconNode.addEventListener('click',()=>{this._handleSelectedId(id)});tagNode.addClass('tag-with-action');tagNode.appendChild(iconNode)}})};
SUI.widget.Select.prototype._setSelectedIds=function(ids,opt_force=false){this.options.each(function(option){const id=option.get('id');const selected=SUI.inArray(ids,id);const optionNode=option.get('option_node');const node=optionNode.getNode();if(selected)node.setAttribute('selected',selected);else node.removeAttribute('selected');node.selected=selected});this._change(opt_force)};
SUI.widget.Select.prototype._getSelectedIds=function(){const ids=[];this.options.each(function(option){const optionNode=option.get('option_node');const node=optionNode.getNode();if(node.selected){const id=option.get('id');ids.push(id)}});return ids.length===0?['']:ids};
SUI.widget.Select.prototype._handleSelectedId=function(id){let ids=this._getSelectedIds();if(this.isMultiple()){if(SUI.eq(id,'')||SUI.eq(ids[0],''))SUI.clear(ids);if(SUI.inArray(ids,id))SUI.remove(ids,id);else ids.push(id);if(ids.length===0)ids=['']}else if(SUI.inArray(ids,id))ids=[''];else ids=[id];this.query='';this._setSelectedIds(ids,true);this.close()};
SUI.widget.Select.prototype._drawItems=function(items){this.listNode.removeChildren();const ids=this._getSelectedIds();SUI.each(items,item=>{const id=item.get('id');const listItem=new SUI.Node('a');listItem.setAttribute('href','javascript:void(0)');if(SUI.inArray(ids,id))listItem.addClass('selected');listItem.addEventListener('click',()=>{this._handleSelectedId(id)});this.listNode.appendChild(listItem);const image=item.get('image');if(image){const imageNode=new SUI.Node('img');imageNode.setAttribute('src',
image);listItem.appendChild(imageNode)}const name=item.get('name');const nameNode=new SUI.Node('span');nameNode.setHtml(name);listItem.appendChild(nameNode)})};
SUI.widget.Select.prototype._drawSearchInput=function(){const searchParentNode=new SUI.Node('div');searchParentNode.addClass('search-box');this.containerNode.appendChild(searchParentNode);const searchNode=new SUI.Node('div');searchNode.addClass(['mdl-textfield','mdl-js-textfield']);searchNode.addEventListener('click',()=>{});searchParentNode.appendChild(searchNode);const id=SUI.generateId('select');this.searchInputNode=new SUI.Node('input');this.searchInputNode.setId(id);this.searchInputNode.setAttribute('type',
'text');this.searchInputNode.addClass('mdl-textfield__input');this.searchInputNode.addEventListener('keyup',input=>{const node=input.getNode();this._search(node.value);return true});searchNode.appendChild(this.searchInputNode);const labelNode=new SUI.Node('label');labelNode.setFor(id);labelNode.addClass('mdl-textfield__label');searchNode.appendChild(labelNode);SUI.mdl(searchNode)};SUI.widget.Select.prototype.open=function(){this._search(this.query);this.popup.open();this.searchInputNode.getNode().focus()};
SUI.widget.Select.prototype.close=function(){this.popup.close()};SUI.widget.Select.prototype._search=function(query){this.query=query;this.searchInputNode.getNode().value=query;this.searchInputNode.set('value',query);const regExp=new RegExp(query,'i');const items=[];this.options.each(function(option){const name=option.get('name');if(regExp.test(name))items.push(option)});this._drawItems(items)};goog.provide('SUI.widget.Submit');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Submit=function(input){SUI.Widget.call(this,input);this._init()};goog.inherits(SUI.widget.Submit,SUI.Widget);SUI.widget.Submit.prototype._init=function(){this.input.setAttribute('name','submit')};
SUI.widget.Submit.prototype.render=function(){this.input.addClass(['mdl-button','mdl-js-button','mdl-button--raised','mdl-js-ripple-effect','mdl-button--primary']);this.refresh()};SUI.widget.Submit.prototype.refresh=function(){SUI.mdl(this.input)};goog.provide('SUI.widget.Switch');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.widget');goog.require('SUI.widget.BaseCheckbox');SUI.widget.Switch=function(input,label,error,inputBlock){SUI.widget.BaseCheckbox.call(this,input,label,error,inputBlock)};goog.inherits(SUI.widget.Switch,SUI.widget.BaseCheckbox);
SUI.widget.Switch.prototype.render=function(){this.label.addClass(['mdl-switch','mdl-js-switch','mdl-js-ripple-effect']);const labelText=this.label.getText();this.spanLabel=new SUI.Node('span');this.spanLabel.addClass('mdl-switch__label');this.spanLabel.setHtml(labelText);this.input.addClass('mdl-switch__input');this.label.insert(this.input);this.label.appendChild(this.spanLabel);this.dataLabelNode=new SUI.Node('span');this.dataLabelNode.addClass('widget-label');this.label.insertBefore(this.dataLabelNode);
this.refresh()};goog.provide('SUI.widget.Text');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Text=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.Text,SUI.Widget);
SUI.widget.Text.prototype._init=function(){this.inputBlock.addClass('text-widget');this.input.addEventListener('keyup',input=>{const inputNode=input.getNode();this.modelChange(inputNode.value);this.checkValidity();return true});this.input.addEventListener('change',input=>{const inputNode=input.getNode();this.modelChange(inputNode.value);this.checkValidity();return true})};
SUI.widget.Text.prototype.render=function(){this.inputBlock.addClass(['mdl-textfield','mdl-js-textfield','mdl-textfield--floating-label']);this.input.addClass(['mdl-textfield__input']);if(this.label&&this.label.exists())this.label.addClass('mdl-textfield__label');this.refresh()};SUI.widget.Text.prototype.refresh=function(){if(this.isRequired()&&this.getValue()==='')this.inputBlock.addClass('is-invalid');SUI.mdl(this.inputBlock)};SUI.widget.Text.prototype.getValue=function(){return this.input.getNode().value};goog.provide('SUI.widget.Textarea');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Textarea=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.Textarea,SUI.Widget);
SUI.widget.Textarea.prototype._init=function(){this.inputBlock.addClass('textarea-widget');this.input.addEventListener('keyup',input=>{const inputNode=input.getNode();this.modelChange(inputNode.value);this.checkValidity(true);this.richText.setHtml(inputNode.value);return true});this.input.addEventListener('change',input=>{const inputNode=input.getNode();this.modelChange(inputNode.value);this.checkValidity(true);return true})};
SUI.widget.Textarea.prototype.render=function(){this.inputBlock.addClass(['mdl-textfield','mdl-js-textfield','mdl-textfield--floating-label']);this.input.addClass(['mdl-textfield__input','mdl-textarea__input']);if(this.label&&this.label.exists())this.label.addClass('mdl-textfield__label');if(this._isRichText())this._renderRichText();this.refresh()};
SUI.widget.Textarea.prototype._renderRichText=function(){this.input.addClass('hidden');let value=this.getValue();value=value.indexOf('<p>')===0?value:`<p>${value||'<br />'}</p>`;this.richText=new SUI.Node('div');this.richText.addClass(['mdl-textfield__input','mdl-textarea__input','textbox']);this.richText.setHtml(value);this.richText.addEventListener('keydown',(_node,event)=>{if(event.keyCode===13)document.execCommand('defaultParagraphSeparator',false,'p');return true});this.richText.addEventListener('keyup',
node=>{this._setValue(node.getHtml(true));return true});this.input.insertAfter(this.richText);this.richTextNode=this.richText.getNode();this.richTextNode.contentEditable='true';this._renderToolbarButtons()};SUI.widget.Textarea.prototype._isRichText=function(){return!!this.input.getAttribute('data-rich-text')};
SUI.widget.Textarea.prototype._renderToolbarButtons=function(){this.toolbarNode=new SUI.Node('div');this.toolbarNode.addClass('toolbar');this.input.insertBefore(this.toolbarNode);this._renderToolbarButton('undo',()=>{this._formatDoc('undo')});this._renderToolbarButton('redo',()=>{this._formatDoc('redo')});this._renderToolbarButton('format_bold',()=>{this._formatDoc('bold')});this._renderToolbarButton('format_italic',()=>{this._formatDoc('italic')});this._renderToolbarButton('format_underline',()=>
{this._formatDoc('underline')});this._renderToolbarButton('format_list_bulleted',()=>{this._formatDoc('insertunorderedlist')});this._renderToolbarButton('format_list_numbered',()=>{this._formatDoc('insertorderedlist')});this._renderToolbarButton('format_clear',()=>{this._formatDoc('removeFormat')});this._renderToolbarButton('code',()=>{this._setHtmlMode(!this._isHtmlMode())})};
SUI.widget.Textarea.prototype._renderToolbarButton=function(iconName,action){const boldButtonNode=new SUI.Node('a');boldButtonNode.setAttribute('href','javascript:void(0)');boldButtonNode.addClass('material-icons');boldButtonNode.setHtml(iconName);boldButtonNode.addEventListener('click',()=>{action()});this.toolbarNode.appendChild(boldButtonNode)};SUI.widget.Textarea.prototype._setHtmlMode=function(value){this.htmlMode=value;this._setDocMode(this.htmlMode)};
SUI.widget.Textarea.prototype._isHtmlMode=function(){return this.htmlMode===true};SUI.widget.Textarea.prototype._formatDoc=function(sCmd,opt_sValue){if(!this._isHtmlMode()){document.execCommand(sCmd,false,opt_sValue);this._setValue(this.richTextNode.innerHTML)}};SUI.widget.Textarea.prototype._setDocMode=function(_isHtmlMode){if(_isHtmlMode){this.richText.addClass('hidden');this.input.removeClass('hidden')}else{this.richText.removeClass('hidden');this.input.addClass('hidden')}this.richTextNode.focus()};
SUI.widget.Textarea.prototype.refresh=function(){if(this.isRequired()&&this.getValue()==='')this.inputBlock.addClass('is-invalid');if(this._isRichText()&&this.isDisabled())this.richTextNode.contentEditable='false';SUI.mdl(this.inputBlock)};SUI.widget.Textarea.prototype._setValue=function(value){const inputNode=this.input.getNode();inputNode.value=value;this.input.trigger('change')};SUI.widget.Textarea.prototype.setValue=function(value){this.richTextNode.innerHTML=value;this._setValue(value)};
SUI.widget.Textarea.prototype.getValue=function(){return this.input.getNode().value};goog.provide('SUI.widget.Url');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.Url=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.Url,SUI.Widget);
SUI.widget.Url.prototype._init=function(){this.inputBlock.addClass('url-widget');this.protocol=this.input.getData('protocol');this.input.addEventListener('keyup',input=>{const inputNode=input.getNode();this.modelChange(inputNode.value);this.checkValidity();return true});this.input.addEventListener('change',input=>{const inputNode=input.getNode();this.modelChange(inputNode.value);this.checkValidity();return true})};
SUI.widget.Url.prototype.render=function(){this.inputBlock.addClass(['mdl-textfield','mdl-js-textfield','mdl-textfield--floating-label']);this.input.addClass(['mdl-textfield__input']);if(this.label&&this.label.exists())this.label.addClass('mdl-textfield__label');if(this.protocol){const protocolNode=new SUI.Node('span');protocolNode.addClass('protocol');protocolNode.setHtml(this.protocol);this.input.insertAfter(protocolNode)}this.refresh()};
SUI.widget.Url.prototype.refresh=function(){if(this.isRequired()&&this.getValue()==='')this.inputBlock.addClass('is-invalid');SUI.mdl(this.inputBlock)};goog.provide('SUI.FormWidget');goog.requireType('SUI.Form');goog.require('SUI');goog.require('SUI.Query');goog.require('SUI.Node');goog.require('SUI.Widget');goog.require('SUI.widget.Button');goog.require('SUI.widget.Checkbox');goog.require('SUI.widget.Color');goog.require('SUI.widget.Datetime');goog.require('SUI.widget.DatetimeRange');goog.require('SUI.widget.File');goog.require('SUI.widget.Hidden');goog.require('SUI.widget.IconToggle');goog.require('SUI.widget.Location');goog.require('SUI.widget.Number');
goog.require('SUI.widget.Radiobutton');goog.require('SUI.widget.Range');goog.require('SUI.widget.Reset');goog.require('SUI.widget.Search');goog.require('SUI.widget.Select');goog.require('SUI.widget.Submit');goog.require('SUI.widget.Switch');goog.require('SUI.widget.Text');goog.require('SUI.widget.Textarea');goog.require('SUI.widget.Url');
SUI.FormWidget=function(inputBlock,form){let input=inputBlock;let label=null;let error=null;let selectedIndex=false;let tagName=inputBlock.getTagName();const tagType=inputBlock.getAttribute('type');if(SUI.eq(tagName,'input')&&!SUI.inArray(['hidden','reset','submit','button'],tagType)){inputBlock=inputBlock.getParentNode();selectedIndex=0}tagName=inputBlock.getTagName();if(SUI.eq(tagName,'div')){const inputs=(new SUI.Query('input, textarea, select',inputBlock)).getItems();const index=selectedIndex!==
false?selectedIndex:inputs.length-1;input=inputs[index];label=(new SUI.Query('label',inputBlock)).getItem();error=inputBlock.createElement('span');error.addClass(['mdl-textfield__error','text-truncate']);inputBlock.appendChild(error);inputBlock.addClass('init-widget')}return this._getWidget(input,label,error,inputBlock,form)};
SUI.FormWidget.prototype._getWidget=function(input,label,error,inputBlock,form){input.addClass('init-widget');const dataType=input.getData('type');const tagName=input.getTagName();let result=null;if(SUI.eq(tagName,'textarea'))result=new SUI.widget.Textarea(input,label,error,inputBlock);if(SUI.eq(tagName,'select'))result=new SUI.widget.Select(input,label,error,inputBlock);else if(SUI.eq(tagName,'input')||SUI.eq(tagName,'button')){const type=input.get('type');switch(type){case 'submit':result=new SUI.widget.Submit(input);
break;case 'button':result=new SUI.widget.Button(input);break;case 'reset':result=new SUI.widget.Reset(input);break;case 'datetime':case 'datetime-local':case 'date':case 'time':case 'month':case 'week':case 'year':const inputs=new SUI.Query('input',inputBlock);if(inputs.size()===2){let handledInput=inputs.get(0);let isStartInput=true;if(handledInput.getAttribute('name')===input.getAttribute('name')){handledInput=inputs.get(1);isStartInput=false}result=new SUI.widget.DatetimeRange(handledInput,label,
error,inputBlock,isStartInput)}else result=new SUI.widget.Datetime(input,label,error,inputBlock);break;case 'file':result=new SUI.widget.File(input,label,error,inputBlock);break;case 'checkbox':if(SUI.eq(dataType,'switch'))result=new SUI.widget.Switch(input,label,error,inputBlock);else if(SUI.eq(dataType,'icon-toggle'))result=new SUI.widget.IconToggle(input,label,error,inputBlock);else result=new SUI.widget.Checkbox(input,label,error,inputBlock);break;case 'radio':result=new SUI.widget.Radiobutton(input,
label,error,inputBlock,form);break;case 'range':result=new SUI.widget.Range(input,label,error,inputBlock);break;case 'color':result=new SUI.widget.Color(input,label,error,inputBlock);break;case 'hidden':result=new SUI.widget.Hidden(input);break;case 'number':result=new SUI.widget.Number(input,label,error,inputBlock);break;case 'url':result=new SUI.widget.Url(input,label,error,inputBlock);break;case 'search':result=new SUI.widget.Search(input,label,error,inputBlock);break;case 'text':if(SUI.eq(dataType,
'location'))result=new SUI.widget.Location(input,label,error,inputBlock);else result=new SUI.widget.Text(input,label,error,inputBlock);break;default:result=new SUI.widget.Text(input,label,error,inputBlock);break}}return result};goog.provide('SUI.Form');goog.require('SUI');goog.require('SUI.Collection');goog.require('SUI.FormWidget');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Query');goog.require('SUI.Widget');SUI.Form=function(dom,opt_selector='form'){this.formNode=(new SUI.Query(opt_selector,dom)).getItem();this.formNode.setAttribute('novalidate');SUI.Collection.call(this,[],SUI.FormWidget,{parent:this.formNode});this._init()};goog.inherits(SUI.Form,SUI.Collection);
SUI.Form.prototype._init=function(){this.model=new SUI.Object;this.initWidgets=[];this.buttonClasses=['input[type=submit]:not(.init-widget)','input[type=button]:not(.init-widget)','input[type=reset]:not(.init-widget)','button:not(.init-widget)'];this.widgetClasses=['.input-block input:not([type="hidden"])+input:not([type="hidden"])','.input-block:not(.init-widget)','form > input[type=hidden]:not(.init-widget)'];this._initWidgets();this._initFormEvent()};
SUI.Form.prototype._initFormEvent=function(){this.formNode.addEventListener('keydown',function(node,event){const textArea=/textarea/i.test((event.target||event.srcElement).tagName);if(!(textArea||(event.keyCode||event.which||event.charCode||0)!==13))event.preventDefault();return true});this._initSubmitFormEvent();this._initResetFormEvent()};
SUI.Form.prototype._initSubmitFormEvent=function(){this.formNode.addEventListener('submit',(node,event)=>{event.preventDefault();if(this.checkValidity(true))this.eventSubmit(this.model,node)})};SUI.Form.prototype._initResetFormEvent=function(){this.formNode.addEventListener('reset',(node,event)=>{event.preventDefault();this.eventReset(this.model,node)})};
SUI.Form.prototype._initWidgets=function(){const widgets=(new SUI.Query(this.widgetClasses.concat(this.buttonClasses).join(', '),this.formNode)).getItems();this.load(widgets);const updatedWidgets=[];const initWidgets=[];this.each(widget=>{const widgetName=widget.getName();if(SUI.inArray(this.initWidgets,widgetName)){if(!SUI.inArray(updatedWidgets,widgetName)){widget.refresh();widget.setValue(widget.getValue());updatedWidgets.push(widgetName)}}else{widget.modelChange=value=>{this._widgetValueChange(widget,
value)};widget.eventClick=node=>{this.eventButton(this.model,node)};if(!SUI.inArray(updatedWidgets,widgetName)){this._setValue(widgetName,widget.getValue());updatedWidgets.push(widgetName)}widget.render();if(!SUI.inArray(initWidgets,widgetName))initWidgets.push(widgetName)}});this.initWidgets=this.initWidgets.concat(initWidgets)};
SUI.Form.prototype.setModel=function(model){this.each(widget=>{const name=widget.getName();const value=model.get(name);if(!SUI.isUndefined(value)){widget.setValue(value);widget.checkValidity(true)}});this.model.merge(model)};SUI.Form.prototype.getModel=function(){return this.model};SUI.Form.prototype.reset=function(){this.each(widget=>{widget.setValue();widget.checkValidity(true)});this.model.clear()};SUI.Form.prototype._setValue=function(name,value){this.model.set(name,value)};
SUI.Form.prototype._getValue=function(name){return this.model.get(name)};SUI.Form.prototype._widgetValueChange=function(widget,value){const widgetName=widget.getName();const oldValue=this._getValue(widgetName);this._setValue(widgetName,value);if(!SUI.isSame(value,oldValue))widget.eventChange(value,oldValue)};
SUI.Form.prototype.setErrors=function(data){const errors=new SUI.Object(data);this.each(function(widget){const name=widget.getName();const error=errors.get(name,[]);widget.setError(error.join(', '),true)})};SUI.Form.prototype.checkValidity=function(opt_force=false){this.each(function(widget){widget.checkValidity(opt_force)});return this.formNode.getNode().checkValidity()};SUI.Form.prototype.isValid=function(){return this.checkValidity(true)};SUI.Form.prototype.isInvalid=function(){return!this.isValid()};
SUI.Form.prototype.refresh=function(){this.deleteAllByCondition(widget=>{const exists=widget.exists();if(!exists){const widgetName=widget.getName();this.model.remove(widgetName);SUI.remove(this.initWidgets,widgetName)}return!exists});this._initWidgets()};SUI.Form.prototype.findByModel=function(value){return this.findByCondition((item,i)=>{const modelName=this.get(i,'model');return modelName===value})};
SUI.Form.prototype.eventSubmit=function(model,node){console.warn('SUI.Form.eventSubmit()',model,node)};SUI.Form.prototype.eventReset=function(model,node){console.warn('SUI.Form.eventReset()',model,node)};SUI.Form.prototype.eventButton=function(model,node){console.warn('SUI.Form.eventButton()',model,node)};SUI.Form.prototype.lock=function(){this.each(widget=>{widget.disabled=widget.isDisabled()});this.each(widget=>{widget.setDisabled(true)})};
SUI.Form.prototype.unlock=function(){this.each(widget=>{widget.setDisabled(widget.disabled)})};goog.provide('SUI.Navigation');goog.require('SUI');goog.require('SUI.Collection');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Query');goog.require('SUI.lib.Http');SUI.Navigation=function(opt_http,opt_options={}){this.http=opt_http;this._setOptions(opt_options);this._init()};SUI.Navigation.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object;_self.options.merge(opt_options)};
SUI.Navigation.prototype._init=function(){this.container=new SUI.Collection;this.linkNodeKey='node'};
SUI.Navigation.prototype.add=function(item){const id=item.get('id');const image=item.get('image');const icon=item.get('icon');const title=item.get('title');const counter=item.get('counter');const href=item.get('href');const action=item.get('action');const disabled=item.get('disabled');if(image)this.addImage(id,image,title,action,href,item);else if(icon)this.addIcon(id,icon,title,action,href,item);else if(!SUI.isUndefined(counter))this.addCounter(id,counter,title,action,href,item);else this.addText(id,
title,action,href,item);if(disabled)this.setDisabled(id)};SUI.Navigation.prototype.addCounter=function(id,counter,title,action,opt_href='',opt_data={}){const item=this._setItem(id,title,action,opt_href,opt_data);const counterSpan=new SUI.Node('span');counterSpan.addClass('counter');counterSpan.setHtml(counter);const linkNode=item.get(this.linkNodeKey);linkNode.beforeChild(counterSpan)};
SUI.Navigation.prototype.addIcon=function(id,icon,title,action,opt_href='',opt_data={}){const item=this._setItem(id,title,action,opt_href,opt_data);const iconNode=new SUI.Node('i');iconNode.addClass(['material-icons']);iconNode.setHtml(icon);const imageSpan=new SUI.Node('span');imageSpan.addClass('image');imageSpan.appendChild(iconNode);const linkNode=item.get(this.linkNodeKey);linkNode.beforeChild(imageSpan)};
SUI.Navigation.prototype.addImage=function(id,image,title,action,opt_href='',opt_data={}){const item=this._setItem(id,title,action,opt_href,opt_data);const imageSpan=new SUI.Node('span');imageSpan.addClass('image');if(image.indexOf('.svg')!==-1)this.http.get(image,{},{'Authorization':'','X-Requested-With':''}).then(function(data){const svgTag=(new SUI.Query('svg',data)).getItem();imageSpan.appendChild(svgTag)});else{const imageTag=new SUI.Node('img');imageTag.setAttribute('src',image);if(title)imageTag.setAttribute('alt',
title);imageSpan.appendChild(imageTag)}const linkNode=item.get(this.linkNodeKey);linkNode.beforeChild(imageSpan)};SUI.Navigation.prototype.addText=function(id,title,action,opt_href='',opt_data={}){this._setItem(id,title,action,opt_href,opt_data)};
SUI.Navigation.prototype._setItem=function(id,title,action,opt_href='',opt_data={}){const linkNode=new SUI.Node('a');if(title){const titleSpan=new SUI.Node('span');titleSpan.addClass('title');titleSpan.setHtml(title);linkNode.appendChild(titleSpan)}linkNode.setAttribute('href',opt_href||'javascript:void(0)');const href=linkNode.getAttribute('href');const listener=linkNode.addEventListener('click',()=>{action(href)});const item=new SUI.Object(opt_data);item.merge({'id':id,'title':title,'href':href,
'action':action,'listener':listener});item.setRaw(this.linkNodeKey,linkNode);this.container.push(item);return item};SUI.Navigation.prototype.each=function(next){this.container.each(function(item){next(item)})};SUI.Navigation.prototype.bindToContainer=function(containerNode){containerNode.removeChildren();this.each(item=>{const linkNode=item.get(this.linkNodeKey);containerNode.appendChild(linkNode)})};SUI.Navigation.prototype.setDisabled=function(id){const item=this.container.findById(id);if(item)this._disabled(item)};
SUI.Navigation.prototype._disabled=function(item){const linkNode=item.get(this.linkNodeKey);linkNode.addClass('disabled');linkNode.removeEventListener('click',item.get('listener'));linkNode.setAttribute('href','javascript:void(0)')};SUI.Navigation.prototype.setEnabled=function(id){const item=this.container.findById(id);if(item)this._enabled(item)};
SUI.Navigation.prototype._enabled=function(item){this._disabled(item);const linkNode=item.get(this.linkNodeKey);linkNode.removeClass('disabled');const action=item.get('action');const href=item.get('href');linkNode.setAttribute('href',href);const listener=linkNode.addEventListener('click',()=>{action(href)});item.set('listener',listener)};
SUI.Navigation.prototype.setActive=function(id){this.each(item=>{const linkNode=item.get(this.linkNodeKey);linkNode.removeClass('active');const itemId=item.get('id');if(itemId[itemId.length-1]==='.'&&SUI.contain(id,itemId)||SUI.eq(id,itemId))linkNode.addClass('active')})};SUI.Navigation.prototype.setAllInactive=function(){this.each(item=>{const linkNode=item.get(this.linkNodeKey);linkNode.removeClass('active')})};
SUI.Navigation.prototype.show=function(id){const item=this.container.findById(id);if(item){const linkNode=item.get(this.linkNodeKey);linkNode.removeClass('hidden');this._enabled(item)}};SUI.Navigation.prototype.hide=function(id){const item=this.container.findById(id);if(item){const linkNode=item.get(this.linkNodeKey);linkNode.addClass('hidden');this._disabled(item)}};goog.provide('SUI.ProgressStatus');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Query');SUI.ProgressStatus=function(dom,opt_selector='.progress-status',opt_options={}){this.progressStatusNode=(new SUI.Query(opt_selector,dom)).getItem();this._setOptions(opt_options);this._init()};
SUI.ProgressStatus.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({successStyle:'success',infoStyle:'info',warningStyle:'warning',errorStyle:'error'});_self.options.merge(opt_options)};SUI.ProgressStatus.prototype._init=function(){this.iconNode=(new SUI.Query('.icon',this.progressStatusNode)).getItem();this.textNode=(new SUI.Query('.text',this.progressStatusNode)).getItem()};
SUI.ProgressStatus.prototype._setStatus=function(cssClass,text,opt_icon=''){this.progressStatusNode.removeClass([this.options.errorStyle,this.options.successStyle,this.options.infoStyle,this.options.warningStyle]);this.progressStatusNode.addClass(cssClass);this.textNode.setHtml(text);if(opt_icon)this.iconNode.setHtml(opt_icon)};SUI.ProgressStatus.prototype.setSuccess=function(text,opt_icon=''){this._setStatus(this.options.successStyle,text,opt_icon)};
SUI.ProgressStatus.prototype.setInfo=function(text,opt_icon=''){this._setStatus(this.options.infoStyle,text,opt_icon)};SUI.ProgressStatus.prototype.setWarning=function(text,opt_icon=''){this._setStatus(this.options.warningStyle,text,opt_icon)};SUI.ProgressStatus.prototype.setError=function(text,opt_icon=''){this._setStatus(this.options.errorStyle,text,opt_icon)};goog.provide('SUI.TabPanel');goog.require('SUI');goog.require('SUI.Async');goog.require('SUI.Deferred');goog.require('SUI.Node');goog.require('SUI.Promise');goog.require('SUI.Query');SUI.TabPanel=function(dom,opt_selector='.tab-panel',opt_selectedTab='',opt_defaultTab=''){this.tabPanel=(new SUI.Query(opt_selector,dom)).getItem();this.options={selected_tab:opt_selectedTab,default_tab:opt_defaultTab||opt_selectedTab};this._init()};
SUI.TabPanel.prototype._init=function(){this._initTabs();this._initPanels();this.activeTab=this.options.selected_tab;this._setActive(this.activeTab)};SUI.TabPanel.prototype._initTabs=function(){this.tabs=new SUI.Query('.tabs a',this.tabPanel);this.tabs.each(tab=>{const panelId=tab.getAttribute('href').substr(1);if(this.tabs.size()===1)tab.addClass('hidden');tab.setData('panel',panelId);tab.setAttribute('href','javascript:void(0)');tab.addEventListener('click',_tabNode=>{this.setActive(panelId)})})};
SUI.TabPanel.prototype._initPanels=function(){this.panels=new SUI.Query('.panel',this.tabPanel)};SUI.TabPanel.prototype._setActive=function(panelId){let activeTab=this.options.default_tab;this.panels.each(panel=>{panel.removeClass('active');if(panel.getId()===panelId||panel.hasClass(panelId)){panel.addClass('active');activeTab=panelId}});this.tabs.each(tab=>{tab.removeClass('active');if(tab.getData('panel')===panelId)tab.addClass('active')});this.activeTab=activeTab};
SUI.TabPanel.prototype.eventChange=function(panelId){console.warn('SUI.TabPanel.eventChange()',panelId)};SUI.TabPanel.prototype.setActive=function(panelId){const deferred=new SUI.Deferred;if(!SUI.isNull(panelId)){this._setActive(panelId);const async=new SUI.Async;async.serial([()=>{return this.eventChange(this.getActive())}]).defer(deferred)}else deferred.reject();return deferred.promise()};SUI.TabPanel.prototype.getActive=function(){return this.activeTab};goog.provide('SUI.Table');goog.require('SUI');goog.require('SUI.Collection');goog.require('SUI.ContentHandler');goog.require('SUI.Dropdown');goog.require('SUI.Node');goog.require('SUI.Object');goog.require('SUI.Pager');goog.require('SUI.Query');goog.require('SUI.Tooltip');SUI.Table=function(dom,opt_selector='table',opt_options={}){this.tableNode=(new SUI.Query(opt_selector,dom)).getItem();this._setOptions(opt_options);this._init()};
SUI.Table.prototype._setOptions=function(opt_options={}){const _self=this;_self.options=new SUI.Object({no_content:{image_url:null,text:''},row_count:10,pager_num:4,sort:{column:null,order:'desc'},columns:[],calculations:{},sorted:[],column:null});_self.options.merge(opt_options)};
SUI.Table.prototype._init=function(){this.collection=new SUI.Collection;this.query='';this.actions=[];if(!this.tableNode.getId()){this.tableNode.setId(SUI.generateId('table'));this._initContentHandler();this._initHeader();this._initSearch();this._initStructure()}else;};SUI.Table.prototype._initContentHandler=function(){this.contentHandler=new SUI.ContentHandler(this.tableNode,this.options.no_content)};
SUI.Table.prototype._initSearch=function(){if(this.options.columns[this.options.columns.length-1]==='search'){const searchNode=new SUI.Node('div');searchNode.addClass(['mdl-textfield','mdl-js-textfield','mdl-textfield--expandable']);this.headerNodes.get(this.headerNodes.size()-1).insert(searchNode);const labelNode=new SUI.Node('label');labelNode.addClass(['mdl-button','mdl-js-button','mdl-button--icon']);labelNode.setFor('table-search');searchNode.appendChild(labelNode);const iconNode=new SUI.Node('i');
iconNode.addClass('material-icons');iconNode.setHtml('search');labelNode.appendChild(iconNode);const inputBlock=new SUI.Node('div');inputBlock.addClass('mdl-textfield__expandable-holder');searchNode.appendChild(inputBlock);const inputNode=new SUI.Node('input');inputNode.setAttribute('type','text');inputNode.setId('table-search');inputNode.addClass('mdl-textfield__input');inputNode.addEventListener('keypress',(inputNode,event)=>{if(SUI.eq(event.keyCode,13)){this.query=inputNode.getNode().value;this.refresh(1)}return true});
inputBlock.appendChild(inputNode);const subLabelNode=new SUI.Node('label');subLabelNode.addClass('mdl-textfield__label');inputBlock.appendChild(subLabelNode);SUI.mdl(searchNode)}};SUI.Table.prototype._initHeader=function(){this.headerTexts=[];this.headerNodes=new SUI.Query('thead th',this.tableNode);this.headerNodes.each((headerNode,columnIndex)=>{const text=headerNode.getHtml();this.headerTexts.push(text);this._renderHeader(headerNode,columnIndex)})};
SUI.Table.prototype._renderHeader=function(headerNode,columnIndex){const column=this.options.columns[columnIndex];if(SUI.inArray(['search','actions'],column))headerNode.addClass('actions');const columnsWithOrder=this.options.sorted.filter(sort=>{return SUI.contain(sort,column)});if(columnsWithOrder.length===1){headerNode.setData('column',columnsWithOrder[0]);headerNode.addEventListener('click',headerNode=>{const column=headerNode.getData('column');this._toggleSorting(column)});const iconsNode=new SUI.Node('span');
iconsNode.addClass('icons');headerNode.appendChild(iconsNode);const iconUp=new SUI.Node('i');iconUp.addClass(['material-icons','asc']);iconUp.setHtml('arrow_drop_up');iconsNode.appendChild(iconUp);const iconDown=new SUI.Node('i');iconDown.addClass(['material-icons','desc']);iconDown.setHtml('arrow_drop_down');iconsNode.appendChild(iconDown)}const headerTitle=headerNode.getAttribute('title');const headerDesc=headerNode.getAttribute('desc');if(headerTitle||headerDesc){const iconInfo=new SUI.Node('i');
if(headerTitle)iconInfo.setAttribute('desc',headerTitle);if(headerDesc)iconInfo.setAttribute('desc',headerDesc);iconInfo.addClass(['material-icons','info']);iconInfo.setHtml('info_outline');headerNode.appendChild(iconInfo);const tooltip=new SUI.Tooltip(iconInfo,'BOTTOM');tooltip.render()}};
SUI.Table.prototype._initStructure=function(){this.tbody=new SUI.Node('tbody');this.tableNode.appendChild(this.tbody);this.tfoot=new SUI.Node('tfoot');this.tableNode.appendChild(this.tfoot);const footerRow=new SUI.Node('tr');const statisticsNode=new SUI.Node('td');statisticsNode.addClass('pager-statistics');footerRow.appendChild(statisticsNode);const pagerNode=new SUI.Node('td');pagerNode.addClass('pager');pagerNode.setAttribute('colspan',this.headerNodes.size()-1);footerRow.appendChild(pagerNode);
this.tfoot.appendChild(footerRow);this.pager=new SUI.Pager(this.tfoot,['.pager','.pager-statistics'],this.options);this.pager.eventAction=page=>{this.refresh(page)}};SUI.Table.prototype.refresh=function(opt_page=-1){if(opt_page>-1)this.pager.setPage(opt_page);const params=new SUI.Object({'query':this.query,'column':this.options.sort.column,'order':this.options.sort.order,'offset':this.pager.offset,'limit':this.options.row_count});this.eventAction(params)};
SUI.Table.prototype.eventAction=function(params){console.warn('SUI.Table.eventAction()',params)};SUI.Table.prototype._toggleSorting=function(columnWithOrder){let [column,order]=columnWithOrder.split(':',2);order=order||'desc';if(SUI.eq(this.options.sort.column,column)&&SUI.eq(this.options.sort.order,order))order=order==='asc'?'desc':'asc';this._setSorting(column,order)};
SUI.Table.prototype._handleSortingColumn=function(head,i){const column=this.options.columns[i];if(SUI.eq(this.options.sort.column,null)&&SUI.eq(i,0)||SUI.eq(column,this.options.sort.column)){const iconNode=(new SUI.Query(SUI.format('.icons i.{0}',[this.options.sort.order]),head)).getItem();if(!iconNode.isEmpty())iconNode.addClass('active')}};SUI.Table.prototype._updateSorting=function(){this._resetSorting();this.headerNodes.each((head,i)=>{this._handleSortingColumn(head,i)});this.refresh()};
SUI.Table.prototype._setSorting=function(column,opt_order='asc'){this.options.sort.column=column;this.options.sort.order=opt_order;this._updateSorting()};SUI.Table.prototype._resetSorting=function(){const icons=new SUI.Query('thead th .icons i',this.tableNode);icons.each(function(icon){icon.removeClass('active')})};SUI.Table.prototype._getColumn=function(){return this.options.column||this.options.columns[0]};
SUI.Table.prototype._addHeaderRow=function(item,rowIndex){const headerRow=new SUI.Node('tr');headerRow.addEventListener('click',node=>{node.toggleClass('active');const dataRow=headerRow.getNextSibling();dataRow.toggleClass('open')});headerRow.addClass('header');this.tbody.appendChild(headerRow);const headerNameCell=new SUI.Node('td');headerRow.appendChild(headerNameCell);this._renderDataNodeByItem(item,rowIndex,this._getColumn(),headerNameCell,headerRow);headerNameCell.setAttribute('colspan',this.headerNodes.size()-
2);const headerActionCell=new SUI.Node('td');headerRow.appendChild(headerActionCell);this._renderActions(headerActionCell,item)};SUI.Table.prototype._addRow=function(item,rowIndex){const tableRow=new SUI.Node('tr');tableRow.addClass('data');this.tbody.appendChild(tableRow);SUI.each(this.options.columns,(column,columnIndex)=>{const tableDataNode=new SUI.Node('td');tableRow.appendChild(tableDataNode);this._renderDataNode(tableDataNode,item,rowIndex,column,columnIndex,tableRow)})};
SUI.Table.prototype.setActions=function(actions){this.actions=actions};
SUI.Table.prototype._renderDataNodeByItem=function(item,rowIndex,column,parentNode,tableRow){let dataNode=item.get(column,'');const calculation=this.options.calculations[column];if(SUI.isFunction(calculation))dataNode=calculation(item,this.pager.offset+rowIndex,tableRow);if(!SUI.instanceOf(dataNode,SUI.Node)){const node=new SUI.Node('span');node.setHtml(dataNode);dataNode=node}parentNode.appendChild(dataNode);if(dataNode.getAttribute('title')||dataNode.getAttribute('desc')){const tooltip=new SUI.Tooltip(dataNode);
tooltip.render()}};
SUI.Table.prototype._renderDataNode=function(tableDataNode,item,rowIndex,column,columnIndex,tableRow){if(SUI.inArray(['search','actions'],column))this._renderActions(tableDataNode,item);else{const labelNode=new SUI.Node('span');labelNode.addClass('label');labelNode.setHtml(this.headerTexts[columnIndex]);this._renderHeader(labelNode,columnIndex);this._handleSortingColumn(labelNode,columnIndex);tableDataNode.appendChild(labelNode);this._renderDataNodeByItem(item,rowIndex,column,tableDataNode,tableRow)}};
SUI.Table.prototype._renderActions=function(tableDataNode,item){const containerNode=new SUI.Node('div');tableDataNode.addClass('actions');tableDataNode.appendChild(containerNode);if(this.actions.length>3){containerNode.addClass('dropDown');this._renderDropDownNode(containerNode,item)}else this._renderActionNodes(containerNode,item)};SUI.Table.prototype._renderActionNodes=function(containerNode,item){SUI.each(this.actions,action=>{this._createActionButton(containerNode,action,item)})};
SUI.Table.prototype._renderDropDownNode=function(dropDownNode,item){const dropDown=new SUI.Dropdown(dropDownNode);dropDown.setActions(this.actions,item)};
SUI.Table.prototype._createActionButton=function(containerNode,action,item){const [icon,title,disabled,removed]=action.style(item);if(!removed){const buttonNode=new SUI.Node('button');containerNode.appendChild(buttonNode);buttonNode.addClass(['mdl-button','mdl-js-button','mdl-button--icon','mdl-button--primary']);if(disabled)buttonNode.setAttribute('disabled');else buttonNode.addEventListener('click',()=>{action.click(item)});if(title){const tooltip=new SUI.Tooltip(buttonNode);tooltip.render(title)}const iconNode=
new SUI.Node('i');iconNode.addClass('material-icons');iconNode.setHtml(icon);buttonNode.appendChild(iconNode)}};SUI.Table.prototype.setData=function(items){this.collection.reload(items);if(this.collection.size()===0)this.contentHandler.show();else{this.contentHandler.hide();this._draw()}};SUI.Table.prototype.setCount=function(count){this.pager.setCount(count);this.pager.draw()};
SUI.Table.prototype._getItems=function(){let items=this.collection.getItems();if(this.collection.size()>this.options.row_count)items=this.collection.limit(this.pager.offset,this.options.row_count);return items};SUI.Table.prototype._draw=function(){this.tbody.removeChildren();SUI.each(this._getItems(),(item,rowIndex)=>{this._addHeaderRow(item,rowIndex);this._addRow(item,rowIndex)});SUI.mdl(this.tbody)};SUI.Table.prototype.render=function(){if(!this.tableNode.isEmpty())this._updateSorting()};goog.provide('SUI.Waiter');goog.require('SUI');SUI.Waiter=function(){this.timeoutWaiting=0;this.counter=0};SUI.Waiter.prototype.advancedWaiting=function(callback,opt_duration){const duration=opt_duration||3E3;this._advancedDelayHandler(callback,duration,this.timeoutWaiting)};
SUI.Waiter.prototype._advancedDelayHandler=function(callback,duration,counter){this.timeoutWaiting+=1E-4;setTimeout(()=>{const prevCounter=this.timeoutWaiting-1E-4;if(prevCounter.toFixed(4)===counter.toFixed(4)){this.timeoutWaiting=0;callback()}},duration)};SUI.Waiter.prototype.stopAdvancedWaiting=function(){this.timeoutWaiting+=1E-4;this.intervall=setInterval(()=>{this.timeoutWaiting+=1E-4},1E3)};
SUI.Waiter.prototype.startAdvancedWaiting=function(){clearInterval(this.intervall);this.timeoutWaiting-=1E-4};SUI.Waiter.prototype.simpleWaiting=function(callback,opt_duration){const duration=opt_duration||3E3;this._simpleDelayHandler(callback,duration,this.counter)};SUI.Waiter.prototype._simpleDelayHandler=function(callback,duration,counter){this.counter++;setTimeout(()=>{const prevCounter=this.counter-1;if(counter===prevCounter){this.counter=0;callback()}},duration)};goog.provide('SUI.widget.AutoComplete');goog.require('SUI');goog.require('SUI.Node');goog.require('SUI.Widget');goog.require('SUI.widget');SUI.widget.AutoComplete=function(input,label,error,inputBlock){SUI.Widget.call(this,input,label,error,inputBlock);this._init()};goog.inherits(SUI.widget.AutoComplete,SUI.Widget);SUI.widget.AutoComplete.prototype._init=function(){};
/*export default SUI;*/
//# sourceMappingURL=sui.debug.js.map
